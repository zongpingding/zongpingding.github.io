<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>LaTeX Font Guide Note</title>
    <link href="/2024/10/02/font_guide_note/"/>
    <url>/2024/10/02/font_guide_note/</url>
    
    <content type="html"><![CDATA[<h2 id="Preface">Preface</h2><p>Below is the LaTeX font guide note for TeXLive:</p><p><img src="/img/latex_font_guide_note/mindmap.svg" alt="LaTeX Font Guide Note mind map"></p><p>The note and pdf version of this picture can be find at: <a href="https://github.com/zongpingding/All-About-TeX/blob/main/LaTeX_Notes/Font_Config/Font_Guide_Note/Font_Guide_mindmap.pdf">LaTeX Font Guide Note mind map</a></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TrueType Font in pdfTeX - III</title>
    <link href="/2024/09/29/pdftex_ttf_III/"/>
    <url>/2024/09/29/pdftex_ttf_III/</url>
    
    <content type="html"><![CDATA[<p>You can use an tool: <a href="https://www.lcdf.org/type/otftotfm.1.html">otftotfm</a>. And see answer in <a href="https://tex.stackexchange.com/a/52902/294585">How do I use TrueType Fonts with PDFTeX using otftotfm?</a></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TrueType Font in pdfTeX - II</title>
    <link href="/2024/09/29/pdftex_ttf_II/"/>
    <url>/2024/09/29/pdftex_ttf_II/</url>
    
    <content type="html"><![CDATA[<div class="note note-danger">            <p>There is something wrong with current article and <strong>do not read it</strong>. I may fixed later.</p>          </div><h2 id="Preface">Preface</h2><p>we have write a blog about using TrueType Font under pdfTeX in <code>TeX</code> in the <a href="https://www.zpding.tech/2024/09/27/pdftex_ttf/">previous article</a>. Here we will continue to discuss the details of using TrueType Font under pdfTeX. And the configuration under <code>LaTeX</code>.</p><p>This blog will be totally copy from the blog:<a href="http://www.radamir.com/tex/ttf-tex.htm">Using TrueType fonts with TeX and pdfTeX</a>. There will be some more information during the process and some error correction for the original blog.</p><p>At the same time, i refer to the blog: <a href="https://www.monperrus.net/martin/using-truetype-fonts-with-texlive-pdftex-pdflatex">using TrueType Fonts with TexLive pdftex pdflatex</a> as well.</p><blockquote><ul><li><strong>Why i make a copy of this blog</strong> ? Just in case of the original blog is not available in the future. The author of the original blog says that: “This note describes how to add TrueType fonts support to TeX and LaTeX. This information is provided for educational purpose only. I do not know if procedures described here violate any copywrite/license agreement. Also, names ectimes and <code>winfonts</code> are used just for example. I do not know how they should be named correctly.”</li><li>All the following commands are running in <code>Powershell</code> in Windows 11. TeXLive 2024 is installed in the system.</li><li>Assume that <code>PC</code> is the username of the computer.</li></ul></blockquote><h2 id="Before-we-begin-TeX">Before we begin (TeX)</h2><p>Suppose, we want to typeset in Times New Roman instead of Computer Modern Roman (cmr). Times New Roman in Windows 9x/NT 4 is a Unicode font which has almost all symbols from Computer Modern. Certainly, they are in different places. To use these fonts in TeX (LaTeX) and PDF documents, it is necessary to create two more fonts: raw tex font, containing necessary characters but without kerning information, and virtual tex font with kerns and ligatures. For simplicity, we’ll use the rule that if TrueType font file has a name  <code>foo.ttf</code>, than virtual tex font in <code>T1</code> encoding will be named <code>ecfoo</code> and raw tex font will be named recfoo. Times New Roman family of fonts is presented by the files <code>times.ttf</code>, <code>timesi.ttf</code>, <code>timesbd.ttf</code> and <code>timesbi.ttf</code>, found in <code>c:\windows\fonts</code> directory in Windows 9x or <code>c:\winnt\fonts</code> in Windows NT. The family has Regular, Italic, Bold and BoldItalic members. We’ll also create oblique (slanted) versions of Regular and Bold members, which will be marked by letter “o” at the end of the name. The above is summarized in a table:</p><table><thead><tr><th></th><th>TrueType File Name (<code>.ttf</code>)</th><th>TeX Name (virtual font; <code>.vf</code>, <code>.tfm</code>)</th><th>Raw TeX Name (<code>.tfm</code>, <code>.afm</code>, <code>.pk</code>)</th></tr></thead><tbody><tr><td>Regular</td><td>times</td><td>ectimes</td><td>rectimes</td></tr><tr><td>Italic</td><td>timesi</td><td>ectimesi</td><td>rectimesi</td></tr><tr><td>Bold</td><td>timesbd</td><td>ectimesbd</td><td>rectimesbd</td></tr><tr><td>BoldItalic</td><td>timesbi</td><td>ectimesbi</td><td>rectimesbi</td></tr><tr><td>Oblique</td><td>-</td><td>ectimeso</td><td>rectimeso</td></tr><tr><td>BoldOblique</td><td>-</td><td>ectimesbdo</td><td>rectimesbdo</td></tr></tbody></table><p>Also we’ll need an encoding vector—a file which determines characters positions in a new fonts. We’ll use a file <a href="http://www.radamir.com/tex/T1-WGL4.enc">T1-WGL4.enc</a> which corresponds to T1 encoding.</p><blockquote><p>To be able to typeset with Cyrillic characters, you should use <code>T2A-mod0.enc</code> file or similar, found in T2 package.</p></blockquote><p>Create a temporary working directory and copy font files ( <code>times.ttf</code>, <code>timesbd.ttf</code>, <code>timesbi.ttf</code>, <code>timesi.ttf</code> from <code>c:\windows\fonts</code> ) and encoding file (<code>T1-WGL4.enc</code>) there. Now we are ready for actual work.</p><h2 id="Creating-TeX-Font-Metrics-tfm">Creating TeX Font Metrics (tfm)</h2><p>Change to the working directory and run the following commands:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttf2tfm times.ttf -q -T T1-WGL4.enc -v ectimes.vpl rectimes.tfm &gt;&gt; ttfonts.map<br>ttf2tfm timesi.ttf -q -T T1-WGL4.enc -v ectimesi.vpl rectimesi.tfm &gt;&gt; ttfonts.map<br>ttf2tfm timesbd.ttf -q -T T1-WGL4.enc -v ectimesbd.vpl rectimesbd.tfm &gt;&gt; ttfonts.map<br>ttf2tfm timesbi.ttf -q -T T1-WGL4.enc -v ectimesbi.vpl rectimesbi.tfm &gt;&gt; ttfonts.map<br></code></pre></td></tr></table></figure><p>When running these commands, you may get some warning messages:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttf2tfm: WARNING: Cannot find character `compwordmark&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `perthousandzero&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `dotlessj&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `ff&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `ffi&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `ffl&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Cannot find character `visualspace&#x27;<br>         specified in input encoding.<br>ttf2tfm: WARNING: Character `hyphen&#x27; encoded twice in input encoding<br>         (positions 2d and 7f; the latter is ignored).<br>ttf2tfm: WARNING: Cannot map character `compwordmark&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `perthousandzero&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `dotlessj&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `ff&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `ffi&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `ffl&#x27;<br>         specified in output encoding.<br>ttf2tfm: WARNING: Cannot map character `visualspace&#x27;<br>         specified in output encoding.<br></code></pre></td></tr></table></figure><p>This will create a tfm files of raw fonts and vpl files of virtual fonts. To generate slanted versions of regular and bold font, command should be extended like this:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttf2tfm times.ttf -q -T T1-WGL4.enc -s .167 -v ectimeso.vpl rectimeso.tfm &gt;&gt; ttfonts.map<br>ttf2tfm timesbd.ttf -q -T T1-WGL4.enc -s .167 -v ectimesbdo.vpl rectimesbdo.tfm &gt;&gt; ttfonts.map<br></code></pre></td></tr></table></figure><p>Then your project directory should contain the following files:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">.<br>├── ectimes.vpl<br>├── ectimesbd.vpl<br>├── ectimesbdo.vpl<br>├── ectimesbi.vpl<br>├── ectimesi.vpl<br>├── ectimeso.vpl<br>├── rectimes.tfm<br>├── rectimesbd.tfm<br>├── rectimesbdo.tfm<br>├── rectimesbi.tfm<br>├── rectimesi.tfm<br>├── rectimeso.tfm<br>├── T1-WGL4.enc<br>├── times.ttf<br>├── timesbd.ttf<br>├── timesbi.ttf<br>├── timesi.ttf<br>└── ttfonts.map<br></code></pre></td></tr></table></figure><h2 id="Creating-Virtual-Fonts-vf">Creating Virtual Fonts (vf)</h2><p>Run commands:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">vptovf ectimes.vpl ectimes.vf ectimes.tfm<br>vptovf ectimesi.vpl ectimesi.vf ectimesi.tfm<br>vptovf ectimesbd.vpl ectimesbd.vf ectimesbd.tfm<br>vptovf ectimesbi.vpl ectimesbi.vf ectimesbi.tfm<br>vptovf ectimeso.vpl ectimeso.vf ectimeso.tfm<br>vptovf ectimesbdo.vpl ectimesbdo.vf ectimesbdo.tfm<br></code></pre></td></tr></table></figure><p>You will see such log when generating the virtual fonts:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">I had to round some heights by 12.0000000 units.<br>I had to round some depths by 1.0000000 units.<br>I had to round some italic corrections by 0.5000000 units.<br></code></pre></td></tr></table></figure><p>This creates vf and tfm files for virtual fonts. After that you can delete vpl files, just run command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">rm -Force *.vpl<br></code></pre></td></tr></table></figure><p>to delete them all. Now your project directory should contain the following files:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">.<br>├── ectimes.tfm<br>├── ectimes.vf<br>├── ectimesbd.tfm<br>├── ectimesbd.vf<br>├── ectimesbdo.tfm<br>├── ectimesbdo.vf<br>├── ectimesbi.tfm<br>├── ectimesbi.vf<br>├── ectimesi.tfm<br>├── ectimesi.vf<br>├── ectimeso.tfm<br>├── ectimeso.vf<br>├── rectimes.tfm<br>├── rectimesbd.tfm<br>├── rectimesbdo.tfm<br>├── rectimesbi.tfm<br>├── rectimesi.tfm<br>├── rectimeso.tfm<br>├── T1-WGL4.enc<br>├── times.ttf<br>├── timesbd.ttf<br>├── timesbi.ttf<br>├── timesi.ttf<br>└── ttfonts.map<br></code></pre></td></tr></table></figure><h2 id="Installation-of-fonts-for-TeX-and-LaTeX">Installation of fonts for TeX and LaTeX</h2><p>Now vf and tfm files should be moved to the place where TeXLive can find them. Move all vf files to <code>&lt;localtexmf&gt;\fonts\vf\ms\times\</code>, and all tfm files to <code>&lt;localtexmf&gt;\fonts\tfm\ms\times\</code>. What is the path of <code>&lt;localtexmf&gt;</code> ? In Linux this path is usually at:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">~/texmf/tex/latex/<br></code></pre></td></tr></table></figure><p>For Windows, the <code>&lt;localtexmf&gt;</code> directory is usually at:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\PC\texmf\tex\latex\<br></code></pre></td></tr></table></figure><p>To move these files, run the following commands:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">mv *.vf C:\Users\PC\texmf\fonts\vf\ms\times<br>mv *.tfm C:\Users\PC\texmf\fonts\tfm\ms\times<br></code></pre></td></tr></table></figure><blockquote><p>The directories <code>ms\times</code> are not mandatory, you can leave the files even in parent dirs, but this way it is easier to maintain them and it corresponds to the general rule of placement: <code>&lt;supplier&gt;\&lt;family&gt;</code>.</p></blockquote><p>Now your project directory should contain the following files:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">.<br>├── T1-WGL4.enc<br>├── times.ttf<br>├── timesbd.ttf<br>├── timesbi.ttf<br>├── timesi.ttf<br>└── ttfonts.map<br></code></pre></td></tr></table></figure><hr><p>Open the file <code>ttfonts.map</code> in a temporary working directory with your favorite text editor (<code>notepad</code>, <code>vscode</code>, <code>vim</code> etc) and copy its contents to clipboard. <code>ttfonts.map</code> contains:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">rectimes   times.ttf Encoding=T1-WGL4.enc<br>rectimesi   timesi.ttf Encoding=T1-WGL4.enc<br>rectimesbd   timesbd.ttf Encoding=T1-WGL4.enc<br>rectimesbi   timesbi.ttf Encoding=T1-WGL4.enc<br>rectimeso   times.ttf Slant=.167 Encoding=T1-WGL4.enc<br>rectimesbdo   timesbd.ttf Slant=.167 Encoding=T1-WGL4.enc<br></code></pre></td></tr></table></figure><p>Now open a file <code>C:\texlive\2024\tlpkg\dviout\map\ttfonts.map</code> with the same editor and paste the lines from clipboard and save it. The added part looks like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">wnsri8r&quot;Times New Roman&quot;italic<br>wcpbs8r&quot;Copperplate Gothic Bold&quot;<br>wcpls8r&quot;Copperplate Gothic Light&quot;<br><span class="hljs-meta prompt_">% </span><span class="language-bash">&lt;before part&gt;</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">%%%%%%%%%%%%%%  My Own TTF and OTF Config %%%%%%%%%%%%%%%</span><br>rectimes   times.ttf Encoding=T1-WGL4.enc<br>rectimesi   timesi.ttf Encoding=T1-WGL4.enc<br>rectimesbd   timesbd.ttf Encoding=T1-WGL4.enc<br>rectimesbi   timesbi.ttf Encoding=T1-WGL4.enc<br>rectimeso   times.ttf Slant=.167 Encoding=T1-WGL4.enc<br>rectimesbdo   timesbd.ttf Slant=.167 Encoding=T1-WGL4.enc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">% </span><span class="language-bash">&lt;after part&gt;</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">inputpttfonts.map</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">inputmorisawa.map</span><br></code></pre></td></tr></table></figure><blockquote><p>You may need to run the editor as <strong>administrator</strong> to be able to save the file.</p></blockquote><hr><p>This is sufficient for generating DVI file, but to view or print it, there should be a raster <code>pk</code> font. TeXLive will attempt to generate it automatically with new utility: <code>ttf2pk</code>. For successful generation ttf2pk should find both TrueType font and encoding file.</p><ul><li>It happens that ttf2pk can find ttf files, if they are installed and are in a system fonts directory,</li><li>and it looks for encoding files in a directory <code>C:\texlive\2024\texmf-dist\fonts\enc\ttf2pk\base</code> (among others).Therefore if there is no such encoding file, you have to copy <code>T1-WGL4.enc</code> to <code>C:\texlive\2024\texmf-dist\fonts\enc\ttf2pk\base</code>.</li></ul><blockquote><p>In TeXLive 2024, there may be already a <code>T1-WGL4.enc</code> file in the directory <code>C:\texlive\2024\texmf-dist\fonts\enc\ttf2pk\base</code>, so you don’t need to copy it again.</p></blockquote><p>Now we have to update databases, open the <code>Powershell</code> as <strong>administrator</strong> and run the following commands:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">texhash <br></code></pre></td></tr></table></figure><h2 id="Testing-the-installation-in-TeX-don’t-skip-this-step">Testing the installation in TeX (don’t skip this step)</h2><p>Change current directory from temporary working to some other where there are no files related to fonts creation. To have a look at our brand new fonts, run a command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell">❯ tex testfont<br>This is TeX, Version 3.141592653 (TeX Live 2024) (preloaded format=tex)<br>(c:/texlive/2024/texmf-dist/tex/plain/knuth-lib/testfont.tex<br><br>Name of the font to test = ectimes<br>Now type a test command (\help for help):)<br>*\table\eject\init<br>[1]<br>Name of the font to test = ectimeso<br>Now type a test command (\help for help):<br>*\table\eject\init<br>[2]<br>Name of the font to test = ectimesbd<br>Now type a test command (\help for help):<br>*\table\eject\init<br>[3]<br>Name of the font to test = ectimesi<br>Now type a test command (\help for help):<br>*\table\eject\init<br>[4]<br>Name of the font to test = ectimesbd<br>Now type a test command (\help for help):<br>*\table\eject\init<br>[5]<br>Name of the font to test = ectimesbdo<br>Now type a test command (\help for help):<br>*\bye<br>[6]<br>Output written on testfont.dvi (6 pages, 53556 bytes).<br>Transcript written on testfont.log.<br></code></pre></td></tr></table></figure><p>It will ask about a font to test. Enter “<code>ectimes</code>”. It will ask about a command. Enter “<code>\table\eject\init</code>”. This time enter “<code>ectimeso</code>”, then “<code>ectimesbd</code>” and so on. After all fonts are tested, enter a command “<code>\bye</code>”. This will create a file <code>testfont.dvi</code> in current directory.</p><blockquote><p>If you have problems at this stage, it is either wrong font names or tfm, vf files placement.</p></blockquote><p>But <strong>do not hurry</strong> to open <code>testfont.dvi</code> with YAP. If something goes wrong, it is quite hard to trace the problem in YAP. Better try converting dvi to PostScript:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dvips testfont.dvi<br></code></pre></td></tr></table></figure><blockquote><p><code>YAP</code> is a viewer for DVI files in the past. Nowadays you should use <code>dviout.exe</code> which has already contained in TeXLive.</p></blockquote><p>Here you will have plenty of messages about what is happening. In particular, the generation of pk for TrueType will look like this:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">❯ ttf2pk.exe -q rectimes 600<br>ttf2pk: WARNING: Cannot map character `compwordmark&#x27;.<br>ttf2pk: WARNING: Cannot map character `perthousandzero&#x27;.<br>ttf2pk: WARNING: Cannot map character `dotlessj&#x27;.<br>ttf2pk: WARNING: Cannot map character `ff&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffi&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffl&#x27;.<br>ttf2pk: WARNING: Cannot map character `visualspace&#x27;.<br>ttf2pk: WARNING: Cannot map character `Germandbls&#x27;.<br></code></pre></td></tr></table></figure><p>If the previous file location or file name is wrong, that causes <code>mktexpk</code> can not find the now font <code>rectimes</code>, you will see the following log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell">❯ dvips testfont.dvi<br>This is dvips(k) 2024.1 (TeX Live 2024)  Copyright 2024 Radical Eye Software (www.radicaleye.com)<br>&#x27; TeX output 2024.09.29:2035&#x27; -&gt; testfont.ps<br><br>kpathsea: Running mktexpk --mfmode ljfour --bdpi 600 --mag 1+0/600 --dpi 600 rectimes<br><br>The command name is C:\texlive\2024\bin\windows\mktexpk<br><br>kpathsea: Running mktexmf rectimes.mf<br><br>The command name is C:\texlive\2024\bin\windows\mktexmf<br>name = rectimes, rootname = rectimes, pointsize =<br>mktexmf: empty or non-existent rootfile!<br>Cannot find rectimes.mf .<br>I try ps2pk --&gt; gsftopk --&gt; ttf2pk --&gt; hbf2gf.<br>ps2pk cannot be used.<br>I try gsftopk.<br>gsftopk.exe rectimes 600<br>Cannot find font rectimes in map file(s).<br>gsftopk cannot be used.<br>Next I try ttf2pk.<br>ttf2pk.exe -q rectimes 600<br>ttf2pk failed.<br>Finally I try hbf2gf.<br>hbf2gf.exe -q -p rectimes 600<br>All trials failed.<br>kpathsea: Appending font creation commands to missfont.log.<br>C:\texlive\2024\bin\windows\dvips.exe: PK font rectimes not found; using cmr10<br>&lt;c:/Users/PC/.texlive2024/texmf-var/fonts/pk/ljfour/public/cm/cmr10.600pk&gt;<br>C:\texlive\2024\bin\windows\dvips.exe: ! [scanpage] invalid char 128 from font rectimes<br></code></pre></td></tr></table></figure><h2 id="Using-new-fonts-in-TeX">Using new fonts in TeX</h2><p>create a simple tex source file <code>test.tex</code>:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\font</span><span class="hljs-keyword">\myfont</span>=ectimes<br><span class="hljs-keyword">\font</span><span class="hljs-keyword">\mybigfont</span>=ectimes at 36pt<br><span class="hljs-keyword">\myfont</span> Hello, I am being typeset in Times New Roman<br><br><span class="hljs-keyword">\mybigfont</span> Me too...<br><span class="hljs-keyword">\bye</span><br></code></pre></td></tr></table></figure><p>Compile it with <code>pdftex</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pdftex test.tex<br></code></pre></td></tr></table></figure><p>The the log should be like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024) (preloaded format=pdftex)<br> restricted \write18 enabled.<br>entering extended mode<br>(./test.tex [1&#123;c:/texlive/2024/texmf-var/fonts/map/pdftex/updmap/pdftex.map&#125;] )<br><br>kpathsea: Running mktexpk --mfmode / --bdpi 600 --mag 3+360/600 --dpi 2160 rectimes<br><br>The command name is C:\texlive\2024\bin\windows\mktexpk<br><br>kpathsea: Running mktexmf rectimes.mf<br><br>The command name is C:\texlive\2024\bin\windows\mktexmf<br>name = rectimes, rootname = rectimes, pointsize =<br>mktexmf: empty or non-existent rootfile!<br>Cannot find rectimes.mf .<br>I try ps2pk --&gt; gsftopk --&gt; ttf2pk --&gt; hbf2gf.<br>ps2pk cannot be used.<br>I try gsftopk.<br>gsftopk.exe rectimes 2160<br>Cannot find font rectimes in map file(s).<br>gsftopk cannot be used.<br>Next I try ttf2pk.<br>ttf2pk.exe -q rectimes 2160<br>ttf2pk: WARNING: Cannot map character `compwordmark&#x27;.<br>ttf2pk: WARNING: Cannot map character `perthousandzero&#x27;.<br>ttf2pk: WARNING: Cannot map character `dotlessj&#x27;.<br>ttf2pk: WARNING: Cannot map character `ff&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffi&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffl&#x27;.<br>ttf2pk: WARNING: Cannot map character `visualspace&#x27;.<br>ttf2pk: WARNING: Cannot map character `Germandbls&#x27;.<br>mktexupd failed<br> &lt;c:/Users/PC/.texlive2024/texmf-var/fonts/pk/modeless/ms/times/rectimes.2160pk<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash"></span><br><span class="language-bash">kpathsea: Running mktexpk --mfmode / --bdpi 600 --mag 1+0/600 --dpi 600 rectimes</span><br><br>The command name is C:\texlive\2024\bin\windows\mktexpk<br><br>kpathsea: Running mktexmf rectimes.mf<br><br>The command name is C:\texlive\2024\bin\windows\mktexmf<br>name = rectimes, rootname = rectimes, pointsize =<br>mktexmf: empty or non-existent rootfile!<br>Cannot find rectimes.mf .<br>I try ps2pk --&gt; gsftopk --&gt; ttf2pk --&gt; hbf2gf.<br>ps2pk cannot be used.<br>I try gsftopk.<br>gsftopk.exe rectimes 600<br>Cannot find font rectimes in map file(s).<br>gsftopk cannot be used.<br>Next I try ttf2pk.<br>ttf2pk.exe -q rectimes 600<br>ttf2pk: WARNING: Cannot map character `compwordmark&#x27;.<br>ttf2pk: WARNING: Cannot map character `perthousandzero&#x27;.<br>ttf2pk: WARNING: Cannot map character `dotlessj&#x27;.<br>ttf2pk: WARNING: Cannot map character `ff&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffi&#x27;.<br>ttf2pk: WARNING: Cannot map character `ffl&#x27;.<br>ttf2pk: WARNING: Cannot map character `visualspace&#x27;.<br>ttf2pk: WARNING: Cannot map character `Germandbls&#x27;.<br>mktexupd failed<br> &lt;c:/Users/PC/.texlive2024/texmf-var/fonts/pk/modeless/ms/times/rectimes.600pk<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&lt;c:/texlive/2024/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb&gt;</span><br>Output written on test.pdf (1 page, 17004 bytes).<br>Transcript written on test.log.<br></code></pre></td></tr></table></figure><p>The second time you run it, you will see the following log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024) (preloaded format=pdftex)<br> restricted \write18 enabled.<br>entering extended mode<br>(./test.tex [1&#123;c:/texlive/2024/texmf-var/fonts/map/pdftex/updmap/pdftex.map&#125;] )<br> &lt;c:/Users/PC/.texlive2024/texmf-var/fonts/pk/modeless/ms/times/rectimes.2160pk<br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">&lt;c:/Users/PC/.texlive2024/texmf-var/fonts/pk/modeless/ms/times/rectimes.600pk</span><br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&lt;c:/texlive/2024/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb&gt;</span><br>Output written on test.pdf (1 page, 17004 bytes).<br>Transcript written on test.log.<br></code></pre></td></tr></table></figure><p>and you will get the pdf <code>test.pdf</code>. But the pdf looks a little bit weird, see below:<br><img src="/img/pdftex_ttf_II/pdftex_ttf_II_bitmap_font.png" alt="bitmap font in pdf"></p><h2 id="Using-new-fonts-in-LaTeX">Using new fonts in LaTeX</h2><p>LaTeX requires some additional efforts. Create a font definition file <code>t1tnr.fd</code> in <code>&lt;localtexmf&gt;\tex\latex\winfonts</code> directory with the following contents:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ProvidesFile</span>&#123;t1tnr.fd&#125;[Put your description of font here]<br><br><span class="hljs-keyword">\DeclareFontFamily</span>&#123;T1&#125;&#123;tnr&#125;&#123;&#125;<br><br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;b&#125;&#123;n&#125;&#123;&lt;-&gt;ectimesbd&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;b&#125;&#123;sl&#125;&#123;&lt;-&gt; ectimesbdo&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;b&#125;&#123;it&#125;&#123;&lt;-&gt; ectimesbi&#125;&#123;&#125;<br><br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;m&#125;&#123;n&#125;&#123;&lt;-&gt; ectimes&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;m&#125;&#123;sl&#125;&#123;&lt;-&gt; ectimeso&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;m&#125;&#123;it&#125;&#123;&lt;-&gt; ectimesi&#125;&#123;&#125;<br><br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;bx&#125;&#123;n&#125;&#123;&lt;-&gt;ssub * tnr/b/n&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;bx&#125;&#123;sl&#125;&#123;&lt;-&gt;ssub * tnr/b/sl&#125;&#123;&#125;<br><span class="hljs-keyword">\DeclareFontShape</span>&#123;T1&#125;&#123;tnr&#125;&#123;bx&#125;&#123;it&#125;&#123;&lt;-&gt;ssub * tnr/b/it&#125;&#123;&#125;<br><br><span class="hljs-keyword">\endinput</span><br></code></pre></td></tr></table></figure><p>Now you can use new fonts in LaTeX like the following:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\usefont</span>&#123;T1&#125;&#123;tnr&#125;&#123;m&#125;&#123;sl&#125; <br><br>Hello, I am being typeset in Times New Roman Slanted <br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>Finally, if you want to use Times New Roman as you default roman font, put two <code>\renewcommand</code> command in preamble:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><br><span class="hljs-keyword">\renewcommand</span>&#123;<span class="hljs-keyword">\encodingdefault</span>&#125;&#123;T1&#125;<br><span class="hljs-keyword">\renewcommand</span>&#123;<span class="hljs-keyword">\rmdefault</span>&#125;&#123;tnr&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br>Hello, I am being typeset in <span class="hljs-keyword">\textsl</span>&#123;Times New Roman Slanted&#125; <br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>Now you can try use pdftex and pdflatex to create PDF documents but new fonts will be embeded as bitmaps which makes the whole pdf-story half useless. Let’s see how to embed TrueType fonts in PDF documents in native format.</p><h2 id="Before-we-begin-pdfTeX">Before we begin (pdfTeX)</h2><p>First you shoulld check that your pdfTeX is up and running. A command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pdftex story<br></code></pre></td></tr></table></figure><p>will give the following screen messages:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\texmf&gt;pdftex story<br>This is pdfTeX, Version 3.14159-12r (MiKTeX 1.11c)<br>(pdftex.cfg) (story.tex [1&lt;cm.map&gt;])<br>*<br></code></pre></td></tr></table></figure><p>Enter a command \bye and you should get</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">*\bye<br>&lt;cmtext.enc&gt;&lt;cmr10.pfb&gt;&lt;cmsl10.pfb&gt;&lt;cmbx10.pfb&gt;<br>Output written on story.pdf (1 page, 31672 bytes).<br>Transcript written on story.log.<br></code></pre></td></tr></table></figure><p>There are two important things in these lines. First is (<code>pdftex.cfg</code>) and &lt;<code>cm.map</code>&gt;, which means that pdftex has found its configuration file and loaded the Computer Modern fonts map. Second is &lt;<code>cmtext.enc</code>&gt;&lt;<code>cmr10.pfb</code>&gt;…, which means that Type 1 PostScript fonts CMR10, CMSL10 and CMBX10 were included in document along with encoding file.</p><h2 id="Creating-Adobe-Font-Metrics-afm">Creating Adobe Font Metrics (afm)</h2><p>To create afm files, go back to temporary working directory and run the following commands:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex">ttf2afm -e T1-WGL4.enc -o rectimes.afm times.ttf<br>ttf2afm -e T1-WGL4.enc -o rectimesi.afm timesi.ttf<br>ttf2afm -e T1-WGL4.enc -o rectimesbd.afm timesbd.ttf<br>ttf2afm -e T1-WGL4.enc -o rectimesbi.afm timesbi.ttf<br></code></pre></td></tr></table></figure><p>The program will complain it can not find few characters but will create desired afm files.</p><h2 id="Gathering-map-file">Gathering map file</h2><p>Now we have to create a map file whiich will map raw tex font names to actual TrueType names. Though this can be done by copying necessary strings from afm files, it also can be accomplished by afm2tfm program. As the name implies, it creates tfm files whcih we already have. But a side effect of this proram is outputting a string which is necessary for map file. Run the following commands:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex">afm2tfm rectimes.afm -T T1-WGL4.enc rectimes.tfm &gt;&gt;winfonts.map<br>afm2tfm rectimesi.afm -T T1-WGL4.enc rectimesi.tfm &gt;&gt;winfonts.map<br>afm2tfm rectimesbd.afm -T T1-WGL4.enc rectimesbd.tfm &gt;&gt;winfonts.map<br>afm2tfm rectimesbi.afm -T T1-WGL4.enc rectimesbi.tfm &gt;&gt;winfonts.map<br>afm2tfm rectimes.afm -T T1-WGL4.enc -s .167 rectimeso.tfm &gt;&gt;winfonts.map<br>afm2tfm rectimesbd.afm -T T1-WGL4.enc -s .167 rectimesbdo.tfm &gt;&gt;winfonts.map<br></code></pre></td></tr></table></figure><p>Open winfonts.map file for editing and add near the end of each line a name of the corresponding ttf file :</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex">rectimes TimesNewRomanPSMT &quot; T1Encoding ReEncodeFont &quot; &lt;times.ttf T1-WGL4.enc<br>rectimesi TimesNewRomanPS-ItalicMT &quot; T1Encoding ReEncodeFont &quot; &lt;timesi.ttf T1-WGL4.enc<br>rectimesbd TimesNewRomanPS-BoldMT &quot; T1Encoding ReEncodeFont &quot; &lt;timesbd.ttf T1-WGL4.enc<br>rectimesbi TimesNewRomanPS-BoldItalicMT &quot; T1Encoding ReEncodeFont &quot; &lt;timesbi.ttf T1-WGL4.enc<br>rectimeso TimesNewRomanPSMT &quot; .167 SlantFont T1Encoding ReEncodeFont &quot; &lt;times.ttf T1-WGL4.enc<br>rectimesbdo TimesNewRomanPS-BoldMT &quot; .167 SlantFont T1Encoding ReEncodeFont &quot; &lt;timesbd.ttf T1-WGL4.enc<br></code></pre></td></tr></table></figure><h2 id="Installation-of-fonts-for-pdfTeX-and-pdfLaTeX">Installation of fonts for pdfTeX and pdfLaTeX</h2><p>Create a directory in localtexmf tree <code>&lt;localtexmf&gt;\fonts\afm\ms\times</code> and move all afm files there.</p><p>Create a directory in localtexmf tree <code>&lt;localtexmf&gt;\pdftex\base</code> and move <code>winfonts.map</code> file there.</p><p>Edit the file <code>c:\texmf\miktex\config\miktex.ini</code>: find the line which starts with “<code>TrueType Font Dirs=</code>” and add windows fonts directory:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">TrueType Font Dirs=.;<span class="hljs-comment">%R\fonts\truetype//;c:\windows\fonts</span><br></code></pre></td></tr></table></figure><p>Open <code>c:\texmf\pdftex\base\pdftex.cfg</code> file for editing and add the following line:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">map +winfonts.map<br></code></pre></td></tr></table></figure><p>As you can see, there are a lot of other map files available in this dir, but most of them require that you additionaly purchase font files.</p><p>Now we have to update databases:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Start=&gt;Programs=&gt;MiKTeX=&gt;Refresh databases<br></code></pre></td></tr></table></figure><h2 id="Testing-the-installation-in-pdfTeX">Testing the installation in pdfTeX</h2><p>Change current directory from temporary working to some other where there are no files related to fonts creation and run a command</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">pdftex testfont<br></code></pre></td></tr></table></figure><p>It will ask about a font to test. Enter “<code>ectimes</code>”. It will ask about a command. Enter “<code>\table\eject\init</code>”. This time enter “<code>ectimeso</code>”, then “<code>ectimesbd</code>” and so on. After all fonts are tested, enter a command “<code>\bye</code>”. Screen output will be like this:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">pdftex testfont<br>This is pdfTeX, Version 3.14159-12r (MiKTeX 1.11c)<br>(pdftex.cfg) (testfont.tex<br>Name of the font to test = ectimes<br>Now type a test command (\help for help):)<br>*\table\eject\init<br>[1&lt;cm.map&gt;&lt;winfonts.map&gt;]<br>Name of the font to test = ectimesbdo<br>Now type a test command (\help for help):<br>*\table\bye<br>[2]&lt;T1-WGL4.enc&gt;&lt;timesbd.ttf&gt;&lt;cmttext.enc&gt;&lt;cmtt10.pfb&gt;&lt;times.ttf&gt;&lt;cmitext.enc&gt;&lt;<br>cmti10.pfb&gt;&lt;T1-WGL4.enc&gt;&lt;cmr10.pfb&gt;&lt;cmr7.pfb&gt;<br>Output written on testfont.pdf (2 pages, 195888 bytes).<br>Transcript written on testfont.log. <br></code></pre></td></tr></table></figure><p>As you can see, this time pdftex has found <code>winfonts.map</code> and embeded encodingg file <code>T1-WGL4.enc</code> and TrueType fonts <code>times.ttf</code> and <code>timesbd.ttf</code> into resulting PDF document. Open <code>testfont.pdf</code> with GSview and you will see:</p><p>Adobe Acrobat users, please read a Bug Note at the end of the document.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TrueType Font in pdfTeX - I</title>
    <link href="/2024/09/27/pdftex_ttf/"/>
    <url>/2024/09/27/pdftex_ttf/</url>
    
    <content type="html"><![CDATA[<h2 id="ttf2afm">ttf2afm</h2><h3 id="准备">准备</h3><ul><li>需要转化的字体, 这里以 Palatino 为例, 字体的文件名为: <code>pala.ttf</code></li><li>encoding 文件，把 charcode 对应到 glyph. 这个 encoding 文件的名称为: <code>ec-uni.enc</code>.</li></ul><h3 id="enc-文件">.enc 文件</h3><p>因为 ttf 字体的 glyph name 不是必须的，或者是全部错误，亦或者是部分错误。于是最可靠的一个映射是: <code>Unicode --&gt; glyph index</code>.  每一个可用的 TrueType 字体一定会提供了从 unicode 到 glyph index 的正确映射.</p><p>有了 glyph index,  我们能干啥呢? 由于在 TrueTypefont 中，并不是像 T1 encoding 那样使用一个 glyph name 来对应一个 glyph。在 TrueType 中使用的是 <code>indices</code> 来和 glyph 进行一一对应,  TrueType 通过一个 叫 <code>cmap</code> 的机制来解决这个编码问题(一一对应问题). 这个 cmap 中有很多张不同的表用于解决不同 编码下的映射问题，每一张表包含了  <code>glyph index --&gt; glyph</code> 这样的一一映射.</p><p><code>.enc</code> 文件里面有些什么东西呢？这些东西又有什么用呢? 比例这里会用到的 <code>ec-uni.enc</code> 文件，其中有这样的内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">/encqecuni[<br>/uni0060<br>/uni00B4<br>/uni02C6<br>/uni02DC<br>/uni00A8<br>/uni02DD<br>...<br>/uni00FD<br>/uni00FE<br>/uni00DF<br>] def<br></code></pre></td></tr></table></figure><p>要让 pdftex 正常使用这个字体，就必须要让 pdftex 能够找到这个字体里面的 glyphs。从 pdftex 1.21a 开始，pdftex 能够完成这样的事情（进队 TrueType 管用）:</p><ul><li>可以读取一个 font 的 <code>unicode -&gt; glyph index</code> 表, 寻找这个 unicode 码对应的 glyph index.</li><li>当读取到对应的 <code>glyph index</code> 后, 就能够找到这个 index 对应的 glyph 了.</li></ul><blockquote><p>这个 .enc 里面的unicode 编码到底是怎么映射的  ? 比如这里的前面几个Unicode码对应的字符是:</p><ul><li>/uni0060：`  (反引号)</li><li>/uni00B4：´ (尖音符)</li><li>/uni02C6：ˆ (抑扬符)</li><li>/uni02DC：˜ (波浪号)</li><li>/uni00A8：¨ (分音符)</li><li>/uni02DD：˝ (双分音符)</li></ul></blockquote><p><code>ttf2afm</code> 这个寻找 glyph index 的过程和上面的 pdftex 寻找的过程相同.</p><h3 id="afm-文件">.afm 文件</h3><p>这个 <code>.afm</code> 文件到底有什么作用呢? 它的作用就是把一个字体里面的所有 glyph names 转化为 unicode 形式的编码: <code>uniXXXX</code>.</p><p>一个关于 <code>.afm</code> 文件可以编码多少个 characters 的问题:</p><ul><li>每一个 Type 1 Font  + 它对应的 AFM 文件可以包含无数个 characters ,</li><li>对于每一个字体，TFM 文件只可以编码最多 256 个 characters.</li></ul><p>下面我们就使用 ttf2afm 工具生成这个字体对应的 <code>.afm</code> 文件 (由于前面提及对于 TrueType font，从 <code>glyph name --&gt; glyph index</code> 这个mapping 是不靠谱的. 所以这里我们采用 <code>unicode --&gt; glyph index</code> 这个靠谱的映射. 下面的 <code>-u</code> 参数就表示 unicode):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttf2afm -u -e ec-uni.enc -o pala-t1.afm pala.ttf<br></code></pre></td></tr></table></figure><blockquote><p>This simple approach does not <strong>handle ligatures</strong>; see below.) This can be done easily enough by a script that reads the AGL (Adobe Glyph List)</p></blockquote><p>运行这个命令对应的 log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">Warning: ttf2afm (file pala.ttf): `unicode uni02DD&#x27; is not mapped to any glyph<br><br>Warning: ttf2afm (file pala.ttf): `unicode uni02DA&#x27; is not mapped to any glyph<br><br>Warning: ttf2afm (file pala.ttf): `unicode uni02C7&#x27; is not mapped to any glyph<br><br>...<br><br>Warning: ttf2afm (file pala.ttf): glyph 8 has multiple encodings (the first one being used): uni0025 uni2027 uni2028 uni2029 uni202A uni202B uni202C uni202D uni202E uni202F<br><br>Warning: ttf2afm (file pala.ttf): glyph 130 has multiple encodings (the first one being used): uni009F uni0178<br><br>Warning: ttf2afm (file pala.ttf): glyph 238 has multiple encodings (the first one being used): uni0111 uni20AB<br><br>Warning: ttf2afm (file pala.ttf): glyph 3 has multiple encodings (the first one being used): uni0020 uni2015 uni2016 uni2017 uni201B uni201F uni2023 uni2024 uni2025 uni2031<br><br>...<br></code></pre></td></tr></table></figure><p>因为 <code>glyph index --&gt; unicode</code> 这个 mapping 也不总是靠谱的，可能一个 glyph index 对应了多个 unicode.</p><blockquote><p>?? 也可能 一个 Unicode 也不对应,  这个时候可能就会分配一个省却的 unicode 码 给这个 glyph index， 比如 <code>index123</code>. ？？</p></blockquote><p>上述的日志表明 glyph index 130 对应了两个 unicode 码：uni009F 和 uni0178. 而 ttf2afm 默认采用了第一个 unicode.</p><p>现在让我们来看一看生成的 <code>pala-t1.afm</code> 文件长啥样:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs shell">StartFontMetrics 2.0<br>Comment Converted at Fri Sep 27 21:34:51 2024 by ttf2afm from font file `pala.ttf&#x27;<br>FontName Palatino<br>FullName Palatino<br>FamilyName Palatino<br>Weight Normal<br>ItalicAngle 0<br>IsFixedPitch false<br>FontBBox -545 -283 1020 1133<br>UnderlinePosition -48<br>UnderlineThickness 24<br>Version 1.0<br>Notice <br>EncodingScheme FontSpecific<br>CapHeight 708<br>XHeight 469<br>Ascender 728<br>Descender -292<br>StartCharMetrics 423<br>C 0 ; WX 333 ; N uni0060 ; B 30 505 254 676 ;<br>C 1 ; WX 333 ; N uni00B4 ; B 78 505 301 676 ;<br>C 2 ; WX 333 ; N uni02C6 ; B 11 509 323 676 ;<br>C 3 ; WX 333 ; N uni02DC ; B 1 535 332 640 ;<br>C 4 ; WX 333 ; N uni00A8 ; B 17 537 315 637 ;<br>C 9 ; WX 333 ; N uni00AF ; B 11 538 323 590 ;<br>C 11 ; WX 333 ; N uni00B8 ; B 96 -225 304 -9 ;<br>...<br>C -1 ; WX 0 ; N index418 ; B -532 735 -252 1029 ;<br>C -1 ; WX 0 ; N index419 ; B -532 735 -137 1046 ;<br>C -1 ; WX 0 ; N index420 ; B -535 735 -241 1020 ;<br>C -1 ; WX 0 ; N index421 ; B -532 69 -253 876 ;<br>C -1 ; WX 777 ; N index422 ; B 0 0 0 -7825 ;<br>EndCharMetrics<br>EndFontMetrics<br></code></pre></td></tr></table></figure><h3 id="map-pl-文件">.map / .pl 文件</h3><p>当我们生成这个 <code>.afm</code> 文件后，其实还不可以在 pdftex 下使用这个字体了，比如你编译下面的这样一个使用样例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% test.tex</span><br><span class="hljs-keyword">\pdfmapline</span>&#123;+pala-t1 &lt;ec-uni.enc &lt;pala.ttf&#125;<br><span class="hljs-keyword">\font</span><span class="hljs-keyword">\f</span>=pala-t1<br><span class="hljs-keyword">\f</span> This is Palatino in the T1 encoding.<br><span class="hljs-keyword">\bye</span><br></code></pre></td></tr></table></figure><p>在命令行使用命令 <code>pdftex  test.tex</code> 编译，日志输出为:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024) (preloaded format=pdftex)<br> restricted \write18 enabled.<br>entering extended mode<br>(./test.tex&#123;c:/texlive/2024/texmf-var/fonts/map/pdftex/updmap/pdftex.map&#125;<br>kpathsea: Running mktextfm pala-t1<br><br>The command name is C:\texlive\2024\bin\windows\mktextfm<br><br>kpathsea: Running mktexmf pala-t1.mf<br><br>The command name is C:\texlive\2024\bin\windows\mktexmf<br>name = pala-t1, rootname = pala-t, pointsize = 1<br>mktexmf: empty or non-existent rootfile!<br>Cannot find pala-t1.mf.<br>kpathsea: Appending font creation commands to missfont.log.<br><br>! Font \f=pala-t1 not loadable: Metric (TFM) file not found.<br>&lt;to be read again&gt;<br>                   \f<br>l.3 \f<br>       This is Palatino in the T1 encoding.<br>?<br></code></pre></td></tr></table></figure><p>报错说找不到对应的 <code>.tfm</code> 文件, 那么我们接下来就生成其对应的 <code>.tfm</code> 文件. 首先运行:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">afm2pl pala-t1.afm<br></code></pre></td></tr></table></figure><p>运行这个命令后生成了 <code>pala-t1.map</code>, <code>pala-t1.pl</code> 两个文件，两个文件中的内容为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% pala-t1.map</span><br>pala-t1 Palatino &lt;pala-t1.pfb<br></code></pre></td></tr></table></figure><p>第二个文件中的内容为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% pala-t1.pl</span><br>(FAMILY pala-t1)<br>(CODINGSCHEME FONTSPECIFIC)<br>(DESIGNSIZE R 10.0)<br>(DESIGNUNITS R 1000)<br>(COMMENT DESIGNSIZE (1 em) IS IN POINTS)<br>(COMMENT OTHER DIMENSIONS ARE MULTIPLES OF DESIGNSIZE/1000)<br>(BOUNDARYCHAR O 5)<br>(FONTDIMEN<br>   (SLANT R 0.000000)<br>   (SPACE D 500)<br>   (STRETCH D 250)<br>   (SHRINK D 166)<br>   (XHEIGHT D 469)<br>   (QUAD D 1000)<br>   (EXTRASPACE D 166)<br>   )<br>(LIGTABLE<br>   )<br>(CHARACTER O 0 (comment uni0060)<br>   (CHARWD R 333)<br>   (CHARHT R 676)<br>   )<br>(CHARACTER O 1 (comment uni00B4)<br>   (CHARWD R 333)<br>   (CHARHT R 676)<br>   )<br>(CHARACTER O 2 (comment uni02C6)<br>   (CHARWD R 333)<br>   (CHARHT R 676)<br>   )<br>(CHARACTER O 3 (comment uni02DC)<br>   (CHARWD R 333)<br>   (CHARHT R 640)<br>   )<br>   <br>...<br><br>(CHARACTER O 375 (comment uni00FD)<br>   (CHARWD R 556)<br>   (CHARHT R 670)<br>   (CHARDP R 283)<br>   )<br>(CHARACTER O 376 (comment uni00FE)<br>   (CHARWD R 601)<br>   (CHARHT R 726)<br>   (CHARDP R 280)<br>   )<br>(CHARACTER O 377 (comment uni00DF)<br>   (CHARWD R 556)<br>   (CHARHT R 730)<br>   (CHARDP R 8)<br>   )<br></code></pre></td></tr></table></figure><h3 id="tfm-文件">.tfm 文件</h3><p>然后再使用如下命令生成对应的 <code>.tfm</code> 文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pltotf pala-t1.pl<br></code></pre></td></tr></table></figure><p>运行这个命令后，生成了 <code>pala-tl.tfm</code> 文件, 运行的 log 为:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">I had to round some heights by 13.0000000 units.<br>I had to round some depths by 2.5000000 units.<br></code></pre></td></tr></table></figure><p>那么现在我们有了这样一些文件(按照时间顺序列举):</p><ul><li>pala.ttf</li><li>ec-uni.enc</li><li>pala-t1.afm</li><li>pala-t1.map</li><li><a href="http://pala-t1.pl">pala-t1.pl</a></li><li>pala-t1.tfm</li></ul><p>可以编译通过了吗 ? 试试:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">$ pdftex test.tex<br>This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024) (preloaded format=pdftex)<br> restricted \write18 enabled.<br>entering extended mode<br>(./test.tex&#123;c:/texlive/2024/texmf-var/fonts/map/pdftex/updmap/pdftex.map&#125;<br>[1&#123;ec-uni.enc&#125;] )&lt;pala.ttf&gt;&lt;c:/texlive/2024/texmf-dist/fonts/type1/public/amsfo<br>nts/cm/cmr10.pfb&gt;<br>Output written on test.pdf (1 page, 12444 bytes).<br>Transcript written on test.log.<br></code></pre></td></tr></table></figure><p>编译结果截图如下:</p><p><img src="/img/pdftex_ttf/pdftex_ttf_example.png" alt="pdftex ttf using example"></p><h3 id="测试必要文件">测试必要文件</h3><p>上面生成了一大堆的文件，这些个文件都是必须的吗？我们试试看哪些文件才是必须的。经过一番的测试，发现只有:</p><ul><li>pala.ttf</li><li>ec-uni.enc</li><li>pala-t1.tfm</li></ul><p>三个文件时必须的. 但是始终感觉这个 <code>.enc</code> 文件比较碍眼.</p><h2 id="fontinst">fontinst</h2><p>前面我们借助的工具是 <code>ttf2afm</code>, 并且使用它生成了对应的 afm 文件。但是对于 <code>fontinst</code> 来说，使用 ttf2afm 生成的 afm 文件对 fontinst 是无效的。我们需要 <code>afm file with AGL names</code>。下面来演示以下这个流程:</p><h3 id="生成-afm-文件">生成 afm 文件</h3><p>使用命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttf2afm -u -o pala.afm pala.ttf<br></code></pre></td></tr></table></figure><h3 id="生成-AGL-afm-文件">生成 AGL afm 文件</h3><p>需要自己去完成对应 glyph names to Unicode 的工作. 没有找到对应的脚本。 关于这个 fontinst ，我也不会用。</p><h2 id="参考">参考</h2><p><a href="https://tug.org/TUGboat/tb30-1/tb94thanh.pdf">A closer look at TrueType fonts and pdfTEX</a></p><p>毕竟这是一篇 2009 年的文章，会不会存在过时的原因 ? 啥时候看看目前比较流行的 pdftex 下调用 ttf 字体的方案.  这篇文章就记录到这里吧.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>l3build introduction</title>
    <link href="/2024/09/16/l3build_Note/"/>
    <url>/2024/09/16/l3build_Note/</url>
    
    <content type="html"><![CDATA[<h2 id="preface">preface</h2><blockquote><p>This article <strong>DOES NOT</strong> include any material on <code>dtx</code> writing or <code>l3build</code> for <code>dtx</code> files.</p></blockquote><h2 id="Why-we-need-l3build">Why we need l3build ?</h2><ul><li>when you are developing a complex package or class: there are many commands in it, while that some later commands may affect the previous ones.<br>Then you shoud make sure the previous commands still work after you add new commands. Thus, you need a <strong>test system</strong>.</li><li>when package(class) <code>A</code> relys on package(class) <code>B</code>, and you change something in <code>B</code>, you should make sure that <code>A</code> still works after the change. Thus, you need a <strong>test system</strong> to test functions in <code>A</code> as well.</li></ul><h2 id="Setup">Setup</h2><h3 id="build-script">build script</h3><p>Create a file <code>build.lua</code> in the root directory of your project, which specifies the build process</p><h3 id="write-test-file">write test file</h3><p>Create your test files in <code>testfiles</code> directory, this folder can be set in <code>build.lua</code> by variable <code>testfiledir</code>, the default is <code>./testfiles</code>. The default test file extention should be <code>.lvt</code>, but i change it to <code>.tex</code> in the following Example project.</p><h4 id="how-to-enable-test">how to enable test ?</h4><p>Just add file <code>regression-test.tex</code> in your test file, then you can use the test commands provided by <code>l3build</code>. Some remarks about the <code>regression-test.tex</code>:</p><blockquote><p>Test files are written in a <code>TEX dialect</code> using the support file <code>regression-test.tex</code>, which should be <code>\input</code> at the <strong>very beginning</strong> of each test. Additional customizations to this driver can be included in a local <code>regression-test.cfg</code> file, which will be loaded automatically if found.</p></blockquote><p>Here is a test file template:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;expl3&#125;<br><span class="hljs-keyword">\START</span><br><span class="hljs-comment">% your test code here</span><br><span class="hljs-keyword">\ExplSyntaxOff</span><br><span class="hljs-keyword">\END</span><br></code></pre></td></tr></table></figure><p>See later for more details about the test commands provided by <code>l3build</code>.</p><blockquote><p><strong>Warning:</strong> If you use the wrong syntax and using <code>l3build save &lt;test-file-name&gt;</code> to generate the <code>*.tlg</code> file in your <code>testfile</code> dir, then following <code>l3build check</code> will pass Even the commands is wrong.</p></blockquote><h4 id="commands-for-test">commands for test</h4><p>The <code>l3build</code> provides a series of commands for package or class writer to write test. Here i list some mostlt used commands:</p><ul><li><code>\START ... \END</code>: start and end the test</li><li><code>\SEPARATOR</code> inserts a long line of = symbols to break up the log output</li><li><code>\TRUE</code>, <code>\FALSE</code>, <code>\YES</code>, <code>\NO</code> output those strings to the log file.</li><li><code>\TEST&#123;⟨title⟩&#125;&#123;⟨contents⟩&#125;</code> command runs its <code>⟨contents⟩</code> in a group and surrounds the generated log lines with some <code>\SEPARATOR</code>s and a <code>⟨title⟩</code>.</li><li><code>\TESTEXP&#123;⟨title⟩&#125;&#123;⟨contents⟩&#125;</code> surrounds its <code>⟨contents⟩</code> with <code>\TYPE</code> and formatting to match <code>\TEST</code>;</li><li><code>\BEGINTEST&#123;⟨title⟩&#125; . . . \ENDTEST</code> is an environment form of <code>\TEST</code>, allowing <strong>verbatim</strong> material, etc. to appear.</li><li><code>\ASSERT&#123;⟨arg1⟩&#125;&#123;⟨arg2⟩&#125;</code> and <code>\ASSERTSTR&#123;⟨arg1⟩&#125;&#123;⟨arg2⟩&#125;</code> Test if the full expansion of <code>⟨arg1⟩</code> and <code>⟨arg2⟩</code> are the same: on a <strong>token</strong> basis in <code>\ASSERT</code> and on a <strong>string</strong> basis in <code>\ASSERTSTR</code>. Depending on the outcome, record either <code>PASSED</code> or <code>FAILED</code> in the <code>.log</code>.</li></ul><blockquote><ul><li>Command <code>\START</code> tolds the test system that the <code>useful</code> part of the <code>.log</code> has started (for that there is lots of material in a raw log that you don’t want). and <code>\END</code> tells the system that the <code>useful</code> part of the <code>.log</code> has ended. (You can use <code>\OMIT ... \TIMO</code> to ignore parts of the log as well)</li><li><code>\TYPE</code> is used to write material to the <code>.log</code> file, like LaTeX <code>\typeout</code>, but it allows <strong>long</strong> input.</li></ul></blockquote><p>An example of these commands:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\TEST</span>&#123;bool<span class="hljs-built_in">_</span>set,~lazy~evaluation&#125;&#123;<br>  <span class="hljs-keyword">\bool_set:Nn</span> <span class="hljs-keyword">\l_tmpa_bool</span><br>  &#123;<br>    <span class="hljs-keyword">\int_compare_p:nNn</span> 1=1 <span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\bool_lazy_any_p:n</span><br>    &#123;<br>      &#123; <span class="hljs-keyword">\int_compare_p:nNn</span> 2=3 &#125;<br>      &#123; <span class="hljs-keyword">\int_compare_p:nNn</span> 4=4 &#125;<br>      &#123; <span class="hljs-keyword">\int_compare_p:nNn</span> 1=<span class="hljs-keyword">\ERROR</span> &#125; <span class="hljs-comment">% is skipped</span><br>    &#125;<br>    <span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\int_compare_p:nNn</span> 2=2<br>  &#125;<br>  <span class="hljs-keyword">\bool_if:NTF</span> <span class="hljs-keyword">\l_tmpa_bool</span> <span class="hljs-keyword">\TRUE</span> <span class="hljs-keyword">\FALSE</span><br>&#125;<br></code></pre></td></tr></table></figure><p>the output (compiled by <code>pdflatex</code> not <code>l3build</code>):</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex">==========================================<br>TEST 8: bool<span class="hljs-built_in">_</span>set, lazy evaluation<br>==========================================<br>TRUE<br>==========================================<br></code></pre></td></tr></table></figure><h4 id="test-box">test box</h4><p>There is an example from official documentation:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;expl3&#125;<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\ExplSyntaxOn</span><br>    <span class="hljs-keyword">\box_new:N</span> <span class="hljs-keyword">\l_tmp_box</span><br>    <span class="hljs-keyword">\hbox_set:Nn</span> <span class="hljs-keyword">\l_tmp_box</span> &#123;hello~ <span class="hljs-keyword">\emph</span>&#123;world&#125;~ <span class="hljs-built_in">$</span>a=b+c<span class="hljs-built_in">$</span>&#125;<br>    <span class="hljs-keyword">\box_show:N</span> <span class="hljs-keyword">\l_tmp_box</span><br><span class="hljs-keyword">\ExplSyntaxOff</span><br><span class="hljs-keyword">\END</span><br></code></pre></td></tr></table></figure><p>will generate:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs shell">START-TEST-LOG<br><br>This is a generated file for the l3build validation system.<br><br>Don&#x27;t change this file in any respect.<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">\box52=</span><br>\hbox(6.94444+0.83333)x91.35481<br>.\OT1/cmr/m/n/10 h<br>.\OT1/cmr/m/n/10 e<br>.\OT1/cmr/m/n/10 l<br>.\OT1/cmr/m/n/10 l<br>.\OT1/cmr/m/n/10 o<br>.\glue 3.33333 plus 1.66666 minus 1.11111<br>.\OT1/cmr/m/it/10 w<br>.\OT1/cmr/m/it/10 o<br>.\OT1/cmr/m/it/10 r<br>.\OT1/cmr/m/it/10 l<br>.\OT1/cmr/m/it/10 d<br>.\kern 1.03334<br>.\glue 3.33333 plus 1.66666 minus 1.11111<br>.\mathon<br>.\OML/cmm/m/it/10 a<br>.\glue(\thickmuskip) 2.77771 plus 2.77771<br>.\OT1/cmr/m/n/10 =<br>.\glue(\thickmuskip) 2.77771 plus 2.77771<br>.\OML/cmm/m/it/10 b<br>.\glue(\medmuskip) 2.22217 plus 1.11108 minus 2.22217<br>.\OT1/cmr/m/n/10 +<br>.\glue(\medmuskip) 2.22217 plus 1.11108 minus 2.22217<br>.\OML/cmm/m/it/10 c<br>.\mathoff<br><br>! OK.<br>&lt;argument&gt; \l_tmp_box <br>                      <br>l.43     \box_show:N \l_tmp_box<br>                               <br><br>END-TEST-LOG<br><br> )<br>(see the transcript file for additional information)<br>No pages of output.<br></code></pre></td></tr></table></figure><h4 id="test-entire-page">test entire page</h4><p>A simple example:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;expl3&#125;<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\showoutput</span><br><span class="hljs-comment">% Test content here</span><br><span class="hljs-keyword">\vfil</span><span class="hljs-keyword">\break</span><br><span class="hljs-keyword">\END</span><br></code></pre></td></tr></table></figure><p>This code will generate a pdf, the output log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">START-TEST-LOG<br><br>This is a generated file for the l3build validation system.<br><br>Don&#x27;t change this file in any respect.<br><br><br>END-TEST-LOG<br><br> )<br>No pages of output.<br></code></pre></td></tr></table></figure><h4 id="output-normalization">output normalization</h4><p>Eliminate the differences between different systems. Consist of 2 parts:</p><ul><li>removing ignoring lines<ul><li>Lines before the <code>\START</code>, after the <code>\END </code>and within <code>\OMIT/\TIMO</code> blocks</li><li>Entirely blank lines, including those consisting only of spaces.</li><li>Lines starting <code>\openin</code> or <code>\openout</code>.</li><li>lines loading  <code>*.fd</code> files.</li></ul></li><li>modify others to give consistent test output<ul><li>Removal spaces at the start of lines</li><li>Removal of ./ at start of file names.</li><li>… etc</li></ul></li></ul><blockquote><p>see the documentation for more details</p></blockquote><h3 id="test-reference">test reference</h3><p>There are many test goals (kinds), in the following example project, we use the <code>log-based test</code>. The default extention of your test file is <code>.lvt</code>.</p><blockquote><p>l3build doc: A standard test will run the file ⟨name⟩.lvt using one or more engines, but will not carry out any additional processing.</p></blockquote><p>What if we want a complex test goal ? See the <code>l3build doc</code>, it says that:</p><blockquote><p>Regression tests check whether changes introduced in the code modify the test output. Especially while developing a complex package there is not yet a baseline to save a test goal with. It might then be easier to formulate the expected effects and outputs of tests directly. To achieve this, you may create an <code>.lve</code> instead of a <code>.tlg</code> file.</p></blockquote><p>if the <code>.tlg</code> file not exsit, <code>l3build check</code> will throw an error:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Error: failed to find any reference or expectation file for test1!<br></code></pre></td></tr></table></figure><p>How to setup the (default) test reference ? Create and Save your <code>test reference</code> by running:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build save &lt;test-file-name&gt;<br></code></pre></td></tr></table></figure><p>Then a <code>&lt;test-file-name&gt;.tlg</code> file will be created in your <code>testfiledir</code>. The <code>⟨name⟩.tlg</code> file is then used in all subsequent checks against the <code>⟨name⟩.lvt</code> test.</p><h3 id="run-tests">run tests</h3><p>Run the tests by running <code>l3build check &lt;tlg-file-name&gt;</code> or <code>l3build check</code>, then the test files will be compared with the saved reference</p><h2 id="Example">Example</h2><h3 id="project-structure">project structure</h3><p>The initial project structure:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── build.lua<br>├── testfiles<br>│   └── test1.tex<br>└── TESTpkg.sty<br></code></pre></td></tr></table></figure><p>The build file <code>build.lua</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- package Identity</span><br><span class="hljs-built_in">module</span> = <span class="hljs-string">&quot;TESTpkg&quot;</span><br>sourcefiles = &#123;<span class="hljs-string">&quot;TESTpkg.sty&quot;</span>&#125;<br><br><span class="hljs-comment">-- check opts</span><br>checkengines = &#123;<span class="hljs-string">&quot;pdftex&quot;</span>&#125;<br>lvtext = <span class="hljs-string">&quot;.tex&quot;</span><br></code></pre></td></tr></table></figure><p>See problem <a href="https://tex.stackexchange.com/q/680682/294585">Impossible to run l3build tests</a>, that nowadays, you don’t need</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua">kpse.set_program_name (<span class="hljs-string">&quot;kpsewhich&quot;</span>)<br><span class="hljs-built_in">dofile</span>(kpse.lookup(<span class="hljs-string">&quot;l3build.lua&quot;</span>))<br></code></pre></td></tr></table></figure><p>in your <code>build.lua</code>, the test package is <code>TESTpkg.sty</code>:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\NeedsTeXFormat</span>&#123;LaTeX2e&#125;[2018-04-01]<br><span class="hljs-keyword">\RequirePackage</span>&#123;expl3&#125;<br><span class="hljs-keyword">\ProvidesExplPackage</span>&#123;TESTpkg&#125;&#123;2024-09-16&#125;&#123;2024A&#125;&#123;Test package for l3build&#125;<br><br><br><span class="hljs-keyword">\NewDocumentCommand</span>&#123;<span class="hljs-keyword">\cmdA</span>&#125;&#123;o&#125;&#123;<br>  FIRST~ Argument~ is:~<span class="hljs-params">#1</span><br>&#125;<br></code></pre></td></tr></table></figure><p>The first test file: <code>test1.tex</code></p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-comment">% load regression test tools</span><br><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><br><span class="hljs-comment">% load your package</span><br><span class="hljs-keyword">\usepackage</span>&#123;TESTpkg&#125;<br><br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\TEST</span>&#123;command~cmdA~Test&#125;&#123;<span class="hljs-keyword">\cmdA</span>[ARG-ONE]&#125;<br><span class="hljs-keyword">\END</span><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h3 id="save-test-reference">save test reference</h3><p>The first run of <code>l3build save test1</code> print log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">l3build save test1</span><br>Creating and copying test1.tlg<br>This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024/Arch Linux) (preloaded format=pdflatex)<br> restricted \write18 enabled.<br> (./ascii.tcx)<br>entering extended mode<br>LaTeX2e &lt;2023-11-01&gt; patch level 1<br>L3 programming layer &lt;2024-02-20&gt;<br>(./test1.tex (/usr/share/texmf-dist/tex/latex/base/article.cls<br>Document Class: article 2023/05/17 v1.4n Standard LaTeX document class<br>(/usr/share/texmf-dist/tex/latex/base/size10.clo)) (/usr/share/texmf-dist/tex/latex/l3build/regression-test.tex&#123;/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map&#125;) (./TESTpkg.sty (/usr/share/texmf-dist/tex/latex/l3kernel/expl3.sty (/usr/share/texmf-dist/tex/latex/l3backend/l3backend-pdftex.def)))<br>No file test1.aux.<br><br>START-TEST-LOG<br><br><br>This is a generated file for the l3build validation system.<br><br>Don&#x27;t change this file in any respect.<br><br><br>============================================================<br>TEST 1: command~cmdA~Test<br>============================================================<br>============================================================<br><br><br>END-TEST-LOG<br><br> )<br>No pages of output.<br>Transcript written on test1.log.<br></code></pre></td></tr></table></figure><p>After this first run of <code>l3build save</code>, your project structure will be:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── build<br>│   ├── local<br>│   ├── result<br>│   ├── test<br>│   │   ├── ascii.tcx<br>│   │   ├── test1.log<br>│   │   ├── test1.pdftex.aux<br>│   │   ├── test1.tex<br>│   │   ├── test1.tlg<br>│   │   └── TESTpkg.sty<br>│   └── unpacked<br>│       └── TESTpkg.sty<br>├── build.lua<br>├── testfiles<br>│   ├── test1.tex<br>│   └── test1.tlg<br>└── TESTpkg.sty<br></code></pre></td></tr></table></figure><h3 id="running-test">running test</h3><p>The first run of <code>l3build check test1</code> print log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"> &gt; </span><span class="language-bash">l3build check test1</span><br>Running checks on<br>  test1 (1/1)<br>This is pdfTeX, Version 3.141592653-2.6-1.40.26 (TeX Live 2024/Arch Linux) (preloaded format=pdflatex)<br> restricted \write18 enabled.<br> (./ascii.tcx)<br>entering extended mode<br>LaTeX2e &lt;2023-11-01&gt; patch level 1<br>L3 programming layer &lt;2024-02-20&gt;<br>(./test1.tex (/usr/share/texmf-dist/tex/latex/base/article.cls<br>Document Class: article 2023/05/17 v1.4n Standard LaTeX document class<br>(/usr/share/texmf-dist/tex/latex/base/size10.clo)) (/usr/share/texmf-dist/tex/latex/l3build/regression-test.tex&#123;/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map&#125;) (./TESTpkg.sty (/usr/share/texmf-dist/tex/latex/l3kernel/expl3.sty (/usr/share/texmf-dist/tex/latex/l3backend/l3backend-pdftex.def)))<br>No file test1.aux.<br><br>START-TEST-LOG<br><br><br>This is a generated file for the l3build validation system.<br><br>Don&#x27;t change this file in any respect.<br><br><br>============================================================<br>TEST 1: command~cmdA~Test<br>============================================================<br>============================================================<br><br><br>END-TEST-LOG<br><br> )<br>No pages of output.<br>Transcript written on test1.log.<br><br>  All checks passed<br></code></pre></td></tr></table></figure><p>Or you can simply run <code>l3build check</code>:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">l3build check</span><br>Running checks on<br>  test1 (1/1)<br><br>  All checks passed<br></code></pre></td></tr></table></figure><h3 id="If-something-change">If something change ?</h3><h4 id="change-the-package">change the package</h4><p>If i change the command <code>\cmdA</code> in package <code>TESTpkg.sty</code> to:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\NewDocumentCommand</span>&#123;<span class="hljs-keyword">\cmdA</span>&#125;&#123;om&#125;&#123;<br>  FIRST~ Argument~ is:~<span class="hljs-params">#1</span><br>&#125;<br></code></pre></td></tr></table></figure><p>then run <code>l3build check</code>, you will get:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">l3build check</span><br>Running checks on<br>  test1 (1/1)<br>          --&gt; failed<br><br><br>  Check failed with difference files<br>  - ./build/test/test1.pdftex.diff<br></code></pre></td></tr></table></figure><p>deep into the file <code>./build/test/test1.pdftex.diff</code>, you will see:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">*** ./build/test/test1.tlg2024-09-16 16:21:01.131042370 +0800<br>--- ./build/test/test1.pdftex.log2024-09-16 16:21:01.543042372 +0800<br>***************<br>*** 3,6 ****<br>  ============================================================<br>  TEST 1: command~cmdA~Test<br>  ============================================================<br>! ============================================================<br>--- 3,6 ----<br>  ============================================================<br>  TEST 1: command~cmdA~Test<br>  ============================================================<br>! Bad grouping: 2!<br></code></pre></td></tr></table></figure><h4 id="change-the-test-file">change the test file</h4><p>If we change the test file to:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-comment">% load regression test tools</span><br><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><br><span class="hljs-comment">% load your package</span><br><span class="hljs-keyword">\usepackage</span>&#123;TESTpkg&#125;<br><br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\TEST</span>&#123;command~cmdA~Test&#125;&#123;<span class="hljs-keyword">\cmdA</span>[ARG-ONE]Change-Here&#125;<br><span class="hljs-keyword">\END</span><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>this test still pass.</p><h3 id="remove-temporary">remove temporary</h3><p>Use <code>l3build clean</code> to remove the test tempoaray files.</p><h2 id="l3build-check-mechanism">l3build check mechanism</h2><h3 id="file-extention">file extention</h3><p><code>.lvt(est)</code>: Extension of log-based test files. <code>.tlg</code> will be its <code>reference or expectation file</code> and will be generated.<br><code>.lve(xpectation)</code>: Extension of auto-generating test file output,<br><code>.pvt</code>: Extension of PDF-based test files, <code>.tpf</code> will be its <code>reference or expectation file</code> and will be generated.</p><p>There are some different test systems examples below.</p><blockquote><p>We don’t pack tests inside source files, like <code>docstrip</code>.</p></blockquote><h3 id="syntax-base-test-system">syntax base test system</h3><p><code>l3build check</code> will automatically check the syntax error, if the latter macro causes a syntax error. The output log will be like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">--- 3,6 ----<br>  ============================================================<br>  TEST 1: command~cmdA~Test<br>  ============================================================<br>! Bad grouping: 2!<br></code></pre></td></tr></table></figure><p>in the file <code>test1.pdftex.diff</code> as the before Test Example.</p><h3 id="log-base-test-system">log base test system</h3><p>The test system use the file <code>*.tlg</code> to check, that is, if the original log is:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is a generated file for the l3build validation system.<br>Don&#x27;t change this file in any respect.<br>============================================================<br>TEST 1: LVTtest<br>============================================================<br>TRUE<br>============================================================<br></code></pre></td></tr></table></figure><p>If we change it to:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is a generated file for the l3build validation system.<br>Don&#x27;t change this file in any respect.<br>============================================================<br>TEST 1: LVTtest<br>============================================================<br>FALSE<br>============================================================<br></code></pre></td></tr></table></figure><p>Then the <code>l3build check</code> will throw an <code>check fail</code>. To better understand the <code>log basis test</code>, there is a simple example:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% LVTtest.lvt</span><br>...<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\TEST</span>&#123;LVT Test&#125;&#123;<br>  hbox<span class="hljs-built_in">_</span>set:Nn <span class="hljs-keyword">\l_tmpa_box</span> &#123;<span class="hljs-keyword">\cmdA</span>[ARG-ONE]&#125;<br>  <span class="hljs-keyword">\typeout</span>&#123;hello&#125;<br>&#125;<br><span class="hljs-keyword">\END</span><br></code></pre></td></tr></table></figure><p>and the original <code>LVTtest.tlg</code> file is:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">This is a generated file for the l3build validation system.<br>Don&#x27;t change this file in any respect.<br>============================================================<br>TEST 1: LVTtest<br>============================================================<br>TRUE<br>============================================================<br></code></pre></td></tr></table></figure><p>Absolutely, the check will fail, but if we change the <code>LVTtest.lvt</code> to:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% LVTtest.lvt</span><br>...<br><span class="hljs-keyword">\START</span><br><span class="hljs-keyword">\TEST</span>&#123;LVT Test&#125;&#123;<br>  hbox<span class="hljs-built_in">_</span>set:Nn <span class="hljs-keyword">\l_tmpa_box</span> &#123;<span class="hljs-keyword">\cmdA</span>[ARG-ONE]&#125;<br>  <span class="hljs-keyword">\typeout</span>&#123;TRUE&#125;<br>&#125;<br><span class="hljs-keyword">\END</span><br></code></pre></td></tr></table></figure><p>the check will pass. The other show command like <code>\box_show:N</code>, <code>\tl_show:N</code> works silimar to <code>\typeout</code>.</p><h3 id="pdf-base-test-system">pdf base test system</h3><p>The test system use the file <code>*.tpf</code> to check. An simple example, create a file <code>PVTtest.pvt</code> as:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><span class="hljs-keyword">\documentclass</span>&#123;minimal&#125;<br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;verbatim&#125;<span class="hljs-string"></span><br><span class="hljs-string">   ZZZ</span><br><span class="hljs-string"></span><span class="hljs-keyword">\end</span>&#123;verbatim&#125;<br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>then after save it reference by <code>l3build save PVTtest</code>, <code>PVTtest.tpf</code> will be create in both <code>testfiledir/</code> and <code>build/test/</code>, the content like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">%</span><span class="language-bash">PDF-1.5</span><br><span class="hljs-meta prompt_">% </span><span class="language-bash"> </span>  <br>3 0 obj<br>&lt;&lt;<br>/Length 49        <br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;</span><br>stream<br>BT<br>/F37 9.9626 Tf 87.691 759.927 Td [(ZZZ)]TJ<br>ET<br>endstream<br>endobj<br>2 0 obj<br>&lt;&lt;<br>/Type /Page<br>/Contents 3 0 R<br>/Resources 1 0 R<br>/MediaBox [0 0 595.276 841.89]<br>/Parent 5 0 R<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;</span><br>endobj<br>...<br></code></pre></td></tr></table></figure><p>If i change the <code>PVTtest.pvt</code> to:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\input</span>&#123;regression-test.tex&#125;<br><span class="hljs-keyword">\documentclass</span>&#123;minimal&#125;<br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;verbatim&#125;<span class="hljs-string"></span><br><span class="hljs-string">   ZZ</span><br><span class="hljs-string"></span><span class="hljs-keyword">\end</span>&#123;verbatim&#125;<br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>the chech will fail, the log is:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">Running checks on<br>  LVTtest (1/2)<br>  PVTtest (2/2)<br>          --&gt; failed<br><br><br>  Check failed with difference files<br>  - ./build/test/PVTtest.pdftex.diff<br></code></pre></td></tr></table></figure><p>the diff file contains:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">*** ./build/test/PVTtest.tpf2024-09-16 18:39:04.155042603 +0800<br>--- ./build/test/PVTtest.pdftex.pdf2024-09-16 18:39:04.567042596 +0800<br>***************<br>*** 2,12 ****<br><span class="hljs-meta prompt_">  % </span><span class="language-bash"> </span>  <br>  3 0 obj<br>  &lt;&lt;<br>! /Length 49        <br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;</span><br>  stream<br>  BT<br>! /F37 9.9626 Tf 87.691 759.927 Td [(ZZZ)]TJ<br>  ET<br>  endstream<br>  endobj<br>--- 2,12 ----<br><span class="hljs-meta prompt_">  % </span><span class="language-bash"> </span>  <br>  3 0 obj<br>  &lt;&lt;<br>! /Length 48        <br><span class="hljs-meta prompt_">  &gt;</span><span class="language-bash">&gt;</span><br>  stream<br>  BT<br>! /F37 9.9626 Tf 87.691 759.927 Td [(ZZ)]TJ<br>  ET<br>  endstream<br>  endobj<br>***************<br></code></pre></td></tr></table></figure><p>If we change <code>ZZ</code> back to <code>ZZZ</code>, the check passes. There are some normalization to make <code>l3build check</code> to work:</p><ul><li>Replacement of binary streams by the marker <code>[BINARY STREAM]</code></li><li>Replacement of <code>/ID</code> values by <code>ID-STRING</code></li><li>Removal of <code>blank lines</code> and comment <code>%%</code> lines</li></ul><p>Some remarks about the <code>pdf-based test</code>:</p><blockquote><ul><li>To allow platform-independence, PDF-based tests must use only Type 1 or OpenType fonts: Type3 fonts are system-dependent.</li><li>PDF files are engine-specific, thus one <code>.tpf</code> file should be stored per engine to be tested.</li></ul></blockquote><h2 id="multiple-sets-of-tests">multiple sets of tests</h2><h3 id="project-structure-2">project structure</h3><p>Use different sets tests for different engines, for example. The project structure:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── build.lua<br>├── config-TU.lua<br>├── testfiles<br>│   ├── LVTtest.lvt<br>│   └── PVTtest.pvt<br>├── testfiles-TU<br>│   └── TUtest.lvt<br>└── TESTpkg.sty<br></code></pre></td></tr></table></figure><p>The <code>build.lua</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- package Identity</span><br><span class="hljs-built_in">module</span> = <span class="hljs-string">&quot;TESTpkg&quot;</span><br>sourcefiles = &#123;<span class="hljs-string">&quot;TESTpkg.sty&quot;</span>&#125;<br><br><span class="hljs-comment">-- check opts</span><br>checkengines = &#123;<span class="hljs-string">&quot;pdftex&quot;</span>&#125;<br>checkconfigs = &#123;<span class="hljs-string">&quot;build&quot;</span>, <span class="hljs-string">&quot;config-TU&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>The <code>config-TU.lua</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua">stdengine = <span class="hljs-string">&quot;xetex&quot;</span><br>checkengines = &#123;<span class="hljs-string">&quot;xetex&quot;</span>, <span class="hljs-string">&quot;luatex&quot;</span>&#125;<br>checksearch = <span class="hljs-literal">true</span><br>testfiledir = <span class="hljs-string">&quot;testfiles-TU&quot;</span><br></code></pre></td></tr></table></figure><p>The newly added file <code>TUtest.ltv</code> is:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;fontspec&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br>Hello world<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h3 id="set-up-tlg-files">set up .tlg files</h3><p>For the standard configuration, the default testfiledir <code>testfiles</code>, use command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build save LVTtest<br>l3build save PVTtest<br></code></pre></td></tr></table></figure><p>to generate the <code>.tlg</code> files. For the non-standard configuration, the  <code>testfiles-TU</code> folder, use command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build save -c config-TU TUtest<br></code></pre></td></tr></table></figure><p>to generate the <code>.tlg</code> files. The output log is:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">Creating and copying TUtest.tlg<br>This is XeTeX, Version 3.141592653-2.6-0.999996 (TeX Live 2024/Arch Linux) (preloaded format=xelatex)<br> restricted \write18 enabled.<br>entering extended mode<br>LaTeX2e &lt;2023-11-01&gt; patch level 1<br>L3 programming layer &lt;2024-02-20&gt;<br>(./TUtest.lvt (/usr/share/texmf-dist/tex/latex/base/article.cls<br>Document Class: article 2023/05/17 v1.4n Standard LaTeX document class<br>(/usr/share/texmf-dist/tex/latex/base/size10.clo)) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.sty (/usr/share/texmf-dist/tex/latex/l3packages/xparse/xparse.sty (/usr/share/texmf-dist/tex/latex/l3kernel/expl3.sty (/usr/share/texmf-dist/tex/latex/l3backend/l3backend-xetex.def))) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec-xetex.sty (/usr/share/texmf-dist/tex/latex/base/fontenc.sty) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.cfg)))<br>No file TUtest.aux.<br>(/usr/share/texmf-dist/tex/latex/base/ts1cmr.fd) [1] (./TUtest.aux) )<br>Output written on TUtest.xdv (1 page, 500 bytes).<br>Transcript written on TUtest.log.<br></code></pre></td></tr></table></figure><p>Then the project structure will be:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── build<br>│   ├── local<br>│   ├── result<br>│   ├── test<br>│   │   ├── ascii.tcx<br>│   │   ├── PVTtest.log<br>│   │   ├── PVTtest.pdf<br>│   │   ├── PVTtest.pdftex.aux<br>│   │   ├── PVTtest.pvt<br>│   │   ├── PVTtest.tpf<br>│   │   └── TESTpkg.sty<br>│   ├── test-config-TU<br>│   │   ├── ascii.tcx<br>│   │   ├── TESTpkg.sty<br>│   │   ├── TUtest.log<br>│   │   ├── TUtest.lvt<br>│   │   ├── TUtest.tlg<br>│   │   ├── TUtest.xdv<br>│   │   └── TUtest.xetex.aux<br>│   └── unpacked<br>│       └── TESTpkg.sty<br>├── build.lua<br>├── config-TU.lua<br>├── testfiles<br>│   ├── LVTtest.lvt<br>│   ├── LVTtest.tlg<br>│   ├── PVTtest.pvt<br>│   └── PVTtest.tpf<br>├── testfiles-TU<br>│   ├── TUtest.lvt<br>│   └── TUtest.tlg<br>└── TESTpkg.sty<br></code></pre></td></tr></table></figure><h3 id="run-test">run test</h3><p>Then you can run the test:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build check <br></code></pre></td></tr></table></figure><p>the output log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">l3build check</span><br>Running l3build with target &quot;check&quot; and configuration &quot;build&quot;<br>Running checks on<br>  LVTtest (1/2)<br>  PVTtest (2/2)<br><br>  All checks passed<br><br>Running l3build with target &quot;check&quot; and configuration &quot;config-TU&quot;<br>Running checks on<br>  TUtest (1/1)<br><br>  All checks passed<br></code></pre></td></tr></table></figure><p>For a single check for non-standard configuration, use:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build check -c config-TU TUtest<br></code></pre></td></tr></table></figure><p>The output log:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"> &gt; </span><span class="language-bash">l3build check -c config-TU TUtest</span><br>Running checks on<br>  TUtest (1/1)<br>This is XeTeX, Version 3.141592653-2.6-0.999996 (TeX Live 2024/Arch Linux) (preloaded format=xelatex)<br> restricted \write18 enabled.<br>entering extended mode<br>LaTeX2e &lt;2023-11-01&gt; patch level 1<br>L3 programming layer &lt;2024-02-20&gt;<br>(./TUtest.lvt (/usr/share/texmf-dist/tex/latex/base/article.cls<br>Document Class: article 2023/05/17 v1.4n Standard LaTeX document class<br>(/usr/share/texmf-dist/tex/latex/base/size10.clo)) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.sty (/usr/share/texmf-dist/tex/latex/l3packages/xparse/xparse.sty (/usr/share/texmf-dist/tex/latex/l3kernel/expl3.sty (/usr/share/texmf-dist/tex/latex/l3backend/l3backend-xetex.def))) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec-xetex.sty (/usr/share/texmf-dist/tex/latex/base/fontenc.sty) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.cfg)))<br>No file TUtest.aux.<br>(/usr/share/texmf-dist/tex/latex/base/ts1cmr.fd) [1] (./TUtest.aux) )<br>Output written on TUtest.xdv (1 page, 500 bytes).<br>Transcript written on TUtest.log.<br>This is LuaHBTeX, Version 1.18.0 (TeX Live 2024/Arch Linux)<br> restricted system commands enabled.<br>LaTeX2e &lt;2023-11-01&gt; patch level 1<br>L3 programming layer &lt;2024-02-20&gt;<br>(./TUtest.lvt (/usr/share/texmf-dist/tex/latex/base/article.cls<br>Document Class: article 2023/05/17 v1.4n Standard LaTeX document class<br>(/usr/share/texmf-dist/tex/latex/base/size10.clo)) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.sty (/usr/share/texmf-dist/tex/latex/l3packages/xparse/xparse.sty (/usr/share/texmf-dist/tex/latex/l3kernel/expl3.sty (/usr/share/texmf-dist/tex/latex/l3backend/l3backend-luatex.def))) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec-luatex.sty (/usr/share/texmf-dist/tex/latex/base/fontenc.sty) (/usr/share/texmf-dist/tex/latex/fontspec/fontspec.cfg)))<br>No file TUtest.aux.<br>(/usr/share/texmf-dist/tex/latex/base/ts1cmr.fd) [1&#123;/var/lib/texmf/fonts/map/pdftex/updmap/pdftex.map&#125;] (./TUtest.aux))<br> 406 words of node memory still in use:<br>   3 hlist, 1 vlist, 1 rule, 2 glue, 3 kern, 1 glyph, 4 attribute, 48 glue_spec, 4 attribute_list, 1 write nodes<br>   avail lists: 2:22,3:4,4:1,5:23,6:2,7:50,9:18<br>&lt;/usr/share/texmf-dist/fonts/opentype/public/lm/lmroman10-regular.otf&gt;<br>Output written on TUtest.pdf (1 page, 3288 bytes).<br>Transcript written on TUtest.log.<br><br>  All checks passed<br></code></pre></td></tr></table></figure><p>or using command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">l3build check -c config-TU<br>Running checks on<br>  TUtest (1/1)<br><br>  All checks passed<br></code></pre></td></tr></table></figure><h2 id="Testing-support">Testing support</h2><p>In the following , we will use <code>./</code> to denotes the root directory of the project, that is the directory contains the <code>build.lua</code> file.</p><h3 id="introduction">introduction</h3><p>Sometimes, your test needs some additional support files, like <code>graphics</code>, <code>text file</code>, <code>package modules</code> and so on. The case is that: <code>l3build</code> will usually copy the matching support files in <code>./support</code> to the <code>./build/test/</code> directory in a <code>flatten</code> way. If the package you testing need the top level folder of these <code>modules</code>, like:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_new_nopar:Npn</span> <span class="hljs-keyword">\g</span><span class="hljs-built_in">_</span><span class="hljs-built_in">_</span>ztikz<span class="hljs-built_in">_</span>load<span class="hljs-built_in">_</span>module:n <span class="hljs-params">#1</span> &#123;<br>  <span class="hljs-keyword">\clist_map_inline:nn</span> &#123;<span class="hljs-params">#1</span>&#125; &#123;<br>    <span class="hljs-keyword">\file_if_exist_input:nF</span> &#123;modules/ztikzmodule.<span class="hljs-params">##1</span>.tex&#125; &#123;<br>      <span class="hljs-keyword">\msg_new:nnn</span> &#123;ztikz&#125; &#123;module-not-found&#125; &#123;Module~`<span class="hljs-params">##1</span>&#x27;~not~found.&#125;<br>      <span class="hljs-keyword">\msg_error:nnn</span> &#123;ztikz&#125; &#123;module-not-found&#125; &#123;<span class="hljs-params">##1</span>&#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>The file <code>Test.pvt</code> is:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;ztikz&#125;<br><span class="hljs-keyword">\ztikzLoadModule</span>&#123;gnuplot&#125;<br><br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\begin</span>&#123;tikzpicture&#125;<br>  <span class="hljs-keyword">\Polygon</span>&#123;3&#125;<br>  <span class="hljs-keyword">\Plot</span>&#123;sin(x)&#125;<br><span class="hljs-keyword">\end</span>&#123;tikzpicture&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>thus if the output test folder <code>./build/test</code> structure is:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">./build/test<br>├── ascii.tcx<br>├── Test.log<br>├── Test.pdf<br>├── Test.pdftex.aux<br>├── test.png<br>├── ztikzmodule.gnuplot.tex<br>├── Test.pvt<br>└── Test.tpf<br></code></pre></td></tr></table></figure><p>Then the test code <code>Test.pvt</code> can not load the <code>gnuplot</code> module successfully. You will see a log like:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">! Package ztikz Error: Module `gnuplot&#x27; not found.<br><br>Type &lt;return&gt; to continue.<br> ...<br><br>l.3 \ztikzLoadModule&#123;gnuplot&#125;<br></code></pre></td></tr></table></figure><p>How can this test run successfully ? If the folder structure like the below then the loading process will run correctly:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">./build/test<br>├── ascii.tcx<br>├── Test.log<br>├── Test.pdf<br>├── Test.pdftex.aux<br>├── test.png<br>├── modules<br>│   └── ztikzmodule.gnuplot.tex<br>├── Test.pvt<br>└── Test.tpf<br></code></pre></td></tr></table></figure><h3 id="official-recommandation-solution">official recommandation(solution)</h3><p>The archieve this goal, you can create a folder <code>modules</code> in the <code>./testfiles/support</code> that is the default value of variable <code>testsuppdir</code> like that:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">./testfiles<br>├── Other-Test.lvt<br>├── Test.pvt<br>└── support<br>    └── modules<br>        └── ztikzmodule.gnuplot.tex<br></code></pre></td></tr></table></figure><p>the the directory tree of folder <code>modules</code> will be kept in the <code>./build/test/</code> folderm and the module loading will work correctly.</p><blockquote><p>In this way, you need an additional copy of your original support files.</p></blockquote><h3 id="other-methods">other methods</h3><p>Another methods will be:</p><ul><li>(<strong>Not recommanded – no tree kept</strong>) change you module-loading command to be:</li></ul><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\file_if_exist_input:nF</span> &#123;ztikzmodule.<span class="hljs-params">##1</span>.tex&#125; &#123;<br>    ....<br>&#125;<br></code></pre></td></tr></table></figure><p>that is to remove the top level folder <code>modules/</code> in the command. Then you can put the <code>ztikzmodule.gnuplot.tex</code> in the default <code>./support/</code> folder  directly(<strong>need an additional copy</strong>) or specifies the folder contains this module(<strong>no copy needed</strong>) and set it as support file by:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- supportdir = maindir..&quot;/support&quot;</span><br>checksuppfiles = &#123;<br>    <span class="hljs-string">&quot;ztikzmodule.gnuplot.tex&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>(<strong>personal recommanded – tree kept</strong>) set the variable <code>testuppdir</code> to you folder the contains your modules and style(class) file, like <code>./code</code> (<strong>no additional copy needed</strong>). Assume that your package/class(module) structure will be:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">./&lt;module name&gt;/code<br>├── modules<br>│   ├── ztikzmodule.cache.tex<br>│   ├── ztikzmodule.gnuplot.tex<br>│   ├── ztikzmodule.python.tex<br>│   ├── ztikzmodule.wolfram.tex<br>│   └── ztikzmodule.zdraw.tex<br>└── ztikz.sty<br></code></pre></td></tr></table></figure><p>Then set this variable in your <code>build.lua</code>:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">testsuppdir = maindir..<span class="hljs-string">&quot;/&lt;module name&gt;&quot;</span>..<span class="hljs-string">&quot;/code&quot;</span> <br></code></pre></td></tr></table></figure><p>Compilt it by <code>l3build save PVT</code>, then the structure in <code>./build/test/</code> will be:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">../build/test<br>├── ascii.tcx<br>├── modules<br>│   ├── ztikzmodule.cache.tex<br>│   ├── ztikzmodule.gnuplot.tex<br>│   ├── ztikzmodule.python.tex<br>│   ├── ztikzmodule.wolfram.tex<br>│   └── ztikzmodule.zdraw.tex<br>├── PVT.log<br>├── PVT.pdf<br>├── PVT.pdftex.aux<br>├── PVT.pvt<br>├── PVT.tpf<br>├── ztikz_output<br>└── ztikz.sty<br></code></pre></td></tr></table></figure><h2 id="Reference">Reference</h2><ul><li><a href="https://github.com/latex3/l3build">l3build: A testing and building system for LaTeX</a></li><li><a href="https://github.com/pablgonz/demopkg-jw">demo pkg: How to use l3build and not die trying :)</a></li><li><a href="https://github.com/lvjr/tabularray/">tabularray: Typeset tabulars and arrays with LaTeX3</a></li><li><a href="https://tex.stackexchange.com/q/329743/294585">Example for test files using l3build</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>l3build</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Delete Git commit</title>
    <link href="/2024/08/25/git_commit_delete/"/>
    <url>/2024/08/25/git_commit_delete/</url>
    
    <content type="html"><![CDATA[<h2 id="操作">操作</h2><p>git 仓库删除所有提交历史记录，成为一个干净的新仓库,把旧项目提交到 GitHub 上，但是会有一些历史记录，这些历史记录中可能会有项目密码等敏感信息。如何删除这些历史记录，形成一个全新的仓库，并且保持代码不变呢？</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.Checkout<br>git checkout --orphan latest_branch<br><br>2. Add all the files<br>git add -A<br><br>3. Commit the changes<br>git commit -am &quot;commit message&quot;<br><br>4. Delete the branch<br>git branch -D master<br><br>5.Rename the current branch to master<br>git branch -m master<br>   <br>6.Finally, force update your repository<br>git push -f origin master<br></code></pre></td></tr></table></figure><h2 id="说明">说明</h2><p>但是此时本地的 git commit 记录仍然存在，对应的 <code>.git</code> 文件仍然很大. 如果你的仓库托管在 Github 上，那么这个仓库的 <code>activity</code> 上仍然会显示你的提交历史记录。如果你不想让别人看到你的提交历史记录，那么你可能需要向 Github 发起一个请求，请求他们帮你清除提交历史记录。</p><blockquote><p>不想这么麻烦，删库吧 :-)</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Academic Pages</title>
    <link href="/2024/08/25/Academic_Pages/"/>
    <url>/2024/08/25/Academic_Pages/</url>
    
    <content type="html"><![CDATA[<h2 id="基本环境配置">基本环境配置</h2><p>需要 <code>jekyll</code>, 一个很重要的前置工作是安装一个很重要的  <a href="http://rubyinstaller.org/add-ons/devkit/">DevKit</a>. 这个就相当于是工具链，否则你的 <code>jekyll</code> 可能会安装失败. 但是安装 <code>DevKit</code> 的前置条件是安装一个 <code>MSYS2</code> (感觉我的安装过好多次这个<code>类 Unix shell</code> 环境了). 完成上述步骤之后，按照: <a href="https://jekyllrb.com/">官网</a> 安装即可. 这里还是再抄一次:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">gem install bundler jekyll<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">check jekyll status</span><br>jekyll -v <br></code></pre></td></tr></table></figure><p>配置好这些环境后，安装本项目的依赖, 使用命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bundle install<br></code></pre></td></tr></table></figure><h2 id="启动项目">启动项目</h2><p>官方的命令无法启动此项目，请使用如下命令启动项目:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bundle exec jekyll serve -l -H localhost<br></code></pre></td></tr></table></figure><p>但是你仍有可能会遇到一个 bug，说你的 <code>time-zone</code> 有问题，可以参见: <a href="https://github.com/tzinfo/tzinfo/wiki/Resolving-TZInfo::DataSourceNotFound-Errors">time-zone</a>. 其实就是把当前项目文件下的 <code>Gemfile</code> 中添加对应的语句:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gem &#x27;tzinfo-data&#x27;, platforms: [:mingw, :mswin, :x64_mingw]<br></code></pre></td></tr></table></figure><p>然后就可以正常启动项目了.</p>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Academic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dimension in LaTeX</title>
    <link href="/2024/08/25/latex_glue/"/>
    <url>/2024/08/25/latex_glue/</url>
    
    <content type="html"><![CDATA[<h2 id="距离的使用">距离的使用</h2><p>除了默认已经定义的距离外，可以使用:</p><ul><li><code>\hspace&#123;&lt;length&gt;&#125;</code>: 产生可断行的距离, 在某些只有一边有内容的地方（如强制断行的行首），LaTeX 会忽略 <code>\hspace</code> 产生的距离</li><li><code>\hspace*&#123;&lt;length&gt;&#125;</code>: 阻止距离被忽略</li></ul><p>LaTeX 中预定义的一些长度可以使用 <code>\setlength</code> 来修改, 如:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\parindent</span>&#125;&#123;4em&#125;<br></code></pre></td></tr></table></figure><p>上述的代码将段落的缩进设置为4em.</p><h2 id="glue">glue</h2><p>单词间的空格、标点后的距离都是橡皮长度，这样才能保证在分行时行末的对齐，因此在定义经常出现的距离时应该使用橡皮长度. 上述的<code>\hspace</code> 就可以产生随内容可伸缩的距离:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\hspace</span>&#123;2em plus 1em minus 0.25em&#125;<br></code></pre></td></tr></table></figure><p>有一种特殊的橡皮长度<code>\fill</code>，它可以从零开始无限延伸, 可以用它来把几个内容均匀排列在一行之中.</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125; = <span class="hljs-keyword">\hfill</span><br></code></pre></td></tr></table></figure><p><code>\fill</code> 命令可以和 <code>\stretch</code> 命令一起使用，如:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs LaTeX">left<span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\stretch</span>&#123;2&#125;&#125; <span class="hljs-built_in">$</span>2/3<span class="hljs-built_in">$</span> <span class="hljs-keyword">\hspace</span>&#123;<span class="hljs-keyword">\fill</span>&#125;right<br></code></pre></td></tr></table></figure><p>上述代码 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi mathvariant="normal">/</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">2/3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2/3</span></span></span></span> 左侧的空白是右侧空白的两倍.还有两个比较有意思的命令:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\hrulefill</span><br><span class="hljs-keyword">\dotfill</span><br></code></pre></td></tr></table></figure><p>分表表示水平线和点的填充.</p><h2 id="Phantom">Phantom</h2><p>LaTeX 有预定义的垂直支架 <code>\strut</code>，占有当前字号大小的<strong>高度</strong>和<strong>深度</strong>. 有时也可以使用长或宽为零的标尺盒子来表示任意大小的支架. 即 <code>\rule&#123;0pt&#125;&#123;4em&#125;</code> 表示一个4em高的<code>strut</code>.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>glue distance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Basic Makefile Tutorial</title>
    <link href="/2024/08/25/Makefile_Tutorial/"/>
    <url>/2024/08/25/Makefile_Tutorial/</url>
    
    <content type="html"><![CDATA[<h2 id="基本概念">基本概念</h2><p>核心: make使用文件的创建和修改时间来判断是否应该更新一个目标文件</p><p>一个基本的 Makefile 文件的基本书写格式为:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># 目标文件: 依赖文件1 依赖文件2</span><br><span class="hljs-comment"># 1. Tab开头的是命令</span><br><span class="hljs-comment"># 2. make执行时，默认执行第一条规则. </span><br><span class="hljs-comment"># 把默认执行的规则放第一条，其他规则的顺序是无关紧要的，因为make执行时自动判断依赖</span><br><span class="hljs-section">x.txt: m.txt c.txt</span><br>cat m.txt c.txt &gt; x.txt<br><br><span class="hljs-section">m.txt: a.txt b.txt</span><br>cat a.txt b.txt &gt; m.txt<br></code></pre></td></tr></table></figure><h2 id="伪目标">伪目标</h2><p>常用于没有依赖的目标, 比如我们常用的 clean 等, 一个示例如下:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">clean:</span><br>rm -f m.txt<br>rm -f x.txt<br></code></pre></td></tr></table></figure><p>由于和前面的规则不同，所以执行 <code>clean</code> 这以目标时，需要使用命令: make clean. 有时候为了防止这种为目标出现一些意想不到的结果，可以对伪目标进行严格的声明，如下:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>:clean</span><br><span class="hljs-section">clean:</span><br>    find $&#123;DIR_OBJ&#125; -name *.o -exec rm -rf &#123;&#125;<br></code></pre></td></tr></table></figure><p>一些注意点如下:</p><ul><li>可以使用 <code>\</code> 把一行语句拆成多行，便于浏览</li><li>多条语句可以用 <code>&amp;&amp;</code> 或者是 <code>;</code> 连接</li></ul><h2 id="错误捕捉">错误捕捉</h2><p>忽略错误，继续执行后续命令，可以在需要忽略错误的命令前加上<code>-</code>：</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ignore_error:</span><br>-rm zzz.txt<br>echo &#x27;ok<br></code></pre></td></tr></table></figure><h2 id="隐式规则">隐式规则</h2><p><code>make</code> 针对 C、C++、ASM、Fortran 等程序内置了一系列隐式规则， 所以类似于 <code>xyz.o</code> 这种规则可以不写，make 会自动创建如下的规则:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">xyz.o: xyz.c</span><br>cc -c -o xyz.o xyz.c<br></code></pre></td></tr></table></figure><h2 id="变量">变量</h2><p><strong>定义:</strong> 变量定义用 <code>变量名 = 值</code> 或者 <code>变量名 := 值</code>，通常变量名全大写。引用变量用 <code>$(变量名)</code>，非常简单。</p><p>还有一些内置的变量, 如 CC, CFLAGS 等，但是我们仍然可以重定义:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">CC</span> = gcc<br><span class="hljs-attr">CFLAGS</span> = -g -Wall -I<span class="hljs-variable">$&#123;DIR_INC&#125;</span><br></code></pre></td></tr></table></figure><h2 id="模式替换">模式替换</h2><p>如果一条规则依赖的文件过多，那么就可以使用通配符的形式进行规则的编写. 比如下面的一个例子:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-comment"># $(wildcard *.c) 列出当前目录下的所有 .c 文件: hello.c main.c</span><br><span class="hljs-comment"># 用函数 patsubst 进行模式替换得到: hello.o main.o</span><br>OBJS = <span class="hljs-variable">$(<span class="hljs-built_in">patsubst</span> %.c,%.o,$(<span class="hljs-built_in">wildcard</span> *.c)</span>)<br>TARGET = world.out<br><br><span class="hljs-variable">$(TARGET)</span>: <span class="hljs-variable">$(OBJS)</span><br>cc -o <span class="hljs-variable">$(TARGET)</span> <span class="hljs-variable">$(OBJS)</span><br><br><span class="hljs-section">clean:</span><br>rm -f *.o <span class="hljs-variable">$(TARGET)</span><br></code></pre></td></tr></table></figure><h2 id="自动变量">自动变量</h2><p>一些常见的自动变量如下:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">world.out: hello.o main.o</span><br>@echo &#x27;$<span class="hljs-variable">$@</span> = <span class="hljs-variable">$@</span>&#x27; <span class="hljs-comment"># 变量 $@ 表示target</span><br>@echo &#x27;$<span class="hljs-variable">$&lt;</span> = <span class="hljs-variable">$&lt;</span>&#x27; <span class="hljs-comment"># 变量 $&lt; 表示第一个依赖项</span><br>@echo &#x27;$<span class="hljs-variable">$^</span> = <span class="hljs-variable">$^</span>&#x27; <span class="hljs-comment"># 变量 $^ 表示所有依赖项</span><br>cc -o <span class="hljs-variable">$@</span> <span class="hljs-variable">$^</span><br></code></pre></td></tr></table></figure><p>执行结果输出如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$@</span> = world.out<br>$&lt; = hello.o<br>$^ = hello.o main.o<br>cc -o world.out hello.o main.o<br></code></pre></td></tr></table></figure><h2 id="一些内置函数">一些内置函数</h2><p>make 内置的一些函数在必要的时候可以加大的简化我们的 makefile 文件编写难度:</p><ul><li>wildcard, 使用的是 <code>*</code></li><li>patsubst, 使用的是 <code>%</code></li><li>shell, 返回一个shell命令执行结果</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>makefile</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LaTeX Font</title>
    <link href="/2024/08/24/latex_font/"/>
    <url>/2024/08/24/latex_font/</url>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>本篇文章的绝大部分内容均来自于: <a href="https://book.douban.com/subject/24703731/"><strong>刘海洋: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 入门</strong></a>. 这里仅仅只是本人的一个摘要和整理, 部分内容是原文的抄袭</p>          </div><h2 id="字体变体">字体变体</h2><p>我们常用的 <code>\bfseries\itshape</code> 其实表示的就是字体变体，然而在老版本中不同轴上的变体不能合并，但是在<code>NFSS(新字体选择方案)</code>中就可以用不同轴上的变体进行融合.那么有那些轴呢? 可以参见: <a href="https://www.zpding.tech/2024/06/14/font_warning/">读懂LaTeX的 font warning</a>.</p><p>因为中文的变体一般是很少的，所以可以把字体的变体用另一种字体来代替。这也就是中文的粗体变为黑体的原因了.</p><blockquote><p>当可缩放的矢量字体流行起来以后，字体只有一款，通过缩放达到不同的尺寸，字号也就经常作独立于字体的单独性质了。</p></blockquote><p>有一个比较有用的宏包: <code>fonttable</code>, 可以用于输出字体的符号表: 使用方法如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>&#123;fonttable&#125;<br><span class="hljs-keyword">\fonttable</span>&#123;&lt;fontname&gt;&#125;<br><span class="hljs-keyword">\xfonttable</span>&#123;&lt;encoding&gt;&#125;&#123;&lt;family&gt;&#125;&#123;&lt;series&gt;&#125;&#123;&lt;shape&gt;&#125;<br></code></pre></td></tr></table></figure><h2 id="强调字体">强调字体</h2><p>我们常用的<code>\emph</code>，<code>\underline</code> 其实是强调命令，而非其他. 此时可以引用一个比较实用的宏包: <code>ulem</code>. <code>CJKfntef</code> 宏包也对汉字提供了类似的功能,同时也进行了一些扩充. 可以使用 <code>fntef</code> 选项调用 <code>CJKfntef</code>，此时 <code>\emph</code> 的定义不会被改变为下画线格式。同时也可以使用 <code>\CTEXunderline</code> 等以<code>\CTEX</code> 开头的命令代替以 <code>\CJK</code> 开头的命令.</p><h2 id="宏包内置字体命令">宏包内置字体命令</h2><p>部分的字体宏包可能还内置了一部分的字体命令，用于设置字体的某个属性，这里以字体宏包 <code>Alegreya </code>为例，这个中提供了：</p><ul><li><code>\ AlegreyaExtraBold</code>: 提供<code>extra bold</code>字重</li><li><code>\AlegreyaSansLight</code>: 提供<code>sans</code>族，<code>light</code>字重</li></ul><p>所以在进行字体某个轴上的属性设置时，有必要参见对应的宏包说明。其实这写命令在此宏包中的声明为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% package: Alegreya.sty</span><br><span class="hljs-keyword">\newfontfamily</span><span class="hljs-keyword">\AlegreyaExtraBold</span><br>  [ Numbers = &#123;<span class="hljs-keyword">\Alegreya@figurealign</span>,<span class="hljs-keyword">\Alegreya@figurestyle</span>&#125;,<br>    UprightFont    = *-ExtraBold ,<br>    ItalicFont     = *-ExtraBoldItalic ,<br>    BoldFont       = *-ExtraBold ,<br>    BoldItalicFont = *-ExtraBoldItalic ,<br>  ]&#123;Alegreya&#125;<br><br><span class="hljs-comment">% package: AlegreyaSans.sty</span><br><span class="hljs-keyword">\newfontfamily</span><span class="hljs-keyword">\AlegreyaSansLight</span><br>  [ Numbers = &#123;<span class="hljs-keyword">\AlegreyaSans@figurealign</span>,<span class="hljs-keyword">\AlegreyaSans@figurestyle</span>&#125;,<br>    UprightFont    = *-Light ,<br>    ItalicFont     = *-LightItalic ,<br>    BoldFont       = *-Light ,<br>    BoldItalicFont = *-LightItalic ,<br>  ]&#123;AlegreyaSans&#125;<br></code></pre></td></tr></table></figure><h2 id="TDS-字体">TDS 字体</h2><p>想要使用一些新的字体，又不想安装，不同也不想在声明字体组时写上对应的 <code>Path=./Fonts/</code> 之类的，那么就可以利用 TeXLive 的 TDS (TeX Directory Structure) 结构， 把字体放在如下的文件中:</p><ul><li><code>~/texmf/fonts/truetype/</code>: 针对 TrueType 字体，也就是以 <code>.ttf</code> 结尾的字体</li><li><code>~/texmf/fonts/opentype/</code>: 针对 OpenTrueType 字体，也就是以 <code>.otf</code> 结尾的字体</li></ul><p>然后运行命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo fc-cache -fsv<br></code></pre></td></tr></table></figure><p>刷新字体缓存，之后你就可以不用写这个路径了, 就可以像字体放在项目文件夹那样调用了, 如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\newfontfamily</span>&#123;<span class="hljs-keyword">\Cinzel</span>&#125;&#123;CinzelRegular.ttf&#125;[<br>  BoldFont=CinzelBold.ttf,<br>  ItalicFont=SabonItalic.ttf<br>]<br></code></pre></td></tr></table></figure><p>这样有什么什么好处呢? 我个人觉得可以避免字体混乱，毕竟我把字体放在了当前用户（也就是我自己）的目录下.</p><p>参考文章:</p><ul><li><a href="https://tex.stackexchange.com/a/359220/294585">Load font from package directory using fontspec</a></li><li><a href="https://tex.stackexchange.com/a/257242/294585">Using the TeX Live fonts in xelatex</a></li><li><a href="https://tex.stackexchange.com/questions/361595/xelatex-fc-list-fc-cache-problem">XeLaTeX, fc-list, fc-cache problem</a></li></ul><h2 id="补充">补充</h2><p>其实你在运行刷新字体缓存的命令时，可以看到有如下的输出:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">Font directories:<br>        /usr/share/fonts<br>        /usr/local/share/fonts<br>        /usr/share/fonts/100dpi<br>        /usr/share/fonts/75dpi<br>        /usr/share/fonts/Emoji<br>        /usr/share/fonts/OTF<br>        /usr/share/fonts/TTF<br>        /usr/share/fonts/Windows_Fonts<br>        /usr/share/fonts/adobe-source-code-pro<br>        /usr/share/fonts/cantarell<br>        /usr/share/fonts/encodings<br>        /usr/share/fonts/gsfonts<br>        /usr/share/fonts/noto-fonts-cjk-vf<br>        /usr/share/fonts/util<br>        /usr/share/fonts/Windows_Fonts/YaHei-Consolas-Hybrid-1.12<br>        /usr/share/fonts/encodings/large<br></code></pre></td></tr></table></figure><p>说明 <code>fontspec</code> 宏包会在上面的路径中去寻找字体.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NFSS</tag>
      
      <tag>glue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Config Neovim to IDE</title>
    <link href="/2024/08/24/neovim_IDE/"/>
    <url>/2024/08/24/neovim_IDE/</url>
    
    <content type="html"><![CDATA[<h2 id="编辑器-IDE">编辑器/IDE</h2><p>我们所说的编辑器和IDE到底有怎样的区别？而被人常常说 Neovim 只是一编辑器，而不是IDE。在我看来一个IDE至少应该是具有以下特点的编辑器：</p><ul><li><code>LSP/代码补全</code>，这个就需要相应的的LSP，也就是Language Server Protocol</li><li><code>Highlight/代码高亮</code>, 虽然说这个功能Neovim自带了，但是很多的时候，它的高亮结果并不是那么的理想，亦或者是说时错误的。于是就需要相应的 Highlight 插件.</li><li><code>定义跳转</code>，很多时候我们都需要在多个文件之间进行跳转.</li><li><code>Formatter/代码格式化</code>，虽然说很多的大型工程都有对于国内的代码规范。我这里就狭义的理解为最普通的代码格式化，比如说代码的缩进，代码的换行，多余的空格控制等等.要在Neovim 中实现对于的Fromat功能，就需要对应的 Formatter，比如针对于Python的Black，针对于C++的Clang-format等等.</li><li><code>Linter/代码检查</code>，其实就是很简单的在我们写代码的时候，进行一些基本的静态检查.比如说变量未定义，函数未定义, 类型不匹配等。这个时候就需要对应的Lint插件，比如说针对于Python的Pylint，针对于C++的Clang-tidy等等.</li><li><code>Dap/调试</code>, 就是Debug，比如加一些断点，单步调试等等.</li><li>…</li></ul><p>其实 IDE 具有的东西还不只上面这些，这里只是例举了一些常用的，必备的功能. 下面就来说一说这些东西怎么配置;</p><h2 id="Neovim-插件">Neovim 插件</h2><p>以下的内容均是基于Neovim社区现有的插件进行配置, 我使用的插件管理器是 lazyvim, 淡然你也可以使用其他的插件管理器，比如说vim-plug, dein.vim等等.</p><blockquote><ul><li>没有必要太纠结插件管理器，我选lazyvim 也不是因为它的lazy load，只是觉得配置起来比较方便而已.</li><li>插件的 lazy load 其实并不是那么的重要，必要的插件在你需要的时候还是会被加载的，所以不必太纠结这个问题.</li></ul></blockquote><p>我的Neovim配置文件结构如下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">├── init.lua<br>├── lazy-lock.json<br>└── lua<br>    ├── config<br>    │   ├── lazy.lua<br>    │   └── options.lua<br>    ├── plugins<br>    │   ├── code.lua<br>    │   ├── copilot.lua<br>    │   ├── EXPERIMENT.lua<br>    │   ├── luarocks.lua<br>    │   ├── note.lua<br>    │   ├── scheme.lua<br>    │   └── whick-key.lua<br>    └── snippets<br>        ├── luasnip<br>        │   ├── all.lua<br>        │   ├── LuaSnipTool.lua<br>        │   └── tex.lua<br>        └── vscode<br>            ├── all.json<br>            ├── latex.jsonc<br>            ├── lua.json<br>            ├── markdown.jsonc<br>            └── package.json<br></code></pre></td></tr></table></figure><h2 id="配置文件">配置文件</h2><p>我的所有东西都是从头开始写的，所以结构可能不想官方推荐的那样, 仅供参考. 上述各个文件夹包含的内容:</p><ul><li><code>init.lua</code>: Neovim 的初始化文件，我在这个里面拉起来了所有的配置文件.</li><li><code>lua\config</code>: 这个里面是一些Lazyvim 本体和一份与插件无关的配置文件.</li><li><code>lua\plugins</code>: 这个里面是所有加载的插件，我分为了几个大类:<ul><li><code>code.lua</code>: 代码相关的插件，比如说LSP, Highlight</li><li><code>scheme.lua</code>: 主题，语法高亮以及一些UI的插件.</li><li><code>note.lua</code>: 用于书写笔记相关的插件，如 <code>Markdown</code>, <code>TeX</code>, <code>Typst</code>等.</li><li><code>which-key.lua</code>: 显示快捷键的插件，当然，如果你熟悉自己的快捷键，这个插件可以不用.</li><li><code>copilot.lua</code>: Github copilot AI 自动补全插件. (需要你自己申请，但是配置起来是很简单的)</li><li><code>luarocks.lua</code>: 必要的用于插件管理的插件.</li></ul></li><li><code>lua\snippets</code>: 代码片段，我这里分为了两个大类，每一个语言的snppets对应的文件:<ul><li><code>luasnip</code>: 用 LuaSnip 写的代码片段, 这里我使用的 <code>LuaSnip</code> 插件个人感觉比 vscode 自带的Snippets 强大.</li><li><code>vscode</code>: 这里我是直接从我以前VSCode中导出的，因为我不行再写一遍.</li></ul></li></ul><blockquote><ul><li>目前我把 <code>Formatter</code>, <code>Linter</code>等的配置放入了 <code>EXPERIMENT.lua</code> 中，因为我认为这部分还不够的稳定.</li><li>对于Vscode 的sniipets，对于的文件夹中必须要有对应的 <code>package.json</code> 文件，否则对应的Vscode snippets无法加载.</li><li>对于 LuaSnip，对应的snippets 的文件名必须是合法的文件类型, 如 <code>tex.lua</code>, <code>markdown.lua</code>等等.</li></ul></blockquote><h2 id="安装">安装</h2><p>在Linux下直接新建目录: <code>~/.config/nvim</code> ，我的这个目录结构大致如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">~/.config/nvim<br>├── init.lua<br>├── lazy-lock.json<br>└── lua<br>    ├── config<br>    ├── plugins<br>    └── snippets<br></code></pre></td></tr></table></figure><p>然后切换到这个目录，也就是  <code>~/.config/nvim</code> , 运行命令 <code>nvim</code>, 之后 nvim 就会自动安装 lazyvim  这插件管理器了。</p><blockquote><p>如果你之前安装过 nvim ，请考虑删除 <code>~/.local/share/nvim</code>  这个文件夹. 不然可能会对后续的安装有影响.</p></blockquote><h3 id="Mason">Mason</h3><p>其实对于 LSP, Linter, Formatter 等的东西，完全可以手动安装的，无非就是一个可执行文件嘛, 你自己安装好之后，把这些东西对应的可执行文件的路径加入到 <code>Path</code> 中就可以了. 但是我还是推荐新手使用 <code>Mason</code> 这个插件，它可以帮助你自动安装这些东西，以及对应的依赖.</p><div class="note note-danger">            <p>在 Windows 下，你可以需要把 Mason 的那个 <code>bin</code> 路径加入到 <code>Path</code> 中，否则 Mason 安装的这些Linter, Formatter 可能就无法正常工作.</p>          </div><p>虽然说 Mason 提供给了很多的安装插件，但是部分的 Linter, Formatter 可能并没有提供，这个时候你就需要自己手动安装了. 比如说我需要使用的 <code>chktex</code> ，这个东西在 Mason 中并没有提供，所以我就需要自己手动安装了. 但是我使用的是 <code>nvim-lint</code>这个插件，它提供了一个 <code>chktex</code> 的插件，所以我就不需要自己手动安装了.</p><blockquote><p>如果你想要配置对应的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext><mn>3</mn></mrow><annotation encoding="application/x-tex">\LaTeX 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span><span class="mord">3</span></span></span></span> 环境的话，目前还没有比较好的 LSP，TeXLab 对此好像还没有动静，更不用说对应的 Linter 了. 在这里还是推荐使用 vscode 的 LaTeX Workshop 插件，它提供了比较好的 LaTeX 3 的 LSP 支持.</p></blockquote><p>对于新手来说，你把 Mason 当作一个专门用于安装 Dap, Linter, Formatter, LSP 的工具就行了. 当你安装好对应的插件后，你就可以在你的配置文件中配置对应的插件了.</p><blockquote><p>如果你只是在 Mason 中安装了这个插件，但是并没有进行相应的配置或者是调用，它们也是不会生效的. 这里我是用的是 <code>nvimdev/guard.nvim</code> + <code>mfussenegger/nvim-lint</code> 这两个插件. 其中前者主要是用于格式化代码，也就是 Formatter，后者主要是用于检查代码，也就是 Linter. (主要是后者提供的 linter 比前者丰富，所以我才会如此配置.)</p></blockquote><p>如果你想手动配置 LSP，那么可以参见: <a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md">neovim-lspconfig</a>, 这个里面有详细的配置说明. 说明了哪些语言应该配置什么样的LSP.</p><h3 id="Tree-sitter">Tree-sitter</h3><p>这个 <code>Tree-sitter</code> 是用于解析文件，然后提供代码高亮的。但是这个的安装可能优点麻烦, 建议把对应的编译器改为 <code>zig</code>, 设置如下:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">config</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_, opts)</span></span><br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;nvim-treesitter.install&#x27;</span>).compilers = &#123;<span class="hljs-string">&quot;zig&quot;</span>, <span class="hljs-string">&quot;clang&quot;</span>, <span class="hljs-string">&quot;gcc&quot;</span>&#125;<br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;nvim-treesitter.install&quot;</span>).prefer_git = <span class="hljs-literal">true</span><br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;nvim-treesitter.configs&quot;</span>).setup(opts)<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h3 id="其余插件">其余插件</h3><p>由于目前 lazyvim 还是挺流行的，所以很多的插件仓库中都有对应的 lazyvim 的配置，你只需要稍微改一改就能用了.</p><h2 id="配置">配置</h2><h3 id="snippets">snippets</h3><p>什么是snippets？这个你自己去网上了解. 目前我使用的是 <code>LuaSnip</code> 插件，一方面它可以复用我以前在 Vscode 中已经写好的 snippets，另一方面，它也有自己的一套书写 snippets 的语法, 比vscode的强大很多. 比如它提供的 Node 类型就非常的多:</p><ul><li><code>insert node</code>: 插入节点</li><li><code>choice node</code>: 选择节点</li><li><code>function node</code>: 函数节点</li><li><code>text node</code>: 文本节点</li><li><code>dynamic node</code>: 动态节点</li><li><code>snippet node</code>: 代码片段节点</li><li><code>restore node</code>: 恢复节点</li><li>…</li></ul><p>有了这些类型的节点，再加上 lua 本身的特性，你就可以写出一些非常强大的 snippets 了. 详细的教程可以参见:<a href="https://github.com/L3MON4D3/LuaSnip/blob/master/DOC.md">LuaSnip</a>.一些很 cool 的snippets 可以参见: <a href="https://github.com/L3MON4D3/LuaSnip/wiki/Cool-Snippets">awesome-snippets</a>.</p><p>有一个需要说明的是，文件 <code>require</code> 时的路径是相对于 <code>./nvim/lua</code> 文件夹的. 比如上述的配置结构下我的加载 snippets 的命令为:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;luasnip.loaders.from_vscode&quot;</span>).lazy_load(&#123;paths = <span class="hljs-string">&quot;./lua/snippets/vscode&quot;</span>&#125;)<br><span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;luasnip.loaders.from_lua&quot;</span>).lazy_load(&#123;paths = <span class="hljs-string">&quot;./lua/snippets/luasnip&quot;</span>&#125;)<br></code></pre></td></tr></table></figure><h3 id="plugin-spec">plugin spec</h3><p>在你下载插件的时候，其实你有一系列的东西可以配置，参见如下的一个示例:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- terminal: toggleterm.nvim</span><br>&#123;<br>  <span class="hljs-string">&#x27;akinsho/toggleterm.nvim&#x27;</span>, <br>  version = <span class="hljs-string">&quot;*&quot;</span>, <br>  event = <span class="hljs-string">&quot;VeryLazy&quot;</span>,<br>  opts = &#123;<br>    direction = <span class="hljs-string">&#x27;float&#x27;</span>,<br>    shell = <span class="hljs-string">&quot;pwsh.exe&quot;</span>,<br>    float_opts = &#123; border=<span class="hljs-string">&quot;curved&quot;</span> &#125;<br>  &#125;,<br>  <span class="hljs-built_in">config</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_, opts)</span></span><br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;toggleterm&quot;</span>).setup(opts)<br>  <span class="hljs-keyword">end</span>,<br>  keys = &#123;<br>    &#123;<span class="hljs-string">&#x27;&lt;leader&gt;t&#x27;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;ToggleTerm&lt;CR&gt;&quot;</span>, mode = <span class="hljs-string">&quot;n&quot;</span>, noremap = <span class="hljs-literal">true</span>, desc = <span class="hljs-string">&quot;toggle terminal&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;jj&#x27;</span>,        <span class="hljs-string">&quot;&lt;C-\\&gt;&lt;C-n&gt;&quot;</span>,         mode = <span class="hljs-string">&quot;t&quot;</span>, noremap = <span class="hljs-literal">true</span>, desc = <span class="hljs-string">&quot;enter normal mode in terminal&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;&lt;Esc&gt;&#x27;</span>,     <span class="hljs-string">&quot;&lt;C-\\&gt;&lt;C-n&gt;:q&lt;CR&gt;&quot;</span>,   mode = <span class="hljs-string">&quot;t&quot;</span>, noremap = <span class="hljs-literal">true</span>, desc = <span class="hljs-string">&quot;exit terminal mode&quot;</span>&#125;,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>上述的配置中关于 lazy_load 的可选配置有:</p><ul><li><code>event</code>: 在什么事件发生的时候加载这个插件, 可以注意一下这个 <code>VeryLazy</code> 事件.</li><li><code>cmd</code>: 在某个命令运行时加载这个插件</li><li><code>ft</code>: 在某个文件类型加载这个插件</li><li><code>keys</code>: 在某个快捷键运行时加载这个插件</li></ul><p>关于 nvim 事件，可以参见: <a href="https://vi.stackexchange.com/a/36593/48595">What is the order of WinEnter, BufEnter, BufRead, Syntax, FileType events?</a></p><p>对于插件的选项配置，可以放到 <code>opts</code>  这个 field 中, lazyvim 会自动把这个 <code>opts</code> 传递给对应插件的 <code>setup()</code> 函数,但是部分的插件并没有提供对应的 <code>setup()</code> 函数，这个时候你就需要自己写一个 <code>config</code> 函数，然后在这个函数中进行配置.</p><p>更多详细的配置，可以参见: <a href="https://lazy.folke.io/">lazyvim</a></p><h3 id="terminal-emulator">terminal emulator</h3><p>这里我必须要说一些关于 terminal emulator 的事情，因为很多你认为是 Neovim bug 的时候，其实是 terminal emulator 的问题. 还有一个 <strong>日经</strong> 问题：为什么我的Neovim底部有一个空白的行？这个问题多半就是你的 terminal emulator 的问题.针对与这个问题，如果使用的是 <code>wezterm</code>, 那么可以在配置文件中加入如下的配置:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">config</span>.window_decorations = <span class="hljs-string">&quot;INTEGRATED_BUTTONS|RESIZE&quot;</span><br></code></pre></td></tr></table></figure><blockquote><p>当然，这个问题也可能是你的 cmdheight 的问题，亦或者是你的终端字体大小问题.</p></blockquote><h2 id="最终效果">最终效果</h2><p>我的 Neovim 最后的配置效果如下:</p><p><img src="/img/Neovim_IDE/NeoIDE.jpg" alt="Final Neovim"></p><p>如果你想要抄我的配置，那么请重点看 <code>EXPERIMENT.lua</code> 里面的依赖，尤其是那些 formatter 和 linter. 最好安装好如下应用:</p><ul><li><p>luarocks</p></li><li><p>tree-sitter CLI</p></li><li><p>clang (for clang-format)</p></li><li><p>zig (for compile parser,  仅针对 windows， 在 Linux上使用 gcc 或者是 clang 都可以)</p></li><li><p>node, yarn (install parser)</p></li><li><p>typos (type check)   如果你没有安装 <code>typos</code> 那么在保存文件的时候就会报错:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">Error detected while processing BufWritePost Autocommands for &quot;*&quot;:<br>Error running typos: ENOENT: no such file or directory<br></code></pre></td></tr></table></figure></li><li><p>selene ( lua  linter) ,   如果没有安装同样会报错:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">Error detected while processing BufWritePost Autocommands for &quot;*&quot;:<br>Error running selene: ENOENT: no such file or directory<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>Neovim</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Neovim</tag>
      
      <tag>IDE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Syntax of Haskell</title>
    <link href="/2024/07/24/Haskell_syntax/"/>
    <url>/2024/07/24/Haskell_syntax/</url>
    
    <content type="html"><![CDATA[<h2 id="pattern-match">pattern match</h2><h3 id="definition">definition</h3><p>By define a function, we can map some type to another type. Pattern match can apply to any data type: <code>Int</code>, <code>Char</code>, <code>String</code>, etc.</p><p>A simple patter match case, mapping a type belong to <code>Integral</code> to <code>String</code> (in other word, it is to match a varible whoes type that belong to <code>Integral</code>):</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-comment">-- pattern define</span><br><span class="hljs-title">lucky</span> :: (<span class="hljs-type">Integral</span> a) =&gt; a-&gt;<span class="hljs-type">String</span><br><span class="hljs-title">lucky</span> <span class="hljs-number">7</span> = <span class="hljs-string">&quot;you are so lucky&quot;</span> <br><span class="hljs-title">lucky</span> x = <span class="hljs-string">&quot;you are not lucky&quot;</span><br></code></pre></td></tr></table></figure><p><strong>Notation:</strong></p><ul><li>any typevariable like <code>a</code>, <code>b</code>, …, <code>z</code> or <code>abc</code>, <code>bcd</code>; Then patter will match any numbers but only numbers, for the <code>Integral</code> in function declaration. This pattern can be also used in other function type, like <code>Char -&gt; String</code>. Remember to add a catch-all pattern in case of program crash.</li><li>Patterns are checked form top to the bottom.</li></ul><p>If we writing <code>lucky 'a'</code>, it will throw error:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">ghci</span>&gt; lucky <span class="hljs-string">&#x27;a&#x27;</span><br><br>&lt;interactive&gt;:<span class="hljs-number">21</span>:<span class="hljs-number">1</span>: error:<br>    • <span class="hljs-type">No</span> <span class="hljs-keyword">instance</span> for (<span class="hljs-type">Integral</span> <span class="hljs-type">Char</span>) arising from a use <span class="hljs-keyword">of</span> ‘lucky’<br>    • <span class="hljs-type">In</span> the expression: lucky <span class="hljs-string">&#x27;a&#x27;</span><br>      <span class="hljs-type">In</span> an equation for ‘it’: it = lucky <span class="hljs-string">&#x27;a&#x27;</span><br></code></pre></td></tr></table></figure><p>which means that Type <code>Char</code> is not a instance of class <code>Integral</code>. (haha, something like instance in OOP ~~)</p><p>A factorial function implementation:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">factorial</span> :: (<span class="hljs-type">Integral</span> a) =&gt; a -&gt; a  <br><span class="hljs-title">factorial</span> <span class="hljs-number">0</span> = <span class="hljs-number">1</span>  <br><span class="hljs-title">factorial</span> n = n * factorial (n - <span class="hljs-number">1</span>)  <br></code></pre></td></tr></table></figure><p>For that patterns are check from top to bottom, we can’t place the second pattern on the top of the first one. Otherwise, this recursive will never end, for that the seconed catchs all numbers !</p><h3 id="usefull-pattern">usefull pattern</h3><p>Some useful patterns list as below:</p><ul><li><code>[]</code>: match list</li><li><code>(x:[])</code> / <code>[x]</code>: match the first element (It is just a syntactic sugar)</li><li><code>(x:xs)</code>: match first to <code>x</code>, the rest to <code>xs</code> . In the case, the return type probably be a List. Otherwise it will raise error. <code>(_:xs)</code> matchs non-empty list.</li></ul><blockquote><p>if the pattern consists of several variables, surround them with parentheses.</p></blockquote><p>An example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">tell</span> :: (<span class="hljs-type">Show</span> a) =&gt; [a] -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">tell</span> [] = <span class="hljs-string">&quot;The list is empty&quot;</span>  <br><span class="hljs-title">tell</span> (x:[]) = <span class="hljs-string">&quot;The list has one element: &quot;</span> ++ show x  <br><span class="hljs-title">tell</span> (x:y:[]) = <span class="hljs-string">&quot;The list has two elements: &quot;</span> ++ show x ++ <span class="hljs-string">&quot; and &quot;</span> ++ show y  <br><span class="hljs-title">tell</span> (x:y:_) = <span class="hljs-string">&quot;This list is long. The first two elements are: &quot;</span> ++ show x ++ <span class="hljs-string">&quot; and &quot;</span> ++ show y <br></code></pre></td></tr></table></figure><p>Another implement of length function with pattern match and recursive:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">length&#x27;</span> :: (<span class="hljs-type">Num</span> b) =&gt; [a] -&gt; b  <br><span class="hljs-title">length&#x27;</span> [] = <span class="hljs-number">0</span>  <br><span class="hljs-title">length&#x27;</span> (_:xs) = <span class="hljs-number">1</span> + length&#x27; xs  <br></code></pre></td></tr></table></figure><h3 id="as-patterns">as patterns</h3><p><strong>Def (as patterns)</strong>: binding a name refers to the whole thing whilst keep the pattern</p><p>An example of use:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">capital</span> :: <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">capital</span> <span class="hljs-string">&quot;&quot;</span> = <span class="hljs-string">&quot;Empty string, whoops!&quot;</span>  <br><span class="hljs-title">capital</span> all@(x:xs) = <span class="hljs-string">&quot;The first letter of &quot;</span> ++ all ++ <span class="hljs-string">&quot; is &quot;</span> ++ [x]<br><br><span class="hljs-comment">-- ghci&gt; capital &quot;Dracula&quot;  </span><br><span class="hljs-comment">-- &quot;The first letter of Dracula is D&quot;</span><br></code></pre></td></tr></table></figure><h2 id="guards">guards</h2><p><strong>Def (guards)</strong>: test if a value satisfies some properties. Something like <code>switch-case-</code> in C programming language.</p><h3 id="basic">basic</h3><p>Just give an axample to see how to use it:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">densityTell</span> :: (<span class="hljs-type">RealFloat</span> a) =&gt; a -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">densityTell</span> density  <br>    | density &lt; <span class="hljs-number">1.2</span> = <span class="hljs-string">&quot;Wow! You&#x27;re going for a ride in the sky!&quot;</span>  <br>    | density &lt;= <span class="hljs-number">1000.0</span> = <span class="hljs-string">&quot;Have fun swimming, but watch out for sharks!&quot;</span>  <br>    | otherwise   = <span class="hljs-string">&quot;If it&#x27;s sink or swim, you&#x27;re going to sink.&quot;</span> <br></code></pre></td></tr></table></figure><p>each guard <code>|</code> are followed by an boolean expression, if True, then the function is used, if False, jump to the next guard.</p><blockquote><ul><li><code>otherwise</code> is of boolean type, the value is <code>True</code></li><li>Note that there’s no <code>=</code> right after the function name and its parameters</li></ul></blockquote><h3 id="where">where</h3><p><code>where</code> in <code>guards</code>, which can be used to make calculations less, an example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">densityTell</span> :: (<span class="hljs-type">RealFloat</span> a) =&gt; a -&gt; a -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">densityTell</span> mass volume  <br>    | density &lt; air = <span class="hljs-string">&quot;Wow! You&#x27;re going for a ride in the sky!&quot;</span>  <br>    | density &lt;= water = <span class="hljs-string">&quot;Have fun swimming, but watch out for sharks!&quot;</span>  <br>    | otherwise   = <span class="hljs-string">&quot;If it&#x27;s sink or swim, you&#x27;re going to sink.&quot;</span>  <br>    <span class="hljs-keyword">where</span> density = mass / volume  <br>          air = <span class="hljs-number">1.2</span>  <br>          water = <span class="hljs-number">1000.0</span> <br>          <br><span class="hljs-comment">-- the variables &#x27;density&#x27;, &#x27;air&#x27;, &#x27;water&#x27; is only visible </span><br><span class="hljs-comment">-- in this function &#x27;densityTell&#x27;</span><br></code></pre></td></tr></table></figure><blockquote><p>align these variables proper in case that Haskell don’t know that</p></blockquote><p>Use <code>where</code> with <strong>pattern match</strong>, an example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">initials</span> :: <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span> -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">initials</span> firstname lastname = [f] ++ <span class="hljs-string">&quot;. &quot;</span> ++ [l] ++ <span class="hljs-string">&quot;.&quot;</span>  <br>    <span class="hljs-keyword">where</span> (f:_) = firstname  <br>          (l:_) = lastname  <br></code></pre></td></tr></table></figure><p>You can also define functions in <code>where</code> section.Code as follows:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">calcuDensities</span> :: (<span class="hljs-type">RealFloat</span> a) =&gt; [(a, a)] -&gt; [a]<br><span class="hljs-title">calcuDensities</span> xs = [density m v | (m, v) &lt;- xs]<br>    <span class="hljs-keyword">where</span> density m v = m / v<br>    <br><span class="hljs-comment">-- ghci&gt; calcuDensities [(1, 2), (1, 3), (1, 4)]</span><br><span class="hljs-comment">-- [0.5,0.3333333333333333,0.25]</span><br></code></pre></td></tr></table></figure><h2 id="let-in">let-in</h2><p>Syntax form: <code>let &lt;bindings&gt; in &lt;expression&gt;</code></p><p>An example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">cylinder</span> :: (<span class="hljs-type">RealFloat</span> a) =&gt; a -&gt; a -&gt; a  <br><span class="hljs-title">cylinder</span> r h = <br>    <span class="hljs-keyword">let</span> sideArea = <span class="hljs-number">2</span> * pi * r * h  <br>        topArea = pi * r ^<span class="hljs-number">2</span>  <br>    <span class="hljs-keyword">in</span>  sideArea + <span class="hljs-number">2</span> * topArea <br></code></pre></td></tr></table></figure><p>Or use it like <code>if</code> statement:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-number">4</span> * (<span class="hljs-keyword">let</span> a = <span class="hljs-number">9</span> <span class="hljs-keyword">in</span> a + <span class="hljs-number">1</span>) + <span class="hljs-number">2</span> <br></code></pre></td></tr></table></figure><p><code>Let</code> with <strong>list comprehension</strong>, then we don’t need to define a additional function.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">calcDensities</span> :: (<span class="hljs-type">RealFloat</span> a) =&gt; [(a, a)] -&gt; [a]  <br><span class="hljs-title">calcDensities</span> xs = [density | (m, v) &lt;- xs, <span class="hljs-keyword">let</span> density = m / v, density &lt; <span class="hljs-number">1.2</span>]<br></code></pre></td></tr></table></figure><blockquote><p>remeber that: Haskell goes from left ro right  after pipe</p></blockquote><p>Binding several variables inline need to separater with semicolon, that’s:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell">(<span class="hljs-keyword">let</span> a = <span class="hljs-number">100</span>; b = <span class="hljs-number">200</span>; c = <span class="hljs-number">300</span> <span class="hljs-keyword">in</span> a*b*c, <span class="hljs-keyword">let</span> foo=<span class="hljs-string">&quot;Hey &quot;</span>; bar = <span class="hljs-string">&quot;there!&quot;</span> <span class="hljs-keyword">in</span> foo ++ bar)  <br><br><span class="hljs-comment">-- (6000000,&quot;Hey there!&quot;) </span><br></code></pre></td></tr></table></figure><blockquote><p><code>let-in</code> is local, whilst <code>where</code> is visible in all guards.</p></blockquote><h2 id="case-of">case-of</h2><p>The styntax is:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">case</span> expression <span class="hljs-keyword">of</span> pattern -&gt; result  <br>                   pattern -&gt; result  <br>                   pattern -&gt; result  <br>                   ... <br></code></pre></td></tr></table></figure><p>A simple example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">head&#x27;</span> :: [a] -&gt; a  <br><span class="hljs-title">head&#x27;</span> xs = <span class="hljs-keyword">case</span> xs <span class="hljs-keyword">of</span> [] -&gt; error <span class="hljs-string">&quot;No head for empty lists!&quot;</span>  <br>                      (x:_) -&gt; x <br></code></pre></td></tr></table></figure><p>Pattern matching against something in the middle of an expression example:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">describeList</span> :: [a] -&gt; <span class="hljs-type">String</span>  <br><span class="hljs-title">describeList</span> xs = <span class="hljs-string">&quot;The list is &quot;</span> ++ what xs  <br>    <span class="hljs-keyword">where</span> what [] = <span class="hljs-string">&quot;empty.&quot;</span>  <br>          what [x] = <span class="hljs-string">&quot;a singleton list.&quot;</span>  <br>          what xs = <span class="hljs-string">&quot;a longer list.&quot;</span> <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Haskell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Introduction to Haskell</title>
    <link href="/2024/07/23/Haskell_basic/"/>
    <url>/2024/07/23/Haskell_basic/</url>
    
    <content type="html"><![CDATA[<h2 id="Basic">Basic</h2><div class="note note-danger">            <p>Reference: <a href="https://learnyouahaskell.github.io/chapters.html">https://learnyouahaskell.github.io/chapters.html</a></p>          </div><h3 id="ghci">ghci</h3><p><code>ghci</code>  is REPL like other language. some  operator is:</p><ul><li>+,  -,  *,  /, ^: arithmetic operator</li><li>==: means equal</li><li>/=: means not equal</li><li>||, &amp;&amp;, not: boolean operator</li><li>True, False</li></ul><p>string is decleared by <code>&quot;&lt;string&gt;&quot;</code>.</p><h3 id="function">function</h3><h4 id="call-function">call function</h4><p>In Haskell function are called by <code>function name</code>, <code>&lt;space&gt;</code>, <code>parameter</code> (separatered by <code>&lt;space&gt;</code>)</p><blockquote><p>Unlike other language, call function by writing function name and then writing paramenters in parentheses, usually separatered by comma.</p></blockquote><p>A simple function <code>succ</code> (return the successor of  an object if defined)</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">succ</span> <span class="hljs-number">8</span><br><br><span class="hljs-comment">-- 9</span><br></code></pre></td></tr></table></figure><p>Other 2 functions are <code>min</code>, <code>max</code>, which will return the lesser or greater one.</p><blockquote><p>these 2 functions accept only 2 parameters that can be put in order</p></blockquote><p><strong>Def (Function Application)</strong>: calling a function then put parameter(s) after it</p><p>function application has the highest precedence. so the code:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">succ</span> <span class="hljs-number">9</span> + max <span class="hljs-number">5</span> <span class="hljs-number">4</span> + <span class="hljs-number">1</span><br><br><span class="hljs-comment">-- 10 + 5 + 1</span><br><span class="hljs-comment">-- 16</span><br></code></pre></td></tr></table></figure><p>To change the precedence: just use paratheses ‘()’. so</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">succ</span> <span class="hljs-number">9</span> * <span class="hljs-number">10</span>  <span class="hljs-comment">-- 10*10=100</span><br><br><span class="hljs-comment">-- different form</span><br><br><span class="hljs-title">succ</span> (<span class="hljs-number">9</span> * <span class="hljs-number">10</span>) <span class="hljs-comment">-- 90+1=91</span><br></code></pre></td></tr></table></figure><p><strong>Def (infix function):</strong> a function takes 2 parameters</p><p>infix function can be called in 2 forms:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">div</span> <span class="hljs-number">92</span> <span class="hljs-number">10</span><br><span class="hljs-number">92</span> `div` <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p><strong>Def (definition/name):</strong> a function doesn’t take any paramenter, which means we can’t change it once we have defined.</p><h4 id="define-funnction">define funnction</h4><p>Define a function is similar to call it.</p><ul><li>first write function name</li><li>type out a <code>&lt;space&gt;</code>, then the paramenter(s), separated by <code>&lt;space&gt;</code></li><li>type out <code>=</code>, after that we define what the function does</li></ul><p>Take this form as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">f(x)=x+x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>, for functions has 2 parameters, take as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">f(x, y)=x+y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>. So simple, is it ?  BTW, below is a function( without any paramenter) as well.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">hello</span> = <span class="hljs-string">&quot;Hello HasKell!&quot;</span><br></code></pre></td></tr></table></figure><blockquote><ul><li>apostrophe “'” can be part of a function name, but usually used in functions not lazy (recall lazy-evaluation in TeX).</li><li>function name can’t begin with uppercase letters, it will be used in</li></ul></blockquote><p>Take a function ‘doubleX’ for example (or directly writing this in ghci):</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">double</span> x = x + x<br></code></pre></td></tr></table></figure><p>we can punch the function in a text file, like ‘test.hs’, then run ghci here. After loading it by</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell">:l test<br></code></pre></td></tr></table></figure><p>we can use this function directly in ghci like</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">double</span> <span class="hljs-number">10</span><br><br><span class="hljs-comment">-- 20</span><br></code></pre></td></tr></table></figure><p>For functions that have 2 parameters, see below:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">doubleUS</span> x y=x*<span class="hljs-number">2</span>+y*<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>Some Notations:</p><ul><li>Redefine a function by decaler it again.</li><li>Functions in Haskell don’t have to be in any particular order, something like TeX, haha.</li></ul><h3 id="If-statement">If statement</h3><p>Like ‘if’, ‘else’ in other languages, HasKell has:</p><ul><li>if</li><li>then</li><li>else</li></ul><p><strong>Def (expression):</strong> in haskell, every function and every expression must return something. All of the follows are expressions:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-number">5</span><br><span class="hljs-string">&#x27;a&#x27;</span><br><span class="hljs-string">&quot;abc&quot;</span><br><span class="hljs-number">1</span>+<span class="hljs-number">2</span><br><span class="hljs-title">succ</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>Thus, the <code>else</code> part is mandatory in <code>if</code> statement. An example of if statement:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">doubleSmallNum</span> x=<span class="hljs-keyword">if</span> x&gt;<span class="hljs-number">100</span><br><span class="hljs-keyword">then</span> x<br><span class="hljs-keyword">else</span> x*<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="data-structure">data structure</h3><p>we’ll introduce some basic data structures in this section, such as:</p><h4 id="list">list</h4><h5 id="introduction">introduction</h5><p>List store several elements of the same type, list denoted by brackets and values sparatered by commas in it. What we’ll introduce are:</p><ul><li>list</li><li>string (which is list)</li><li>list comprehensions</li></ul><p>Some lists:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">primeNum</span> = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>]<br><br><span class="hljs-title">someAlphabets</span> = [<span class="hljs-string">&#x27;h&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>]<br><br><span class="hljs-comment">-- can&#x27;t mix characters with integers</span><br></code></pre></td></tr></table></figure><blockquote><p>String is just syntactic sugar for (char) list, that is string “Hello” is equivlant to <code>someAlphabets</code> above.</p></blockquote><h5 id="basic-functions">basic functions</h5><p>Functions about list:</p><ul><li><code>++</code>: accept 2 list, HasKell will go through every element in the first parameter.</li><li><code>:(cons operator)</code>: put the first paramenter the head of the second. It takes a number and a list of numbers or a character and a list of characters</li><li><code>!!</code>: get an element by a given index, indices start at 0.</li></ul><p>Some Examples:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] ++ [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>[<span class="hljs-string">&#x27;h&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>] ++ [<span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>]<br><br><span class="hljs-number">1</span>:[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><span class="hljs-string">&#x27;h&#x27;</span>:[<span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>]<br><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-comment">-- equvilant to </span><br><span class="hljs-number">1</span>:<span class="hljs-number">2</span>:<span class="hljs-number">3</span>:[]<br></code></pre></td></tr></table></figure><p>A notation, the following 3 items are different.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[]<br><br>[[]]<br><br>[[], []]<br></code></pre></td></tr></table></figure><p>Some operations about list:</p><ul><li><p>List can be nested,  length not required, but type must be the same.</p></li><li><p>Lists can be compared if the stuff they contain can be compared whit operators: &gt;=, &lt;=, ==</p></li></ul><h5 id="other-functions">other functions</h5><p>Some useful list functions :</p><ul><li><code>head</code>: head of a list</li><li><code>tail</code>: return a list that chops the first</li><li><code>last</code>: return the last element</li><li><code>init</code>: return a list that chops the last</li></ul><blockquote><p>when use the ‘head, tail, last, init’ function, please check if the list empty !</p></blockquote><ul><li><code>length</code>: ~</li><li><code>null</code>: check if list empty, if empty return True, else False.</li><li><code>reverse</code>: ~</li><li><code>take</code>: extracts that many elements from the beginning</li><li><code>drop</code>: drops that many elements from the beginning, return the remaining elements.</li></ul><p>some other functions:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">maximum</span><br><span class="hljs-title">minimum</span><br><span class="hljs-title">sum</span><br><span class="hljs-title">product</span><br><span class="hljs-title">elem</span> <span class="hljs-comment">-- if an element belongs to a list</span><br></code></pre></td></tr></table></figure><h5 id="List-range">List range</h5><p>Use <code>..</code> to construct a list range:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[<span class="hljs-number">1</span>..<span class="hljs-number">5</span>]<br><span class="hljs-comment">-- [1, 2, 3, 4, 5]</span><br><br>[<span class="hljs-string">&#x27;a&#x27;</span>..<span class="hljs-string">&#x27;d&#x27;</span>]<br><span class="hljs-comment">-- [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]</span><br></code></pre></td></tr></table></figure><p>How to assign a step? This is like <code>\foreach</code> syntax in TikZ,  just assign a simple pattern:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>..<span class="hljs-number">10</span>]<br><br><span class="hljs-comment">-- [1, 3, 5, 7, 9]</span><br></code></pre></td></tr></table></figure><blockquote><ul><li>but don’t given too ambiguous list pattern or some complex pattern.</li><li>avoid use float point numbers in range</li></ul></blockquote><h5 id="infinite-list">infinite list</h5><p>If Not specifying the upper limit can construct infinite list. A example of Lazy + Infinite list (for Haskell is Lazy, it’ll extract 10 elements instead of infinite elements):</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">take</span> <span class="hljs-number">10</span> [<span class="hljs-number">27</span>, <span class="hljs-number">54</span>..]<br><br><span class="hljs-comment">-- [27,54,81,108,135,162,189,216,243,270]</span><br></code></pre></td></tr></table></figure><p>Some usefule functions to construct infinite list:</p><ul><li>cycle: ~</li><li>repeat: just like cycle an one element list</li></ul><h5 id="list-comprehension">list comprehension</h5><p>This conception originially comes from set comprehension in Mathematics. Take a set comprehension:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mn>2</mn><mo>⋅</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mo>∈</mo><mi mathvariant="double-struck">N</mi><mo separator="true">,</mo><mi>x</mi><mo>≤</mo><mn>10</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">S = \{2\cdot x | x\in \mathbb{N}, x\le 10\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8833em;vertical-align:-0.1944em;"></span><span class="mord mathbb">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">10</span><span class="mclose">}</span></span></span></span></span></p><p>split this comprehension into 3 parts:</p><ul><li>a output function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>⋅</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">2\cdot x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> before pipe ‘|’</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> is draw from set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span></li><li>predicate(s) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">x\le 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span>​ after the binding part, separatered by comma(s)</li></ul><p>In Haskell, list comprehension is much similar to the above:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[x^<span class="hljs-number">2</span> | x&lt;- [<span class="hljs-number">1</span>..<span class="hljs-number">10</span>], odd x]<br><br><span class="hljs-comment">-- [1,9,25,49,81]</span><br></code></pre></td></tr></table></figure><blockquote><p>If we consider the symbols <code>&lt;-</code> to mathematical symbol <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span> which it’s similar to, List comprehension is almost the same as set comprehension.</p></blockquote><p>We can also draw from several list in list comprehension, which will produce all combinations of the given lists and then join them by the output function. A simple example:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo>⋅</mo><mi>y</mi><mi mathvariant="normal">∣</mi><mi>x</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mn>5</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mi>y</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mn>5</mn><mo stretchy="false">}</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">S = \{x\cdot y | x\in \{1, 2, ..., 5\}, y\in \{1, 2, ...5\} \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...5</span><span class="mclose">}}</span></span></span></span></span></p><p>By that, the Haskell form is:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[x*y | x&lt;- [<span class="hljs-number">1</span>..<span class="hljs-number">5</span>], y&lt;-[<span class="hljs-number">1</span>..<span class="hljs-number">5</span>]]<br><br><span class="hljs-comment">-- [1,2,3,4,5,2,4,6,8,10,3,6,9,12,15,4,8,12,16,20,5,10,15,20,25]</span><br></code></pre></td></tr></table></figure><p>Some application of list comprehension:</p><p>1&gt; create the length function, which we will named as <code>length'</code>.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">length&#x27;</span> xs = sum[<span class="hljs-number">1</span> | _ &lt;- xs]<br></code></pre></td></tr></table></figure><p>in the above, there is a symbol <code>_</code>, which means we don’t care what the variable name, just use <code>_</code>.</p><p>2&gt; remove the lowercase letters in a string.</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">removeNonUppercase</span> st = [ c | c &lt;- st, c `elem` [<span class="hljs-string">&#x27;A&#x27;</span>..<span class="hljs-string">&#x27;Z&#x27;</span>]]   <br></code></pre></td></tr></table></figure><h4 id="tuples">tuples</h4><h5 id="basic">basic</h5><p>2 ways that tuples different from list:</p><ul><li>the tuples type depends on how many component it has and the types of the components</li><li>a tuple can contain a combinations of several types, means it’s non-homogenous</li></ul><p>A big advantage is that we can create a list contains several tuples, then there will be less bugs. A vectors list:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell">[(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">7</span>)]<br><span class="hljs-comment">-- in this form, Haskell will check it for us, whilst</span><br><br>[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>]]<br><span class="hljs-comment">-- will not throw an error,but this is not what we want</span><br></code></pre></td></tr></table></figure><blockquote><p>While there are singleton lists, there’s no such thing as a singleton tuple, it will just be the value it contains</p></blockquote><h5 id="basic-functions-2">basic functions</h5><p>Some useful functions:</p><ul><li><code>fst</code>: takes a tuple of size 2, return the firtst element</li><li><code>snd</code>: ~, return the second element</li><li><code>zip</code>: takes 2 lists (not require these 2 list the same length) and zip them tegother in 1 list by joining the match elements into paris.</li></ul><p>A example for zip function:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">zip</span> [<span class="hljs-number">1</span> .. <span class="hljs-number">5</span>] [<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>] <br><br><span class="hljs-comment">-- [(1,&quot;one&quot;),(2,&quot;two&quot;),(3,&quot;three&quot;),(4,&quot;four&quot;),(5,&quot;five&quot;)]  </span><br></code></pre></td></tr></table></figure><h5 id="a-problem">a problem</h5><p><strong>Problem:</strong> which right triangle that has integers for all sides and all sides equal to or smaller than 10 has a perimeter of 24? (assume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>&lt;</mo><mi>b</mi><mo>&lt;</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">a&lt;b&lt;c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">a,b,c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span></span></span></span> is the egde of this triangle)</p><p>We use tuples and list comprehension to solve this problem:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">rightTriangles&#x27;</span> = [ (a,b,c) | c &lt;- [<span class="hljs-number">1</span>..<span class="hljs-number">10</span>], b &lt;- [<span class="hljs-number">1</span>..c], a &lt;- [<span class="hljs-number">1</span>..b], a^<span class="hljs-number">2</span> + b^<span class="hljs-number">2</span> == c^<span class="hljs-number">2</span>, a+b+c == <span class="hljs-number">24</span>]  <br><br><span class="hljs-comment">-- [(6,8,10)] </span><br></code></pre></td></tr></table></figure><p><strong>Notations:</strong> we can ignore the order of these 3 predicates, that’s</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">rightTriangles&#x27;</span> = [ (a,b,c) | b &lt;- [<span class="hljs-number">1</span>..c], a &lt;- [<span class="hljs-number">1</span>..b], c&lt;-[<span class="hljs-number">1</span>..<span class="hljs-number">10</span>], a^<span class="hljs-number">2</span> + b^<span class="hljs-number">2</span> == c^<span class="hljs-number">2</span>, a+b+c == <span class="hljs-number">24</span>]<br><br><span class="hljs-comment">-- throw error:&lt;interactive&gt;:7:40: error: Variable not in scope: c</span><br></code></pre></td></tr></table></figure><h2 id="Types-and-Typeclasses">Types and Typeclasses</h2><h3 id="types">types</h3><p>basic types (type name is b begin with uppercase letter)</p><ul><li>Int</li><li>Interger</li><li>Float</li><li>Double</li><li>Bool</li><li>Char</li></ul><p>Use <code>:t</code> in ghci to show type of a function or an expression. For that checking type of an expression is simple, we then move the functions.</p><p>We can given an explicit type declaration to the function we define as a good practice, but for some simple function, Haskell can infer the type of a function. A simple example is:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">removeNonUppercase</span> :: [<span class="hljs-type">Char</span>] -&gt; [<span class="hljs-type">Char</span>]  <br><span class="hljs-title">removeNonUppercase</span> st = [ c | c &lt;- st, c `elem` [<span class="hljs-string">&#x27;A&#x27;</span>..<span class="hljs-string">&#x27;Z&#x27;</span>]]  <br></code></pre></td></tr></table></figure><p>The above symbol <code>::</code> means “has type of”. How to declare a function which has more than 1 paramenters ?</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">addThree</span> :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">Int</span>  <br><span class="hljs-title">addThree</span> x y z = x + y + z  <br></code></pre></td></tr></table></figure><blockquote><p>Instead of writing as <code>addThree :: Int,Int,Int -&gt; Int</code>, we separate theme by <code>-&gt;</code> . Later on we’ll see why.</p></blockquote><h3 id="typevariable">typevariable</h3><p>To refer to a Specified type, we use <code>Typevariable</code> which always write as a lowercase letter such as “a, b, c, etc”. Let’s check a function type:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">ghci</span>&gt; :t head<br><span class="hljs-comment">-- head :: [a] -&gt; a</span><br><span class="hljs-title">head</span> :: <span class="hljs-type">GHC</span>.<span class="hljs-type">Stack</span>.<span class="hljs-type">Types</span>.<span class="hljs-type">HasCallStack</span> =&gt; [a] -&gt; a<br></code></pre></td></tr></table></figure><p>which means that function <code>head</code> take a List consists of elements of the same type and this type can ba any, like <code>Int</code>, <code>Float</code>, etc.</p><h3 id="typeclass">typeclass</h3><h4 id="definition">definition</h4><p>What is TypeClass ? In my opinion, it can be see as:</p><p><strong>Def (typeclass):</strong> a typeclass defines the behavior of some types belongs to it.</p><blockquote><p>The typeclass is not like the class in object oriented languages.</p></blockquote><p>Let check the <code>type interface</code> of function <code>==</code>.</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xl">ghci&gt; :t (==)<br>(==) :: E<span class="hljs-function"><span class="hljs-title">q</span> a =&gt; a -&gt;</span> <span class="hljs-function"><span class="hljs-title">a</span> -&gt;</span> Bool<br></code></pre></td></tr></table></figure><p>We analysis this output step by step:</p><ul><li><code>::</code>: means function <code>==</code> has type of the following</li><li><code>=&gt;</code>: <strong>class constraint</strong> symbol</li><li><code>Eq a</code>: means that the following types of the 2 variables must be the same (for the typevariable is the same, it’s <code>a</code>, then both of them may be <code>Int</code>, <code>Float</code>, etc) and belong to class <code>Eq</code></li></ul><p>How to understand the definition that “TypeClass defines the behaviors of  some types belong to it” ? In the above example, type <code>a</code> must be a member of class <code>Eq</code>, so that this type of parameters can be compare. <strong>Compare</strong> is the behavior the <code>Eq</code> class gives the type <code>a</code>. Indeed, there is some type that can be compare, that is <code>function</code>. We can’t compare 2 functions obviously.</p><h4 id="some-typeclass">some typeclass</h4><p>Some typeclasses as follows:</p><ul><li><p>Eq</p></li><li><p>Ord</p></li><li><p>Enum</p></li><li><p>Bounded</p></li><li><p>Num</p></li><li><p>Intergral: <code>Int</code> and <code>Integer</code></p></li><li><p>Floating</p></li><li><p>Show</p></li><li><p>Read</p></li></ul><p><code>read</code> and <code>show</code> are 2 functions belong to class <code>Read</code> and <code>Show</code> respectively. Function <code>show</code> takes a value whoes type is member of <code>Show</code> class and presents it as string.</p><p>Whilst <code>read</code> takes a string and return a type which is member of class <code>Read</code>, sometimes, we need to declare the return type explictly. Such as the follows:</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">read</span> <span class="hljs-string">&quot;3&quot;</span>::<span class="hljs-type">Int</span><br><span class="hljs-comment">-- must decalare explicitly</span><br><br>(read <span class="hljs-string">&quot;3&quot;</span>::<span class="hljs-type">Int</span>) + <span class="hljs-number">5</span><br><span class="hljs-comment">-- optional, Haskell can automatically infer the return type</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Haskell</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Print control sequence</title>
    <link href="/2024/06/29/print_cs/"/>
    <url>/2024/06/29/print_cs/</url>
    
    <content type="html"><![CDATA[<h2 id="背景">背景</h2><p>往往一个文档说明或者是手册中需要用到部分的命令抄录环境，用于模板作者说明命令的使用格式或者是参数. 某天在一个文档类中看到了如下的声明, 用于打印控制序列(下文简写为 <code>cs</code>):</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\NewDocumentCommand</span><span class="hljs-keyword">\MySubScript</span>&#123;m&#125;&#123;<span class="hljs-built_in">$</span><span class="hljs-built_in">_</span>&#123;<span class="hljs-params">#1</span>&#125;<span class="hljs-built_in">$</span>&#125;<br><br><span class="hljs-keyword">\ExplSyntaxOn</span><br><span class="hljs-keyword">\NewDocumentCommand</span><span class="hljs-keyword">\PrintVarList</span>&#123;m&#125;&#123;<br>  <span class="hljs-keyword">\clist_set:Nn</span> <span class="hljs-keyword">\l_tmpa_clist</span> &#123;<span class="hljs-params">#1</span>&#125;<br>  <span class="hljs-keyword">\clist_map_inline:Nn</span> <span class="hljs-keyword">\l_tmpa_clist</span><br>    &#123;<br>      <span class="hljs-keyword">\token_to_str:N</span> <span class="hljs-params">##1</span> ~<br>    &#125;<br>&#125;<br><span class="hljs-keyword">\NewDocumentCommand</span><span class="hljs-keyword">\RelaceChacters</span>&#123;m&#125;&#123;<br>  <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\lTmpaTl</span> &#123;<span class="hljs-params">#1</span>&#125;<br>  <span class="hljs-keyword">\regex_replace_once:nnN</span> &#123; <span class="hljs-keyword">\_</span> &#125; &#123; <span class="hljs-keyword">\c</span>&#123;MySubScript&#125; &#125; <span class="hljs-keyword">\lTmpaTl</span><br>&#125;<br><span class="hljs-keyword">\NewDocumentCommand</span><span class="hljs-keyword">\RelaceUnderScoreAll</span>&#123;m&#125;&#123;<br>  <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\lTmpaTl</span> &#123;<span class="hljs-params">#1</span>&#125;<br>  <span class="hljs-keyword">\regex_replace_all:nnN</span> &#123; <span class="hljs-keyword">\_</span> &#125; &#123; <span class="hljs-keyword">\c</span>&#123;<span class="hljs-built_in">_</span>&#125; &#125; <span class="hljs-keyword">\lTmpaTl</span><br>  <span class="hljs-keyword">\lTmpaTl</span><br>&#125;<br><span class="hljs-keyword">\ExplSyntaxOff</span><br><br><span class="hljs-keyword">\NewDocumentEnvironment</span>&#123;variable&#125;&#123;om&#125;&#123;<br>  <span class="hljs-keyword">\vspace</span>&#123;5pt&#125;<br>  <span class="hljs-keyword">\begin</span>&#123;minipage&#125;&#123;<span class="hljs-keyword">\linewidth</span>&#125;<br>  <span class="hljs-keyword">\hrule</span><span class="hljs-keyword">\vspace</span>&#123;4pt&#125;<span class="hljs-keyword">\obeylines</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\begingroup</span><br>  <span class="hljs-keyword">\ttfamily</span><span class="hljs-keyword">\bfseries</span><span class="hljs-keyword">\color</span>&#123;azure3&#125;<br>  <span class="hljs-keyword">\PrintVarList</span>&#123;<span class="hljs-params">#2</span>&#125;<br>  <span class="hljs-keyword">\endgroup</span><br>  <span class="hljs-keyword">\par</span><span class="hljs-keyword">\vspace</span>&#123;4pt&#125;<span class="hljs-keyword">\hrule</span><br>  <span class="hljs-keyword">\end</span>&#123;minipage&#125;<span class="hljs-keyword">\par</span><span class="hljs-keyword">\nopagebreak</span><span class="hljs-keyword">\vspace</span>&#123;4pt&#125;<br>&#125;&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\vspace</span>&#123;5pt&#125;<span class="hljs-comment">%</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="l3doc-class">l3doc class</h2><p>然后在 <code>l3doc</code> 文档类中发现了如下命令:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\DeclareDocumentCommand</span> <span class="hljs-string">\cmd</span> &#123; O&#123;&#125; m &#125;<br>  &#123; <span class="hljs-string">\__codedoc_cmd:no</span> &#123;<span class="hljs-comment">#1&#125; &#123; \token_to_str:N #2 &#125; &#125;</span><br></code></pre></td></tr></table></figure><p>所以我追溯到命令 <code>\__codedoc_cmd:no</code> , 发现如下声明:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\keys_define:nn</span> &#123; l3doc/cmd &#125;<br>  &#123;<br>    index     .tl<span class="hljs-built_in">_</span>set:N     = <span class="hljs-keyword">\l__codedoc_cmd_index_tl</span>        ,<br>    module    .tl<span class="hljs-built_in">_</span>set:N     = <span class="hljs-keyword">\l__codedoc_cmd_module_tl</span>       ,<br>    no-index  .bool<span class="hljs-built_in">_</span>set:N   = <span class="hljs-keyword">\l__codedoc_cmd_noindex_bool</span>    ,<br>    replace   .bool<span class="hljs-built_in">_</span>set:N   = <span class="hljs-keyword">\l__codedoc_cmd_replace_bool</span>    ,<br>  &#125;<br><br><span class="hljs-keyword">\cs_new_protected:Npn</span> <span class="hljs-keyword">\__codedoc_cmd:nn</span> <span class="hljs-params">#1</span><span class="hljs-params">#2</span><br>  &#123;<br>    <span class="hljs-keyword">\bool_set_false:N</span> <span class="hljs-keyword">\l__codedoc_cmd_noindex_bool</span><br>    <span class="hljs-keyword">\bool_set_true:N</span> <span class="hljs-keyword">\l__codedoc_cmd_replace_bool</span><br>    <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l__codedoc_cmd_index_tl</span> &#123; <span class="hljs-keyword">\q_no_value</span> &#125;<br>    <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l__codedoc_cmd_module_tl</span> &#123; <span class="hljs-keyword">\q_no_value</span> &#125;<br>    <span class="hljs-keyword">\keys_set:nn</span> &#123; l3doc/cmd &#125; &#123;<span class="hljs-params">#1</span>&#125;<br>    <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#123;<span class="hljs-params">#2</span>&#125;<br>    <span class="hljs-keyword">\bool_if:NT</span> <span class="hljs-keyword">\l__codedoc_cmd_replace_bool</span><br>      &#123;<br>        <span class="hljs-keyword">\tl_set_rescan:Nnn</span> <span class="hljs-keyword">\l__codedoc_tmpb_tl</span> &#123; &#125; &#123; <span class="hljs-built_in">_</span> &#125;<br>        <span class="hljs-keyword">\tl_replace_all:NVn</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> <span class="hljs-keyword">\l__codedoc_tmpb_tl</span> &#123; <span class="hljs-built_in">_</span> &#125;<br>        <span class="hljs-keyword">\__codedoc_replace_at_at:N</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span><br>        <span class="hljs-keyword">\tl_replace_all:NnV</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#123; <span class="hljs-built_in">_</span> &#125; <span class="hljs-keyword">\l__codedoc_tmpb_tl</span><br>      &#125;<br>    <span class="hljs-keyword">\mode_if_math:T</span> &#123; <span class="hljs-keyword">\mbox</span> &#125;<br>      &#123;<br>        <span class="hljs-keyword">\bool_if:NT</span> <span class="hljs-keyword">\l__codedoc_allow_indexing_bool</span> &#123; <span class="hljs-keyword">\__codedoc_target:</span> &#125;<br>        <span class="hljs-keyword">\verbatim@font</span><br>        <span class="hljs-keyword">\__codedoc_if_almost_str:VT</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span><br>          &#123;<br>            <span class="hljs-keyword">\__kernel_tl_set:Nx</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#123; <span class="hljs-keyword">\tl_to_str:N</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#125;<br>            <span class="hljs-keyword">\bool_if:NT</span> <span class="hljs-keyword">\g__codedoc_cs_break_bool</span><br>              &#123;<br>                <span class="hljs-keyword">\regex_replace_all:nnN</span><br>                  &#123; ([<span class="hljs-built_in">^</span><span class="hljs-keyword">\\</span><span class="hljs-keyword">\_</span>]<span class="hljs-keyword">\_</span>*) <span class="hljs-keyword">\_</span> ([<span class="hljs-built_in">^</span><span class="hljs-keyword">\_</span>]) &#125;<br>                  &#123; <span class="hljs-keyword">\1</span> <span class="hljs-keyword">\c</span>&#123;BreakableUnderscore&#125; <span class="hljs-keyword">\2</span> &#125;<br>                  <span class="hljs-keyword">\l__codedoc_cmd_tl</span><br>              &#125;<br>          &#125;<br>        <span class="hljs-keyword">\tl_replace_all:Nnn</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#123; ~ &#125; &#123; <span class="hljs-keyword">\@xobeysp</span> &#125;<br>        <span class="hljs-keyword">\l__codedoc_cmd_tl</span><br>        <span class="hljs-keyword">\@</span><br>      &#125;<br>    <span class="hljs-keyword">\bool_if:NT</span> <span class="hljs-keyword">\l__codedoc_allow_indexing_bool</span><br>      &#123;<br>        <span class="hljs-keyword">\bool_if:NF</span> <span class="hljs-keyword">\l__codedoc_cmd_noindex_bool</span><br>          &#123;<br>            <span class="hljs-keyword">\quark_if_no_value:NF</span> <span class="hljs-keyword">\l__codedoc_cmd_index_tl</span><br>              &#123;<br>                <span class="hljs-keyword">\__kernel_tl_set:Nx</span> <span class="hljs-keyword">\l__codedoc_cmd_tl</span><br>                  &#123; <span class="hljs-keyword">\c_backslash_str</span> <span class="hljs-keyword">\exp_not:o</span> &#123; <span class="hljs-keyword">\l__codedoc_cmd_index_tl</span> &#125; &#125;<br>              &#125;<br>            <span class="hljs-keyword">\exp_args:No</span> <span class="hljs-keyword">\__codedoc_key_get:n</span> &#123; <span class="hljs-keyword">\l__codedoc_cmd_tl</span> &#125;<br>            <span class="hljs-keyword">\quark_if_no_value:NF</span> <span class="hljs-keyword">\l__codedoc_cmd_module_tl</span><br>              &#123;<br>                <span class="hljs-keyword">\__kernel_tl_set:Nx</span> <span class="hljs-keyword">\l__codedoc_index_module_tl</span><br>                  &#123; <span class="hljs-keyword">\tl_to_str:N</span> <span class="hljs-keyword">\l__codedoc_cmd_module_tl</span> &#125;<br>              &#125;<br>            <span class="hljs-keyword">\__codedoc_special_index_module:ooonN</span><br>              &#123; <span class="hljs-keyword">\l__codedoc_index_key_tl</span> &#125;<br>              &#123; <span class="hljs-keyword">\l__codedoc_index_macro_tl</span> &#125;<br>              &#123; <span class="hljs-keyword">\l__codedoc_index_module_tl</span> &#125;<br>              &#123; usage &#125;<br>              <span class="hljs-keyword">\l__codedoc_index_internal_bool</span><br>          &#125;<br>      &#125;<br>  &#125;<br><span class="hljs-keyword">\cs_generate_variant:Nn</span> <span class="hljs-keyword">\__codedoc_cmd:nn</span> &#123; no &#125;<br></code></pre></td></tr></table></figure><p>其中有一个变量 <code>\l__codedoc_allow_indexing_bool</code> 的声明如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\bool_new:N</span> <span class="hljs-keyword">\l__codedoc_allow_indexing_bool</span><br><span class="hljs-keyword">\bool_set_true:N</span> <span class="hljs-keyword">\l__codedoc_allow_indexing_bool</span><br><span class="hljs-keyword">\use:e</span><br>  &#123;<br>    <span class="hljs-keyword">\exp_not:n</span> &#123; <span class="hljs-keyword">\cs_set_nopar:Npn</span> <span class="hljs-keyword">\@starttoc</span> <span class="hljs-params">#1</span> &#125;<br>      &#123;<br>        <span class="hljs-keyword">\group_begin:</span><br>          <span class="hljs-keyword">\bool_set_false:N</span> <span class="hljs-keyword">\l__codedoc_allow_indexing_bool</span><br>          <span class="hljs-keyword">\exp_not:o</span> &#123; <span class="hljs-keyword">\@starttoc</span> &#123;<span class="hljs-params">#1</span>&#125; &#125;<br>        <span class="hljs-keyword">\group_end:</span><br>      &#125;<br>  &#125;<br></code></pre></td></tr></table></figure><p>所以如果想要写手册之类的东西，可以考虑使用 <code>l3doc</code> 文档类，其中提供了丰富的命令可以方便我们文档类作者的手册排版, 如:</p><ul><li><code>\cmd [⟨options⟩] ⟨control sequence⟩</code></li><li><code>\cs [⟨options⟩] &#123;⟨csname⟩&#125;</code></li><li><code>\tn [⟨options⟩] &#123;⟨csname⟩&#125;</code></li></ul><p>除此之外还提供了 <code>function</code>, <code>varible</code>, <code>syntax</code> 等环境，用于排版类似如下的命令说明:<br><img src="/img/print_cs/l3doc_env.png" alt="l3doc environment"></p><h2 id="解决方案">解决方案</h2><p>最后可以通过命令 <code>\str_set</code> 解决，多余的空格也可以使用 str replace 相关的命令替换掉</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\NewDocumentCommand</span>&#123;<span class="hljs-keyword">\zlatexVerb</span>&#125;&#123;O&#123;T&#125;m&#125;&#123;<br>  <span class="hljs-keyword">\str_set:Nn</span> <span class="hljs-keyword">\l_tmpa_str</span> &#123; <span class="hljs-params">#2</span> &#125; <br>  <span class="hljs-keyword">\tl_if_eq:nnT</span> &#123;<span class="hljs-params">#1</span>&#125;&#123;F&#125;&#123;<br>    <span class="hljs-keyword">\str_replace_all:Nnn</span> <span class="hljs-keyword">\l_tmpa_str</span> &#123;~&#125;&#123;&#125; <br>  &#125;<br>  <span class="hljs-keyword">\texttt</span>&#123;<span class="hljs-keyword">\l_tmpa_str</span>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里声明的 <code>\cmd</code> 命令中第一个可选参数含义如下:</p><ul><li><code>T</code>: 保留所有空格</li><li><code>F</code>: 去掉所有空格</li></ul><p>默认保留所有空格.</p><h2 id="bug">bug</h2><p>目前还有部分的问题:比如会去掉控制序列中的所有空格，所以你使用:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cmd</span>&#123;<span class="hljs-keyword">\foo</span>[a b]&#125;<br></code></pre></td></tr></table></figure><p>得到的是 <code>\foo[ab]</code>, 但是我们肯定希望得到的是 <code>\foo[a b]</code>. 所以目前这个命令还不够完善.</p><blockquote><p>但是想来，你一个 <code>cs</code> 中为什么要出现空格呢?</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>control sequence</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chrome pdf export</title>
    <link href="/2024/06/29/chrome_pdf_export/"/>
    <url>/2024/06/29/chrome_pdf_export/</url>
    
    <content type="html"><![CDATA[<h2 id="现象描述">现象描述</h2><p>一个很奇怪的现象，在chrome 中打印的 pdf 复制出来的文字是乱码，虽然看着这个文件的确是矢量图，但是你去复制文字就会得到乱码.</p><h2 id="解决方法">解决方法</h2><p>在 Ctrl+P 调出打印菜单时，选择 <code>另存为pdf</code>, 而不是去选择 <code>PDFCreator</code>. 操作示意图:</p><p><img src="/img/chrome_pdf_export/example.png" alt="res"></p>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>website domain</title>
    <link href="/2024/06/29/website_domain/"/>
    <url>/2024/06/29/website_domain/</url>
    
    <content type="html"><![CDATA[<h2 id="背景">背景</h2><p>很多时候我们都想有一个自己的域名，但是从购买域名到具体的域名绑定等，这一套下来新手一般搞不定. 下面为我自己的一次配置记录,供有需要的人参考.</p><h2 id="基本配置">基本配置</h2><p>想要自己购买域名，然后指向自己的服务器，需要经历下面几个步骤:</p><ul><li><p>在域名服务商处购买域名</p></li><li><p>购买服务器, 查明其公网 IP</p></li><li><p>寻找 DNS 解析服务商(DNS 用于把域名转为 ip)，这里使用的DNS服务商是 Cloud Flare</p></li><li><p>注册 CF, 选择免费的就够了。然后把自己的网站托管到 CF. 随后把 CF 提供的 nameserver 填入域名服务商后台的 nameserver 配置处 (删除原有配置), 然后更新</p><blockquote><p>一定要添加域名到 CF 之后再做这些操作，不然后续无法生成对应的 SSL 证书</p></blockquote></li><li><p>随后在 CF 上添加两个Records: <code>A</code>(原始名称: 如 <code>zpding.tech</code>), <code>CNAME</code> (域名别名: 这里设为 <code>zongpingding.github.io</code>，所以当输入后面的名称时会自动跳转到我的域名 <code>zpding.tech</code>). 具体配置如下:<br><img src="/img/website_domain/nameservers.png" alt="image-20240629230737054"></p></li><li><p>(可选) 可以在CF中启用一些别的东西, 比如</p><ul><li>强制 https</li><li>免费 SSL 证书, 后续可以放到 nginx 的配置中去</li><li>看看你的网站平时的访问数据，防一防 ddos 之类的. 比如可会看到这样的访问数据分析:<br><img src="/img/website_domain/res.png" alt="res"></li></ul></li><li><p>在仓库中创建 CNAME 文件(必须要有), 其中填入你的域名, 比如我这里就是 <code>www.zpding.tech</code></p><blockquote><p>也可以: 在 <code>github</code> -&gt; <code>settings</code> -&gt; <code>pages</code> -&gt; <code>custom domain</code> 中填入购买的域名, 我这里就是  <code>www.zpding.tech</code>. 也会自动创建对应的 CNAME 文件</p></blockquote><p>点击 save，随后 GitHub 会检查其对应的 DNS. 为了避免每次 deploy 后需要再次进行这个过程, 可以把这个 <code>CNAME</code> 文件放到博客根目录的 <code>source/</code> 文件夹下，参见<a href="https://stackoverflow.com/questions/42582288/hexo-changes-custom-domain-on-github-when-deploying-to-the-github-repository">Hexo changes Custom Domain</a></p><blockquote><p>github 的强制 https 选项可能并不能够马上生效或者是能够启用，可能得等几个小时。但是由于 CF 启用了强制 https, 所以在访问网站时还是会强制使用 https. 更多信息请参见: <a href="https://github.com/orgs/community/discussions/23049">https discuss</a>.</p></blockquote></li></ul><h2 id="二级域名">二级域名</h2><p>如果你有一个一级域名，比如这里的 <code>zpding.tech</code>, 那么可以创建很多个子域名用来指向不同的 IP, 比如让域名 <code>blog.zpding.tech</code> 指向 <code>123.45.67.89</code>. 只需要在 DNS 解析服务商的配置中增加一条 <code>A 记录</code>:</p><ul><li><code>主机名(name)</code>为 <code>blog</code>;</li><li><code>记录值(content)</code> 为 <code>123.45.67.89</code>.</li></ul><p>然后就可以使用了.</p><h2 id="可能的问题">可能的问题</h2><h3 id="SSL-证书缺失">SSL 证书缺失</h3><p>在上述的配置中可能会出现一个很奇怪的问题:</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang">您的连接不是私密连接 攻击者可能会试图从 ...<br></code></pre></td></tr></table></figure><p>然后你会发现浏览器上显示你的网站没有证书. e, 最后怎么解决的呢 ? 给自己的机器换一个 IP (怎么换？自己想吧 &gt;_&lt;). 详细信息可以参见: <a href="https://github.com/XX-net/XX-Net/issues/5106">ssl missing</a></p><h3 id="备案">备案</h3><p>如果服务器或者是域名中的任何一个是位于国内的，那么请一定备案。者都是国外的话，可以不用备案.</p><blockquote><p>包括域名解析这个工作也不要用国内的厂商，如果有必要的话</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>website</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Page-breakable Box in TeX</title>
    <link href="/2024/06/15/breakable_box/"/>
    <url>/2024/06/15/breakable_box/</url>
    
    <content type="html"><![CDATA[<h2 id="引入">引入</h2><p>尽管常见的 <code>tcolorbox</code>,  <code>framed</code>, <code>boites</code> 等宏包提供了一个可跨页的盒子，但是这个跨页的原理是什么? 到底怎么实现的? TeX SE 上的如下问题: <a href="https://tex.stackexchange.com/questions/52943/background-color-of-breakable-box-with-thin-blank-lines">breakable box</a> 有一个关于“可跨页盒子” 的实现代码(这里是简化后代码):</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[11pt]&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>[utf8]&#123;inputenc&#125;<br><span class="hljs-keyword">\usepackage</span>[T1]&#123;fontenc&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;lipsum&#125;<br><span class="hljs-keyword">\pagestyle</span>&#123;empty&#125;<br><br><span class="hljs-keyword">\newbox</span><span class="hljs-keyword">\boxhead</span><br><span class="hljs-keyword">\newbox</span><span class="hljs-keyword">\boxtail</span><br><span class="hljs-keyword">\newbox</span><span class="hljs-keyword">\boxtemp</span><br><br><span class="hljs-keyword">\newdimen</span><span class="hljs-keyword">\dimtemp</span><br><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\boxsplit</span>&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-comment">% total height of original box</span><br>  <span class="hljs-keyword">\dimtemp</span><span class="hljs-keyword">\ht</span><span class="hljs-keyword">\boxtail</span><br>  <span class="hljs-keyword">\advance</span><span class="hljs-keyword">\dimtemp</span><span class="hljs-keyword">\dp</span><span class="hljs-keyword">\boxtail</span><br>  <span class="hljs-comment">% split original box in order to retrieve its first line</span><br>  <span class="hljs-keyword">\setbox</span><span class="hljs-keyword">\boxhead</span><span class="hljs-keyword">\vsplit</span><span class="hljs-keyword">\boxtail</span> to 0pt<br>  <span class="hljs-comment">% fix the height of the first line</span><br>  <span class="hljs-keyword">\setbox</span><span class="hljs-keyword">\boxhead</span><span class="hljs-keyword">\vbox</span>&#123;<span class="hljs-keyword">\unvbox</span><span class="hljs-keyword">\boxhead</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-comment">% restore original size</span><br>  <span class="hljs-keyword">\setbox</span><span class="hljs-keyword">\boxtemp</span><span class="hljs-keyword">\vbox</span>&#123;<span class="hljs-keyword">\copy</span><span class="hljs-keyword">\boxhead</span><span class="hljs-keyword">\copy</span><span class="hljs-keyword">\boxtail</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\advance</span><span class="hljs-keyword">\dimtemp</span>-<span class="hljs-keyword">\ht</span><span class="hljs-keyword">\boxtemp</span><br>  <span class="hljs-keyword">\advance</span><span class="hljs-keyword">\dimtemp</span>-<span class="hljs-keyword">\dp</span><span class="hljs-keyword">\boxtemp</span><br>  <span class="hljs-keyword">\advance</span><span class="hljs-keyword">\dimtemp</span><span class="hljs-keyword">\dp</span><span class="hljs-keyword">\boxhead</span><br>  <span class="hljs-keyword">\dp</span><span class="hljs-keyword">\boxhead</span><span class="hljs-keyword">\dimtemp</span><br>&#125;<br><br><span class="hljs-keyword">\newenvironment</span>&#123;mybox&#125;&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\ifhmode</span><span class="hljs-keyword">\par</span><span class="hljs-keyword">\fi</span><br>  <span class="hljs-keyword">\setbox</span><span class="hljs-keyword">\boxtail</span><span class="hljs-keyword">\vbox</span><span class="hljs-keyword">\bgroup</span><br>&#125;&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\egroup</span><br>  &#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\noindent</span><br>    <span class="hljs-keyword">\fboxsep</span> 0pt<br>    <span class="hljs-keyword">\splittopskip</span> 0pt<br>    <span class="hljs-keyword">\baselineskip</span> 0pt<br>    <span class="hljs-keyword">\lineskiplimit</span> 0pt<br>    <span class="hljs-keyword">\lineskip</span> 0pt<br>    <span class="hljs-keyword">\vfuzz</span><span class="hljs-keyword">\maxdimen</span><br>    <span class="hljs-keyword">\leavevmode</span><br>    <span class="hljs-keyword">\loop</span><br>      <span class="hljs-keyword">\ifvoid</span><span class="hljs-keyword">\boxtail</span><br>      <span class="hljs-keyword">\else</span><br>        <span class="hljs-keyword">\boxsplit</span><br>        <span class="hljs-keyword">\hbox</span> to <span class="hljs-keyword">\linewidth</span>&#123;<span class="hljs-keyword">\box</span><span class="hljs-keyword">\boxhead</span>&#125;<span class="hljs-keyword">\hfil</span><span class="hljs-comment">%</span><br>        <span class="hljs-keyword">\hfil</span><br>        <span class="hljs-keyword">\repeat</span><br>  &#125;<span class="hljs-comment">%</span><br>&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;mybox&#125;<br>  <span class="hljs-keyword">\lipsum</span>[1-5]<br><span class="hljs-keyword">\end</span>&#123;mybox&#125;<br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><h2 id="目标">目标</h2><p>我想要根据上述的原理，自己定义一个对应的可跨页的盒子，然后把这个盒子的声明封装为一个命令，方便在之后的模板 <code>zlatex</code> 中调用.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>breakable box</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Footnote style</title>
    <link href="/2024/06/14/footnote/"/>
    <url>/2024/06/14/footnote/</url>
    
    <content type="html"><![CDATA[<h2 id="way-1">way 1</h2><p>常规的 footnote 是数字角标形式的，但是我们也可以把这些数字转化为一些个符号:如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>†</mo><mo separator="true">,</mo><mi mathvariant="normal">¶</mi></mrow><annotation encoding="application/x-tex">\dagger, \P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">†</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">¶</span></span></span></span> 等. 只需要使用 LaTeX 2e 内置的命令\fnsymbol, 原始声明如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\fnsymbol</span><span class="hljs-params">#1</span>&#123;<span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\@fnsymbol</span><span class="hljs-keyword">\csname</span> c@<span class="hljs-params">#1</span><span class="hljs-keyword">\endcsname</span>&#125;<br></code></pre></td></tr></table></figure><p>该命令的详细说明还请参见 <code>source 2e</code>.</p><h2 id="way-2">way 2</h2><p>当然你也可以使用宏包 footmisc 宏包， 加载时使用</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>[symbol]&#123;footmisc&#125;<br></code></pre></td></tr></table></figure><p>来启用这个特性.然后还是正常使用 <code>\footnote</code> 命令, 即 <code>\footnote[2]&#123;&lt;footnote content&gt;&#125;</code>. 那么此时对应的数字角标就会变成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">¶</mi></mrow><annotation encoding="application/x-tex">\P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">¶</span></span></span></span> 符号.</p><blockquote><p>使用 <code>footmisc</code> 宏包后还有一个效果:就是会把你的所有脚注都放到页面底部，无论当前的页面是否撑满. 但是我个人不喜欢这个功能</p></blockquote><h2 id="效果">效果</h2><p>更改脚注后的效果如下:</p><p><img src="/img/footnote/footnote.png" alt="footnote example"></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>footnote</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>&#92;arc command in TikZ</title>
    <link href="/2024/06/14/arc_command/"/>
    <url>/2024/06/14/arc_command/</url>
    
    <content type="html"><![CDATA[<h2 id="引入">引入</h2><p>这个所谓的 <code>\arc</code> 命令，我自己是又爱又恨。用的好的话，很多时候可以少些很多的tikz代码 ? 但是问题就在于我之前用不好这个命令 :(</p><h2 id="arc-原理">arc 原理</h2><p>首先来说一下这个 arc 命令的原理，参见如下的代码:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\draw</span> (x, y) arc (theta<span class="hljs-built_in">_</span>1: theta<span class="hljs-built_in">_</span>2: radius);<br></code></pre></td></tr></table></figure><p>根据前面的坐标点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 可以计算得到后续所要绘制的arc的圆心坐标以及结束绘制的点为:</p><ul><li>圆心: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>r</mi><mo>⋅</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mn>1</mn></msub><mo separator="true">,</mo><mi>y</mi><mo>−</mo><mi>r</mi><mo>⋅</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x-r\cdot\cos\theta_1, y-r\cdot \sin\theta_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li>结束点: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>r</mi><mo>⋅</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mn>1</mn></msub><mo>+</mo><mi>r</mi><mo>⋅</mo><mi>cos</mi><mo>⁡</mo><msub><mi>θ</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>y</mi><mo>−</mo><mi>r</mi><mo>⋅</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mn>1</mn></msub><mo>+</mo><mi>r</mi><mo>⋅</mo><mi>sin</mi><mo>⁡</mo><msub><mi>θ</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x-r\cdot \cos\theta_1+r\cdot \cos\theta_2, y-r\cdot \sin\theta_1+r\cdot \sin\theta_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li></ul><h2 id="方法">方法</h2><p>有了上面的两个点的坐标后，可以用下面的 4 个步骤用于确定两个角度的大小:</p><ul><li>Find the center of your circle, Calculate <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\Delta x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Δ</span><span class="mord mathnormal">x</span></span></span></span> between <strong>start and center</strong>.</li><li>Find <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>tan</mi><mo>⁡</mo><msub><mi>θ</mi><mn>1</mn></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">Δ</mi><mi>y</mi></mrow><mrow><mi mathvariant="normal">Δ</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\tan\theta_1 = \frac{\Delta y}{\Delta x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mop">tan</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2694em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9244em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Δ</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Δ</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, so that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\theta_1=\theta_0 + \cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">⋯</span></span></span></span></li><li>Using <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>x</mi><mo>&gt;</mo><mn>0</mn><mo stretchy="false">(</mo><mo>&lt;</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Delta x&gt;0(&lt;0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord">Δ</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mopen">(</span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span> to decide <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">⋯</span></span></span></span> by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub><mo>∈</mo><mo stretchy="false">[</mo><mo>−</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo separator="true">,</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\theta_1\in [-\pi/2, \pi/2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">/2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">/2</span><span class="mclose">]</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub><mo>∈</mo><mo stretchy="false">[</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\theta_1\in [\pi/2,3\pi/2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">/2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord">/2</span><span class="mclose">]</span></span></span></span></li><li>Calculate <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\Delta x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Δ</span><span class="mord mathnormal">x</span></span></span></span> between <strong>center and end</strong>.</li></ul><h2 id="example">example</h2><p>下面代码就是一个 <code>\arc</code> command的使用样例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;tikzpicture&#125;<br>    <span class="hljs-keyword">\draw</span> (0, 0) grid (3, 3);<br>    <span class="hljs-keyword">\draw</span> (0, 0) arc (180:90:1);  <br>    <span class="hljs-keyword">\draw</span>[red] (3, 0) arc (0:90:1);  <br>    <span class="hljs-keyword">\draw</span>[blue] (1, 2)node&#123;s&#125; arc (210:150:1)node&#123;e&#125;;  <br>    <span class="hljs-keyword">\draw</span>[teal] (3, 2) arc (120:60:1);<br>    <span class="hljs-keyword">\draw</span>[teal] (3, 2) arc (30:-30:1);<br>    <span class="hljs-keyword">\coordinate</span> (o) at (1.865, 5/2);<br>    <span class="hljs-keyword">\draw</span>[dashed] (1, 2) -- (o) -- (1, 3); <br><span class="hljs-keyword">\end</span>&#123;tikzpicture&#125;<br></code></pre></td></tr></table></figure><p>绘制结果如下:<br><img src="/img/arc_command/example.png" alt="arc command example"></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tikz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3D object in Acrobat</title>
    <link href="/2024/06/14/acrobat_3d_object/"/>
    <url>/2024/06/14/acrobat_3d_object/</url>
    
    <content type="html"><![CDATA[<h2 id="way-1">way 1</h2><p>解决方法如下，方法来自Adobe官网, 首先关闭 <code>Adobe Acrobat Pro</code>, 然后重命名以下文件夹：把</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\UserName\AppData\Local\Adobe\Acrobat\DC<br></code></pre></td></tr></table></figure><p>重命名为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\UserName\AppData\Local\Adobe\Acrobat\DC_OLD<br></code></pre></td></tr></table></figure><p>如果有可能，还请将</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\UserName\AppData\Local\Adobe\Acrobat\20XX<br></code></pre></td></tr></table></figure><p>更改为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\UserName\AppData\Local\Adobe\Acrobat\20XX_OLD<br></code></pre></td></tr></table></figure><p>然后重新打开三维PDF文件以查看</p><h2 id="way-2">way 2</h2><p>重新安装 Adobe Reader</p><h2 id="warning">warning</h2><p>并非所有PDF阅读器都将查看三维PDF，如果遇到问题，请首先尝试其他PDF阅读器</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Acrobat</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Export TeX using Inkscape</title>
    <link href="/2024/06/14/inkscape_export_tex/"/>
    <url>/2024/06/14/inkscape_export_tex/</url>
    
    <content type="html"><![CDATA[<h2 id="GUI-export">GUI export</h2><p>之前在使用 Inkscape 导出 PDF + LaTeX file 时一直都没有生成那个 <code>.pdf_tex</code> 文件。后面自己才发现在导出时应该选择: <code>Save as</code> 而不是 <code>Save a Copy</code>, 第二种方式无法导出对应的<code>.pdf_tex</code>文件.</p><h2 id="CLI-export">CLI export</h2><p>如果你有一个 svg 文件: <code>test.svg</code>, 那么直接在命令行使用如下的命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">inkscape -D --export-latex --export-filename=test.pdf test.svg<br></code></pre></td></tr></table></figure><p>运行结束便会在当前路径下产生两个文件:</p><ul><li>test.pdf: 不包含 text 的pdf文件</li><li>test.pdf_tex: pdf文件对应的 text</li></ul><p>其中的那个 pdf 文件大概长这样:<br><img src="/img/inkscape_export_tex/inkscape_export_II.png" alt="test.pdf"></p><p>那么 <code>test.pdf_tex</code> 文件中就是下面的内容:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">%% Creator: Inkscape 1.3.2 (091e20e, 2023-11-25, custom), www.inkscape.org</span><br><span class="hljs-comment">%% PDF/EPS/PS + LaTeX output extension by Johan Engelen, 2010</span><br><span class="hljs-comment">%% Accompanies image file &#x27;test.pdf&#x27; (pdf, eps, ps)</span><br><span class="hljs-comment">%%</span><br><span class="hljs-comment">%% To include the image in your LaTeX document, write</span><br><span class="hljs-comment">%%   \input&#123;&lt;filename&gt;.pdf_tex&#125;</span><br><span class="hljs-comment">%%  instead of</span><br><span class="hljs-comment">%%   \includegraphics&#123;&lt;filename&gt;.pdf&#125;</span><br><span class="hljs-comment">%% To scale the image, write</span><br><span class="hljs-comment">%%   \def\svgwidth&#123;&lt;desired width&gt;&#125;</span><br><span class="hljs-comment">%%   \input&#123;&lt;filename&gt;.pdf_tex&#125;</span><br><span class="hljs-comment">%%  instead of</span><br><span class="hljs-comment">%%   \includegraphics[width=&lt;desired width&gt;]&#123;&lt;filename&gt;.pdf&#125;</span><br><span class="hljs-comment">%%</span><br><span class="hljs-comment">%% Images with a different path to the parent latex file can</span><br><span class="hljs-comment">%% be accessed with the `import&#x27; package (which may need to be</span><br><span class="hljs-comment">%% installed) using</span><br><span class="hljs-comment">%%   \usepackage&#123;import&#125;</span><br><span class="hljs-comment">%% in the preamble, and then including the image with</span><br><span class="hljs-comment">%%   \import&#123;&lt;path to file&gt;&#125;&#123;&lt;filename&gt;.pdf_tex&#125;</span><br><span class="hljs-comment">%% Alternatively, one can specify</span><br><span class="hljs-comment">%%   \graphicspath&#123;&#123;&lt;path to file&gt;/&#125;&#125;</span><br><span class="hljs-comment">%% </span><br><span class="hljs-comment">%% For more information, please see info/svg-inkscape on CTAN:</span><br><span class="hljs-comment">%%   http://tug.ctan.org/tex-archive/info/svg-inkscape</span><br><span class="hljs-comment">%%</span><br><span class="hljs-keyword">\begingroup</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\makeatletter</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\providecommand</span><span class="hljs-keyword">\color</span>[2][]&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\errmessage</span>&#123;(Inkscape) Color is used for the text in Inkscape, but the package &#x27;color.sty&#x27; is not loaded&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\renewcommand</span><span class="hljs-keyword">\color</span>[2][]&#123;&#125;<span class="hljs-comment">%</span><br>  &#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\providecommand</span><span class="hljs-keyword">\transparent</span>[1]&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\errmessage</span>&#123;(Inkscape) Transparency is used (non-zero) for the text in Inkscape, but the package &#x27;transparent.sty&#x27; is not loaded&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\renewcommand</span><span class="hljs-keyword">\transparent</span>[1]&#123;&#125;<span class="hljs-comment">%</span><br>  &#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\providecommand</span><span class="hljs-keyword">\rotatebox</span>[2]&#123;<span class="hljs-params">#2</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\newcommand</span>*<span class="hljs-keyword">\fsize</span>&#123;<span class="hljs-keyword">\dimexpr</span><span class="hljs-keyword">\f@size</span> pt<span class="hljs-keyword">\relax</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\newcommand</span>*<span class="hljs-keyword">\lineheight</span>[1]&#123;<span class="hljs-keyword">\fontsize</span>&#123;<span class="hljs-keyword">\fsize</span>&#125;&#123;<span class="hljs-params">#1</span><span class="hljs-keyword">\fsize</span>&#125;<span class="hljs-keyword">\selectfont</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\ifx</span><span class="hljs-keyword">\svgwidth</span><span class="hljs-keyword">\undefined</span><span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\unitlength</span>&#125;&#123;340.15747833bp&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\ifx</span><span class="hljs-keyword">\svgscale</span><span class="hljs-keyword">\undefined</span><span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\relax</span><span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\else</span><span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\unitlength</span>&#125;&#123;<span class="hljs-keyword">\unitlength</span> * <span class="hljs-keyword">\real</span>&#123;<span class="hljs-keyword">\svgscale</span>&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\fi</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\else</span><span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\unitlength</span>&#125;&#123;<span class="hljs-keyword">\svgwidth</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\fi</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\global</span><span class="hljs-keyword">\let</span><span class="hljs-keyword">\svgwidth</span><span class="hljs-keyword">\undefined</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\global</span><span class="hljs-keyword">\let</span><span class="hljs-keyword">\svgscale</span><span class="hljs-keyword">\undefined</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\makeatother</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\begin</span>&#123;picture&#125;(1,0.74999998)<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\lineheight</span>&#123;1&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\setlength</span><span class="hljs-keyword">\tabcolsep</span>&#123;0pt&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.12752211,0.6406953)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;Test Beamer in Inkscape<span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0,0)&#123;<span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\unitlength</span>,page=1]&#123;test.pdf&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.76621568,0.26556717)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;<span class="hljs-built_in">$</span><span class="hljs-keyword">\alpha</span>+<span class="hljs-keyword">\beta</span><span class="hljs-built_in">$</span><span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0,0)&#123;<span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\unitlength</span>,page=2]&#123;test.pdf&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.18824693,0.471698)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;Hello World<span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.18293693,0.34655683)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;<span class="hljs-built_in">$</span>S<span class="hljs-built_in">^</span>1=<span class="hljs-keyword">\&#123;</span>(x, y)|x<span class="hljs-built_in">^</span>2+y<span class="hljs-built_in">^</span>2=1<span class="hljs-keyword">\&#125;</span><span class="hljs-built_in">$</span><span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.17870969,0.18697422)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;The First Test in Making Beamer in Inkscape<span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0.76621568,0.34420555)&#123;<span class="hljs-keyword">\color</span>[rgb]&#123;0,0,0&#125;<span class="hljs-keyword">\makebox</span>(0,0)[lt]&#123;<span class="hljs-keyword">\lineheight</span>&#123;1.25&#125;<span class="hljs-keyword">\smash</span>&#123;<span class="hljs-keyword">\begin</span>&#123;tabular&#125;[t]&#123;l&#125;<span class="hljs-built_in">$</span>O=(0, 0)<span class="hljs-built_in">$</span><span class="hljs-keyword">\end</span>&#123;tabular&#125;&#125;&#125;&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\put</span>(0,0)&#123;<span class="hljs-keyword">\includegraphics</span>[width=<span class="hljs-keyword">\unitlength</span>,page=3]&#123;test.pdf&#125;&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\end</span>&#123;picture&#125;<span class="hljs-comment">%</span><br><span class="hljs-keyword">\endgroup</span><span class="hljs-comment">%</span><br></code></pre></td></tr></table></figure><h2 id="compile">compile</h2><p>尽管在 LaTeX 中的详细使用方法在上面的那个 <code>test.pdf_tex</code> 文件中已经写了，但是我自己还是写了一个脚本用于这两个文件的编译. 读者可以参考此代码的实现，然后在自己的 LaTeX 文档中使用:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>[12pt]&#123;standalone&#125;<br><span class="hljs-comment">% \documentclass[12pt]&#123;article&#125;</span><br><span class="hljs-keyword">\PassOptionsToPackage</span>&#123;quiet&#125;&#123;fontspec&#125;<br><span class="hljs-comment">% \usepackage&#123;ctex&#125;</span><br><span class="hljs-keyword">\usepackage</span>[margin=1cm]&#123;geometry&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;transparent&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;xifthen&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;pdfpages&#125;<br><span class="hljs-keyword">\newcommand</span>&#123;<span class="hljs-keyword">\inclufig</span>&#125;[1]&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\def</span><span class="hljs-keyword">\svgwidth</span>&#123;<span class="hljs-keyword">\columnwidth</span>&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\input</span>&#123;./<span class="hljs-params">#1</span>.pdf<span class="hljs-built_in">_</span>tex&#125;<br>&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br>    <span class="hljs-keyword">\inclufig</span>&#123;test&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>最终的编译结果如下:<br><img src="/img/inkscape_export_tex/inkscape_export.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tikz</tag>
      
      <tag>Inkscape</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Marker in TeX</title>
    <link href="/2024/06/14/marker_in_TeX/"/>
    <url>/2024/06/14/marker_in_TeX/</url>
    
    <content type="html"><![CDATA[<h2 id="参考">参考</h2><p>本节内容大部分都是基于 TeX SE 上的回答，然后我自己部分直接抄袭，部分按照自己的理解记录在案.</p><h2 id="基本概念">基本概念</h2><p>LaTeX中查看两个mark的值，然后再说明这两个值都表示了什么:</p><ul><li>\leftmark:  <code>Left</code> argument of the <code>Last</code>  \markboth on the page</li><li>\rightmark: <code>Right</code> argument of the <code> fiRst</code>  \markboth or <code>first</code> \markright</li></ul><p>一个具体的 <a href="https://tex.stackexchange.com/questions/449859/what-is-the-difference-between-leftmark-and-rightmark-in-fancyhdr">例子</a>:</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tex">==== page break, new chapter:<br>chapter:     &#123;&#123;chapter&#125;    &#123;   &#125;&#125;<br>section1:    &#123;&#123;chapter&#125;    &#123;section1&#125;&#125;<br>section2:    &#123;&#123;chapter&#125;    &#123;section2&#125;&#125;<br>==== page break: leftmark: chapter, rightmark: empty<br><br>section3:    &#123;&#123;chapter&#125;    &#123;section3&#125;&#125;<br>section4:    &#123;&#123;chapter&#125;    &#123;section4&#125;&#125;<br>==== page break: leftmark: chapter, rightmark: section3<br></code></pre></td></tr></table></figure><h2 id="marker-原理">marker 原理</h2><p>那么 \markboth 和 \markright 这两个命令它们是什么时候运行的? 其实在展开 \chapter 命令时，下面这个命令便会自动运行，从而生成对应的 \leftmark 和 \rightmark. 参见如下的 \chaptermark 命令声明:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\chaptermark</span><span class="hljs-params">#1</span>&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\markboth</span> &#123;<span class="hljs-keyword">\MakeUppercase</span>&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\ifnum</span> <span class="hljs-keyword">\c@secnumdepth</span> &gt;<span class="hljs-keyword">\m@ne</span><br>        <span class="hljs-keyword">\@chapapp</span><span class="hljs-keyword">\ </span><span class="hljs-keyword">\thechapter</span>. <span class="hljs-keyword">\ </span><span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\fi</span><br>    <span class="hljs-params">#1</span>&#125;&#125;&#123;&#125;&#125;<span class="hljs-comment">%</span><br></code></pre></td></tr></table></figure><p>现在, 你可以知道你的这个chapter marker到底是怎么产生的了.</p><h2 id="自定义-marker">自定义 marker</h2><p>如果你不想使用这个命令中给你的 marker，那么你也可以手动进行设置这个 \leftmarker 和 \rightmark. 主要使用下面的两个命令:</p><ul><li>\markboth{}{}: 用于设置 \leftmark 和 \rightmark 的值,前面为 left, 后面为 right.</li><li>\markright{}: 用于设置 \rightmark 的值.</li></ul><p>比如你自定义你的 left mark 和 right mark 为任意的东西:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\markboth</span>&#123;left item&#125;&#123;right item&#125;<br></code></pre></td></tr></table></figure><h2 id="marker-格式">marker 格式</h2><p>其实从 \chaptermark 命令中就可以看到，默认的 \leftmark 是 uppercase 的，想要取消这个命令，一方面可以使用 fancyhdr 提供的:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\fancyhead</span>[CO]&#123;<span class="hljs-keyword">\textsc</span>&#123;<span class="hljs-keyword">\nouppercase</span>&#123;<span class="hljs-keyword">\leftmark</span>&#125;&#125;&#125;<br></code></pre></td></tr></table></figure><p>或者是重定义这些个 \sectionmark 或者是 \chaptermark ,一个具体的示例如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% 1. chapter mark</span><br><span class="hljs-keyword">\renewcommand</span>&#123;<span class="hljs-keyword">\chaptermark</span>&#125;[1]&#123;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\markboth</span>&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\ifnum</span><span class="hljs-keyword">\c@secnumdepth</span>&gt;<span class="hljs-keyword">\m@ne</span><br>      <span class="hljs-keyword">\@chapapp</span><span class="hljs-keyword">\ </span>&#123;<span class="hljs-keyword">\footnotesize</span><span class="hljs-keyword">\thechapter</span>&#125;. <span class="hljs-keyword">\ </span><span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\fi</span><br>  <span class="hljs-params">#1</span><span class="hljs-comment">%</span><br>  &#125;&#123;&#125;<span class="hljs-comment">%</span><br>&#125;<br><br><span class="hljs-comment">% 2. section mark</span><br><span class="hljs-keyword">\renewcommand</span>&#123;<span class="hljs-keyword">\sectionmark</span>&#125;[1]&#123;<span class="hljs-keyword">\markboth</span>&#123;<span class="hljs-keyword">\thesection</span>.<span class="hljs-keyword">\ </span><span class="hljs-params">#1</span>&#125;&#123;&#125;&#125;<br></code></pre></td></tr></table></figure><p>上面这两个只是简单的示例，具体的设置请根据你自己的情况来.</p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>marker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>读懂 TeX 的 Font Warning</title>
    <link href="/2024/06/14/font_warning/"/>
    <url>/2024/06/14/font_warning/</url>
    
    <content type="html"><![CDATA[<h2 id="引入">引入</h2><p>闲来无事，在编译的一个TeX文档的过程中看到了如下的警告:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">LaTeX Font Warning: Font shape `TU/NewCM10-Book.otf(2)/m/it&#x27; undefined<br>(Font)              using `TU/NewCM10-Book.otf(2)/m/n&#x27; instead on input line 43<br><br><br>LaTeX Font Warning: Font shape `TU/NewCM10-Book.otf(2)/b/n&#x27; undefined<br>(Font)              using `TU/NewCM10-Book.otf(2)/m/n&#x27; instead on input line 55<br>.<br><br><br>LaTeX Font Warning: Font shape `TU/NewCM10-Book.otf(2)/m/sl&#x27; undefined<br>(Font)              using `TU/NewCM10-Book.otf(2)/m/it&#x27; instead on input line 5<br>8.<br></code></pre></td></tr></table></figure><p>那么问题来了，这个里面的 <code>/m/it</code>, <code>/b/n</code>, <code>/m/sl</code> 是什么意思 ?</p><h2 id="参考">参考</h2><p>本博客内容参考(抄袭)内容过多，但是大致可以例举如下:</p><ul><li><a href="https://tex.stackexchange.com/questions/552407/ot1-xcmss-b-n-undefined-using-ot1-xcmss-bx-n-instead">TeX SE 的回答 1</a></li><li><a href="https://tex.stackexchange.com/a/5012/294585">TeX SE visaul markup</a></li><li>The LaTeX Companion-III part1 9.2-Understanding font characteristics</li><li>The LaTeX Companion-III part1 9.5-Standard LATEX font support</li><li>The LaTeX Companion-III part1-9.4.1-Defining new alphabet identifiers</li></ul><h2 id="正文">正文</h2><p>In NFSS, there are four font parameters：</p><ul><li>the encoding<ul><li><code>OT1 encoding</code>: The fonts that were originally distributed with TEX had only 128 glyphs per font and therefore did not include any accented characters as individual glyphs.</li><li><code>T1 encoding</code> : As an alternative encoding, the TEX user community defined a 256-character encoding called T1 that enables TEX to typeset correctly (with proper hyphenation and kerning) in more than 30 languages based on the Latin alphabet</li><li><code>TU encoding</code>: use Unicode fonts and thus use Unicode as the encoding, made the default if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\rm\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span></span> is used with such an engine, like <code>xelatex</code>.</li></ul></li><li>the font family<ul><li><code>lmr</code>: Latin Modern Roman</li><li><code>cmss</code>: Computer Modern Sans Serif</li><li>…</li></ul></li><li>the series: typeface of current font<ul><li><code>m</code>: selects a font with <strong>medium</strong> values for the width and the weight</li><li><code>b/x</code>: switches to a <strong>bolder</strong> series, <code>x</code> refers to ‘extend’.</li></ul></li><li>the shape:<ul><li><code>n</code>: The normal(upright) shape</li><li><code>it</code>: The italic shape</li><li><code>sl</code>: The slanted or oblique shape</li><li><code>sc</code>: The Small Caps shape</li><li>The swash letter shape</li></ul></li></ul><p>采用缩写的具体历史原理是因为MS-DOS文件系统的限制，见如下:</p><blockquote><p>This naming scheme dates back to when MS-DOS limited all filenames to be eight characters, a dot, and a three-character file type, so they had to be terse.</p></blockquote><p>关于这个属于的区别: 可以参见下面的这些命令: The visual <code>\textXX</code> commands will change 3 <code>axes</code> of the text: <strong>shape</strong>, <strong>family</strong> and <strong>weight</strong>.</p><ul><li>The shape axis covers: \textup, \textit, \textsc and \textsl</li><li>The family axis covers: \textrm, \textsf, \texttt</li><li>The weight axis covers: \textbf, \textmd</li></ul><h2 id="Table">Table</h2><p>下面从 <code>The LaTeX Companion-3rd edition</code> 中截取了两张表格用于对上面的内容进行一个补充:</p><p><img src="/img/font_warning/cmr.png" alt="Computer Modern"></p><p><img src="/img/font_warning/lmr.png" alt="Latin Modern"></p><h2 id="Math-Alphabets">Math Alphabets</h2><p>在了解如上所述的基本字体知识后，我们可以对数学公式下手了. 你也许经常看到下面这个命令:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\DeclareMathAlphabet</span>&#123;cmd&#125;&#123;encoding&#125;&#123;family&#125;&#123;series&#125;&#123;shape&#125;<br></code></pre></td></tr></table></figure><p>这个玩意儿到底是什么意思? 其实你在看了前面的 <strong>看懂TeX的字体警告</strong> 之后应该就能看懂这个命令了.</p><h3 id="new-identifier">new identifier</h3><p>Suppose that you want to make a <strong>slanted sans serif</strong> typeface available as a math alphabet. You will find that the Computer Modern Sans family, for example, consists of a medium series with upright and slanted shapes.  Then declare and use it as follows:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\DeclareMathAlphabet</span>&#123;<span class="hljs-keyword">\mathsfsl</span>&#125;&#123;T1&#125;&#123;cmss&#125;&#123;m&#125;&#123;sl&#125;<br><br>We demonstrate this with the formula<br><span class="hljs-keyword">\begin</span>&#123;equation&#125;<br><span class="hljs-keyword">\sum</span> <span class="hljs-keyword">\mathsfsl</span>&#123;A&#125;<span class="hljs-built_in">_</span>&#123;i&#125; = a <span class="hljs-keyword">\tan</span> <span class="hljs-keyword">\beta</span><br><span class="hljs-keyword">\end</span>&#123;equation&#125;<br></code></pre></td></tr></table></figure><h3 id="redefine-identifier">redefine identifier</h3><p>It is also possible to redefine an existing math alphabet identifier in a package file or in the preamble of your document. For example, the declaration</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\DeclareMathAlphabet</span>&#123;<span class="hljs-keyword">\mathsf</span>&#125;&#123;T1&#125;&#123;qag&#125;&#123;m&#125;&#123;n&#125;<br></code></pre></td></tr></table></figure><p>Then <code>\mathsf</code> will switch to <strong>Adventor (Avant Garde)</strong> in your formulas.</p><blockquote><p>如果一个math alphabet 已经被某一个symbol font 加载了，那么最好使用命令 <code>\DeclareSymbolFontAlphabet</code>，这样可以节约资源</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Create Macro in LaTeX</title>
    <link href="/2024/06/14/create_macro_in_latex/"/>
    <url>/2024/06/14/create_macro_in_latex/</url>
    
    <content type="html"><![CDATA[<h2 id="long-macro">long macro</h2><h3 id="LaTeX-2e">LaTeX 2e</h3><p>在 LaTeX2e 中可以看到下面这样的命令:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\newcommand</span>*<br><span class="hljs-keyword">\renewcommand</span>*<br></code></pre></td></tr></table></figure><p>那么这两个带<code>*</code>的命令和传统的 \newcommand 命令有什么区别？其实就是long macro和macro的区别:</p><ul><li>\newcommand* 定义的 macro 不是 \long 的，意味着你不能在宏参数中包含 \par,空行等东西</li><li>然而常用的 \newcommand 就可以包含 \par, 空行等的元素</li></ul><p>和传统的 \def 命令的区别如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span> &lt;=&gt; <span class="hljs-keyword">\newcommand</span>*<br><span class="hljs-keyword">\long</span><span class="hljs-keyword">\def</span> &lt;=&gt; <span class="hljs-keyword">\newcommand</span><br></code></pre></td></tr></table></figure><h3 id="LaTeX-3">LaTeX 3</h3><p>同样的在LaTeX3中也有类似的操作:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_new_nopar:Npn</span> <br><span class="hljs-keyword">\cs_set_nopar:Npn</span> <br></code></pre></td></tr></table></figure><p>其实这个 <code>_nopar</code> 的 signature 就表示这个 macro 所含的接受的参数中不能含有 \par 命令，和前面的 \newcommand*是类似的. 什么时候需要用这些个命令呢? 那就看你的设计意图了.</p><h2 id="p-signature-in-cs-new-Npn">p-signature in \cs_new:Npn</h2><p>对于在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext><mn>3</mn></mrow><annotation encoding="application/x-tex">\rm\LaTeX 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span><span class="mord mathrm">3</span></span></span></span></span>中创建新的函数，往往有下面两种方式:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs LaTeX"><span class="hljs-keyword">\cs_new:Nn</span> <span class="hljs-keyword">\foo</span>:nn &#123;&#125;<br><span class="hljs-keyword">\cs_new:Npn</span> <span class="hljs-keyword">\foo</span>:nn <span class="hljs-params">#1</span><span class="hljs-params">#2</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>那么我们到底需要用 <code>p-signature</code> 来显示的声明我们所创建的命令 <code>\foo:nn</code> 接受的参数个数吗?</p><p>其实是不需要的，下面以 <code>\foo:nn</code> 命令进行说明。其实 <code>\foo:nn</code> 命令后面的两个 <code>n-signature</code> 就表示这个命令会吃掉两个参数, 而且在声明过程中也可以直接用 #1, #2来分别表示接收到的参数. 但是我个人还是比较喜欢第二种方式.</p><blockquote><p>其实还有一种比较奇怪的声明方式: <code>\cs_new:Npn \foo &#123;&#125;</code>, 因为 “The functions with <code>p</code> allow for <code>non-colon</code> macro names, the other ones must have a colon at the end”. 一个具体的示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_gset_nopar:Npn</span> <span class="hljs-keyword">\world</span>(<span class="hljs-params">#1</span>) &#123;WORLD=&gt;~|<span class="hljs-params">#1</span>|~|<span class="hljs-params">#1</span>|&#125;<br><span class="hljs-keyword">\world</span> (world)AAA<br><span class="hljs-comment">% RESULT:</span><br><span class="hljs-comment">% WORLD=&gt; |world| |world|AAA</span><br></code></pre></td></tr></table></figure><p>其实这种情况下，你就可以直接把前面的一堆 <code>\cs_gset_nopar:Npn</code> 等价成一个 <code>\def</code> 了，毕竟 <code>p</code> specifier 的含义就是 <code>traditional paramerter</code>. 更多详细信息可以参见: <a href="https://tex.stackexchange.com/q/350908/294585">A LaTeX3 new macro/function definition problems</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>parameter</tag>
      
      <tag>long macro</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Expansion in TeX</title>
    <link href="/2024/06/14/expansion_in_TeX/"/>
    <url>/2024/06/14/expansion_in_TeX/</url>
    
    <content type="html"><![CDATA[<h2 id="引入">引入</h2><p>宏展开是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\rm\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span></span> 中一个很重要的概念，为了引入这个概念，参加下面的例子:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\cmda</span>&#123;abc&#125;<br><span class="hljs-keyword">\uppercase</span>&#123;<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>那么你猜猜，这段代码输出的结果是什么? abc ? ABC ?  结果是 abc. 我不是都让它uppercase了么？为什么还是没有uppercase，反而是给我直接输出了?</p><p>背后的原理就是宏展开, 下面我们来细说这个宏展开.</p><blockquote><p>个人感觉 <code>宏展开</code> 是可以和 <code>catcode</code> 并列的一个属于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>TeX</mtext></mrow><annotation encoding="application/x-tex">\rm\TeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 的黑魔法, 用好了可以写出一些很 unbelievable 的代码.</p></blockquote><h2 id="LaTeX-2e">LaTeX 2e</h2><h3 id="simple-example">simple example</h3><p>先讲一下\expandafter的作用:  expand the <strong>first token</strong> after the <code>&#123;</code>.  所以下面的命令：</p> <figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>会先展开 { 后的第一个token，这个token就是\cmda, 于是\cmda被展开为 ‘abc’ , 从而就变成了 \uppercase{abc}了.</p><blockquote><p>TeX only uppercases explicit character tokens (using the <code>\uccode</code> table)</p></blockquote><p>The <code>\expandafter</code>  primitive expands the token after the next one, 所以上述的 the next one 就是 ‘{’， 而那个after的东西就是 \cmda.</p><blockquote><p>如果你的命令是 \uppercase\expandafter{abc\cmda}, 那么这个 \expandafter首先展开的其实是letter ‘a’,而不是macro \cmda. 毕竟\expandafter只负责展开它后面的第二个token (the token after the next one)</p></blockquote><h3 id="expanding-process">expanding process</h3><h4 id="expand-rule">expand rule</h4><p>一个\expandafter命令可以认为包含下面这三个步骤, 针对示例: \expandafter T\cmda</p><ul><li>首先把第一个token 'T’保存 (read: a\cmda)</li><li>然后展开第二个token ‘\cmda’ (\cmda -&gt; abc)</li><li>随后把第一个token重新放到input中, 让TeX再次read (read:Tabc)</li></ul><p>相当于一个\expandafter要吃两个参数,第一个参数先存着，第二个参数进行展开.  有了这个原理之后我们在看一看multiple \expandafter的情况. 一个具体的例子,参考自 Overleaf Understanding expandafter ,  网址如下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">https://www.overleaf.com/learn/latex/Articles/How_does_%5Cexpandafter_work%3A_A_detailed_study_of_consecutive_%5Cexpandafter_commands<br></code></pre></td></tr></table></figure><p>定义 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>Y</mi></msub><mo>=</mo><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup><msubsup><mtext>T</mtext><mi>Y</mi><mn>2</mn></msubsup><mo>⋯</mo><msubsup><mtext>T</mtext><mi>Y</mi><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\text{T}_Y = \text{T}^1_{Y}\text{T}^2_{Y}\cdots\text{T}^N_{Y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1616em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span> , 然后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup><mo>=</mo><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>A</mi></msubsup><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>B</mi></msubsup><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>C</mi></msubsup></mrow><annotation encoding="application/x-tex">\text{T}^1_{Y} = \text{T}^A_{Y1}\text{T}^B_{Y1}\text{T}^C_{Y1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1343em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1616em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>​，然后使用如下的命令:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>1</mn></msub><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>2</mn></msub><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>3</mn></msub><msub><mtext>T</mtext><mi>X</mi></msub><msub><mtext>T</mtext><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_1\backslash\text{expandafter}_2\backslash\text{expandafter}_3\text{T}_X\text{T}_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>下面我们来分析这个展开的过程:</p><ul><li><p>首先TeX在read过程中，首先读到第一个token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span>，然后这个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span> 把它后面的第一个 token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span> save，把它后面的第二个token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span> 展开(执行此token).</p><ul><li>现在我们进入到了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span>展开的子过程 (这其实是一个子递归)</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span> 会把它后面的第一个token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>X</mi></msub></mrow><annotation encoding="application/x-tex">\text{T}_X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> save, 然后把它后面的第二个 token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">\text{T}_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 展开</li><li>最后这个子过程得到的token list为: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>X</mi></msub><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup><msubsup><mtext>T</mtext><mi>Y</mi><mn>2</mn></msubsup><mo>⋯</mo><msubsup><mtext>T</mtext><mi>Y</mi><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\text{T}_X\text{T}^1_{Y}\text{T}^2_{Y}\cdots\text{T}^N_{Y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1616em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>​</li></ul></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span>子过程(子递归)结束，把前面 save 的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span> 重新 re-inserted 进 input . 所以现在的 token list 为: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>2</mn></msub><msub><mtext>T</mtext><mi>X</mi></msub><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup><msubsup><mtext>T</mtext><mi>Y</mi><mn>2</mn></msubsup><mo>⋯</mo><msubsup><mtext>T</mtext><mi>Y</mi><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_2\text{T}_X\text{T}^1_{Y}\text{T}^2_{Y}\cdots\text{T}^N_{Y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1646em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span>, TeX 继续处理这个 token list 的展开</p></li><li><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">\</mi><msub><mtext>expandafter</mtext><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\backslash\text{expandafter}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">\</span><span class="mord"><span class="mord text"><span class="mord">expandafter</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span></span></span></span>, 其后的第一个 token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\text{T}_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 被 save, 其后的第二个token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup></mrow><annotation encoding="application/x-tex">\text{T}^1_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1343em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span> 被展开.</p></li><li><p>token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mtext>T</mtext><mi>Y</mi><mn>1</mn></msubsup></mrow><annotation encoding="application/x-tex">\text{T}_Y^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1343em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span> 的展开结束，把前面 save 的token-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>X</mi></msub></mrow><annotation encoding="application/x-tex">\text{T}_X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 再次 re-inserted 进 input</p></li><li><p>这个过程结束得到的 token list 为: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>T</mtext><mi>X</mi></msub><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>A</mi></msubsup><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>B</mi></msubsup><msubsup><mtext>T</mtext><mrow><mi>Y</mi><mn>1</mn></mrow><mi>C</mi></msubsup><msubsup><mtext>T</mtext><mi>Y</mi><mn>2</mn></msubsup><mo>⋯</mo><msubsup><mtext>T</mtext><mi>Y</mi><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\text{T}_X\text{T}^A_{Y1}\text{T}^B_{Y1}\text{T}^C_{Y1}\text{T}^2_{Y}\cdots\text{T}^N_{Y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1616em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8873em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em;"><span style="top:-2.453em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span style="top:-3.1362em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></p></li><li><p>这个 token list 便是最终的展开结果 ,  其实可以把最后的展开结果总结为 :</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>T</mtext><mi>X</mi></msub><mo stretchy="false">⟨</mo><mtext>expansion of the first token in </mtext><msub><mtext>T</mtext><mi>Y</mi></msub><mo stretchy="false">⟩</mo><mo stretchy="false">⟨</mo><mtext> remaining tokens in </mtext><msub><mtext>T</mtext><mi>Y</mi></msub><mo stretchy="false">⟩</mo></mrow><annotation encoding="application/x-tex">\text{T}_X\langle\text{expansion of the first token in } \text{T}_Y\rangle \langle\text{ remaining tokens in }\text{T}_Y\rangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">⟨</span><span class="mord text"><span class="mord">expansion of the first token in </span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">⟩</span><span class="mopen">⟨</span><span class="mord text"><span class="mord"> remaining tokens in </span></span><span class="mord"><span class="mord text"><span class="mord">T</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">⟩</span></span></span></span></span></p></li></ul><p>把上面抽象的分析实体化为一个具体的实例如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% T_X</span><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\foo</span><span class="hljs-params">#1</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-params">#1</span>&#125;&#125;<br><br><span class="hljs-comment">% T_Y</span><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\abc</span>&#123;Hello&#125;, <span class="hljs-keyword">\def</span><span class="hljs-keyword">\xyz</span>&#123;, World&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\bar</span>&#123;<span class="hljs-keyword">\abc</span><span class="hljs-keyword">\xyz</span>&#125;<br><br><span class="hljs-comment">% example</span><br><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\foo</span><span class="hljs-keyword">\bar</span><br></code></pre></td></tr></table></figure><p>最终得到的结果就是: <strong>H</strong>ello, world</p><p>也就是只加粗了第一个字母 ‘H’, 可以对比如下命令的结果来理解:</p><ul><li>\foo\bar: <strong>Hello, World</strong></li><li>\expandafter\foo\bar: <strong>Hello</strong>, world</li></ul><p>这样也许你就能看出\expandafter到底有啥作用? 到底是怎么作用的 ?</p><blockquote><p>别忘了 \expandafter 命令本身就可以看作一个 token</p></blockquote><p>其实LaTeX2e中有一个比较好用的命令: <code>\@expandtwoargs</code>, 可以在命令把这两个参数吃进去时，提前展开这两个参数</p><blockquote><p>突然感觉这个\expandafter 应该改名为\expandfirst了. 但是如果从整个命令的角度来看，就是 \uppercase operation expand after macro \cmda: means that \cmda will expand first.</p></blockquote><h4 id="read-expand-CS">read expand CS</h4><p>现在分享一个怎么读懂别人<code>\expanafter</code> 代码的方法，这个案例是本博客后续会用到的一个回答，代码如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\protected</span><span class="hljs-keyword">\def</span><span class="hljs-keyword">\pempty</span>&#123;&#125;<br><br><span class="hljs-keyword">\edef</span><span class="hljs-keyword">\withedef</span>&#123;x<span class="hljs-keyword">\pempty</span> x&#125;<br><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\def</span><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\withexpandafter</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> x<span class="hljs-keyword">\pempty</span> x&#125;<br><br><span class="hljs-keyword">\tt</span><br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\pempty</span>.<br><br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\withedef</span>.<br><br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\withexpandafter</span>.<br></code></pre></td></tr></table></figure><p>我们重点分析那一长串的 \expandafter, 这里先给出我的一个分析方法:</p><ul><li><p>从左往右，依次划掉  “1个  \expandafter + 1个 token”</p></li><li><p>最后从后往前分析，把之前划掉的 token 一步一步的加回来(如果划掉的token是 \expanafter 也要加回来)</p></li></ul><p>所以你可以按照如下过程分析:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% 划掉 token:\def</span><br><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\def</span><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\withexpandafter</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> x<span class="hljs-keyword">\pempty</span> x&#125;<br><br><span class="hljs-comment">% 划掉 token:\withexpandafter</span><br><span class="hljs-keyword">\expandafter</span><span class="hljs-keyword">\withexpandafter</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> x<span class="hljs-keyword">\pempty</span> x&#125;<br><br><span class="hljs-comment">% 划掉 token:&#123;</span><br><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> x<span class="hljs-keyword">\pempty</span> x&#125;<br><br><span class="hljs-comment">% 划掉 token:x</span><br><span class="hljs-keyword">\expandafter</span> x<span class="hljs-keyword">\pempty</span> x&#125;<br><br><span class="hljs-comment">% 最后expand \pempty</span><br>x&#125;<br></code></pre></td></tr></table></figure><p>因为最后的一个  \pempty 虽然被 \protected 保护了, 但是使用 \expandafter 仍然可以把它给展开. 于是我们一步一步的加回来被划掉的 token，过程如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex">x&#125;<br><br>xx&#125;<br><br>&#123;xx&#125;<br><br><span class="hljs-keyword">\withexpandafter</span>&#123;xx&#125;<br><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\withexpandafter</span>&#123;xx&#125;<br></code></pre></td></tr></table></figure><p>所以最后得到的结果就是:</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs crystal">\<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">macro</span>:<span class="hljs-title">-</span></span>&gt;.<br><span class="hljs-function"><span class="hljs-keyword">macro</span>:<span class="hljs-title">-</span></span>&gt;x\pempty x.<br><span class="hljs-function"><span class="hljs-keyword">macro</span>:<span class="hljs-title">-</span></span>&gt;xx.<br></code></pre></td></tr></table></figure><p>第一个命令 \withedef 中的  \pempty 由于被 \protected 了，所以不能被 \edef 给展开.</p><blockquote><p>因为 \pempty  是一个macro，所以它和后面  ‘x’ 之间的空格会被吃掉</p></blockquote><h4 id="write-expand-CS-I">write expand CS-I</h4><p>我们当然不能局限于仅仅只是看懂expand，很多时候其实我们需要的是自己去写这个expand，知道了原理之后其实并不复杂. 就以前面的那个</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span>&#123;abc<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>为例. 为了一步一步的引导新手怎么写这个<code>\expandafter</code>，我们先从一个简单的例子开始. 下面这个代码片段是错误的:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;a<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>怎么把这个展开写正确? 在此之前，让我先给出我总结这个规律：</p><div class="note note-success">            <p>在一个要被前一个<code>\expandafter</code>展开的 token 前添加一个<code>\expandafter</code>，可以让这个 token 后面的宏提前展开</p>          </div><p>在这里的情况就是：上述的expand会去展开字母 ‘a’, 但是我们想要的是去展开 ‘a’ 后面的 macro <code>\cmda</code>, 那么就需要让这个<code>\expandafter</code>的展开对象后移1个 token. 所以只需要在这个 ‘a’ 的前面添加一个 <code>\expandafter</code> 即可，所以正确的代码为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> a<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>好，现在增大难度，有两个letters “ab”, 如果直接像下面这样写:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;b<span class="hljs-keyword">\expandafter</span> a<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>那么<code>\uppercese</code>后面的第一个 <code>\expanafter</code> 回去展开 ‘b’, 和前面类似，我们需要展开的对象后移一个 token; 所以直接在 ‘b’ 的前面加上一个 <code>\expandafter</code>, 正确的代码如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandable</span> b<span class="hljs-keyword">\expandafter</span> a<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><p>所以对于三个letters下的正确展开代码就是:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\expandafter</span>&#123;<span class="hljs-keyword">\expandafter</span> c<span class="hljs-keyword">\expandafter</span> b<span class="hljs-keyword">\expandafter</span> a<span class="hljs-keyword">\cmda</span>&#125;<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>所以最后看来：命令<code>\expandafter</code>展开 token 的过程就是以 token 为单位，从左至右，跳着展开的.</p>          </div><h4 id="write-expand-CS-II">write expand CS-II</h4><p>本节内容部分参考自问题: <a href="https://www.zhihu.com/question/26916597">多个\expandafter的展开过程是怎样的</a></p><p><strong>引入</strong><br>首先介绍三个宏的逆序展开，并且以此来总结一个规律用于之后的代码书写. 为了代码的书写方便，进行一定的记号规定</p><blockquote><ul><li>\let\ep\expanafter</li><li><code>&lt;A&gt;</code> 表示宏 <code>\A</code> 的展开内容</li></ul></blockquote><p>下面即为代码展开过程的详细说明:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\let</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\expandafter</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span><br>&lt;C&gt;<br><br>&lt;C&gt;<br><span class="hljs-keyword">\B</span>&lt;C&gt;<br><span class="hljs-keyword">\A</span><span class="hljs-keyword">\B</span>&lt;C&gt;<br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\B</span>&lt;C&gt;<br><span class="hljs-keyword">\A</span>&lt;B&gt;&lt;C&gt;<br></code></pre></td></tr></table></figure><p>所以从上面可以发现一个总结出如下的展开规律:</p><ul><li>位于<strong>偶数</strong>位置的 token 均被 save 了，位于<strong>奇数</strong>位置的则被展开了(跳着生效，跳着展开)</li><li>被展开的 <code>\ep</code> 直接扔掉，被展开的 <code>宏内容</code> 就保留下来</li></ul><p><strong>逆向分析</strong><br>下面就运用上面总结的规律构造四个宏逆序展开的代码:我们要构造四个宏的逆序展开命令(*)，那么四个宏对应的命令展开一次后就会得下面的这个序列(因为第四个宏最先被展开)：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span>&lt;D&gt;      (**)<br></code></pre></td></tr></table></figure><blockquote><p>后续为了讲解的便利，我们把 (*) 看作公式编号</p></blockquote><p>又因为(*)是跳着展开的，所以上述序列-(**)就位于原序列(*)的偶数位置. 为什么没有出现第四个宏? 因为第四个宏 <code>\D</code> 已经被展开为 <code>&lt;D&gt;</code> 了，而(**)中仅包含被 save 的 token. 于是添加等数量的 <code>\exp</code> 即可确定原(*)序列为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><span class="hljs-keyword">\D</span>   (*)<br></code></pre></td></tr></table></figure><p>其中高亮部分就表示(**)中的元素, 从而格式化后原逆序展开四个宏的代码为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\D</span><br></code></pre></td></tr></table></figure><blockquote><p>后续会说明为什么这样写代码，部分情况你可能需要在每一行的末尾加上 % 注释掉多余的空格.</p></blockquote><p><strong>统计规律</strong><br>下面我们总结<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>个宏逆序展开的规律,得出这种类型宏的写法：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% n = 2</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\B</span><br><br><span class="hljs-comment">% n=3</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><br><span class="hljs-keyword">\C</span><br><br><span class="hljs-comment">% n=4</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\D</span><br><br><span class="hljs-comment">% n=5</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\D</span><br><span class="hljs-keyword">\E</span><br></code></pre></td></tr></table></figure><p>下面来统计每一行的 token 数目,下面不同 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 值下统计的 token 数：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% n=2</span><br>1+1+<br>1<br><br><span class="hljs-comment">% n=3</span><br>2+2+<br>1+1+<br>1<br><br><span class="hljs-comment">% n=4</span><br>4+4+<br>2+2+<br>1+1+<br>1<br><br><span class="hljs-comment">% n=5</span><br>8+8+<br>4+4+<br>2+2+<br>1+1+<br>1<br><br><span class="hljs-comment">% n=6</span><br>16+16+<br>8+8+<br>4+4+<br>2+2+<br>1+1+<br>1<br></code></pre></td></tr></table></figure><p>所以逆序展开 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个宏总共所需的 tokens 数目 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 为:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>N</mi><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mo>⋯</mo><mo>+</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">N = 1+2+\cdots+ 2^{n-1} = \sum_{i=1}^n 2^{n-1} \tag {1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></p><p>然后统计每一行的 <code>\ep</code> 个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">N_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 可以发现, 从下到上每一层 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> 的 <code>\ep</code> 数量为:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>N</mi><mi>i</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">    N_i = 2^{i-1}-1 \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.958em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8747em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span><span class="tag"><span class="strut" style="height:1.1247em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p>所以今后写这种宏就可以按照这种规律来写了，但是部分的问题可能还的具体分析吗，不可能情况下都是最简洁的.</p><p><strong>跳跃展开</strong><br>之前都是反正，正向顺序一词展开的, 那么如果是我要求展开顺序为:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>→</mo><mi>C</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">B\rightarrow C\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 呢? 你肯定不能把原始命令 (*) 写成下面这样：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><br><span class="hljs-keyword">\B</span><br></code></pre></td></tr></table></figure><p>写成这样都不一定能运行，毕竟这些 token 的顺序不一定能够交换(也就是输入的格式必须为:<code>\A\B\C</code>). 那么怎么写? 我们采用逆向分析的方法, 一步一步的反推展开前的控制序列.</p><p>先不考虑 <code>\A</code> 命令的展开，因为是先展开 <code>\B</code>, 然后再展开 <code>\C</code>, 所以原控制序列 (*) 展开一个宏后得到的结果 (**) 肯定是:<code>\A\ep&lt;B&gt;\C</code>，再添加对应数量的 <code>\ep</code> 后可以得到展开前的原控制序列 (*) 为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span>            (*)<br></code></pre></td></tr></table></figure><p>但是现在还有一个问题:如果 TeX 再去读取 <code>\A\ep&lt;B&gt;\C</code> 这个结果，那么它会先去展开 <code>\A</code>, 所以我们的想办法让 <code>\A</code> 后面再展开。于是就必须在 <code>\A</code> 前要加上 <code>\ep</code>. 所以考虑到 <code>\A</code> 的展开顺序，那么展开后的命令 (**) 为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span>&lt;B&gt;<span class="hljs-keyword">\C</span>           (**)<br></code></pre></td></tr></table></figure><p>具体到每一个宏，从左到右其展开前应为：</p><ul><li><code>\ep\ep</code>：因第一个\ep保留，故它是偶数</li><li><code>\ep\A</code>： 保留</li><li><code>\ep\ep</code>：保留</li><li><code>\B\ep</code>： 因被展开，故奇数，后面加 <code>\ep</code></li><li><code>\ep\C</code>： 保留</li></ul><p>所以最终的原始控制序列 (*) 为：</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span>     (*)<br><br><span class="hljs-comment">% format code</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span> <br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\C</span><br></code></pre></td></tr></table></figure><p><strong>注意</strong></p><ul><li>其中那个 <code>\ep</code> 的作用是为了占位，为了防止这个占位 <code>\ep</code> 对其他内容产生影响，可以考虑在 <code>\C</code> 后加上 <code>\empty</code> 等类似的宏.</li><li>如果不添加这个占位，那么最后的 <code>\C</code> 其实也可以保留下来(只要对应的宏 <code>\C</code> 能被保留，也就是保证其在原序列中位于偶数位置)，代码如下：  <figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-keyword">\C</span>       (*)<br><br><span class="hljs-comment">% format code</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span> <br><span class="hljs-keyword">\C</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>检验代码是否正确</strong><br>为了检验我们这个代码是否正确，我写了一个 mwe 用于测试，如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><span class="hljs-keyword">\let</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\expandafter</span><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\A</span><span class="hljs-params">#1</span>&#123;<span class="hljs-keyword">\uppercase</span>&#123;<span class="hljs-params">#1</span>&#125;&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\B</span><span class="hljs-params">#1</span>&#123;&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\c</span>&#123;Hello&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\C</span>&#123;<span class="hljs-keyword">\c</span>&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\Huge</span><br><span class="hljs-keyword">\section</span>&#123;expand times/depth&#125;<br><span class="hljs-comment">% C → A</span><br><span class="hljs-comment">% \expanafter only expand a macro once (or depth=1)</span><br><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span>&#123;<span class="hljs-keyword">\C</span>&#125;<br><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\ep</span>&#123;<span class="hljs-keyword">\c</span>&#125;<br><br><br><span class="hljs-keyword">\section</span>&#123;Expand order&#125;<br><span class="hljs-comment">% C → B → A</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-comment">%</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-comment">%</span><br><span class="hljs-keyword">\c</span><br><br><span class="hljs-comment">% B → C → A</span><br><span class="hljs-comment">% 由于 B先展开，所以就把\C整个给吃了，</span><br><span class="hljs-comment">% 从而导致\A没有接受到参数，所以报错</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\A</span><span class="hljs-comment">%</span><br><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\ep</span><span class="hljs-keyword">\B</span><span class="hljs-comment">%</span><br><span class="hljs-keyword">\c</span><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>上述构造的三个宏 <code>\A, \B, \C</code> 的作用和效果见源代码注释. 这里的重点是检测宏的展开顺序，如果是 <code>\B</code> 最先展开，那么它必然会把后面的 <code>\C</code> 这个 token 给吃掉，但是 <code>\B</code> 什么都没有留下，也就导致了后续 <code>\A</code> 展开的过程中没有参数的传入，导致报错. 但是如果是 <code>\C</code> 先展开，那么 <code>\B</code> 就只会吃掉对一个的 <code>token</code> ‘H’, 后续的 <code>\A</code> 会把剩下的 <code>ello</code> 的第一个 token 给 uppercase 了.</p><p>最后的运行结果如下:<br><img src="/img/expansion_in_tex/output.png" alt="output"></p><p><img src="/img/expansion_in_tex/error_log.png" alt="ouput log"></p><p><strong>总结</strong></p><ul><li>其实就是从结果去一步一步倒推上一步，在这个过程中考虑一下奇偶 <code>token</code>. 毕竟奇偶涉及到这个 <code>token</code> 是保留还是展开.</li><li>如果多个 <code>\ep</code> 分布的较为稀疏，那么它们可能就是多个组，并不是一个组前面的命令 <code>\uppercase\ep&#123;\cmda&#125;</code> 和这里的 <code>\ep</code> 命令也是相同的，只不过上述的 <code>&#123;</code> 就是这里的 <code>\A</code>, <code>\cmda</code> 就是上述的 <code>\B</code>.</li></ul><blockquote><p>突然发现之前也没有遇到这种多个宏展开的问题了</p></blockquote><h3 id="noexpand-and-protect">noexpand and protect</h3><p>如果你不想提前展开某些 macro 呢? 这个特性在 TeX 中其实是随处可见的，比如常用的 \thepage 命令，如果我们设置这个 macro 为具体的数值肯定是不行的，这个 \thepage 的数值得随着不同的页面变化. 可以认为这个 \thepage 里面就有一些 macro 没有被完全展开，它们只有在打印具体的页数的时候才会被完全展开.</p><blockquote><p>这个机制应该就叫做 lazy evaluation 吧, 类似于 mma 中的延迟赋值 f[x_] := x;</p></blockquote><p>再来一个简单的例子:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\cmda</span>&#123;a&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\cmdb</span>&#123;<span class="hljs-keyword">\cmda</span>&#125;<br><br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\cmda</span>&#123;A&#125;<br></code></pre></td></tr></table></figure><p>上述定义的\cmdb就是没有被展开的例子, 当我 \cmda 重定义为&quot;A&quot;后，对应命令 \cmdb 也会被重定义为 “A”.</p><p>这里可以介绍几个基本的命令:</p><ul><li><p>\noexpand: prevents doing an expansion of the next token (only <strong>one</strong> token).</p></li><li><p>\unexpanded: e-TeX includes an additional primitive \unexpanded, which will prevent expansion of <strong>multiple</strong> tokens.</p></li></ul><p>既然都说到这里的，就必须要提到这一系列命令了: \def, \gdef, \edef, \xdef. 以及对应的 e-TeX 拓展的命令\protected 了. 这里必须抄一段了，代码来自: <a href="https://tex.stackexchange.com/a/12148/294585">When to use \edef, \noexpand, and \expandafter?</a> :</p><p>The prefix <code>\protected</code>  can be used before <code>\def</code> and friends to define a protected, i.e. “robust” macro which doesn’t expand inside an <code>\edef</code> context (like in <code>\write</code>). However, <code>\expandafter</code> does expand such a macro.</p><blockquote><ul><li>这个所谓的  robust 在你们刚入门的时候应该也不理解吧</li><li>所谓的 \xdef 可以看成是 \gdef 和 \edef 的结合体</li></ul></blockquote><h3 id="further-reading">further reading</h3><p>更多的详细教程可以参见: <a href="https://www.overleaf.com/learn/latex/Articles">Overleaf Articles</a>, 里面有挺多不错的东西.</p><h2 id="LaTeX-3">LaTeX 3</h2><h3 id="introduction">introduction</h3><p>在LaTeX 3中是可以很方便的操控宏展开的，可以有如下的途径:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\exp_not:N</span> <br><br><span class="hljs-keyword">\exp_args:N</span>⟨variant⟩ <br><br><span class="hljs-keyword">\exp_args_generate:n</span><br><br><span class="hljs-keyword">\cs_generate_variation:Nn</span> <br><br><span class="hljs-keyword">\prg_generate_conditional_variant:Nnn</span> <br></code></pre></td></tr></table></figure><p>这5个命令用的好，就不用担心绝大部分的展开问题了. 第一个 <code>\exp_not:N</code> 可以控制一个宏不被 <code>e</code>-type 或者是 <code>x</code>-type 展开.</p><h3 id="Expand">Expand</h3><h4 id="expandable-variable">expandable variable</h4><p>部分用户也许经常在 interface 3 中看到诸如下面这样的 TeXhackers note, 下面这个例子是 <code>\tl_tail:N</code> 的 note:</p><blockquote><p>The result is returned within \exp_not:n, which means that the token list does not expand further when appearing in an e-type or x-type argument expansion</p></blockquote><p>我们下面就写一个具体的例子来说明这个 note 到底说了怎样一回事:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpa_tl</span> &#123;a<span class="hljs-keyword">\l_tmpb_tl</span>&#125;<br><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#123;b&#125;<br><span class="hljs-keyword">\tl_set:Nx</span> <span class="hljs-keyword">\l_tmpd_tl</span> &#123;<span class="hljs-keyword">\l_tmpb_tl</span> <span class="hljs-keyword">\tl_tail:N</span><span class="hljs-keyword">\l_tmpa_tl</span>&#125;<br><span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpd_tl</span><br></code></pre></td></tr></table></figure><p>这段代码的结果是: <code>macro:-&gt;b\l_tmpb_tl</code>; 因为 <code>\tl_tail:N</code> 的结果是 <code>\l_tmpa_tl</code>, 而这个宏是 within <code>\exp_not:n</code> 的，也就是说:上面 <code>\tl_set:Nx</code> 这一行其实等价于:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\tl_set:Nx</span> <span class="hljs-keyword">\l_tmpd_tl</span> &#123;<span class="hljs-keyword">\l_tmpb_tl</span> <span class="hljs-keyword">\exp_not:n</span> &#123;<span class="hljs-keyword">\l_tmpb_tl</span>&#125;&#125;<br></code></pre></td></tr></table></figure><p>这样我们的 <code>\l_tmpa_tl</code> 中的第二个 token 自然就是 <code>\l_tmpb_tl</code> 的原始定义了，而不是 <code>b</code>.</p><p>被 <code>\protected</code> 的宏也不会被 <code>e</code>-type 和 <code>x</code>-type 展开; 故而 <code>xparse</code> 提供的 <code>\NewDocumentCommand</code> 等一系列的命令定义的宏和被 <code>\noexpand</code> 修饰定义的宏无法被正常展开.</p><p>注意区分 <code>\protect</code> 与 <code>\protected</code>; 这两者是没有关系的, <code>\protected</code> 的作用机制和 <code>\long</code> 的类似。还可以这样理解: 前者是 LaTeX 内部提供的为了弥补没有 <code>\protected</code> 宏的一个 trick，后者是 eTeX 提供的; 对于 <code>\protect</code>, 它会在 normal context 中，它会被展开为 <code>\relax</code>; 在部分特殊的 context 中会被定义为 <code>\noexpand\protect\noexpand</code>, 在部分的 context 中也会被定义为 <code>\noexpand</code>.</p><p>详细信息,可以参见:<a href="https://tex.stackexchange.com/a/4747/294585">why do we need \protect</a> (可以认为这个参考样例中的 <code>\protect</code> 起了一个传递作用，为了把 <code>\noexpand</code> 传递到第二个过程中；个人觉得也可以在第一步传递一个 <code>\foobar</code> 过去，得到 <code>\foobar\foo</code>, 然后在把行命令写到 toc 文件之前，把 <code>\foobar</code> 定义为 <code>\noexpand</code> 也行。但是两次都用 <code>\protect</code> 我觉得更好，更加的统一.)</p><p>下面就是一个示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpa_tl</span> &#123;a&#125;<br><span class="hljs-keyword">\protected</span><span class="hljs-keyword">\def</span><span class="hljs-keyword">\cmda</span>&#123;CMD-A&#125;<br><span class="hljs-keyword">\newcommand</span><span class="hljs-keyword">\cmdb</span>&#123;CMD-B&#125;<br><span class="hljs-keyword">\NewDocumentCommand</span><span class="hljs-keyword">\cmdc</span>&#123;&#125;&#123;CMD-C&#125;<br><span class="hljs-keyword">\tl_set:Nx</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#123;<span class="hljs-keyword">\l_tmpa_tl</span> <span class="hljs-keyword">\cmda</span> <span class="hljs-keyword">\noexpand</span><span class="hljs-keyword">\cmdb</span> <span class="hljs-keyword">\cmdc</span>&#125;<br><span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpb_tl</span><span class="hljs-keyword">\par</span><br></code></pre></td></tr></table></figure><p>运行结果:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">macro:-&gt;a<span class="hljs-keyword">\cmda</span> <span class="hljs-keyword">\cmdb</span> <span class="hljs-keyword">\cmdc</span><br></code></pre></td></tr></table></figure><p>如果把上述的 <code>\noexpand</code> 去掉，那么 <code>\cmdb</code> 就会被展开为 <code>CMD-B</code>. 可以参见前一节: “noexpand and protect”. 然后再来说一下这个 robust,见示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpa_tl</span> &#123;a&#125;<br><span class="hljs-keyword">\DeclareRobustCommand</span><span class="hljs-keyword">\robcmd</span>&#123;ROBUST-CMD&#125;<br><span class="hljs-keyword">\tl_set:Nx</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#123;<span class="hljs-keyword">\l_tmpa_tl</span> <span class="hljs-keyword">\robcmd</span>&#125;<br><span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpb_tl</span><br></code></pre></td></tr></table></figure><p>对应的输出为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">macro:-&gt;a<span class="hljs-keyword">\protect</span> ROBUST-CMD<br></code></pre></td></tr></table></figure><p>我们也可以用 <code>\MakeRobust</code>这个命令来让一个已经存在的 fragile command 编程 robust command.</p><h4 id="expandable-function">expandable function</h4><p>把 LaTeX 中的宏划分为 Variable 和 Function 是不太准确的，但为说明 <code>xparse</code> 宏包中 <code>\NewExpandableDocumentCommand</code> 等系列命令存在的意义，我这里就认为的进行了划分，并且 LaTeX 3 中也是区分了变量和函数的.</p><blockquote><p>大部分的用户如果弄不清一个函数是不是 expandable 的，那么建议你一律使用 <code>\newcommand</code>.</p></blockquote><p>一个函数是 expandable 的，就意味着你可以直接把这个函数当成一个值（前提是你的函数要有返回值,并且处于一个expand 的 context 中）直接在一个表达式中参与运算, 而不用再新建一个变量来存储这个函数返回的值，然后再用这个新的变量进行表达式的操作.</p><p>一个普通示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\newcommand</span>&#123;<span class="hljs-keyword">\double</span>&#125;[1]&#123;<span class="hljs-params">#1</span>*2&#125;<br><span class="hljs-keyword">\NewDocumentCommand</span>&#123;<span class="hljs-keyword">\triple</span>&#125;&#123;m&#125;&#123;<span class="hljs-params">#1</span>*3&#125;<br><span class="hljs-keyword">\NewExpandableDocumentCommand</span>&#123;<span class="hljs-keyword">\quart</span>&#125;&#123;m&#125;&#123;<span class="hljs-params">#1</span>*4&#125;<br><span class="hljs-keyword">\edef</span><span class="hljs-keyword">\Expandcmd</span>&#123;<span class="hljs-keyword">\double</span>&#123;2&#125;&#125;<br><span class="hljs-keyword">\edef</span><span class="hljs-keyword">\nonExpandcmd</span>&#123;<span class="hljs-keyword">\triple</span>&#123;3&#125;&#125;<br><span class="hljs-keyword">\edef</span><span class="hljs-keyword">\NewExpandcmd</span>&#123;<span class="hljs-keyword">\quart</span>&#123;4&#125;&#125;<br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\Expandcmd</span><span class="hljs-keyword">\par</span><br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\nonExpandcmd</span><span class="hljs-keyword">\par</span><br><span class="hljs-keyword">\meaning</span><span class="hljs-keyword">\NewExpandcmd</span><span class="hljs-keyword">\par</span><br></code></pre></td></tr></table></figure><p>运行结果:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex">macro:-&gt;2*2<br>macro:-&gt;<span class="hljs-keyword">\triple</span> &#123;3&#125;<br>macro:-&gt;4*4<br></code></pre></td></tr></table></figure><p>从 TeXLive 2019 开始, pdfTeX, XeTeX, LuaTeX 中提供了 <code>\expanded</code> 这个primitive (最开始仅在 LuaTeX 中可用, 更多的信息可以参见: <a href="https://tex.stackexchange.com/q/489063/294585">Does \expanded replace the \romannumeral trick for expansion?</a>), 这个 primitive 和 LaTeX 3 中的 <code>e</code>-type 是密切相关的，可以说这就是后者的基础.并且也是 <code>e</code>-type 和 <code>x</code>-type 的一个重要区别(LaTeX3 中 <code>\tex_expanded:D</code> 的原定义即为 <code>\expanded</code>).</p><blockquote><p><code>\expanded</code> gives a nice mix of both <code>\edef</code> and <code>\romannumeral</code>, allowing us to get the full expansion of a token list while being itself expndable</p></blockquote><p>在介绍之前，先复制粘贴几个 interface 3 中的 remark:</p><blockquote><ul><li><strong>Fully expandable functions (★)</strong>: Some functions are fully expandable, which allows them to be used within an x-type or e-type argument (in plain TEX terms, inside an \edef or \expanded), as well as within an f-type argument. These fully expandable functions are indicated in the documentation by a <strong>star(★)</strong></li><li><strong>Restricted expandable functions (☆)</strong>: A few functions are fully expandable but cannot be fully expanded within an f-type argument. In this case a <strong>hollow star(☆)</strong> is used to indicate this</li></ul></blockquote><p>好了，接下来我们看看 <code>\expanded</code> 的使用方法:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\aaa</span>&#123;aaa&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\Oldupercase</span><span class="hljs-params">#1</span>&#123;<br>  <span class="hljs-keyword">\uppercase</span>&#123;<span class="hljs-params">#1</span>&#125;<br>&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\Newupercase</span><span class="hljs-params">#1</span>&#123;<br>  <span class="hljs-keyword">\expanded</span>&#123;<span class="hljs-keyword">\uppercase</span>&#123;<span class="hljs-params">#1</span>&#125;&#125;<br>&#125;<br><span class="hljs-keyword">\Oldupercase</span>&#123;<span class="hljs-keyword">\aaa</span>&#125;<span class="hljs-keyword">\Newupercase</span>&#123;<span class="hljs-keyword">\aaa</span>&#125;<br></code></pre></td></tr></table></figure><p>运行结果:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">aaa AAA<br></code></pre></td></tr></table></figure><h4 id="expand-or-excute">expand or excute</h4><p>关于 expand 和 excute 的区别? 目前我觉得 expand 就是替换，而 excute 就是“吃(前面被展开的)参数”，这个参数可以是一个控制序列，也可以是一个 token list. 比如下面这个case:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\foo</span><span class="hljs-params">#1</span>&#123;<span class="hljs-params">#1</span>&#125;<br></code></pre></td></tr></table></figure><p>如果在 expand only 的 context 中，<code>\def</code> 并不会把 <code>\foo</code> 这个token 吃进去，返回会留在这个；然后再继续去展开这个 <code>\foo</code> 如果 <code>\foo</code> 没有定义，那么必然报错.</p><p>那么哪些 context 是 expand only 的呢？常见的有:</p><ul><li><code>\edef</code></li><li><code>\write</code></li><li><code>\csname \endcsname</code></li><li>我们前面讲到的 <code>\expandafter</code></li><li><code>f</code> and <code>e</code> specifier in LaTeX 3.</li></ul><p>所以这个时候我们也许就需要另外一个 data type 了: <code>Expandable flags</code>. 看看文档中对这个 data type 的定义:</p><blockquote><p>Flags are the only data-type that can be modified in expansion-only contexts.</p></blockquote><p>但是我们也不用太过担心这个 expand only, 一般都是 kernel 或者是 toc 之类的东西才会涉及到. 普通情况下用 int, 或者是 boolean 之类的就行了.</p><h4 id="exp-after-wN">\exp_after:wN</h4><p>为什么是 <code>\exp_after:wN</code> 不是 <code>\exp_after:NN</code>. 因为这个命令的第一个 token 可能是 <code>&#123;</code>, <code>&#125;</code> 或者是一个 <code>N</code>-type 的东西.  详细信息可以参见: <a href="https://tex.stackexchange.com/a/493171/294585">Why is \exp_after:wN named \exp_after:wN ?</a></p><p>一个简单的使用示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpa_tl</span> &#123;aaa&#125;<br><span class="hljs-keyword">\uppercase</span>&#123; <span class="hljs-keyword">\l_tmpa_tl</span> &#125;<br><span class="hljs-keyword">\uppercase</span><span class="hljs-keyword">\exp_after:wN</span> &#123; <span class="hljs-keyword">\l_tmpa_tl</span> &#125;<br><br><span class="hljs-comment">% RESULT:</span><br><span class="hljs-comment">% aaaAAA</span><br></code></pre></td></tr></table></figure><p>不推荐使用 <code>\exp_after:wN</code>  这个命令(除非万不得已)，推荐使用 <code>\exp_args:N&lt;...&gt;</code> 及其 variant. 可以参见 interface 3:</p><blockquote><p><code>\exp_after:wN ⟨token1⟩ ⟨token2⟩</code></p><p>Unless specifically required this should be avoided: expansion should be carried out using an appropriate argument specifier variant or the appropriate <code>\exp_args:N⟨variant⟩</code> function.</p></blockquote><h3 id="argument-specifier">argument specifier</h3><h4 id="Introduction">Introduction</h4><p>下面讲解一些关于 argument specifier 的东西，毕竟这个东西你是必要要学会的，如果你要使用 LaTeX 3 中的上面两个命令的话. Every function must include an argument specifier. For functions which take no arguments, this will be blank and the function name will end <code>:</code>.</p><ul><li><p><strong>N</strong> and <strong>n</strong>: means “no manipulation”, pass the argument through exactly as given</p></li><li><p><strong>c</strong>: means “csname”, argument be turned into a csname. like <code>\csname mycmd \csname</code>.</p></li><li><p><strong>V</strong> and <strong>v</strong>: means “value of variable”, get the content of a variable: <code>V</code> argument will be a single token (similar to <code>N</code>), using <code>v</code> a csname is constructed first, and then the value is recovered. So</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% 两个等价的命令</span><br><span class="hljs-keyword">\foo</span>:V <span class="hljs-keyword">\MyVariable</span><br><span class="hljs-keyword">\foo</span>:v &#123;MyVariable&#125;<br></code></pre></td></tr></table></figure><p>You can only define a base function argument is <code>n</code> instead of <code>v</code>, <code>x</code>, <code>e</code>, <code>o</code> etc. Then generiant the variant(only <code>n</code> can be variant).</p></li><li><p><strong>o</strong>: means “expansion once” (Is it equvilant to expand only the first macro once?), while that <code>V</code>,<code>v</code> are prefered.</p></li><li><p><strong>x</strong>: means “exhaustive expansion”, fully expand every macro(until only unexpandable ones remain). Functions which feature an <code>x</code>-type argument are not expandable.</p></li><li><p><strong>e</strong>: means “expandable functions”, The <code>e</code> specifier is in many respects identical to <code>x</code>, Functions which feature an <code>e</code>-type argument may be expandable. Besides, Parameter character (like <code>#1</code>, <code>#2</code>, …) in the argument need not be doubled (when in nest loop).</p></li><li><p><strong>f</strong>: means “first token expansion”. The <code>f</code> specifier stands for full expansion, and in contrast to <code>x</code>, this type stops at the first non-expandable token(<code>&lt;space&gt;</code> is gobbled) (reading the argument from left to right) without trying to expand it.</p></li><li><p><strong>T/F</strong>: Ture/False in logic test.</p></li><li><p><strong>p</strong>: means TeX “traditional parameters”, like</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_set:Npn</span> <span class="hljs-keyword">\foo</span>:n <span class="hljs-params">#1</span>&#123;<span class="hljs-keyword">\textbf</span>&#123;<span class="hljs-params">#1</span>&#125;&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>w</strong>: means “weird arguments”, This covers everything else, but mainly applies to delimited values</p></li></ul><p>当然，这个函数名其实也不一定要以 <code>:</code> 结尾, 详细信息可以参见: <a href="https://www.zpding.tech/2024/06/14/create_macro_in_latex/">Create Macro in LaTeX</a>. 最后，再来看一个来自 interface 3.pdf 和 expl3.pdf 中关于 signatute 的简短总结:</p><ul><li><code>N</code> is used for single-token arguments while <code>c</code> constructs a control sequence from its name and passes it to a parent function as an <code>N</code>-type argument.</li><li>Many argument types extract or expand some tokens and provide it as an <code>n</code>-type argument, namely a braced multipe-token argument: <code>V</code> extracts the value of a variable, <code>v</code> extracts the value from the name of a variable, <code>n</code> uses the argument as it is, <code>o</code> expands once, <code>f</code> expands fully the front of the token list, <code>e</code> and <code>x</code> expand<br>fully all tokens (This type is not <strong>nestable</strong>, thus <code>x</code>-type does not work in <code>e</code> or <code>x</code>-type, while <code>e</code>-type does work in <code>x</code> and <code>e</code>-type; And it can only be used to create <strong>non-expandable</strong> functions).</li><li>A few odd argument types remain: <code>T</code> and <code>F</code> for conditional processing, otherwise identical to <code>n</code>-type arguments, <code>p</code> for the parameter text in definitions, <code>w</code> for arguments with a specific syntax, and <code>D</code> to denote primitives that should not be used directly.</li></ul><blockquote><p>In almost all cases, <code>e</code>-type should be preferred, <code>x</code>-type retained largely for historical reasons, and should where possible be replaced by the <code>e</code>-type equivalent. — From <code>expl3.pdf</code></p></blockquote><h4 id="Generate-variants">Generate variants</h4><p>First of all, only <code>n</code> and <code>N</code> arguments can be changed to other types. The only allowed changes are:</p><ul><li><code>c</code> variant of an <code>N</code> parent;</li><li><code>o</code>, <code>V</code>, <code>v</code>, <code>f</code>, <code>e</code>, or <code>x</code> variant of an n parent;</li><li><code>N</code>, <code>n</code>, <code>T</code>, <code>F</code>, or <code>p</code> <strong>argument unchanged</strong>, useful in command <code>\cs_generate_variation:Nn</code>, see <a href="https://tex.stackexchange.com/q/404860/294585">LaTeX3 variants with TF arguments</a>.</li></ul><h4 id="f-type">f-type</h4><p>f-type 这一个argument specifier 可能比较奇怪，但是可以参见如下的示例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% &#x27;f&#x27;-type expansion</span><br><span class="hljs-keyword">\tl_new:N</span> <span class="hljs-keyword">\l_tmpaa_tl</span><br><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpa_tl</span> &#123; A &#125;<br><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpaa_tl</span> &#123; <span class="hljs-keyword">\l_tmpa_tl</span> &#125;<br><span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#123; B &#125;<br><span class="hljs-comment">% &#x27;x&#x27; type</span><br><span class="hljs-keyword">\tl_set:Nx</span> <span class="hljs-keyword">\l_tmpc_tl</span> &#123; <span class="hljs-keyword">\l_tmpaa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#125;<br><span class="hljs-keyword">\quad</span><span class="hljs-keyword">\;</span>(`x&#x27;-expand)<span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpc_tl</span><span class="hljs-keyword">\par</span><br><br><span class="hljs-comment">% &#x27;f&#x27; type expand</span><br><span class="hljs-keyword">\tl_set:Nf</span> <span class="hljs-keyword">\l_tmpc_tl</span> &#123; <span class="hljs-keyword">\l_tmpaa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#125;<br>(`f&#x27;-expand)<span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpc_tl</span><span class="hljs-keyword">\par</span><br><br><span class="hljs-comment">% expans step by step</span><br><span class="hljs-comment">% expand once</span><br><span class="hljs-keyword">\tl_set:No</span> <span class="hljs-keyword">\l_tmpc_tl</span> &#123; <span class="hljs-keyword">\l_tmpaa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#125;<br>(`o&#x27;-type~ once)<span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpc_tl</span><span class="hljs-keyword">\par</span><br><span class="hljs-comment">% expand twice</span><br><span class="hljs-keyword">\tl_set:No</span> <span class="hljs-keyword">\l_tmpc_tl</span> &#123; <span class="hljs-keyword">\l_tmpa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#125;<br>(`o&#x27;-type~ twice)<span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpc_tl</span><span class="hljs-keyword">\par</span><br><span class="hljs-comment">% expand third</span><br><span class="hljs-keyword">\tl_set:No</span> <span class="hljs-keyword">\l_tmpc_tl</span> &#123; <span class="hljs-keyword">\l_tmpa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span> &#125;<br>(`o&#x27;-type~ third)<span class="hljs-keyword">\cs_meaning:N</span> <span class="hljs-keyword">\l_tmpc_tl</span><br></code></pre></td></tr></table></figure><p>最终的结果为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs latex">(‘x’-expand)macro:-&gt;AB<br>(‘f’-expand)macro:-&gt;A<span class="hljs-keyword">\l_tmpb_tl</span><br>(‘o’-type once)macro:-&gt;<span class="hljs-keyword">\l_tmpa_tl</span> <span class="hljs-keyword">\l_tmpb_tl</span><br>(‘o’-type twice)macro:-&gt;A<span class="hljs-keyword">\l_tmpb_tl</span><br>(‘o’-type third)macro:-&gt;A<span class="hljs-keyword">\l</span><span class="hljs-built_in">_</span>tmpb<span class="hljs-built_in">_</span>t<br></code></pre></td></tr></table></figure><p>所以把这个f-type 看作 (first) expansion 个人觉得还是比较好理解的.</p><h4 id="e-type-x-type">e-type/x-type</h4><p>See blog: <a href="https://www.texdev.net/2023/10/10/get-the-jag-from-x-type-to-e-type">Get the Jag: from x-type to e-type</a> for more info. Thus in most case, use <code>e</code> type instead of <code>x</code> type.</p><h4 id="w-type">w-type</h4><p>本节参考:</p><ul><li><a href="https://github.com/latex3/latex3/issues/255">:w or :ww for several ‘weird’ arguments?</a></li><li><a href="https://mirror.las.iastate.edu/tex-archive/macros/latex/required/l3kernel/l3styleguide.pdf">The LATEX3 kernel: style guide for code authors</a></li></ul><p>什么时候应该使用 <code>w</code> - type ? l3styleguide 中描述到:</p><blockquote><p>When defining commands that do not follow the usual convention of accepting arguments as single-tokens or braced-text, the <code>w</code> argument specifier is used to denote that the function signature cannot fully describe the syntax.</p></blockquote><p>也就是说你定义的函数接受参数的行为很 <strong>奇怪</strong> 的时候，也就是你的参数不是以下的情况:</p><ul><li>single token, <code>&lt;single char&gt;</code>, <code>&lt;single CS&gt;</code></li><li>braced-text, <code>&#123;&lt;arg&gt;&#125;</code></li></ul><p>每一个 <code>w</code>-type 的 function 都尽量在最开头的位置说明其语法，不然别人阅读时可能就不知道你这个函数的参数到底是怎么 <strong>接收</strong> 和 <strong>处理</strong> 的. 比如下面的<a href="https://github.com/latex3/latex3/issues/255#issuecomment-130190536">例子</a>:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\foo</span>:ww 12345<br><br><span class="hljs-keyword">\cs_new:Npn</span> <span class="hljs-keyword">\foo</span>:ww <span class="hljs-params">#1</span> 23 <span class="hljs-params">#2</span> 5&#123;...&#125;<br></code></pre></td></tr></table></figure><p>如果你不知道函数  <code>\foo:ww</code> 的定义，那么你有极大的可能无法写出正确的参数（传递）形式.</p><blockquote><p>其实就是你不会写出 <code>23</code> 这个 explicit text, 从而导致 <code>#2</code> 不能被正常的解析</p></blockquote><p>这个 <code>w</code>-type 和传统的 <code>p</code>-type 还是比较类似的，有趣的是，<code>w</code>-type 会常常和  quark 共同出现, 比如把<code>\q_stop</code> 作为一个分隔符的存在 (delimiter) .  当然你也可以定义其它的分隔符命令, 可以参考下述这个 l3kernel 中的例子:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_new_protected:Npn</span> <span class="hljs-keyword">\__clist_get:wN</span> <span class="hljs-params">#1</span> , <span class="hljs-params">#2</span> <span class="hljs-keyword">\s__clist_stop</span> <span class="hljs-params">#3</span><br>  &#123; <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-params">#3</span> &#123;<span class="hljs-params">#1</span>&#125; &#125;<br></code></pre></td></tr></table></figure><p>然后这个函数在 <code>l3kernel</code> 中的使用方法为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_new_protected:Npn</span> <span class="hljs-keyword">\clist_get:NN</span> <span class="hljs-params">#1</span><span class="hljs-params">#2</span><br>  &#123;<br><span class="hljs-keyword">\if_meaning:w</span> <span class="hljs-params">#1</span> <span class="hljs-keyword">\c_empty_clist</span><br>  <span class="hljs-keyword">\tl_set:Nn</span> <span class="hljs-params">#2</span> &#123; <span class="hljs-keyword">\q_no_value</span> &#125;<br><span class="hljs-keyword">\else:</span><br>  <span class="hljs-keyword">\exp_after:wN</span> <span class="hljs-keyword">\__clist_get:wN</span> <span class="hljs-params">#1</span> , <span class="hljs-keyword">\s__clist_stop</span> <span class="hljs-params">#2</span><br>    <span class="hljs-keyword">\fi:</span><br>  &#125;<br></code></pre></td></tr></table></figure><p>有了这个例子作为参考，就很好理解这个 <code>w</code> - signarture 了.</p><blockquote><p>不然 excute 一个 quark，因为 quark 的定义方式类似: <code>\def\foo&#123;\foo&#125;</code>；一旦 excute  一个 quark， 就会导致无限循环.</p></blockquote><p>如果定义的使用了 <code>w</code>-type, 那么你极大可能是为了完成一些 <strong>参数解析</strong> 的工作。所以一般情况下写一个 <code>w</code> 参数就行了, 比如这样:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\cs_new:Npn</span> <span class="hljs-keyword">\triple_parser:w</span> (<span class="hljs-params">#1</span>,<span class="hljs-params">#2</span>,<span class="hljs-params">#3</span>) &#123;<br>  <span class="hljs-keyword">\#</span>1~is:~<span class="hljs-params">#1</span><span class="hljs-keyword">\par</span><br>  <span class="hljs-keyword">\#</span>2~is:~<span class="hljs-params">#2</span><span class="hljs-keyword">\par</span><br>  <span class="hljs-keyword">\#</span>3~is:~<span class="hljs-params">#3</span><br>&#125;<br><span class="hljs-keyword">\triple_parser:w</span> (a, bb, ccc)<br><br><span class="hljs-comment">% RESULT:</span><br><span class="hljs-comment">% #1 is: a</span><br><span class="hljs-comment">% #2 is: bb</span><br><span class="hljs-comment">% #3 is: ccc</span><br></code></pre></td></tr></table></figure><p>而且并不推荐在一个 <code>w</code>-argument 后接太多的其它 signature, 比如:</p><ul><li>\foo_bar:wnw</li><li>\foo_bar:ww</li></ul><p>这两种写法都是不推荐的. 但是有时候你可能会看到 <code>:wn</code>, <code>:wN</code> 这种类型的 signature. 比如 <code>\exp_after:wN</code>.如果你拿不准主意，就直接写 <code>:w</code> 就好了，不用管其它的.</p><blockquote><p>关于参数解析，或者是参数预处理器，可以使用 xparse  中的 processor, 也可以依托于 xparse 来定义你自己的 processor.</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>expansion</tag>
      
      <tag>protect</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mathematica Tip</title>
    <link href="/2024/05/29/mathematica_tip/"/>
    <url>/2024/05/29/mathematica_tip/</url>
    
    <content type="html"><![CDATA[<h2 id="模式匹配">模式匹配</h2><p>模式匹配可以说是 Mathematica 的精华，下面例举几个常用的在 Mathematica 中自定义函数时可能会用到的模式匹配:</p><h3 id="可变个数参数">可变个数参数</h3><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-type">x_</span>   <span class="hljs-operator">:</span> 匹配任意表达式<br><span class="hljs-type">x__</span>  <span class="hljs-operator">:</span> 一个或者多个变量<br><span class="hljs-type">x___</span> <span class="hljs-operator">:</span> 零个<span class="hljs-operator">,</span>一个或多个变量<br></code></pre></td></tr></table></figure><h3 id="参数类型">参数类型</h3><p>我们还可以限定自定义函数参数匹配的类型, 分为简单模式和复杂模式:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-type">x_Integer</span>   <span class="hljs-operator">:</span> 匹配整数<br><span class="hljs-type">x_</span><span class="hljs-operator">?</span><span class="hljs-built_in">NumberQ</span>  <span class="hljs-operator">:</span> 检验对应的参数是否为数字<br></code></pre></td></tr></table></figure><h2 id="一个应用">一个应用</h2><p>Mathematica中有一个 <code>MaTeX</code> 包，可以用于在 Mathematica 中使用 LaTeX 公式,但是很多时候这个MaTeX命令并不能很好的和 Mathematica 的命令结合，所以我定义了一个如下命令,用于输出一个函数的积分的 LaTeX 表达式. 命令如下:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">TeXint</span><span class="hljs-punctuation">[</span><span class="hljs-type">f_</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">:=</span> <span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">res</span><span class="hljs-operator">,</span> <span class="hljs-variable">expression</span><span class="hljs-operator">,</span> <span class="hljs-variable">stringConcat</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span><br>    <span class="hljs-comment">(* string concat function *)</span><br>    <span class="hljs-variable">stringConcat</span><span class="hljs-punctuation">[</span><span class="hljs-type">list__</span><span class="hljs-punctuation">]</span><span class="hljs-operator">:=</span><span class="hljs-built_in">ToString</span><span class="hljs-operator">/@</span><span class="hljs-built_in">List</span><span class="hljs-punctuation">[</span><span class="hljs-variable">list</span><span class="hljs-punctuation">]</span><span class="hljs-operator">//</span><span class="hljs-built_in">StringJoin</span><span class="hljs-operator">;</span><br>    <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">Integrate</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br>    <span class="hljs-variable">expression</span><span class="hljs-operator">=</span><span class="hljs-variable">stringConcat</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;\\int&quot;</span><span class="hljs-operator">,</span> <span class="hljs-variable">f</span><span class="hljs-operator">//</span><span class="hljs-built_in">TeXForm</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;\\mathrm&#123;d&#125;x&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;=&quot;</span><span class="hljs-operator">,</span> <span class="hljs-variable">res</span><span class="hljs-operator">//</span><span class="hljs-built_in">TeXForm</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br>    <span class="hljs-comment">(* return a TeX Formula *)</span><br>    <span class="hljs-variable">MaTeX</span><span class="hljs-punctuation">[</span><span class="hljs-variable">expression</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>安装 MaTeX 后运行如下命令:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-operator">&lt;&lt;</span> <span class="hljs-variable">MaTeX</span><span class="hljs-operator">`</span><br><br><span class="hljs-comment">(* or *)</span><br><span class="hljs-built_in">Needs</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;MaTeX`&quot;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>然后在运行我上面定义的那个 <code>TeXint[]</code> 函数:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">TeXint</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">/</span><span class="hljs-punctuation">(</span><span class="hljs-variable">x</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">+</span><span class="hljs-variable">x</span><span class="hljs-operator">+</span><span class="hljs-number">3</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>最终你就可以得到如下的一个漂亮输出：</p><p><img src="/img/mathematica_tip/MaTeX_example.png" alt="MaTeX Example"></p><h2 id="More">More</h2><p>其实 Mathematical 有一个插件仓库的东西,地址如下:</p><ul><li><a href="https://resources.wolframcloud.com/PacletRepository/">PacletRepository</a></li></ul><p>这个里面也许有一些你能用的上的插件.</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mathematica</tag>
      
      <tag>MaTeX</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Something about l3key2e TeX</title>
    <link href="/2024/05/29/l3keyval/"/>
    <url>/2024/05/29/l3keyval/</url>
    
    <content type="html"><![CDATA[<h2 id="关于default与initial的区别">关于default与initial的区别</h2><p>请看如下一段代码:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\keys_define:nn</span> &#123;mymodule&#125;&#123;<br>    keya    .code:n     = &#123;Enter~ keya&#125;,<br>    keya    .initial:n  = &#123;value-a&#125;,<br>    keyb    .code:N     = &#123;Enter~ keyb&#125;,<br>    keyb    .default:n  = &#123;value-b&#125;,<br>&#125;<br><span class="hljs-keyword">\keys_set:nn</span> &#123;mymodule&#125;&#123;keyb&#125;<br></code></pre></td></tr></table></figure><p>在上述的例子中一个是<code>.initial:n</code>, 一个是 <code>.default:n</code>, 都表示设置其默认值。但是在命令<code>\keys_set:nn</code>中如果没有出现<code>keyb</code>,不管这个<code>keyb</code>有没有赋值，对应的<code>.default</code>语句都不会执行。但是和<code>.default</code>不同的是，<code>.initial</code>不管有没有输入对应的<code>keya</code>,对应的<code>.initial</code> 语句均会执行.</p><h2 id="meta-元键">meta-元键</h2><p>其实就是你传入的参数，比如<code>&#123;keya=valuea, keyb=valueb&#125;</code> 解释为键值对，然后再提取value给对应的key进行赋值. 详细的说明请参见下图:</p><p><img src="/img/l3key2e/meta-key.png" alt="meta-key"></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>l3key2e</tag>
      
      <tag>package-option</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mathematica Dark Theme</title>
    <link href="/2024/05/29/mathematica_dark_theme/"/>
    <url>/2024/05/29/mathematica_dark_theme/</url>
    
    <content type="html"><![CDATA[<h2 id="自定义黑色主题">自定义黑色主题</h2><p>我模仿别人的模板做了一个mathematica的暗色主题，相关设置如下，只需要把对应的代码复制到Mathematica中直接运行即可.</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-comment">(* 笔记本背景 *)</span><br><span class="hljs-built_in">SetOptions</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">EvaluationNotebook</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Background</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br><br><span class="hljs-comment">(* 绘图label设置 *)</span><br><span class="hljs-built_in">SetOptions</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">Plot</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Plot3D</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">LabelStyle</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">White</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br><br><span class="hljs-comment">(* 语法高亮设置 *)</span><br><span class="hljs-built_in">SetOptions</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">EvaluationNotebook</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br>    <span class="hljs-built_in">Background</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br>    <span class="hljs-built_in">AutoStyleOptions</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-string">&quot;LocalVariableStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">0.25098</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-comment">(* 局部变量颜色 *)</span><br>        <span class="hljs-string">&quot;StringStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0.86</span><span class="hljs-operator">,</span> <span class="hljs-number">0.56</span><span class="hljs-operator">,</span> <span class="hljs-number">0.06</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-comment">(* 字符串颜色 *)</span><br>        <span class="hljs-string">&quot;CommentStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0.5019607843137255</span><span class="hljs-operator">,</span> <span class="hljs-number">1.</span><span class="hljs-operator">,</span> <span class="hljs-number">0.5019607843137255</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span><br>            <span class="hljs-built_in">ShowAutoStyles</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">False</span><span class="hljs-operator">,</span> <span class="hljs-built_in">ShowSyntaxStyles</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">False</span><span class="hljs-operator">,</span><br>            <span class="hljs-built_in">AutoNumberFormatting</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">False</span><span class="hljs-operator">,</span><br>            <span class="hljs-built_in">TranslationOptions</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-string">&quot;Enabled&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">False</span><span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-comment">(* 注释颜色 *)</span><br>        <span class="hljs-string">&quot;FunctionLocalVariableStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0.6196078431372549</span><span class="hljs-operator">,</span> <span class="hljs-number">0.6196078431372549</span><span class="hljs-operator">,</span> <span class="hljs-number">0.6196078431372549</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-comment">(* 函数中局部变量的颜色 *)</span><br>        <span class="hljs-string">&quot;PatternVariableStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0.5019607843137255</span><span class="hljs-operator">,</span> <span class="hljs-number">0.5019607843137255</span><span class="hljs-operator">,</span> <span class="hljs-number">1.</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">FontSlant</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-string">&quot;Italic&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-comment">(* 模式匹配变量的颜色 *)</span><br>        <span class="hljs-string">&quot;UndefinedSymbolStyle&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">FontColor</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">RGBColor</span><span class="hljs-punctuation">[</span><span class="hljs-number">0.93</span><span class="hljs-operator">,</span> <span class="hljs-number">0.62</span><span class="hljs-operator">,</span> <span class="hljs-number">0.46</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-comment">(* 未赋值的全局符号的颜色 *)</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br><br><span class="hljs-comment">(* 使用下面的命令获取当前高亮参数 *)</span><br><span class="hljs-comment">(*Options[Notebook, AutoStyleOptions]*)</span><br><span class="hljs-comment">(* 备注:匹配的函数头需要单独手动设置语法高亮为: RGB(128, 128, 192) *)</span><br></code></pre></td></tr></table></figure><h2 id="效果">效果</h2><p>最终的效果如下:<br><img src="/img/mathematica_dark_theme/output.png" alt="黑色主题效果"></p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mathematica</tag>
      
      <tag>dark-theme</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Hyperref进行精确跳转</title>
    <link href="/2024/05/29/hyperref/"/>
    <url>/2024/05/29/hyperref/</url>
    
    <content type="html"><![CDATA[<h2 id="什么是精确跳转">什么是精确跳转</h2><p>在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 中使用 <code>\label-\ref</code> 一组命令用于标签的跳转时往往会出现下面的情况:</p><blockquote><p>我命令在某一行定义的这个label，但是为什么在后文ref引用后，点击跳转到了一个很奇怪的地方，而不是我自己定义label的所在行</p></blockquote><p>其实这个并不是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 的问题，你可以理解为这个label激活的位置是与这个便签最邻近的如下元素:</p><ul><li>chpater/section/subsection 等元素</li><li>由<code>\newtheorem</code> 声明的定理类环境位置</li></ul><p>然后你点击后就会跳转到上述的&quot;奇怪&quot;的位置</p><h2 id="方法">方法</h2><p>但是总归是有方法的，其实就是使用宏包 <code>hyperref</code>, 使用它提供的如下两个命令</p><ul><li><code>\hypertarget</code> 进行label的定义</li><li><code>\hyperlink</code> 进行跳转操作</li></ul><p>一个完整的示例如下</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\documentclass</span>&#123;ctexart&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;zhlipsum&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;hyperref&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\section</span>&#123;Test 1&#125;<br><span class="hljs-keyword">\zhlipsum</span>[1-10]<br><br><span class="hljs-keyword">\noindent</span><span class="hljs-keyword">\rule</span>&#123;1<span class="hljs-keyword">\linewidth</span>&#125;&#123;2pt&#125;<br><span class="hljs-keyword">\hypertarget</span>&#123;label-1&#125;&#123;<span class="hljs-keyword">\textbf</span>&#123;Destination&#125;&#125;<br><br><span class="hljs-keyword">\zhlipsum</span>[1-10]<br><br><span class="hljs-keyword">\section</span>&#123;Test 2&#125;<br><span class="hljs-keyword">\zhlipsum</span>[3-4]<br><span class="hljs-keyword">\hyperlink</span>&#123;label-1&#125;&#123;<span class="hljs-keyword">\textbf</span>&#123;ClickMe&#125;&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hyperref</tag>
      
      <tag>label/ref</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LaTeX listing</title>
    <link href="/2024/05/29/latex_listing/"/>
    <url>/2024/05/29/latex_listing/</url>
    
    <content type="html"><![CDATA[<h2 id="listing-only">listing only</h2><p>一个自己使用的基于<code>minted</code> 和 <code>tcolorbox</code> 宏包的代码抄录环境，样式说明</p><ul><li>增加圆角</li><li>浅色背景</li><li>可跨页</li></ul><p>其实关于代码抄录的核心选项为: <code>listing only</code>, 自定义环境的完整声明为:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs LaTeX"><span class="hljs-keyword">\usepackage</span>&#123;minted&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;tcolorbox&#125;<br><span class="hljs-keyword">\tcbuselibrary</span>&#123;minted, breakable, skins&#125;<br><span class="hljs-keyword">\tcbset</span>&#123;listing engine=minted&#125;<br><span class="hljs-keyword">\definecolor</span>&#123;bg&#125;&#123;RGB&#125;&#123;242, 242, 242&#125;<br><span class="hljs-keyword">\newtcblisting</span>&#123;code&#125;[1][text]&#123;<br>  <span class="hljs-comment">% basic settings</span><br>  enhanced,<br>  breakable,<br>  listing only, <br>  colback=bg, <br>  frame hidden, <br>  left=1mm, right=1mm,<br>  top=0mm, bottom=0mm, <br>  <span class="hljs-comment">% minted options</span><br>  minted language=<span class="hljs-params">#1</span>, <br>  minted style=manni,<br>  minted options = &#123;  <br>    autogobble,<br>    tabsize=2,<br>    breaklines=true, <br>    breakanywhere=true,<br>    breakanywheresymbolpre=,<br>    breaksymbolleft=,<br>    fontsize=<span class="hljs-keyword">\footnotesize</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用方法如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs LaTeX"><span class="hljs-keyword">\begin</span>&#123;code&#125;[&lt;language&gt;]<br>&lt;your code&gt;<br><span class="hljs-keyword">\end</span>&#123;code&#125;<br></code></pre></td></tr></table></figure><p>使用效果如下<br><img src="/img/latex_listing/example.png" alt="跨页效果"></p><h2 id="text-and-listing">text and listing</h2><p>在制作文档类或者是宏包时，作者或许需要一些示例，这些示例的展现形式为:</p><ul><li>左侧源代码</li><li>右侧结果展示</li></ul><p>更过详细信息可以参见: <a href="https://tex.stackexchange.com/q/19295/294585">https://tex.stackexchange.com/q/19295/294585</a>, 或对应的宏包手册. <code>tcolorbox</code> 提供了这个接口，对应选项为: <code>listing and text</code>. 和此选项相关的几个选项为:</p><ul><li><code>sidebyside</code>: 源码和结果横向分布，默认上下分布</li><li><code>listing and text</code>/<code>text and listing</code>: 源码和结果先后顺序</li></ul><p>下面是一个我自己常用的代码样例环境:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>&#123;xparse&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;minted&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;tcolorbox&#125;<br><span class="hljs-keyword">\tcbuselibrary</span>&#123;listings, minted, breakable, skins&#125;<br><span class="hljs-keyword">\tcbset</span>&#123;listing engine=minted&#125;<br><span class="hljs-keyword">\definecolor</span>&#123;bg&#125;&#123;RGB&#125;&#123;242, 242, 242&#125;<br><span class="hljs-keyword">\DeclareTCBListing</span>&#123;code&#125;&#123;!O&#123;tex&#125;&#125;&#123;<br>  <span class="hljs-comment">% ==&gt; basic settings</span><br>  enhanced,<br>  breakable,<br>  colback=bg, <br>  frame hidden, <br>  left=1mm, right=1mm,<br>  top=0mm, bottom=0mm, <br>  <span class="hljs-comment">%</span><br>  <span class="hljs-comment">% </span><br>  <span class="hljs-comment">% ==&gt; source and ouput</span><br>  sidebyside, <br>  listing and text,<br>  <span class="hljs-comment">% listing only, </span><br>  <span class="hljs-comment">% text and listing,</span><br>  <span class="hljs-comment">% listing outside text,</span><br>  <span class="hljs-comment">%</span><br>  <span class="hljs-comment">% </span><br>  <span class="hljs-comment">% ==&gt; minted options</span><br>  minted language=<span class="hljs-params">#1</span>, <br>  minted style=manni,<br>  minted options = &#123;  <br>    autogobble,<br>    tabsize=2,<br>    breaklines=true, <br>    breakanywhere=true,<br>    breakanywheresymbolpre=,<br>    breaksymbolleft=,<br>    fontsize=<span class="hljs-keyword">\footnotesize</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>这里我使用了命令 <code>\DeclareTCBListing</code>, 需要 <code>xparse</code> 宏包来为此环境提供默认参数功能，其中符号 <code>!</code> 表示不忽略默认参数中的空格.</p></blockquote><p>使用效果如下<br><img src="/img/latex_listing/example_2.png" alt="text and listing"></p><h2 id="tkzexample">tkzexample</h2><p>处理使用 <code>tcolorbox</code> 提供的接口外，我们还可使用宏包 <code>tkzexample</code> 来实现此功能. 一个基本配置样例:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-comment">% settings</span><br><span class="hljs-keyword">\usepackage</span>&#123;tkzexample&#125; <br><span class="hljs-keyword">\usepackage</span>[protrusion = true,<br>            expansion, final,<br>            verbose = false, babel   = true]&#123;microtype&#125;<br><span class="hljs-keyword">\DisableLigatures</span>&#123;encoding = T1, family = tt*&#125;  <br><span class="hljs-keyword">\colorlet</span>&#123;graphicbackground&#125;&#123;blue!10!white&#125;<br><span class="hljs-keyword">\colorlet</span>&#123;codebackground&#125;&#123;red!10&#125;<br><br><br><span class="hljs-comment">% example </span><br><span class="hljs-keyword">\begin</span>&#123;tkzexample&#125;[latex=.5<span class="hljs-keyword">\linewidth</span>]<br><span class="hljs-keyword">\newcommand</span>&#123;<span class="hljs-keyword">\foo</span>&#125;&#123;foo&#125;<br><span class="hljs-keyword">\foo</span><br><span class="hljs-keyword">\end</span>&#123;tkzexample&#125;<br></code></pre></td></tr></table></figure><p>具体效果如下:<br><img src="/img/latex_listing/example_3.png" alt="text and listing"></p><h2 id="使用aux辅助">使用aux辅助</h2><p>也可以参考: <a href="https://github.com/CTeX-org/lshort-zh-cn/blob/e95288a697822a6f63e6f2eb1b9160a6f324c566/src/lshort-zh-cn-style.sty">lshort-zh-cn-style.sty</a> 的思路，先把环境中的内容输出到一个外部文件，然后使用 <code>verbatim</code> 宏包提供的 <code>verbatiminput</code> 命令导入刚才输出的文本.</p><p>具体的实现细节如下:</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\usepackage</span>&#123;verbatim&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;xcolor&#125;<br><br><br><span class="hljs-comment">% &#x27;example&#x27; environment</span><br><span class="hljs-keyword">\makeatletter</span><br><span class="hljs-keyword">\newwrite</span><span class="hljs-keyword">\example@out</span><br><span class="hljs-keyword">\newlength</span><span class="hljs-keyword">\savefboxrule</span><br><span class="hljs-keyword">\newlength</span><span class="hljs-keyword">\savefboxsep</span><br><span class="hljs-keyword">\edef</span><span class="hljs-keyword">\example@name</span>&#123;<span class="hljs-keyword">\jobname</span>-example.aux&#125;<br><span class="hljs-keyword">\newenvironment</span>&#123;example&#125;<span class="hljs-comment">%</span><br>&#123;<span class="hljs-keyword">\begingroup</span><span class="hljs-keyword">\@bsphack</span><br>  <span class="hljs-keyword">\immediate</span><span class="hljs-keyword">\openout</span><span class="hljs-keyword">\example@out</span>=<span class="hljs-keyword">\example@name</span><br>  <span class="hljs-keyword">\let</span><span class="hljs-keyword">\do</span><span class="hljs-keyword">\@makeother</span><span class="hljs-keyword">\dospecials</span><span class="hljs-keyword">\catcode</span>`<span class="hljs-keyword">\^^M</span><span class="hljs-keyword">\active</span><br>  <span class="hljs-keyword">\def</span><span class="hljs-keyword">\verbatim@processline</span>&#123;<span class="hljs-keyword">\immediate</span><span class="hljs-keyword">\write</span><span class="hljs-keyword">\example@out</span>&#123;<span class="hljs-keyword">\the</span><span class="hljs-keyword">\verbatim@line</span>&#125;&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\verbatim@start</span>&#125;<span class="hljs-comment">%</span><br>&#123;<span class="hljs-keyword">\immediate</span><span class="hljs-keyword">\closeout</span><span class="hljs-keyword">\example@out</span><span class="hljs-keyword">\@esphack</span><span class="hljs-keyword">\endgroup</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\trivlist</span><span class="hljs-keyword">\item</span><span class="hljs-keyword">\relax</span><br>  <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\savefboxrule</span>&#125;&#123;<span class="hljs-keyword">\fboxrule</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\savefboxsep</span>&#125;&#123;<span class="hljs-keyword">\fboxsep</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxsep</span>&#125;&#123;0.015<span class="hljs-keyword">\textwidth</span>&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxrule</span>&#125;&#123;0.4pt&#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\fcolorbox</span>[gray]&#123;0&#125;&#123;0.95&#125;&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\begin</span>&#123;minipage&#125;[c]&#123;0.45<span class="hljs-keyword">\textwidth</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxrule</span>&#125;&#123;<span class="hljs-keyword">\savefboxrule</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxsep</span>&#125;&#123;<span class="hljs-keyword">\savefboxsep</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\small</span><span class="hljs-keyword">\verbatiminput</span>&#123;<span class="hljs-keyword">\example@name</span>&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\end</span>&#123;minipage&#125;<span class="hljs-comment">%</span><br>  &#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\hfill</span><span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\fbox</span>&#123;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\begin</span>&#123;minipage&#125;[c]&#123;0.45<span class="hljs-keyword">\textwidth</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxrule</span>&#125;&#123;<span class="hljs-keyword">\savefboxrule</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\fboxsep</span>&#125;&#123;<span class="hljs-keyword">\savefboxsep</span>&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\setlength</span>&#123;<span class="hljs-keyword">\parskip</span>&#125;&#123;1ex plus 0.4ex minus 0.2ex&#125;<span class="hljs-comment">%</span><br>      <span class="hljs-keyword">\normalsize</span><span class="hljs-keyword">\input</span>&#123;<span class="hljs-keyword">\example@name</span>&#125;<span class="hljs-comment">%</span><br>    <span class="hljs-keyword">\end</span>&#123;minipage&#125;<span class="hljs-comment">%</span><br>  &#125;<span class="hljs-comment">%</span><br>  <span class="hljs-keyword">\endtrivlist</span><br>&#125;<br><span class="hljs-keyword">\makeatother</span><br><br><br><span class="hljs-comment">% usage </span><br><span class="hljs-keyword">\begin</span>&#123;example&#125;<br>daughter-in-law, X-rated<span class="hljs-keyword">\\</span><br>pages 13--67<span class="hljs-keyword">\\</span><br>yes---or no?<br><span class="hljs-keyword">\end</span>&#123;example&#125;<br></code></pre></td></tr></table></figure><p>具体呈现效果如下:<br><img src="/img/latex_listing/example_4.png" alt="text and listing"></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tcolorbox</tag>
      
      <tag>minted</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo Admin</title>
    <link href="/2024/05/19/hexo-admin/"/>
    <url>/2024/05/19/hexo-admin/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo-admin">Hexo admin</h2><p>Hexo admin makes your hexo something like dynamic blog. Making writing and posting blogs easier.</p><h3 id="install">install</h3><p>install <code>hexo-admin</code> using</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save hexo-admin<br></code></pre></td></tr></table></figure><h3 id="security">security</h3><p>set passwd for admin see <a href="https://github.com/jaredly/hexo-admin">github-admin-passwd</a></p>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pip Tutorial</title>
    <link href="/2024/05/16/pip_tutorial/"/>
    <url>/2024/05/16/pip_tutorial/</url>
    
    <content type="html"><![CDATA[<h2 id="1-环境说明">1. 环境说明</h2><p>本虚拟环境专用于数据分析，科学计算，虚拟环境的创建方法：切换到虚拟环境的目标路径下,然后运行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">&lt;python&gt; -m virtualenv &lt;虚拟环境名称&gt;</span><br>python -m virtualenv &lt;env-name&gt;<br></code></pre></td></tr></table></figure><p>根据你的python版本需更进行更改，或者是使用Python的具体路径进行不同版本Python的区分</p><h2 id="2-pip安装包">2. pip安装包</h2><ol><li>通过命令行安装必须把  <strong>python38(37)</strong> 中的 <strong>python3.8.exe(python3.7.exe</strong>) 重命名为 <strong>python.exe.</strong>【一一对应即可】</li><li>想要麻烦一点就使用 <strong>Pycharm</strong> 安装库</li></ol><h2 id="3-pip源配置">3. pip源配置</h2><p>使用如下命令进行配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip config set global.index-url &lt;url&gt;<br></code></pre></td></tr></table></figure><p>具体的配置文件的位置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:\Users\PC\AppData\Roaming\pip\pip.ini<br></code></pre></td></tr></table></figure><p>移除更换全局的pip源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip config unset global.index-url<br></code></pre></td></tr></table></figure><p>常用源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">清华源：<br>https://pypi.tuna.tsinghua.edu.cn/simple<br><br>阿里云源：<br>http://mirrors.aliyun.com/pypi/simple/<br><br>中科大源： <br>https://pypi.mirrors.ustc.edu.cn/simple/<br><br>豆瓣源：<br>http://pypi.douban.com/simple/<br></code></pre></td></tr></table></figure><h2 id="4-pip配置代理">4. pip配置代理</h2><p>如果你的计算机上的1080端口被代理,那么使用如下命令即可进行<code>pip</code>命令的代理:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install  --proxy=http://127.0.0.1:1080<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pip</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lp Normal in Dual Space</title>
    <link href="/2024/05/16/Lp_Normal_In_Dual_Sapce/"/>
    <url>/2024/05/16/Lp_Normal_In_Dual_Sapce/</url>
    
    <content type="html"><![CDATA[<div class="note note-danger">            <p>楼红卫老师原书中定理自己理解有误, 其分子为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle\int_{\mathbb{R}^n}{f(x)g(x)}\;\mathrm{d}\bm{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2719em;vertical-align:-0.9119em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span>, 可以不用加绝对值.只需要添加一个对应的符号函数项即可. 尽管一般的书里面写的是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>u</mi><msub><mi mathvariant="normal">∥</mi><mrow><msup><mi>L</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mi mathvariant="normal">Ω</mi><mo stretchy="false">)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">\|u\|_{L^1(\Omega)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord">∥</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight">Ω</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span></span></span></span>的形式,而这个形式里面就有绝对值，所以自己才把这个搞混了.</p>          </div><h2 id="1-定理陈述">1. 定理陈述</h2><p>我们可以通过HÖlder不等式得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mi>p</mi></msup></mrow><annotation encoding="application/x-tex">L^p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span></span>中函数的模的另一种形式, 这一形式定义如下:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub><mo>=</mo><munder><mrow><mi>sup</mi><mo>⁡</mo></mrow><mstyle scriptlevel="1"><mtable rowspacing="0.1em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi>g</mi><mo>∈</mo><msup><mi>L</mi><mi>q</mi></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></munder><mfrac><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi></mstyle><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mfrac><mo>=</mo><munder><mrow><mi>sup</mi><mo>⁡</mo></mrow><mstyle scriptlevel="1"><mtable rowspacing="0.1em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi>g</mi><mo>∈</mo><msup><mi>L</mi><mi>q</mi></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></munder><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi></mstyle></mrow><annotation encoding="application/x-tex">\|f\|_p = \sup\limits_{\substack{g\in L^q(\mathbb{R}^n)\\ \|g\|_q\neq 0}} \frac{\displaystyle\int_{\mathbb{R}^n}{|f(x)g(x)|}\;\mathrm{d}\bm{x}}{\|g\|_q} = \sup\limits_{\substack{g\in L^q(\mathbb{R}^n)\\ \|g\|_q=1}}\displaystyle\int_{\mathbb{R}^n}{|f(x)g(x)|}\;\mathrm{d}\bm{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.5447em;vertical-align:-1.8828em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-1.7534em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2659em;"><span style="top:-3.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span><span style="top:-2.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mtight">∥</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mtight"><span class="mord mtight">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7659em;"><span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">sup</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8828em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.662em;"><span style="top:-2.674em;"><span class="pstrut" style="height:3.36em;"></span><span class="mord"><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.59em;"><span class="pstrut" style="height:3.36em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.662em;"><span class="pstrut" style="height:3.36em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.2428em;vertical-align:-1.8828em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-1.7534em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2659em;"><span style="top:-3.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span><span style="top:-2.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mtight">∥</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mtight"><span class="mord mtight">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7659em;"><span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">sup</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8828em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span></span></p><p>这里 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo separator="true">,</mo><mi>q</mi><mo>∈</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mo>+</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p, q\in(1, +\infty)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mord">∞</span><span class="mclose">)</span></span></span></span>为对偶数. 这里仅证明第一个等号</p><h2 id="2-证明">2.证明</h2><p>根据Holder不等式有:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext>RHS</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munder><mrow><mi>sup</mi><mo>⁡</mo></mrow><mstyle scriptlevel="1"><mtable rowspacing="0.1em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi>g</mi><mo>∈</mo><msup><mi>L</mi><mi>q</mi></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></munder><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mstyle></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><munder><mrow><mi>sup</mi><mo>⁡</mo></mrow><mstyle scriptlevel="1"><mtable rowspacing="0.1em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi>g</mi><mo>∈</mo><msup><mi>L</mi><mi>q</mi></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="1" displaystyle="false"><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub><mo mathvariant="normal">≠</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mstyle></munder><msup><mrow><mo fence="true">(</mo><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi></mstyle><mo fence="true">)</mo></mrow><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi></mrow></msup><mo>⋅</mo><msup><mrow><mo fence="true">(</mo><mstyle scriptlevel="0" displaystyle="true"><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mi>q</mi></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi></mstyle><mo fence="true">)</mo></mrow><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>q</mi></mrow></msup><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub><mo>⋅</mo><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub><mo>=</mo><mtext>LHS</mtext></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}\text{RHS} &amp; = \sup\limits_{\substack{g\in L^q(\mathbb{R}^n)\\ \|g\|_q\neq 0}} \displaystyle\int_{\mathbb{R}^n}{|f(x)g(x)|}\;\mathrm{d}\bm{x}\bigg/\|g\|_q\\&amp; \le \sup\limits_{\substack{g\in L^q(\mathbb{R}^n)\\ \|g\|_q\neq 0}} \left(\displaystyle\int_{\mathbb{R}^n}{|f(x)|^p}\;\mathrm{d}\bm{x}\right)^{1/p}\cdot \left(\displaystyle\int_{\mathbb{R}^n}{|g(x)|^q}\;\mathrm{d}\bm{x}\right)^{1/q}\bigg/\|g\|_q\\&amp; = \|f\|_p \cdot \|g\|_q \bigg/\|g\|_q \\&amp; = \|f\|_p = \text{LHS}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:11.7434em;vertical-align:-5.6217em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.1217em;"><span style="top:-8.3996em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord text"><span class="mord">RHS</span></span></span></span><span style="top:-4.489em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:-0.8562em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:1.2338em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.6217em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.1217em;"><span style="top:-8.3996em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-1.7534em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2659em;"><span style="top:-3.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span><span style="top:-2.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mtight">∥</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mtight"><span class="mord mtight">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7659em;"><span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">sup</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8828em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.489em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-1.7534em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2659em;"><span style="top:-3.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span><span style="top:-2.2659em;"><span class="pstrut" style="height:2.75em;"></span><span class="mord mtight"><span class="mord mtight">∥</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mtight"><span class="mord mtight">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7659em;"><span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">sup</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8828em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1/</span><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1/</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-0.8562em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:1.2338em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">LHS</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.6217em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>然后选取一个特殊的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>g</mi><msub><mo stretchy="false">(</mo><mn>0</mn></msub><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(x) = g(_0x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>, 证明 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LHS</mtext><mo>≤</mo><mtext>RHS</mtext></mrow><annotation encoding="application/x-tex">\text{LHS}\le \text{RHS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord text"><span class="mord">LHS</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">RHS</span></span></span></span></span>, 这里取</p><p class='katex-block katex-error ' title='ParseError: KaTeX parse error: Undefined control sequence: \sgn at position 37: …= f^{p-1}\cdot \̲s̲g̲n̲(f)\end{align}…'>\begin{align}g_0(x) = f^{p-1}\cdot \sgn(f)\end{align}</p><p>那么此时是我们有</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">∥</mi><mi>g</mi><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mo fence="true">(</mo><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mrow><mo stretchy="false">(</mo><mi>p</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi>q</mi></mrow></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="true">)</mo></mrow><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>q</mi></mrow></msup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mo fence="true">(</mo><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="true">)</mo></mrow><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>q</mi></mrow></msup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mo fence="true">(</mo><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="true">)</mo></mrow><mrow><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>q</mi><mo stretchy="false">)</mo></mrow></msup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msubsup><mi mathvariant="normal">∥</mi><mi>p</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}\|g\|_q  &amp; = \left(\int_{\mathbb{R}^n}{|f(x)|^{(p-1)q}}\;\mathrm{d}\bm{x}\right)^{1/q} \\&amp; = \left(\int_{\mathbb{R}^n}{|f(x)|^{p}}\;\mathrm{d}\bm{x}\right)^{1/q} \\&amp; = \left(\int_{\mathbb{R}^n}{|f(x)|^{p}}\;\mathrm{d}\bm{x}\right)^{(1/p)\cdot(p/q)} \\&amp; = \|f\|_p^{p-1}\end{align}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:10.481em;vertical-align:-4.9905em;"></span><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.4905em;"><span style="top:-7.4905em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.5126em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:-1.5346em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:0.5795em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.9905em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.4905em;"><span style="top:-7.4905em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1/</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span></span><span style="top:-4.5126em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1/</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span></span><span style="top:-1.5346em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1/</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mord mtight">/</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span><span style="top:0.5795em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.9905em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.4905em;"><span style="top:-7.4905em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:-4.5126em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:-1.5346em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:0.5795em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.9905em;"><span></span></span></span></span></span></span></span></span></p><p>那么此时对于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>RHS</mtext></mrow><annotation encoding="application/x-tex">\text{RHS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">RHS</span></span></span></span></span>有:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext>RHS</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msub><mi>g</mi><mn>0</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><msub><mi>g</mi><mn>0</mn></msub><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><msup><mrow><mo fence="true">(</mo><msub><mo>∫</mo><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></msub><mrow><mi mathvariant="normal">∣</mi><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mi>p</mi></msup></mrow><mtext>  </mtext><mi mathvariant="normal">d</mi><mi mathvariant="bold-italic">x</mi><mo fence="true">)</mo></mrow><mrow><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>p</mi></mrow></msup><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><msub><mi>g</mi><mn>0</mn></msub><msub><mi mathvariant="normal">∥</mi><mi>q</mi></msub></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msubsup><mi mathvariant="normal">∥</mi><mi>p</mi><mi>p</mi></msubsup><mo fence="false" stretchy="true" minsize="2.4em" maxsize="2.4em">/</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msubsup><mi mathvariant="normal">∥</mi><mi>p</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr><mtr><mtd class ="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub><mo>=</mo><mtext>LHS</mtext></mrow></mstyle></mtd><mtd class ="mtr-glue"></mtd><mtd class ="mml-eqn-num"></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}\text{RHS}&amp; \ge \int_{\mathbb{R}^n}{|f(x)g_0(x)|}\;\mathrm{d}\bm{x}\bigg/\|g_0\|_q \\&amp; \ge \left(\int_{\mathbb{R}^n}{|f(x)|^p}\;\mathrm{d}\bm{x}\right)^{(1/p)\cdot p}\bigg/\|g_0\|_q \\&amp; = \|f\|_p^p\bigg/\|f\|_p^{p-1}\\&amp; = \|f\|_p = \text{LHS}\end{align}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:9.878em;vertical-align:-4.689em;"></span><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.189em;"><span style="top:-7.4669em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord text"><span class="mord">RHS</span></span></span></span><span style="top:-4.489em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:-1.7889em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span><span style="top:0.3011em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.689em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.189em;"><span style="top:-7.4669em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.489em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4297em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathbb mtight">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1/</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.7889em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size3">/</span></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span><span style="top:0.3011em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">LHS</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.689em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.189em;"><span style="top:-7.4669em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:-4.489em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:-1.7889em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span><span style="top:0.3011em;"><span class="pstrut" style="height:3.7279em;"></span><span class="eqn-num"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.689em;"><span></span></span></span></span></span></span></span></span></p><div class="note note-success">            <p>因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi><mo>+</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>q</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1/p+1/q = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, 所以有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>q</mi><mo>=</mo><mi>p</mi><mo>+</mo><mi>q</mi><mo separator="true">,</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>q</mi><mo>=</mo><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">pq=p+q, p/q=p(1-1/p)=p-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">pq</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>.</p>          </div><h2 id="3-对偶空间">3. 对偶空间</h2><p>为何本篇文章的标题中要包含<code>Dual Space</code> ? 我们可以这样看, 假设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\|f\|_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>∈</mo><msup><mi>L</mi><mi>q</mi></msup></mrow><annotation encoding="application/x-tex">g\in L^q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span></span>)是一个定义在空间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mi>q</mi></msup></mrow><annotation encoding="application/x-tex">L^q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span></span>(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mi>p</mi></msup><mo separator="true">,</mo><msup><mi>L</mi><mi>q</mi></msup></mrow><annotation encoding="application/x-tex">L^p, L^q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span></span></span>互为对偶空间)上的线性泛函，那么此时泛函<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\|f\|_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>可以看作一个线性算子，此时就回归到怎么定义线性算子模这一问题了. 此篇文章开头的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>的模的定义正是把 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>f</mi><msub><mi mathvariant="normal">∥</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\|f\|_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>看作一个线性算子时，算子范数的标准定义.</p><blockquote><p>参考: <a href="https://planetmath.org/proofoflpnormisdualtolq">proof of lp norm is dual to lq</a><br>楼红卫: 数学分析</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Normal Inequality</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mathematica Advanced I</title>
    <link href="/2024/03/27/mathematica/"/>
    <url>/2024/03/27/mathematica/</url>
    
    <content type="html"><![CDATA[<p>本文的nb文件GayHub仓库地址,望各位不要吝啬小心心,给咱的小仓库点点小星星</p><p><a href="https://github.com/zongpingding/Mathematica">https://github.com/zongpingding/Mathematica</a></p><h2 id="1-引入">1. 引入</h2><p>先来看一段代码（代码来源：<a href="https://www.zhihu.com/question/55683496/answer/148176925">如何用最简单的代码说明Mathematica里面的各个水平层次？</a>）</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Narcissistic</span><span class="hljs-punctuation">[</span><span class="hljs-type">n_</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">:=</span><br>  <span class="hljs-built_in">Reap</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Scan</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">Join</span> <span class="hljs-operator">@@</span> <span class="hljs-built_in">ConstantArray</span> <span class="hljs-operator">@@@</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span><br>       <span class="hljs-built_in">Scan</span><span class="hljs-punctuation">[</span><br>        <span class="hljs-built_in">If</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">Sort</span><span class="hljs-operator">@</span><span class="hljs-built_in">Tally</span><span class="hljs-operator">@</span><span class="hljs-built_in">IntegerDigits</span><span class="hljs-punctuation">[</span><span class="hljs-type">#</span><span class="hljs-operator">^</span><span class="hljs-variable">n</span> <span class="hljs-operator">.</span> <span class="hljs-variable">count</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">==</span> <br>            <span class="hljs-built_in">Sort</span><span class="hljs-operator">@</span> <span class="hljs-built_in">Thread</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-variable">count</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">)</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Sow</span><span class="hljs-punctuation">[</span><span class="hljs-type">#</span><span class="hljs-operator">^</span><span class="hljs-variable">n</span> <span class="hljs-operator">.</span> <span class="hljs-variable">count</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;,</span> <br>        <span class="hljs-built_in">Fold</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Function</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">digitlist</span><span class="hljs-operator">,</span> <span class="hljs-variable">num</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <br>          <span class="hljs-built_in">Flatten</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Function</span><span class="hljs-punctuation">[</span><span class="hljs-variable">e</span><span class="hljs-operator">,</span> <br>             <span class="hljs-built_in">Join</span><span class="hljs-punctuation">[</span><span class="hljs-variable">e</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;</span> <span class="hljs-operator">/@</span> <br>              <span class="hljs-built_in">Subsets</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Complement</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Range</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">9</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-variable">e</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">num</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">/@</span> <br>            <span class="hljs-variable">digitlist</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">All</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br>       <span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;,</span> <span class="hljs-built_in">Sort</span> <span class="hljs-operator">/@</span> <span class="hljs-built_in">Tally</span> <span class="hljs-operator">/@</span> <span class="hljs-built_in">IntegerPartitions</span><span class="hljs-punctuation">[</span><span class="hljs-variable">n</span><span class="hljs-operator">,</span> <span class="hljs-variable">n</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">;</span><br><span class="hljs-variable">Narcissistic</span><span class="hljs-punctuation">[</span><span class="hljs-number">10</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">//</span> <span class="hljs-built_in">AbsoluteTiming</span><br></code></pre></td></tr></table></figure><p>这段代码中的</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-operator">:=</span><br><span class="hljs-type">#</span><br><span class="hljs-operator">&amp;</span>  <br><span class="hljs-operator">//</span>  <br><span class="hljs-operator">/@</span>  <br><span class="hljs-operator">/.</span>  <br><span class="hljs-operator">@</span>  <br><span class="hljs-operator">@@</span>  <br><span class="hljs-operator">@@@</span><br></code></pre></td></tr></table></figure><p>都是一些啥玩意？你肯能还会在其他的代码中看到另外的一些乱码比如：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-operator">=</span> <span class="hljs-operator">=</span><br><span class="hljs-operator">/;</span><br><span class="hljs-type">##</span>  <br><span class="hljs-operator">/.</span>  <br><span class="hljs-type">#1</span> <br><span class="hljs-type">#2</span> <br><span class="hljs-type">#a</span>  <br><span class="hljs-type">#b</span>  <br><span class="hljs-type">##</span> <br><span class="hljs-type">##</span><span class="hljs-variable">key</span><br><span class="hljs-type">##5</span><br><span class="hljs-operator">%</span>  <br><span class="hljs-operator">%</span><span class="hljs-number">4</span> <br><span class="hljs-operator">~</span>  <br><span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>其实这些就是MMA里面函数的简写：这里我予以说明， 详情肯定是的参考官方文档了</p><h2 id="2-说明">2. 说明</h2><h3 id="2-1-符号说明">2.1 符号说明</h3><!-- > PS <=>     表示等价于 =>       表示结果等于 --><table><thead><tr><th>符号</th><th>原始形式</th><th>含义</th></tr></thead><tbody><tr><td>//</td><td>函数的后缀表达式</td><td>Head[1] &lt;=&gt; 1//Head</td></tr><tr><td>~</td><td>函数的中缀表达式</td><td>Plus[1, 1] &lt;=&gt; 1~Plus~1</td></tr><tr><td>:=</td><td>延迟赋值（可以实时更新）</td><td>自定义函数: f[x_] := x+1;</td></tr><tr><td>==</td><td>相等关系</td><td>x^2 - 2x + 1 == 0 (一个方程)</td></tr><tr><td>=</td><td>赋值符号</td><td>a = 2</td></tr><tr><td>@</td><td>函数映射（作用）</td><td>f[2] &lt;=&gt; f@2</td></tr><tr><td>@@</td><td>Apply-应用， 更换头部</td><td>Apply[f, {1, 2}] &lt;=&gt; f@@{1, 2}</td></tr><tr><td>@@@</td><td>Apply 应用在第一层的简写</td><td>Apply[f, {1, 2}, {1}] &lt;=&gt; f@@@{1, 2}</td></tr><tr><td>/;</td><td>Condition (/;)(条件)</td><td>{6, -7, 3, 2, -1, -2} /. x_ /; x &lt; 0 -&gt; w =&gt; {6, w, 3, 2, w, w}</td></tr><tr><td>/.</td><td>把某一个表达是按照规则替换</td><td>{x, x^2, y, z} /. x -&gt; 1=&gt; {1, 1, y, z}</td></tr><tr><td>/@</td><td>Map-映射，Map默认作用在第0层</td><td>Map[f, 2] &lt;=&gt; f/@2</td></tr><tr><td>→</td><td>Rule (-&gt;)(规则， 这个和我们所说的相等有区别)</td><td>{x, x^2, a, b} /. x -&gt; 3 =&gt; {3, 9, a, b}</td></tr><tr><td>#</td><td>隐函数参数中的第一个参数</td><td>#1 &lt;=&gt; #</td></tr><tr><td>##</td><td>纯函数的参数序列</td><td>f[x, ##, y]&amp;[a, b, c, d] =&gt; f[x, a, b, c, d, y]</td></tr><tr><td>##3</td><td>表示提供给一个纯函数的参数序列,从第 n个参数开始</td><td>f[##2] &amp;[a, b, c, d] =&gt; f[b, c, d]</td></tr><tr><td>#1</td><td>隐函数中的第一个参数</td><td>#1 + 1&amp;;</td></tr><tr><td>%</td><td>引用上一次结果</td><td>%</td></tr><tr><td>%4</td><td>引用第4次运算结果</td><td>%4</td></tr><tr><td>&amp;</td><td>纯(匿名)函数声明</td><td>Function[x, x^2]; &lt;=&gt; #^2&amp;;</td></tr><tr><td>[[]]</td><td>数组索引</td><td>ls[[1]] (数组的第1个元素)</td></tr></tbody></table><p>还有一个<code>key</code>的概念,<code>#key</code> 选出在关联中对应于&quot;key&quot;的值</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#b</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-type">#b</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span> <span class="hljs-punctuation">[</span><span class="hljs-operator">&lt;|</span><span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">-&gt;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-variable">y</span> <span class="hljs-operator">|&gt;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>上述代码的运行结果为:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">y</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span> <span class="hljs-operator">+</span> <span class="hljs-variable">y</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-语法说明">2.2 语法说明</h3><p>一些语句你可能也看不懂，比如下面的</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span>              <span class="hljs-comment">(*  结果: f[f[f[&#123;&#123;a&#125;&#125;]]]   *)</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Infinity</span><span class="hljs-punctuation">]</span>           <span class="hljs-comment">(*  结果: &#123;f[f[f[f[a]]]]&#125;  *)</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Infinity</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span>      <span class="hljs-comment">(*  结果: f[f[f[f[f[a]]]]] *)</span><br></code></pre></td></tr></table></figure><p>其实这就是操作中层的概念; 还有以下常见的代码片段：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><br>     <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x1</span><span class="hljs-operator">,</span> <span class="hljs-variable">y1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span> <span class="hljs-variable">y1</span><span class="hljs-operator">=</span><span class="hljs-number">2</span><span class="hljs-operator">;</span><br>    <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">+</span> <span class="hljs-variable">y1</span><span class="hljs-operator">;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>或者是下面这个</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-built_in">Block</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">=</span><span class="hljs-number">5</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Hold</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span><br>    <span class="hljs-built_in">With</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">=</span><span class="hljs-number">5</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Hold</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span><br>    <span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">=</span><span class="hljs-number">5</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Hold</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>其实这个就是MMA中变量的作用域的概念或者是说生命周期;下面这个例子就是一个比较综合的代码片段，截取自</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">images</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">ConstantImage</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Nest</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Lighter</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Red</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;</span> <span class="hljs-operator">/@</span> <br><span class="hljs-built_in">Join</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">ConstantArray</span><span class="hljs-punctuation">[</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-number">5</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">ConstantArray</span><span class="hljs-punctuation">[</span><span class="hljs-type">#2</span><span class="hljs-operator">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">ConstantArray</span><span class="hljs-punctuation">[</span><span class="hljs-type">#3</span><span class="hljs-operator">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;</span> <span class="hljs-operator">@@</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">400</span><span class="hljs-operator">,</span> <span class="hljs-number">450</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">300</span><span class="hljs-operator">,</span> <span class="hljs-number">400</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">680</span><span class="hljs-operator">,</span> <span class="hljs-number">390</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">;</span><br><br><span class="hljs-built_in">Show</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">ImageCollage</span><span class="hljs-punctuation">[</span><br><span class="hljs-variable">images</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Automatic</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2438</span><span class="hljs-operator">,</span> <span class="hljs-number">1219</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Method</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-string">&quot;ClosestPacking&quot;</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Background</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">Nest</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Lighter</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Blue</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">ImagePadding</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-number">5</span><br><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Graphics</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><br><span class="hljs-built_in">Opacity</span><span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">EdgeForm</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Black</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Rectangle</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2438</span><span class="hljs-operator">,</span> <span class="hljs-number">1219</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">EdgeForm</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-built_in">Red</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Thick</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Disk</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1875</span><span class="hljs-operator">,</span> <span class="hljs-number">435</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-number">200</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span><br><span class="hljs-built_in">Opacity</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Thick</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Dashed</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Line</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-number">1219</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-number">1980</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Line</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2438</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-number">490</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <br><span class="hljs-built_in">Axes</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-built_in">True</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>MMA中的 <code>-&gt;</code> 是什么意思啊，为什么不直接使用类似Python中的关键字参数使用<code>=</code>来传参呢？这些种种，我都会在下面予以说明。</p><h2 id="3-高级编程">3. 高级编程</h2><p>其实我也远远没有达到高级编程的程度，但是着篇文章的目的就是为了让你能够看明白其他人的代码。一些你不熟悉的函数，查官方文档就行了。下面主要是一些关于常用内置函数和匿名函数操作的演示。当然还有很多很炫的操作在MMA中，多Google一下就知道了，我这里肯定不能全部包括，特别是一些内置函数的速度快慢等，慢慢积累的。</p><h3 id="3-1-匿名函数">3.1 匿名函数</h3><h4 id="单参数">单参数</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">g</span> <span class="hljs-operator">=</span> <span class="hljs-type">#</span> <span class="hljs-operator">+</span> <span class="hljs-type">#</span><span class="hljs-operator">&amp;</span><br><span class="hljs-comment">(* 1. 作用于单个值 *)</span><br><span class="hljs-variable">g</span><span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 2. 作用于一个列表 *)</span><br><span class="hljs-variable">ls</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">;</span><br><span class="hljs-variable">g</span><span class="hljs-punctuation">[</span><span class="hljs-variable">ls</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-variable">h</span> <span class="hljs-operator">=</span> <span class="hljs-type">##</span><span class="hljs-operator">&amp;</span><br><span class="hljs-variable">h</span><span class="hljs-punctuation">[</span><span class="hljs-number">3</span><span class="hljs-operator">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">#1 + #1 &amp;<br>8<br>&#123;2, 4, 6&#125;<br>##1 &amp;<br>Sequence[3, 4]<br></code></pre></td></tr></table></figure><h4 id="多参数">多参数</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-type">#1</span><span class="hljs-operator">+</span><span class="hljs-type">#2</span><span class="hljs-operator">&amp;</span><br><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">#1 + #2 &amp;<br>3<br></code></pre></td></tr></table></figure><h4 id="抽象函数">抽象函数</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span> <span class="hljs-operator">/@</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;&#123;a, a&#125;, &#123;b, b&#125;, &#123;c, c&#125;, &#123;d, d&#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="Function函数">Function函数</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Function</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-number">5</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">Function</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-operator">+</span><span class="hljs-variable">y</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-number">4</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">25<br>6<br></code></pre></td></tr></table></figure><h3 id="3-2-头部-数据类型">3.2 头部/数据类型</h3><p>就目前而言，我觉得这个头部和这个C语言里面的数据类型是差不多的，当然我觉得MMA里面的用起来更舒服一点。</p><h4 id="什么是头部">什么是头部</h4><p>实际上就是一个表达式的数据类型，比如 <code>List</code>, <code>Integer</code>, <code>Float</code> 等； 我们自定义的函数可以看作是一个头部，所以才有了所谓的 <code>Head</code>函数; 具体写法如下：主要就是一个抽象的单形参函数 <code>f</code> 的使用</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-punctuation">]</span><br><span class="hljs-comment">(* 用 f 替换头部 *)</span><br><span class="hljs-variable">expr</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">;</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-variable">expr</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 检验头部 *)</span><br><span class="hljs-variable">expr</span><span class="hljs-operator">//</span><span class="hljs-built_in">Head</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-variable">expr</span><span class="hljs-punctuation">]</span><span class="hljs-operator">//</span><span class="hljs-built_in">Head</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">List</span><br><span class="hljs-variable">f</span><br></code></pre></td></tr></table></figure><h4 id="替换头部">替换头部</h4><p>比如把一个&quot;列表&quot;<code>List</code>的表头替换成<code>Plus</code>，我们就可以对&quot;列表&quot;中的元素求和了; <code>Apply</code> 可用于任何头部，而不仅仅是 <code>List</code>.</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">g</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Plus</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-built_in">Plus</span><span class="hljs-operator">,</span> <span class="hljs-variable">g</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span><span class="hljs-variable">y</span><span class="hljs-operator">,</span><span class="hljs-variable">z</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">6<br>x+y+z<br></code></pre></td></tr></table></figure><h4 id="抽象头部">抽象头部</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">abstrcthead</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">Table</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-punctuation">[</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span> <span class="hljs-variable">j</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-type">##</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;;</span><br><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">abstrcthead</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">j</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">//</span><span class="hljs-built_in">MatrixForm</span><br></code></pre></td></tr></table></figure><p>运行结果</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(\begin{array}{cc} a[1,1] &amp; a[1,2] \\ a[2,1] &amp; a[2,2] \\ a[3,1] &amp; a[3,2] \\\end{array}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,-36,557 l0,84c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189l0,-92c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,9c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558l0,-144c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><blockquote><p>注：SlotSequence (##)(插符序列)</p></blockquote><h3 id="3-3-常见简写">3.3 常见简写</h3><p>下面就是一些常见的函数简写的使用方法</p><h4 id="Map">Map(/@)</h4><div class="note note-success">            <p><code>Map[f, expr] </code>或 <code>f/@expr</code>: 将 <code>f</code> 应用到 <code>expr</code> 中第一层的每个元素.</p>          </div><p><strong>第1个示例</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-variable">g</span><span class="hljs-punctuation">]</span><br><span class="hljs-comment">(* 1.标准形式 *)</span><br><span class="hljs-built_in">Map</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 2.简写形式 *)</span><br><span class="hljs-variable">g</span><span class="hljs-operator">/@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">(* 注：这里的Map能够作用在列表上是应为Map默认作用在第一层 *)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;f[a], f[b], f[c]&#125;<br>&#123;g[a], g[b], g[c], g[d]&#125;<br></code></pre></td></tr></table></figure><p><strong>第2个示例</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">&amp;;</span><br><span class="hljs-comment">(* 1.作用一个单个形参 *)</span><br><span class="hljs-built_in">Map</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">f</span><span class="hljs-operator">/@</span><span class="hljs-number">1</span><br><br><span class="hljs-comment">(* 2.作用单个形参列表 *)</span><br><span class="hljs-built_in">Map</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">f</span><span class="hljs-operator">/@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><br><br><br><span class="hljs-variable">g</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-type">#2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">&amp;;</span><br><span class="hljs-comment">(* 错误的写法： Map[g, &#123;&#123;1, 2&#125;, &#123;3, 4&#125;&#125;] *)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">1<br>1<br>&#123;&#123;1, 1&#125;, &#123;2, 2&#125;&#125;<br>&#123;&#123;1, 1&#125;, &#123;2, 2&#125;&#125;<br></code></pre></td></tr></table></figure><div class="note note-danger">            <p>多个参数必须使用 <code>Apply</code> 函数，见下面的说明</p>          </div><h4 id="Apply">Apply(@@)</h4><div class="note note-success">            <ol><li><code>f@@expr</code> 或 <code>Apply[f,expr]</code>: 用 <code>f</code> 替换 <code>expr</code>的头部.</li><li><code>Apply[f]</code>: 表示<code>Apply</code>的运算符形式，它可以应用于表达式.</li><li><code>Apply[f,expr,levelspec]</code>: 替换<code>expr</code> 中使用 <code>levelspec</code> 指定的部分的头部.</li></ol>          </div><p><strong>第1个示例</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-punctuation">]</span><br><span class="hljs-comment">(* 1.标准形式 *)</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 2.简写形式 *)</span><br><br><span class="hljs-comment">(* 3.运算符形式 *)</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[&#123;a, b&#125;, &#123;c&#125;, d]<br>f[&#123;a, b&#125;, &#123;c&#125;, d]<br></code></pre></td></tr></table></figure><p><strong>第2个示例</strong>:具体写法，主要举例了 <code>f</code> 为一个具体的三个形参的函数时的情况</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">fun1</span> <span class="hljs-operator">=</span> <span class="hljs-type">#1</span> <span class="hljs-operator">+</span> <span class="hljs-type">#2</span> <span class="hljs-operator">+</span> <span class="hljs-type">#3</span> <span class="hljs-operator">&amp;;</span><br><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">fun1</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">fun1</span><span class="hljs-operator">@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">(* 错误的写法： Apply[fun1, &#123;&#123;1, 2, x&#125;, &#123;3, 4, y&#125;&#125;]*)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">3+x<br>3+x<br></code></pre></td></tr></table></figure><div class="note note-danger">            <p>如果要作用于一个多参数组成的列表，就需要使用<code>层</code>这个概念了</p>          </div><h3 id="3-4-操作的层">3.4 操作的层</h3><div class="note note-success">            <p>为什么我们需要层的概念? 为了解决函数作用于列表的时候告诉程序：</p><ol><li>列表整体是一个参数</li><li>列表中的元素为各个参数（传入多个复合函数形参的参数个数）</li></ol><p>表达式所带的<code>层</code>对应于需要提取部分的索引号. 像 <code>Map</code> 这样的函数可以在指定的层进行操作,可以简单的认为:跨越的大括号对数 = 层数</p>          </div><h4 id="引入">引入</h4><p>为什么要有层的概念呢？我当初刚学这个玩意儿的时候是懵逼的，直到有一天我遇到一个问题：</p><div class="note note-info">            <p>我定义了一个接受三个参数的函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y,z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>，然后我有一个坐标点的集合<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Ω</span></span></span></span>,具体的值如下：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Ω</mi><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo stretchy="false">{</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo stretchy="false">{</mo><mn>7</mn><mo separator="true">,</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo stretchy="false">}</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\Omega=\{\{1,2,3\},\{4,5,6\},\{7,8,9\}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Ω</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">{</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">6</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">{</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">9</span><span class="mclose">}}</span></span></span></span></span></p><p>每一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y,z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>传入后, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(x,y,z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>都会返回一个具体的实数值<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">V_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>          </div><p>我不想用循环(或者是<code>Table</code>去做)，就想用<code>Apply</code>去做，让它同时返回<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>V</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>V</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>V</mi><mn>3</mn></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{V_1,V_2,V_3\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>这样的一个列表。但是我如果直接使用如下的语句：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">F</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">4</span><span class="hljs-operator">,</span> <span class="hljs-number">5</span><span class="hljs-operator">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">7</span><span class="hljs-operator">,</span> <span class="hljs-number">8</span><span class="hljs-operator">,</span> <span class="hljs-number">9</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>是报错的，说参数不够。</p><blockquote><p>其实当时是受了<code>Map</code>的影响，因为<code>Map</code>这样就不会报错</p></blockquote><p>然后就深入<code>Apply</code>，就了解到了有<code>层</code>这个概念；其实按照我的理解，<code>层</code>的作用如下（使用上面的例子）：</p><ol><li>你告诉函数你的形参列表到底是谁,是最外层（第0层）的那个大列表（此时传入的形参数目为1，就是最大的那个列表）</li><li>还是里面第1层的那三个列表（此时传入的型参数目为1，是大列表中的每个小列表，但是F会在第一层遍历这个具有三个元素的大列表）</li></ol><p>所以这就是层的作用,还是挺简单的.</p><blockquote><p>所以你要真正地搞懂某个东西，也许只有你需要用到它时</p></blockquote><h4 id="Map-2">Map</h4><p><strong>第1层</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-punctuation">]</span><br><span class="hljs-built_in">Map</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(*这个里面的整体元素就是 &#123;a, b&#125;, &#123;c, d&#125;*)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;f[&#123;a, b&#125;], f[&#123;c, d&#125;]&#125;<br></code></pre></td></tr></table></figure><p><strong>第2层</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Map</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;&#123;f[a], f[b]&#125;, &#123;f[c], f[d]&#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="Apply-2">Apply</h4><p><strong>第0层</strong><br>也就是直接把列表中的所有元素作为形参，作用得到一个一维的表达式,，给出一个简单的例子.</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-operator">,</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">d</span><span class="hljs-operator">,</span><span class="hljs-variable">e</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[&#123;a, b, c&#125;, &#123;d, e&#125;]<br></code></pre></td></tr></table></figure><p><strong>第1层</strong><br>在第一层应用(此时有一个缩写，为<code>@@@</code>), 也就是把列表中的每一个元素作为函数每一次作用的形参，作用得到的维度等于列表的维度</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-operator">,</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">d</span><span class="hljs-operator">,</span><span class="hljs-variable">e</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;f[a, b, c], f[d, e]&#125;<br></code></pre></td></tr></table></figure><div class="note note-success">            <ul><li><code>Map</code>默认在第一层操作</li><li><code>Apply</code>默认在第零层操作</li></ul>          </div><h4 id="">@</h4><p>这个是指普通函数应用,一个简单的示例</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span><span class="hljs-operator">@</span><span class="hljs-variable">x</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[x]<br></code></pre></td></tr></table></figure><h4 id="多参数匿名函数作用于列表">多参数匿名函数作用于列表</h4><p>此时一般不能够用简写的形式， 但是<code>Apply</code>有一个<code>@@@</code>的简写,</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">g</span> <span class="hljs-operator">=</span> <span class="hljs-type">#</span> <span class="hljs-operator">+</span> <span class="hljs-type">#2</span> <span class="hljs-operator">+</span> <span class="hljs-type">#3</span><span class="hljs-operator">&amp;;</span><br><br><span class="hljs-variable">g</span><span class="hljs-operator">@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">g</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">g</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">4</span><span class="hljs-operator">,</span> <span class="hljs-number">5</span><span class="hljs-operator">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">g</span><span class="hljs-operator">@@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">4</span><span class="hljs-operator">,</span> <span class="hljs-number">5</span><span class="hljs-operator">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">6<br>6<br>&#123;6, 15&#125;<br>&#123;6, 15&#125;<br></code></pre></td></tr></table></figure><h3 id="3-5-同时作用多层">3.5 同时作用多层</h3><p>既然我们可一选择作用在一个层，那么想当然的，我们可以作用于多个层，具体的作用方式就有以下的几种：</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-comment">(* 解释：这里是先作用在第0层，然后再作用到得到结果的第1层 *)</span><br><br><span class="hljs-comment">(* 检验 *)</span><br><span class="hljs-string">&quot;作用在第0层后得到:&quot;</span> <span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-operator">,</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">d</span><span class="hljs-operator">,</span><span class="hljs-variable">e</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">//</span><span class="hljs-built_in">ToString</span><br><span class="hljs-string">&quot;对上面的结果作用在第1层后得到:&quot;</span> <span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-operator">,</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">d</span><span class="hljs-operator">,</span><span class="hljs-variable">e</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br><span class="hljs-string">&quot;最终的结果:&quot;</span><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span><span class="hljs-variable">b</span><span class="hljs-operator">,</span><span class="hljs-variable">c</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">d</span><span class="hljs-operator">,</span><span class="hljs-variable">e</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">作用在第0层后得到: f[&#123;a, b, c&#125;, &#123;d, e&#125;]<br>对上面的结果作用在第1层后得到: f[f[a, b, c], f[d, e]]<br>最终的结果: f[f[a, b, c], f[d, e]]<br></code></pre></td></tr></table></figure><h4 id="向下至层2-层0除外">向下至层2(层0除外)</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;f[f[&#123;&#123;a&#125;&#125;]]&#125;<br></code></pre></td></tr></table></figure><h4 id="层0至2">层0至2</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span><span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[f[f[&#123;&#123;a&#125;&#125;]]]<br></code></pre></td></tr></table></figure><h4 id="所有层-从层1">所有层(从层1)</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Infinity</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;f[f[f[f[a]]]]&#125;<br></code></pre></td></tr></table></figure><h4 id="层0至所有层">层0至所有层</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Apply</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Infinity</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[f[f[f[f[a]]]]]<br></code></pre></td></tr></table></figure><h4 id="函数符合顺序">函数符合顺序</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-type">#1</span><span class="hljs-operator">+</span><span class="hljs-type">#1</span><span class="hljs-operator">&amp;/@</span><span class="hljs-built_in">Plus</span><span class="hljs-punctuation">[</span><span class="hljs-type">#1</span><span class="hljs-operator">,</span> <span class="hljs-type">#2</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">3<br></code></pre></td></tr></table></figure><h3 id="3-5-一切-随处皆可匿">3.5 一切/随处皆可匿</h3><div class="note note-success">            <p>也就是说，无论在什么地方你都可以使用匿名函数; 若匿名函数多个参数时：使用<code>[]</code>包括。</p>          </div><p>我们可以把我们原来的简单的语句轻松的改成匿名函数语句，相关的操作可以参见下面的演示：</p><h4 id="基本使用">基本使用</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-type">x_</span><span class="hljs-operator">,</span> <span class="hljs-type">y_</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">:=</span> <span class="hljs-variable">x</span><span class="hljs-operator">+</span><span class="hljs-variable">y</span><span class="hljs-operator">;</span><br><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-type">#</span><span class="hljs-operator">+</span><span class="hljs-type">#2</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(*必须使用括号括起来表明是一个函数*)</span><br><span class="hljs-punctuation">(</span><span class="hljs-type">#</span><span class="hljs-operator">+</span><span class="hljs-type">#2</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">3<br>3<br>3<br></code></pre></td></tr></table></figure><h4 id="实际案例">实际案例</h4><p><strong>示例1</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Rectangle</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-type">#</span><span class="hljs-operator">,</span> <span class="hljs-type">#2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">&amp;</span> <span class="hljs-operator">@@</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2438</span><span class="hljs-operator">,</span> <span class="hljs-number">1219</span><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">(* 相比于这个直接命令方式要好：Rectangle[&#123;0, 0&#125;, &#123;2438, 1219&#125;]*)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">Rectangle[&#123;0, 0&#125;, &#123;2438, 1219&#125;]<br></code></pre></td></tr></table></figure><p><strong>示例2</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Line</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-number">0</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-number">2438</span><span class="hljs-operator">,</span> <span class="hljs-type">#</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-number">490</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 相比于这个命令好：Line[&#123;&#123;0, 490&#125;, &#123;2438, 490&#125;&#125;] *)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">Line[&#123;&#123;0, 490&#125;, &#123;2438, 490&#125;&#125;]<br></code></pre></td></tr></table></figure><p><strong>示例3</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Table</span><span class="hljs-punctuation">[</span><span class="hljs-variable">i</span><span class="hljs-operator">^</span><span class="hljs-variable">j</span><span class="hljs-operator">,</span> <span class="hljs-type">##</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;</span> <span class="hljs-operator">@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span><span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">j</span><span class="hljs-operator">,</span><span class="hljs-number">4</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">//</span><span class="hljs-built_in">MatrixForm</span><br></code></pre></td></tr></table></figure><p>运行结果</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>16</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>27</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>81</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(\begin{array}{cccc} 1 &amp; 1 &amp; 1 &amp; 1 \\ 2 &amp; 4 &amp; 8 &amp; 16 \\ 3 &amp; 9 &amp; 27 &amp; 81 \\\end{array}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,-36,557 l0,84c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189l0,-92c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">27</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">16</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">81</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,9c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558l0,-144c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h3 id="3-6-关联">3.6 关联</h3><div class="note note-success">            <p>关联将把键符与其值相关联，(用 <code>-&gt;</code> 输入<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span>); 其实和Python中的字典差不多，就是一些键值对组成的一个列表。Python或者是其他语言学的好，理解这个也没有什么难的</p>          </div><h4 id="基本使用-2">基本使用</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">ass</span> <span class="hljs-operator">=</span> <span class="hljs-operator">&lt;|</span><span class="hljs-string">&quot;a&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-variable">y</span><span class="hljs-operator">|&gt;</span><br><span class="hljs-variable">ass</span><span class="hljs-operator">//</span><span class="hljs-built_in">Head</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&lt;|&quot;a&quot; -&gt; x, &quot;b&quot; -&gt; y|&gt;<br>Association<br></code></pre></td></tr></table></figure><h4 id="给出键值">给出键值</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">ass</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;a&quot;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">1<br></code></pre></td></tr></table></figure><h4 id="纯函数应用">纯函数应用</h4><p>在纯函数中，<code>#key</code> 选出在关联中对应于&quot;key&quot;的值,一个简单的示例:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#b</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-type">#b</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span> <span class="hljs-punctuation">[</span><span class="hljs-operator">&lt;|</span><span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">-&gt;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-variable">y</span> <span class="hljs-operator">|&gt;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-type">#a</span><span class="hljs-operator">,</span> <span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-type">#a</span><span class="hljs-punctuation">&#125;</span> <span class="hljs-operator">&amp;</span> <span class="hljs-punctuation">[</span><span class="hljs-operator">&lt;|</span><span class="hljs-string">&quot;a&quot;</span><span class="hljs-operator">-&gt;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;b&quot;</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-variable">y</span> <span class="hljs-operator">|&gt;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">&#123;15, 16&#125;<br>&#123;1, 2&#125;<br></code></pre></td></tr></table></figure><h3 id="3-7-插符序列">3.7 插符序列</h3><h4 id="-2">##</h4><p><code>##</code>表示提供给纯函数的完全的参数序列,<code>##</code> 是 <code>##1</code> 的一个简短形式，指的是函数的所有参数.</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-type">##</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-operator">,</span> <span class="hljs-type">##</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[x, a, b, c, d, y, a, b, c, d]<br></code></pre></td></tr></table></figure><p>对应于##的原对象是一个<code>Sequence</code>,见下面的案例:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-type">##</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">Sequence[a, b, c, d]<br></code></pre></td></tr></table></figure><h4 id="指定参数起始位置">指定参数起始位置</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-type">##2</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-operator">,</span> <span class="hljs-variable">b</span><span class="hljs-operator">,</span> <span class="hljs-variable">c</span><span class="hljs-operator">,</span> <span class="hljs-variable">d</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">f[x, b, c, d, y]<br></code></pre></td></tr></table></figure><h4 id="迭代列表插入到一个Table">迭代列表插入到一个Table</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Table</span><span class="hljs-punctuation">[</span><span class="hljs-variable">a</span><span class="hljs-punctuation">[</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span> <span class="hljs-variable">j</span><span class="hljs-punctuation">]</span><span class="hljs-operator">,</span> <span class="hljs-type">##</span><span class="hljs-punctuation">]</span><span class="hljs-operator">&amp;@@</span><span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">j</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">//</span><span class="hljs-built_in">MatrixForm</span><br></code></pre></td></tr></table></figure><p>运行结果</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>a</mi><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(\begin{array}{cc} a[1,1] &amp; a[1,2] \\ a[2,1] &amp; a[2,2] \\ a[3,1] &amp; a[3,2] \\\end{array}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,-36,557 l0,84c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189l0,-92c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.875em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='3.600em' viewBox='0 0 875 3600'><path d='M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,9c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558l0,-144c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="4-常用函数">4. 常用函数</h2><h3 id="4-1-Moudle">4.1 Moudle</h3><div class="note note-success">            <p>主要有两种用法：</p><ol><li><code>Module[{x,y,...}, expr]</code>: 指定在 <code>expr</code> 中出现的符号 <code>x, y, ...</code> 应被当作局部值.(且不会受到全局变量的影响)</li><li><code>Module[{x=x0,...}, expr]</code>: 用来定义 <code>x, ...</code>的初始值.</li></ol>          </div><h4 id="变量的作用域">变量的作用域</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br><span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span><br><span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span>  <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span> <span class="hljs-variable">y</span><span class="hljs-operator">=</span><span class="hljs-number">2</span><span class="hljs-operator">;</span><br>  <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-variable">x</span><span class="hljs-operator">+</span><span class="hljs-variable">y</span><span class="hljs-operator">;</span><br><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 不会受到全局变量的影响 *)</span><br><span class="hljs-variable">res</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">3<br>4<br>3<br></code></pre></td></tr></table></figure><h4 id="变量生命周期">变量生命周期</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Module</span><span class="hljs-punctuation">[</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x1</span><span class="hljs-operator">,</span> <span class="hljs-variable">y1</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span>  <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-operator">;</span> <span class="hljs-variable">y1</span><span class="hljs-operator">=</span><span class="hljs-number">2</span><span class="hljs-operator">;</span><br><span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">+</span> <span class="hljs-variable">y1</span><span class="hljs-operator">;</span><br><span class="hljs-punctuation">]</span><br><br><span class="hljs-comment">(* 一旦出了Module之外，变量就被清除了 *)</span><br><span class="hljs-variable">res</span><br><span class="hljs-variable">x1</span><br><span class="hljs-variable">y1</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">2<br>x1<br>y1<br></code></pre></td></tr></table></figure><h3 id="4-2-With">4.2 With</h3><div class="note note-success">            <p>用法解释：<br><code>With[{x=x0, y=y0, ...},expr]</code>: 指定在 <code>expr</code> 中出现的符号 <code>x, y, ...</code> 应当由<code>x=x0, y=y0, ...</code>替换.</p><p>备注：<code>With</code> 似乎比 <code>Module</code> 快</p>          </div><h4 id="基本使用-3">基本使用</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">With</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">=</span><span class="hljs-number">7</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-operator">=</span><span class="hljs-variable">z</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">+</span><span class="hljs-variable">y</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">49 + z<br></code></pre></td></tr></table></figure><h4 id="没有估值">没有估值</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-comment">(* 一个简单的函数变自量符号替换 *)</span><br><span class="hljs-built_in">With</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">x</span><span class="hljs-operator">=</span><span class="hljs-variable">a</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-variable">x</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-operator">&amp;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">1 + a^2 &amp;<br></code></pre></td></tr></table></figure><h4 id="多次替换">多次替换</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">With</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><span class="hljs-variable">y</span><span class="hljs-operator">=</span><span class="hljs-built_in">Sin</span><span class="hljs-punctuation">[</span><span class="hljs-number">1.0</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">&#125;</span><span class="hljs-operator">,</span> <span class="hljs-built_in">Sum</span><span class="hljs-punctuation">[</span><span class="hljs-variable">y</span><span class="hljs-operator">^</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-variable">i</span><span class="hljs-operator">,</span><span class="hljs-number">0</span><span class="hljs-operator">,</span><span class="hljs-number">10</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">5.36323<br></code></pre></td></tr></table></figure><h3 id="4-3-Nest">4.3 Nest</h3><div class="note note-success">            <p><code>Nest[f,expr,n]</code>: 返回一个将<code>f</code>作用于 <code>expr</code> 上 <code>n</code> 次后得到的表达式.</p>          </div><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">Nest</span><span class="hljs-punctuation">[</span><span class="hljs-variable">g</span><span class="hljs-operator">,</span> <span class="hljs-variable">x</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">]</span><br><br><br><span class="hljs-built_in">Clear</span><span class="hljs-punctuation">[</span><span class="hljs-variable">y</span><span class="hljs-punctuation">]</span><br><span class="hljs-variable">f</span><span class="hljs-punctuation">[</span><span class="hljs-type">x_</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">:=</span> <span class="hljs-variable">x</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">;</span><br><span class="hljs-built_in">Nest</span><span class="hljs-punctuation">[</span><span class="hljs-variable">f</span><span class="hljs-operator">,</span> <span class="hljs-variable">y</span><span class="hljs-operator">+</span><span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">]</span><br><br><br><span class="hljs-built_in">Nest</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-type">#</span><span class="hljs-punctuation">)</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-operator">&amp;,</span> <span class="hljs-number">1</span><span class="hljs-operator">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">(</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><span class="hljs-operator">^</span><span class="hljs-number">2</span><span class="hljs-punctuation">)</span><br><span class="hljs-comment">(* 计算过程：(1+1)^2 -&gt; (1+(1+1)^2)^2 -&gt; (1+(1+(1+1)^2)^2)^2 *)</span><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathmatica">g[g[g[3]]]<br>(1+y)^4<br>676<br>676<br></code></pre></td></tr></table></figure><h3 id="4-4-TreeForm">4.4 TreeForm</h3><p>可以使用<code>TreeForm</code>查看Mathematica内部表达式的机构,一个示例:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-punctuation">(</span><span class="hljs-number">1</span><span class="hljs-operator">+</span><span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-operator">*</span><span class="hljs-number">3</span><span class="hljs-operator">//</span><span class="hljs-built_in">HoldForm</span><span class="hljs-operator">//</span><span class="hljs-built_in">TreeForm</span><br></code></pre></td></tr></table></figure><p>运行结果<br><img src="/img/mathematica_advance/tree_form.svg" alt=""></p><h2 id="5-结语">5. 结语</h2><p>有了这些操作，再也不用担心你的队友看得懂你的代码，说你代码写的菜了。你直接怼他：把我代码看懂再说。</p><blockquote><p>还是尽量不要使用太多则会个玩意儿，不然你连你自己的代码都看不明白。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>mathematica</tag>
      
      <tag>operator</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>What is Tensor</title>
    <link href="/2024/03/27/what_is_tensor/"/>
    <url>/2024/03/27/what_is_tensor/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Ongoing-debate">1. Ongoing debate</h2><p>关于什么是张量，有人说</p><ul><li>是向量</li><li>是向量的向量(多半所谓的TensorFlow做演示)</li><li>是多重线性映射</li><li>是矩阵或向量的一般化</li><li>…</li></ul><p>到底什么是张量，这里搬运一个Quora上的回答, 提前叠甲, 但是还是给个表情包先:<br><img src="/img/what_is_tensor/03.jpg" alt=""></p><p>所以把原文给搬过来, 没有兴趣阅读的出门右转。本人未对原回答做任何内容上的更改,原文章信息：</p><ul><li>平台: <a href="https://www.quora.com/www.quora.com/">https://www.quora.com/www.quora.com/</a></li><li>文章地址: <a href="https://www.quora.com/What-is-a-tensor">https://www.quora.com/What-is-a-tensor</a></li><li>作者：<a href="https://www.quora.com/profile/William-Oliver-1">https://www.quora.com/profile/William-Oliver-1</a></li></ul><h2 id="2-Original-Post">2. Original Post</h2><h3 id="Preface">Preface</h3><p>A few years ago, I vowed that I would answer this question when I figured out what a tensor really was, because I also had a problem with finding an intuitively satisfying answer online, and the answers here also didn’t fully satisfy me. A year later, I wrote a draft for an answer. And just now I discovered this draft that I never finished.</p><p>What I’ve found is that there are a lot of big misconceptions floating around the internet that are simply wrong. But there is one big one that I thought I should dispel right away.</p><div class="note note-danger">            <p>Tensors are not f**king generalizations of vectors or matrices goddamnit!!</p>          </div><p>I can’t tell you how many people online start their description of tensors by saying that “Tensors are a generalization of scalars, vectors, and matrices” or something similar. This, by far, caused me the most confusion when learning about tensors, because it’s blatantly false. I’ll say it again, Tensors are not generalizations of vectors in any way. It’s very slightly more understandable to say that tensors are generalizations of matrices, in the same way that it is slightly more accurate to say “vanilla ice cream is a generalization of chocolate ice cream” than it is to say that “vanilla ice cream is a generalization of dessert”, closer, but still false. Vanilla and Chocolate are both ice cream, but chocolate ice cream is not a type of vanilla ice cream, and “dessert” certainly isn’t a type of vanilla ice cream.</p><p>So please, I beg you dear reader, if you are confused about tensors, DO NOT compare them to vectors as you learned them in physics class, and DO NOT compare them to matrices. In fact, technically, vectors are generalizations of tensors. I know it’s hard to trust me considering all of the definitions you may have read on the internet running contrary to this, but please trust me, thinking about them like vectors or matrices will cause you nothing but confusion.</p><p>What we generally think of as “vectors” are in fact just a special case of actual of vectors, which I will define shortly. What we generally think of as vectors are geometrical points in space, and we normally represent them as an array of numbers. That array of numbers is what people are referring to when they say “Tensors are generalizations of vectors”, but really, even this adjusted claim is fundamentally false and extremely misleading.</p><p>When I was learning this, I found a few people who did explain that tensors are not generalizations of vectors, but they never explained why so many people would get this wrong, so I didn’t believe them. How could so many people claim to know what a tensor is but have no idea? I still don’t have the complete answer, but if you stick with me, I will not only explain what tensors really are, but also why so many people make false claims about them.</p><p>I also found when I was learning this that people were either way too abstract and technical, or way too simplistic to really get a full understanding. So I will aim for somewhere in between.</p><p>But before we talk about tensors, we have to make sure you have a clear understanding of what vectors actually are. Unlike tensors, this is generally explained pretty well, but just in case you haven’t heard it before I’ll explain it here.</p><p>So what are vectors if not the arrays of numbers that we have known them as? Well, we can’t really define vectors without first defining something called a vector space, so lets do that.</p><h3 id="The-real-definition-of-a-vector">The real definition of a vector</h3><p>The set  is a vector space with respect to the operations + (which is any operation that maps two elements of the space to another element of the space, not necessarily addition) and * (which is any operation that maps an element in the space and a scalar to another element in the space, not necessarily multiplication) if and only if, for every  and</p><ol><li><code>+</code> is commutative, that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo>=</mo><mi>y</mi><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">x+y=y+x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li><li><code>+</code> is associative, that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mo>+</mo><mi>z</mi><mo>=</mo><mi>x</mi><mo>+</mo><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x+y)+z=x+(y+z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></li><li>There exists an identity element in the space, that is there exists an element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mn>0</mn><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">x+0=x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li><li>Every element has an inverse, that is for every element  there exists an element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">-x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord mathnormal">x</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mo stretchy="false">(</mo><mo>−</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x+(-x)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li><code>*</code> is associative, that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">(</mo><mi>b</mi><mo>∗</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mi>b</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">a(b*x)=(ab)*x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">ab</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li><li>There is scalar distributivity over +, that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>a</mi><mo>∗</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">a*(x+y) = a*x+a*y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></li><li>There is vector distributivity over scalar addition, that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>x</mi><mo>=</mo><mi>a</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>b</mi><mo>∗</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">(a+b)*x = a*x+b*y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></li><li>And finally, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>∗</mo><mi>x</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">1*x=x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li></ol><h3 id="A-vector-is-defined-as-a-member-of-such-a-space">A vector is defined as a member of such a space</h3><p>Notice how nothing here is explicitly stated to be numerical. We could be talking about colors, or elephants, or glasses of milk; as long as we meaningfully define these two operations, anything can be a vector (it might be a good exercise to define a vector space of glasses of milk, or elephants). The special case of vectors that we usually think about in physics and geometry satisfy this definition ( i.e. points in space or “arrows”). Thus, “arrows” are special cases of vectors. More formally, every “arrow”  represents the line segment from00, “the origin”, which is the identity element of the vector space, to some other point in space. In this view, you can construct a vector space of “arrows” by first picking a point in space, and taking the set of all line segments from that point. (From now on, I will use the term “arrows” to formally distinguish between formal vectors and the type of vectors that have “magnitude and direction”.)</p><p><img src="/img/what_is_tensor/01.webp" alt=""></p><p>And, I can’t stress this enough, we are talking about theactual, physicalline segments, and not some numerical representation. We are thinking of these line segments as the ancient Greek Geometers would, just as platonic line segments. Addition is the operation of moving along one line segment, then from the tip of that line segment, moving along another line segment.</p><p><img src="/img/what_is_tensor/02.webp" alt=""></p><p>Okay, so anyone trying to understand tensors probably already knows this stuff.</p><p>But here is something you may not have heard about before if you are learning about tensors. When we define a vector space like this, we generally find that it is natural to define an operation that gives us lengths and angles. A vector space with lengths and angles is called an inner product space.</p><h3 id="Inner-product-space">Inner product space</h3><p>An inner product space is a vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> with an additional operation⋅⋅such that, for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">x,y,z\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></p><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>x</mi><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">x\cdot x\in \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x\cdot y\ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>x</mi><mo>=</mo><mn>0</mn><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x\cdot x=0\iff x=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6684em;vertical-align:-0.024em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>a</mi><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mo stretchy="false">(</mo><mi>x</mi><mo>⋅</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x\cdot(ay) = a(x\cdot y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>=</mo><mi>y</mi><mo>⋅</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">x\cdot y=y\cdot x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>+</mo><mi>x</mi><mo>⋅</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">x\cdot (y+z) = x\cdot y + x\cdot z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></li></ol><p>We define the length of a vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> in a inner product sapce to be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>x</mi><mi mathvariant="normal">∥</mi><mo>=</mo><msqrt><mrow><mi>x</mi><mo>⋅</mo><mi>x</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">\|x\|=\sqrt{x\cdot x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∥</span><span class="mord mathnormal">x</span><span class="mord">∥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2328em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span></span></span><span style="top:-2.7672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2328em;"><span></span></span></span></span></span></span></span></span> , and the angle between two vectors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> to be <span class='katex-error' title='ParseError: KaTeX parse error: Undefined control sequence: \cdoy at position 16: \arccos(\frac{x\̲c̲d̲o̲y̲ ̲y}{\|x\|\|y\|})'>\arccos(\frac{x\cdoy y}{\|x\|\|y\|})</span> .</p><p>This is the equivalent of the dot product, which is defined to be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>x</mi><mi mathvariant="normal">∥</mi><mi mathvariant="normal">∥</mi><mi>y</mi><mi mathvariant="normal">∥</mi><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\|x\|\|y\|\cos(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∥</span><span class="mord mathnormal">x</span><span class="mord">∥∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">∥</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span> , but note that this isnot defined in terms of any sort of “components” of the vector, there are no arrays of numbers mentioned.I.e. the dot product is a geometrical operation.</p><p>So I have secretly given you your first glimpse at a tensor. Where was it? Was it <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ? Was it <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> ? Was it <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> ? Was it the glass of milk ???</p><p>It was none of these things; <strong>it was the operation itself</strong>, The dot product itself is an example of a tensor.</p><p>This is where I was getting confused. “The dot product can’t be a tensor” I thought, “Why would so many people be saying that tensors are a generalization of a vectors and matrices?</p><p>Well, again, tensors aren’t generalizations of vectors at all. Vectors, as we defined them above, are generalizations of tensors. And tensors aren’t technically generalizations of matrices. But tensors can certainly be thought of as kind of the same sort of object as a matrix.</p><p>There are two things that dot products and matrices have in common. The first, and most important thing, is that  <strong>.</strong> This is why tensors are almost generalizations of matrices. The second, and more misleading, thing is that they can be represented as a 2d array of numbers. This second thing is a huge, and I mean HUGE red herring, and has undoubtedly caused an innumerable number of people to be confused.</p><p>However, neglecting to talk about how tensors can be represented as arrays of numbers is equally as misleading. Its like not describing to someone learning linear algebra how vectors can be represented as arrays of numbers.</p><p>Let’s tackle the concept of bilinear maps, and then we can use that knowledge of bilinear maps to help us tackle the concept of representing rank 2 tensors as 2d arrays.</p><h3 id="Bilinear-maps">Bilinear maps</h3><p>The dot product is what the cool kids like to call abilinear map. This just means that the dot product has the following properties:</p><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>+</mo><mi>x</mi><mo>⋅</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">x\cdot(y+z) = x\cdot y+x\cdot z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><mi>z</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>x</mi><mo>=</mo><mi>y</mi><mo>⋅</mo><mi>x</mi><mo>+</mo><mi>z</mi><mo>⋅</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">(y+z)\cdot x = y\cdot x + z\cdot x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>a</mi><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mo stretchy="false">(</mo><mi>x</mi><mo>⋅</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x\cdot (ay) = a(x\cdot y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></li></ol><p>Why is this important? Well if we represent the vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mi>i</mi><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><mi>j</mi></mrow><annotation encoding="application/x-tex">x=x_1i+x_2j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> , and we represent the vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mi>i</mi><mo>+</mo><msub><mi>y</mi><mn>2</mn></msub><mi>j</mi></mrow><annotation encoding="application/x-tex">y=y_1i+y_2j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> , then because <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span> is linear, the following is true:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mi>i</mi><mo>⋅</mo><mi>i</mi><mo>+</mo><msub><mi>y</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mi>j</mi><mo>⋅</mo><mi>j</mi><mo>+</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mi>i</mi><mo>⋅</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">    x\cdot y = y_1x_1i\cdot i + y_2x_2j\cdot j + (x_1y_2+x_2y_1)i\cdot j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span></p><p>This means <strong>if we know the values of</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>⋅</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>⋅</mo><mi>j</mi><mo separator="true">,</mo><mi>j</mi><mo>⋅</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">i\cdot i, j\cdot j, j\cdot i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>⋅</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i\cdot j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>, then we have completely defined the operation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span>. In other words, knowing just these 4 values allows us to calculate the value of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x\cdot y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> for any <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> .</p><p>Now we can describe how⋅⋅might be represented as a 2d array. If⋅⋅is the standard cartesian dot product that you learned about on the first day of your linear algebra or physics class, and  and  are both the standard cartesian unit vectors, then . To represent this tensor⋅⋅as a 2d array, we would create a table holding these values, i.e</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋅</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>i</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>j</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>i</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>j</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}\cdot&amp;i&amp;j\\i&amp;1&amp;0\\j&amp;0&amp;1\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='3.600em' viewBox='0 0 667 3600'><path d='M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v0 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">⋅</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='3.600em' viewBox='0 0 667 3600'><path d='M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v0 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>Or, more compactly</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}1&amp;0\\0&amp;1\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><blockquote><p>DO NOT LET THIS SIMILARITY TO THE SIMILAR MATRIX NOTATION FOOL YOU.</p></blockquote><p>Multiplying this by a vector will clearly give the wrong answer for many reasons, the most important of which is that the dot product produces a scalar quantity, a matrix produces a vector quantity. This notation is simply a way of neatly writing what the dot product represents, it isnota way of making the dot product into a matrix.</p><p>If we become more general, then we can take arbitrary values for these dot products <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>⋅</mo><mi>i</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">i\cdot i=a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>⋅</mo><mi>j</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">j\cdot j=b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>⋅</mo><mi>i</mi><mo>=</mo><mi>i</mi><mo>⋅</mo><mi>j</mi><mo>=</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">j\cdot i=i\cdot j=c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>. Which would be represented as</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}a&amp;c\\c&amp;b\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>A tensor defined in this way is called the metric tensor. The reason it is called that, and the reason it is so important in general relativity, is that just by changing the values we can change the definition of lengths and angles (remember that inner product spaces define length and angles in terms of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span>), and we can enumerate over all possible definitions of lengths and angles. We call this a rank 2 tensor because it is a 2d array (i.e. it looks like a square), if we had a 3x3 tensor, such as a metric tensor for 3 dimensional space it would still be an example of a rank 2 tensor.</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>a</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>e</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>d</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>b</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>f</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>e</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>f</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>c</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}a&amp;d&amp;e\\d&amp;b&amp;f\\e&amp;f&amp;c\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='3.600em' viewBox='0 0 667 3600'><path d='M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v0 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">e</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"></span><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='3.600em' viewBox='0 0 667 3600'><path d='M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v0 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><blockquote><p>Note: the table is symmetric along the diagonal only because the metric tensor is commutative. A general tensor does not have to be commutative and thus its representation does not have to be symmetric</p></blockquote><p>To get a rank 3 tensor, we would create a cube-like table of values as opposed to a square-like one (I can’t do this in latex so you’ll have to imagine it). A rank 3 tensor would be a trilinear map. A trilinear map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> takes 3 vectors from a vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, and can be defined in terms of the values it takes when its arguments are the basis vectors of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>. E.g. if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> has two basis vectors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> , then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> can be defined by defining the values of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>j</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">(</mo><mi>j</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m(i,i,i), m(i,i,j), m(i,j,i), m(i,j,j), m(j,i,i),m(i,i,j),m(j,j,i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">j,j,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> in a 3d array.</p><p>A rank 4 tensor would be a 4-linear, A.K.A quadrlinear map that would take 4 arguments, and thus be represented as a 4 dimensional array etc.</p><h3 id="Why-do-people-think-tensors-are-generalizations-of-vectors">Why do people think tensors are generalizations of vectors ?</h3><p>So now we come to why people think tensors are generalizations of vectors. Its because, if we take a function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi><mo>⋅</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">f(y)=x\cdot y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> , then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> , being the linear scallawag it is, can be defined with only 2 values. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>y</mi><mn>2</mn></msub><mi>f</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(y)=y_1f(i)+y_2f(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>, so knowing the values of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> completely define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>. And therefore, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> is a rank 1 tensor, i.e. a multilinear map with one argument. This would be represented as a 1d array, very much like the common notion of a vector. Furthermore, these values completely define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> as well. If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span> is specifically the cartesian metric tensor, then the values of the representation of  and the values of the representation of  are exactly the same. <strong>This is why people think tensors are generalizations of vectors.</strong></p><p>But if  is given different values, then the representation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> and the representation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> will have different values. <strong>Vectors by themselves are not linear maps, they can just be thought of as linear maps.</strong> In order for them to actually be linear maps, they need to be combined with some sort of linear operator such as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋅</mo></mrow><annotation encoding="application/x-tex">\cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span>.</p><p><strong>So here is the no bs definition: A tensor is any multilinear map from a vector space to a scalar field.</strong></p><blockquote><p>Note: A multilinear map is just a generalization of linear and bilinear maps to maps that have more than 2 arguments. I.e. any map which is distributive over addition and scalar multiplication. Linear maps are considered a type of multilinear map</p></blockquote><p>This definition as a multilinear maps is another reason people think tensors are generalization of matrices, because matrices are linear maps just like tensors. But the distinction is that matrices take a vector space to itself, while tensors take a vector space to a scalar field. So a matrix is not strictly speaking a tensor.</p><p>So there are four layers of confusion created by Physicis- er… many people who describe tensors:</p><ol><li>Many people forget that not all vectors are “arrows”.</li><li>Many people conflate a vector in a vector space with its representation as an array of numbers.</li><li>Many people forget that if ⋅⋅ is given values other than those of the cartesian metric tensor, then the representation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> and the representation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> (as we defined <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> above) will differ.</li><li>The concept of Covariance and Contravariance is important, but it’s a really dumb to define tensors in terms of Covariance and Contravariance.</li></ol><p>Speaking of which, we have not talked about covariance and contravariance. I think it is important to explain it so that you know what physicists are talking about.</p><h3 id="Covariance-and-Contravariance">Covariance and Contravariance</h3><p><img src="/img/what_is_tensor/03.jpg" alt=""></p><p>So essentially, in many situations, it is useful to get rid of the concept of “arrows” altogether, and instead deal only in tensors. Physicists, especially in the mathematics related to relativity, will use tensors to stand for things that they used “arrows” for in classical mechanics. The way they do this makes tensors seem very very similar to “arrows” and matrices, but its important to remember that they are actually separate notions.</p><p>They are, however, making tensors act more like the vectors that they are, as we defined vectors above.</p><p>To their credit, they are clever about how they do this. So lets go back to the example of a rank 1 tensor.</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>y</mi><mn>2</mn></msub><mi>f</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(y) = y_1f(i)+y_2f(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span></span></p><p>If we represent <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>f</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f=(f_1,f_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f(i)=f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>2</mn></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_2=f(j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> , then we can think of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> as a function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>f</mi><mn>1</mn></msub><mi>y</mi><mo stretchy="false">(</mo><msup><mi>i</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>+</mo><msub><mi>f</mi><mn>2</mn></msub><mi>y</mi><mo stretchy="false">(</mo><msup><mi>j</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y=(f)=f_1y(i^*)+f_2y(j^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> , where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo stretchy="false">(</mo><msup><mi>i</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y(i^*)=y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo stretchy="false">(</mo><msup><mi>j</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">y(j^*)=y_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mo>∗</mo></msup><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">i^*=(1,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>j</mi><mo>∗</mo></msup><mo>=</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">j^*=(0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8831em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> are functions <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>.</p><p>And therefore, we can think of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> as a rank 1 tensor acting on the space of possible functions <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>. (I will be lazy and leave it as an exercise to the reader to verify that the set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> of possible functions <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> with naturally defined + and * is a vector space. But If you are confused by this please feel free to ask me in the comments ).</p><p>Let’s see what happens when we change the basis vector of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>. Instead of using <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> we will use <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mn>2</mn><mi>i</mi></mrow><annotation encoding="application/x-tex">i&#x27;=2i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">2</span><span class="mord mathnormal">i</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>j</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mn>2</mn><mi>j</mi></mrow><annotation encoding="application/x-tex">j&#x27;=2j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>. The components <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">y_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>, become <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>y</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">y_1&#x27;=y_1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/2</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>y</mi><mn>2</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><msub><mi>y</mi><mn>2</mn></msub><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">y_2&#x27;=y_2/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/2</span></span></span></span>. The magnitude of the components of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> decreased while the magnitude of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>’s basis vectors increased .<strong>These components vary contrary to the change in basis of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>, so physicists call <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> a  contravariant tensor</strong>.</p><p>On the other hand, if we look at how the components <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">f_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> change with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>’s change in basis, we get <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>f</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mn>2</mn><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>f</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1&#x27;=f(2i)=2f(i)=2f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, and similarly <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>f</mi><mn>2</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo>=</mo><mn>2</mn><msub><mi>f</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">f_2&#x27;=2f_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4519em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</p><p>The magnitude of the components of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> increasedwhile the magnitude of  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>’s basis vectors also increased. <strong>These components vary in cooperation with the change in basis of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>, so physicists call <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> a covariant tensor.</strong></p><p>It baffles me that physicists use this as a definition of tensors. In particular, when we look at this concept purely mathematically, the concept of covariant and contravariant tensors does not exist, only contravariant and covariant components exist. Mathematically, when we change the basis vectors, the tensors themselves do not change, so there is no sense in which there is “variance”. When you change the basis vectors that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> is represented with, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> hasn’t changed, just its representation has changed. Similarly,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> still represents the same function from a mathematical perspective, it still maps the same vector to the same scalar.</p><p>Furthermore, this definition requires an underlying vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> from which <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> was derived, because deciding which tensor is contravariant and which tensor is covariant entirely depends on this underlying vector space. If we’d chosen to define this in terms of  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>’s basis vectors, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> would be covariant and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> would be contravariant. Despite this, physicists take a physical approach, and say whichever one represents something which physically exists, e.g. the position of a planet, is always considered to be the contravariant tensor, while whichever one represents an imagined quantity is covariant</p><blockquote><p>e.g. basis vectors. You don’t see basis vectors floating around peoples heads in the real world.</p></blockquote><h2 id="Tl-Dr">Tl;Dr</h2><ol><li>Tensors are not generalizations or formalizations of vectors or matrices. Oh sorry, you didn’t hear? I’ll say it again. Come closer. No no, closer. <strong>TENSORS ARE NOT GENERALIZATIONS OR FORMALIZATIONS OF VECTORS OR MATRICES.</strong></li><li>Some tensors can be represented as 2d arrays, but these 2d arrays do not necessarily work anything like matrices. The numerical values in a matrix’s representation represent entirely different things than the numerical values in a tensor’s definition.</li><li>Vectors can be Nicolas Cage dvds, cats, or strands of Donald Trump’s toupee if you choose addition and scalar multiplication the right way.</li><li>The fundamental definition of the dot product of two vectors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> is not <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><msub><mi>y</mi><mn>1</mn></msub><mo>+</mo><msub><mi>x</mi><mn>2</mn></msub><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1y_1+x_2y_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, it is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∥</mi><mi>x</mi><mi mathvariant="normal">∥</mi><mi mathvariant="normal">∥</mi><mi>y</mi><mi mathvariant="normal">∥</mi><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\|x\|\|y\|\cos(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∥</span><span class="mord mathnormal">x</span><span class="mord">∥∥</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">∥</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>. The former is just a convenient computational shortcut when working in Cartesian coordinates.</li><li>Covariant and Contravariant tensors don’t exist. Physicists don’t know this because they have only watched the anime, they haven’t read the manga.</li><li>The definition of a tensor: A tensor is any multilinear map from a vector space to a scalar field.</li></ol>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algebra</tag>
      
      <tag>tensor</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数列极限定义中的放缩操作</title>
    <link href="/2024/03/27/limit/"/>
    <url>/2024/03/27/limit/</url>
    
    <content type="html"><![CDATA[<h2 id="0-引言">0. 引言</h2><p>由于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>这个东西通常是很难解出精确解<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>N</mi><mo stretchy="false">(</mo><mi>ε</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=N(\varepsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">ε</span><span class="mclose">)</span></span></span></span>，所以我们常常会预设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>或者是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>的范围，减小<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>抑或是增大<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>。这样做有什么道理呢？或者说是，我为什么这样可行呢？</p><h2 id="1-解答">1. 解答</h2><p>我们常常是缩小<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>的，例如假设:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\varepsilon&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ,你肯定想说，定义里边不是任意的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\varepsilon&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>吗？你预设了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\varepsilon&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，那么假如我取 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\varepsilon=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，那么我还能够满足如下的定义吗</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∀</mi><mi>ε</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">∃</mi><msub><mi>N</mi><mn>0</mn></msub><mo>∈</mo><msup><mi>N</mi><mo>+</mo></msup><mo separator="true">,</mo><mi>s</mi><mi mathvariant="normal">.</mi><mi>t</mi><mo separator="true">,</mo><mi mathvariant="normal">∀</mi><mi>n</mi><mo>&gt;</mo><msub><mi>N</mi><mn>0</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">\forall\varepsilon&gt;0,\exists N_0\in N^+,s.t,\forall n&gt;N_0,|x_n-A|&lt;\varepsilon </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">∀</span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∃</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0158em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8213em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span></span></p><p>假如满足我的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span> 这个不等式的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>取值是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><msub><mi>ε</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(\varepsilon_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ，现在我的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>ε</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\varepsilon&#x27;=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> ，此时我仍然可以找到这样的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>ε</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(\varepsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">ε</span><span class="mclose">)</span></span></span></span>,怎么找？不就是上边的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><msub><mi>ε</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(\varepsilon_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>吗.你可能会说，那么我把这个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>N</mi><mo stretchy="false">(</mo><msub><mi>ε</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N=N(\varepsilon_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>带入到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|x_n-A|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span></span></span></span>中,它还满足我们的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><msup><mi>ε</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;\varepsilon&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>吗？</p><p>肯定小于的？以下就是证明</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi><mo>&lt;</mo><msup><mi>ε</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo>⇒</mo><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><msup><mi>ε</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;\varepsilon&lt;\varepsilon^{^{\prime}}\Rightarrow|x_n-A|&lt;\varepsilon^{^{\prime}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9925em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9925em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>看，是不是就成立了.其实这个缩小<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>，我们用的比较少，主要是增大<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>我们用的比较多</p><h2 id="2-增大N">2. 增大N</h2><p>一下就解释一下增大<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>的原理：比如我N=100时成立<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>，我们的定义里边说的是，当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">n&gt;N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>时这个不等式都是成立的。比如这里的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>&gt;</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">N&gt;100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span>时这个不等式成立，那么我们把<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>放大为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msup><mi>N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>&gt;</mo><mn>10000</mn></mrow><annotation encoding="application/x-tex">N=N&#x27;&gt;10000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.791em;vertical-align:-0.0391em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10000</span></span></span></span>.你说当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">n&gt;N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>时，这个不等式成立吗？</p><p>当然成立 !</p><blockquote><p>这里的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>是没有变的</p></blockquote><h2 id="3-其他的方法">3. 其他的方法</h2><p>可能你还会看到这样处理来求取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy="false">(</mo><mi>ε</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">N(\varepsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">ε</span><span class="mclose">)</span></span></span></span>的例子，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi mathvariant="normal">∣</mi><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mi>A</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">|x_n-A|&lt;|y_n-A|&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>,其实这个就是常见的放大法。这个是比较好理解的，不多解释了。</p><h2 id="4-思想推广">4. 思想推广</h2><p>这种方法是可以推广到函数极限，无穷级数里边去的。可以这样说，任何有关极限的东西，都可以用这个思想</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>limit</tag>
      
      <tag>sequence</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Darboux Theorm</title>
    <link href="/2024/03/26/darboux_theorem/"/>
    <url>/2024/03/26/darboux_theorem/</url>
    
    <content type="html"><![CDATA[<h2 id="1-定理内容">1. 定理内容</h2><div class="note note-primary">            <p><strong>Darboux定理</strong>：对任意在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span>上有界的函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>,恒有:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>λ</mi><mo>→</mo><mn>0</mn></mrow></munder><mover accent="true"><mi>s</mi><mo>ˉ</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>=</mo><mi>L</mi><mspace width="1em"/><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>λ</mi><mo>→</mo><mn>0</mn></mrow></munder><munder accentunder="true"><mi>s</mi><mo stretchy="true">‾</mo></munder><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi></mrow><annotation encoding="application/x-tex">\lim_{\lambda\to0}\bar{s}(P)=L\quad\lim_{\lambda\to0}\underline{s}(P)=l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.5021em;vertical-align:-0.7521em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">λ</span><span class="mrel mtight">→</span><span class="mord mtight">0</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7521em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">s</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.5021em;vertical-align:-0.7521em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">λ</span><span class="mrel mtight">→</span><span class="mord mtight">0</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7521em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord underline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.84em;"><span class="pstrut" style="height:3em;"></span><span class="underline-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span></span></p><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span>上的任意划分，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>:</mo><mi>a</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>&lt;</mo><msub><mi>x</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>x</mi><mn>2</mn></msub><mo>&lt;</mo><mo>⋯</mo><mo>&lt;</mo><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>&lt;</mo><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">P:a=x_0&lt;x_1&lt;x_2&lt;\cdots&lt;x_{n-1}&lt;x_n=b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7474em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>;</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mi>λ</mi><mo>=</mo><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>n</mi></mrow></munder><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><mi>i</mi></msub></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle\lambda=\max_{1\le i\le n}\Delta x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.5062em;vertical-align:-0.8228em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3723em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">i</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8228em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mi>inf</mi><mo>⁡</mo><mo stretchy="false">{</mo><mover accent="true"><mi>s</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mover accent="true"><mi>s</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>∈</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">L=\inf\{\overline{s}(P)|\overline{s}(P)\in\overline{S}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">in<span style="margin-right:0.07778em;">f</span></span><span class="mopen">{</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>是一切可能划分的得到的Darboux大和的集合</li></ol>          </div><div class="note note-danger">            <p>这里的达布定理不是导数里边的那个达布定理, 导数中的Darboux Theorem表述如下:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>Let </mtext><mi>I</mi><mtext> be a closed intenva</mtext><mo separator="true">,</mo><mi>f</mi><mo lspace="0em" rspace="0em">:</mo><mi>I</mi><mo>→</mo><mi mathvariant="double-struck">R</mi><mtext> be a real-valued differentiable function. Then </mtext><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext> has the intermediate value property. If </mtext><mi>a</mi><mrow><mtext> </mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">d</mi><mtext> </mtext></mrow><mi>b</mi><mrow><mtext> </mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>points in </mtext><mi>I</mi><mrow><mtext> </mtext><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mtext> </mtext></mrow><mi>a</mi><mo>&lt;</mo><mi>b</mi><mo separator="true">,</mo><mtext>then for every </mtext><mi>y</mi><mrow><mtext> </mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mtext> </mtext></mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mrow><mtext> </mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">d</mi><mtext> </mtext></mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>, there exists an </mtext><mi>x</mi><mrow><mtext> </mtext><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi><mtext> </mtext></mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mtext> such that </mtext><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>y</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;\text{Let }I\text{ be a closed intenva},f{:}I\to\mathbb{R}\text{ be a real-valued differentiable function. Then }f^{\prime}\text{ has the intermediate value property. If }a\mathrm{~and~}b\mathrm{~are} \\&amp;\text{points in }I\mathrm{~with~}a&lt;b,\text{then for every }y\mathrm{~between~}f^{\prime}(a)\mathrm{~and~}f^{\prime}(b)\text{, there exists an }x\mathrm{~in~}[a,b]\text{ such that }f^{\prime}(x)=y.\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">Let </span></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord text"><span class="mord"> be a closed intenva</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mrel">:</span></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbb">R</span><span class="mord text"><span class="mord"> be a real-valued differentiable function. Then </span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord text"><span class="mord"> has the intermediate value property. If </span></span><span class="mord mathnormal">a</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">and</span><span class="mspace nobreak"> </span></span><span class="mord mathnormal">b</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">are</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">points in </span></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">with</span><span class="mspace nobreak"> </span></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">then for every </span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">between</span><span class="mspace nobreak"> </span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">and</span><span class="mspace nobreak"> </span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord text"><span class="mord">, there exists an </span></span><span class="mord mathnormal">x</span><span class="mord"><span class="mspace nobreak"> </span><span class="mord mathrm">in</span><span class="mspace nobreak"> </span></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span><span class="mord text"><span class="mord"> such that </span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">.</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>          </div><pre><code class=" mermaid">graph TD;    A--&gt;B;    A--&gt;C;    B--&gt;D;    C--&gt;D;</code></pre><h2 id="2-思路分析">2. 思路分析</h2><p>我们这里仅讨论<code>上和</code>的极限，<code>下和</code>的讨论也是完全类似的.</p><h3 id="2-1-证明极限">2.1 证明极限</h3><p>想要证明一个极限，比如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mn>1</mn></mrow></munder><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lim\limits_{x\to 1}x=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4115em;vertical-align:-0.7171em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.3829em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">→</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7171em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> ,我们需要用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi><mo>−</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">\varepsilon-\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>语言来规范的描述.</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∀</mi><mi>ε</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">∃</mi><mi>δ</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">t</mi></mrow><mrow><mo fence="true">∣</mo><mi>x</mi><mo>−</mo><mn>1</mn><mo fence="true">∣</mo></mrow><mo>&lt;</mo><mi>δ</mi><mtext>时,有</mtext><mrow><mo fence="true">∣</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn><mo fence="true">∣</mo></mrow><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">\forall\varepsilon&gt;0,\exists\delta&gt;0,\mathrm{s.t}\left|x-1\right|&lt;\delta\text{时,有}\left|f(x)-1\right|&lt;\varepsilon </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">∀</span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathrm">s.t</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">∣</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord text"><span class="mord cjk_fallback">时</span><span class="mord">,</span><span class="mord cjk_fallback">有</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">∣</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">∣</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span></span></p><h3 id="2-2-类比证明">2.2 类比证明</h3><p>把上面的证明过程类比到这个情况下即为:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><menclose notation="box"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="true"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1.</mn><mtext>  </mtext><mi mathvariant="normal">∀</mi><mi>ε</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">∃</mi><mi>δ</mi><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">↓</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>此时必然存在一个划分</mtext><mstyle scriptlevel="0" displaystyle="false"><mi>P</mi></mstyle><mtext>满足这个区间的性质</mtext></mrow></mstyle></mtd></mtr></mtable></mstyle></mstyle></mstyle></menclose></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><menclose notation="box"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="true"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2.</mn><mtext>  </mtext><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">.</mi></mrow><mi mathvariant="normal">∣</mi><mi>λ</mi><mo>−</mo><mn>0</mn><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">↓</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>这里比较特殊，因为区间长度</mtext><mstyle scriptlevel="0" displaystyle="false"><mi>λ</mi><mo>&gt;</mo><mn>0</mn></mstyle><mtext>,所以就是</mtext><mstyle scriptlevel="0" displaystyle="false"><mi>λ</mi><mo>&lt;</mo><mi>ε</mi></mstyle></mrow></mstyle></mtd></mtr></mtable></mstyle></mstyle></mstyle></menclose></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><menclose notation="box"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="false"><mstyle scriptlevel="0" displaystyle="true"><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>3.</mn><mtext>  </mtext><mi mathvariant="normal">∣</mi><mover accent="true"><mi>s</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mi mathvariant="normal">∣</mi><mo>&lt;</mo><mi>ε</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">↓</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>这里比较特殊，因为大和不增的性质(下边会证明)，所以</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mover accent="true"><mi>s</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mo>&gt;</mo><mn>0</mn><mo>&gt;</mo><mo>−</mo><mi>ε</mi><mo separator="true">,</mo><mtext>故只需证</mtext><mover accent="true"><mi>s</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mo>&lt;</mo><mi>ε</mi></mrow></mstyle></mtd></mtr></mtable></mstyle></mstyle></mstyle></menclose></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{c}\boxed{\begin{array}{c}    1.\;\forall\varepsilon&gt;0,\exists \delta&gt;0\\    \downarrow\\    \text{此时必然存在一个划分$P$满足这个区间的性质}\end{array}}\\[4em]\boxed{    \begin{array}{c}    2.\;{\rm s.t.}|\lambda-0|&lt;\varepsilon \\    \downarrow\\    \text{这里比较特殊，因为区间长度$\lambda&gt;0$,所以就是$\lambda&lt;\varepsilon$}    \end{array}}\\[4em]\boxed{    \begin{array}{c}    3.\;|\overline{s}(P)-L|&lt;\varepsilon \\    \downarrow\\    \text{这里比较特殊，因为大和不增的性质(下边会证明)，所以}\\    \overline{s}(P)-L&gt;0&gt;-\varepsilon,\text{故只需证}\overline{s}(P)-L&lt;\varepsilon    \end{array}}\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:18.98em;vertical-align:-9.24em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.74em;"><span style="top:-12.34em;"><span class="pstrut" style="height:4.99em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.39em;"><span style="top:-6.28em;"><span class="pstrut" style="height:6.28em;"></span><span class="boxpad"><span class="mord"><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1.</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∀</span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">↓</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">此时必然存在一个划分</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord cjk_fallback">满足这个区间的性质</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span><span style="top:-4.39em;"><span class="pstrut" style="height:6.28em;"></span><span class="stretchy fbox" style="height:4.28em;border-style:solid;border-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.89em;"><span></span></span></span></span></span></span></span><span style="top:-5.59em;"><span class="pstrut" style="height:4.99em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.39em;"><span style="top:-6.28em;"><span class="pstrut" style="height:6.28em;"></span><span class="boxpad"><span class="mord"><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2.</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">s.t.</span></span></span><span class="mord">∣</span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">ε</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">↓</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">这里比较特殊，因为区间长度</span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0,</span><span class="mord cjk_fallback">所以就是</span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span><span style="top:-4.39em;"><span class="pstrut" style="height:6.28em;"></span><span class="stretchy fbox" style="height:4.28em;border-style:solid;border-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.89em;"><span></span></span></span></span></span></span></span><span style="top:1.76em;"><span class="pstrut" style="height:4.99em;"></span><span class="mord"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.99em;"><span style="top:-7.48em;"><span class="pstrut" style="height:7.48em;"></span><span class="boxpad"><span class="mord"><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3.</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∣</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">L</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">ε</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mrel">↓</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord cjk_fallback">这里比较特殊，因为大和不增的性质</span><span class="mord">(</span><span class="mord cjk_fallback">下边会证明</span><span class="mord">)</span><span class="mord cjk_fallback">，所以</span></span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mord mathnormal">ε</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">故只需证</span></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span><span style="top:-4.99em;"><span class="pstrut" style="height:7.48em;"></span><span class="stretchy fbox" style="height:5.48em;border-style:solid;border-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.49em;"><span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.24em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></span></p><h3 id="2-3-着手证明">2.3 着手证明</h3><p>现在着手分析怎么证明 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">\overline{S}(P)-L&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>,利用确界原理,这里</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mo stretchy="false">(</mo><mi>b</mi><mo>−</mo><mi>a</mi><mo stretchy="false">)</mo><mo>⋅</mo><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>∈</mo><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></munder><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)&gt;(b-a)\cdot\min_{x\in[a,b]}f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.716em;vertical-align:-0.966em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.309em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">∈</span><span class="mopen mtight">[</span><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span><span class="mclose mtight">]</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.966em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></p><p>所以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span>有下确界,记为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span>,接着我们做变换</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mo>=</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>+</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">\overline{S}(P)-L=\overline{S}(P)-\overline{S}(P^{&#x27;})+\overline{S}(P^{&#x27;})-L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></span></p><p>此时后边的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">\overline{S}(P^{\prime})-L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 正是确界的性质</p><blockquote><ul><li>其实也不能说这个思路每个人都能够想的到，但是毕竟是学习数学分析的人，这还算得上是常规套路</li><li>你们以前应该用的很多这种方法吧，比如单调有界原理的证明里边</li></ul></blockquote><p>现在由确界原理可以知道</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∀</mi><mi>ε</mi><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo>&lt;</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\forall\varepsilon&gt;0,0&lt;\overline{S}(P^{&#x27;})-L&lt;\frac{\varepsilon}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">∀</span><span class="mord mathnormal">ε</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>因而现在我们只要能够解决</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^{&#x27;})&lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><blockquote><ul><li>在这里取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{\varepsilon}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ε</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>主要是为了美观，你可以取为其它的合理的值</li><li>这也是为什么我要把 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">\overline{S}(P)-L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 拆开:不然这么好一个确界性质摆在那里不用就太可惜了吧.其实下边我们还要充分<br>运用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span> 的相关性质，因为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">\lambda&lt;\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>就是一个我们证明能够用到的条件, 这里你可以认为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>是对应的.</li></ul></blockquote><h3 id="2-4-证明目标">2.4 证明目标</h3><p>现在我们就只需要证明</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^{&#x27;})&lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>你可以想一想我们还有一个满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>&lt;</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">\lambda&lt;\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> 所对应的划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>还没有使用，现在就要开始使用划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>的相关性质了.但是因为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>中的两个划分并没有很强的联系，所以我们又可以又一个常规的操作:把划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>P</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">P&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>插入到划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>中，<br>得到（构造）划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>P</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">P^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, 此时即可以利用到大和不增的性质：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mspace width="1em"/><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P^*)&lt;\overline{S}(P),\quad\overline{S}(P^*)&lt;\overline{S}(P^{^{\prime}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>现在把</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mspace width="1em"/><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P^*)&lt;\overline{S}(P),\quad\overline{S}(P^*)&lt;\overline{S}(P^{^{\prime}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>这两个东西塞到</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^{^{\prime}})&lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>里边了,于是即证明:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo lspace="0em" rspace="0em">∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^{*})&lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∗</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>这里能够塞进去是因为前面有大和不增的性质，即:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^*)+\overline{S}(P^*)-\overline{S}(P^{^{\prime}})&lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2425em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>现在就只需要找到这样的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>满足当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>&lt;</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">\lambda&lt;\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>时, 满足如下的性质：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>&lt;</mo><mfrac><mi>ε</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^*) &lt;\frac\varepsilon2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>由于我们不知道划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>P</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">P&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>是怎么插入划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>中的，所以我们边取以一种比较特殊的插入方式，将<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_1,x_2,\cdots,x_{p-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>这<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(P-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>个点插入每个区间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{i-1},x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>中.</p><blockquote><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P^*)-\overline{S}(P^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>二者的差可以看成是一个关于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>的表达式，我们需要反求出<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ε</mi></mrow><annotation encoding="application/x-tex">\varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span>,即可完成最终的证明</li><li>此时<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">x_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>就会和两个端点重合,且每个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{i-1},x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>里只有一个点</li></ul></blockquote><p>他们二者的差可以看作是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(P-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>个区间上差的求和，现在我们考虑<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_{i-1},x_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>这个区间。这个区间插入了点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">x_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ,令<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>M</mi><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo separator="true">,</mo><msubsup><mi>M</mi><mi>i</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msubsup></mrow><annotation encoding="application/x-tex">M_i&#x27;,M_i&#x27;&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0106em;vertical-align:-0.2587em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4413em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.4413em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span></span></span></span>分别为区间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">]</mo><mo separator="true">,</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_{i-1},x_j], [x_j,x_i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>上的函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>的上确界.令<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>M</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">M_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为未插入<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">x_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>时的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>的上确界。于是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>可以表示为:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi mathvariant="normal">Δ</mi><mi>i</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>M</mi><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">[</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">(</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>M</mi><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>+</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">[</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">(</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><msub><mi>M</mi><mi>i</mi></msub><mo>−</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><msub><mi>M</mi><mi>i</mi></msub><mo>−</mo><msup><msub><mi>M</mi><mi>i</mi></msub><msup><mrow></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></msup><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mo stretchy="false">(</mo><msub><mi>M</mi><mi>i</mi></msub><mo>−</mo><msub><mi>m</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><msub><mi>M</mi><mi>i</mi></msub><mo>−</mo><msub><mi>m</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo></mrow></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><msup><mi>j</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo></mrow></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}\Delta_{i}  &amp;= M_i(x_{i}-x_{i-1})-[{M_i}^{&#x27;}(x_{j^{&#x27;}}-x_{i-1})+{M_i}^{&#x27;&#x27;}(x_{i}-x_{j^{&#x27;}})] \\[5pt]   &amp;= M_i(x_{i}-x_{j^{&#x27;}}+x_{j^{&#x27;}}-x_{i-1})-[{M_i}^{&#x27;}(x_{j^{&#x27;}}-x_{i-1})+{M_i}^{&#x27;&#x27;}(x_{i}-x_{j^{&#x27;}})]\\[5pt]    &amp;= (M_i-{M_i}^{&#x27;})(x_{i}-x_{j^{&#x27;}})+(M_i-{M_i}^{&#x27;&#x27;})(x_{j^{&#x27;}}-x_{i-1})\\[5pt]   &amp;\le (M_i-m_i)(x_{i}-x_{j^{&#x27;}})+(M_i-m_i)(x_{j^{&#x27;}}-x_{i-})\\[5pt]    &amp;\le (M-m)(x_{i}-x_{j^{&#x27;}})+(M-m)(x_{j^{&#x27;}}-x_{i-})\\[5pt]    &amp;\le (M-m)(x_{i}-x_{i-1})    \end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:12.0271em;vertical-align:-5.7636em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.2636em;"><span style="top:-8.2636em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"><span class="mord">Δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-6.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"></span></span><span style="top:-3.9121em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"></span></span><span style="top:-1.9121em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"></span></span><span style="top:0.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"></span></span><span style="top:2.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.7636em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.2636em;"><span style="top:-8.2636em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">[</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mclose">)]</span></span></span><span style="top:-6.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">[</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mclose">)]</span></span></span><span style="top:-3.9121em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0157em;"><span style="top:-3.0157em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-1.9121em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">−</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:0.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">−</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:2.0879em;"><span class="pstrut" style="height:3.0157em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.7636em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>于是就有</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>&lt;</mo><mi>ε</mi></mrow><annotation encoding="application/x-tex">(P-1)(M-m)(x_i-x_{i-1}) &lt; \varepsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ε</span></span></span></span></span></p><blockquote><p>注意：我们前边假设的划分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>满足</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>λ</mi><mo>=</mo><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>n</mi></mrow></munder><mo stretchy="false">(</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>&lt;</mo><mi>δ</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\lambda=\max_{1\leq i\leq n}(\Delta x_i)&lt;\delta.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.5728em;vertical-align:-0.8228em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3723em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">i</span><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8228em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord">.</span></span></span></span></span></p></blockquote><p>所以我们有</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>&lt;</mo><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">(P-1)(M-m)(x_i-x_{i-1})&lt;(P-1)(M-m)\delta </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span></p><p>现在我们要令</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>S</mi><mo stretchy="true">‾</mo></mover><mo stretchy="false">(</mo><msup><mi>P</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{S}(P)-\overline{S}(P^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1333em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">(P-1)(M-m)\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>, 解得</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>δ</mi><mo>=</mo><mfrac><mi>ε</mi><mrow><mn>2</mn><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\delta=\frac\varepsilon{2(P-1)(M-m)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>这就是我们要寻找的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></p><h3 id="2-5-思路完善">2.5 思路完善</h3><p>由于由于我们采取了一种比较特殊的插入方式，将<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">x_1,x_2,\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>P</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{P-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> 这<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(P-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 个点插入每个区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{i-1},x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 中.<br>接下来我们用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> 的范围的限制来实现我们的这种插值方法。只需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><mi>i</mi></msub><mo>&lt;</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><msup><mi>j</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub></mrow><annotation encoding="application/x-tex">\Delta x_i&lt;\Delta x_{j^{\prime}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 即可.</p><blockquote><p>如果同一个小区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_{i-1},x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 内插入了两个点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><msup><mi>j</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo separator="true">,</mo><msub><mi>x</mi><mrow><mi>j</mi><mo>−</mo><msup><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub></mrow><annotation encoding="application/x-tex">x_{j^{\prime}},x_{j-1^{\prime}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mtight">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ,那么<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><msup><mi>j</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo>&lt;</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta x_{j^{\prime}}&lt;\Delta x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 了，于是就产生了矛盾。</p></blockquote><p>这时我们只需要取</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>δ</mi><mo>=</mo><mi>min</mi><mo>⁡</mo><mo stretchy="false">{</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><msup><mn>1</mn><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo separator="true">,</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><msup><mn>2</mn><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo separator="true">,</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><mrow><mi>j</mi><msup><mn>3</mn><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></mrow></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi mathvariant="normal">Δ</mi><msub><mi>x</mi><msup><mi>p</mi><msup><mrow></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msup></msub><mo separator="true">,</mo><mfrac><mi>ε</mi><mrow><mn>2</mn><mo stretchy="false">(</mo><mi>P</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>M</mi><mo>−</mo><mi>m</mi><mo stretchy="false">)</mo></mrow></mfrac><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\delta=\min\{\Delta x_{1^{^{\prime}}},\Delta x_{2^{^{\prime}}},\Delta x_{j3^{^{\prime}}},\ldots,\Delta x_{p^{^{\prime}}},\frac\varepsilon{2(P-1)(M-m)}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mop">min</span><span class="mopen">{</span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2802em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2802em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mord mtight"><span class="mord mtight">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.4198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8928em;"><span style="top:-2.8928em;margin-right:0.0714em;"><span class="pstrut" style="height:2.6068em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8496em;"><span style="top:-2.8496em;margin-right:0.1em;"><span class="pstrut" style="height:2.5556em;"></span><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4163em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">}</span></span></span></span></span></p><p>目的实现</p><h2 id="3-完整证明">3. 完整证明</h2><p>请参见<a href="https://annas-archive.org/md5/912cda82b51ef615e4f1cec4c4aa6fd5">陈纪修-数学分析-第三版</a>238页.</p>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>integral</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows 环境变量杂谈</title>
    <link href="/2024/03/26/windows_path_env/"/>
    <url>/2024/03/26/windows_path_env/</url>
    
    <content type="html"><![CDATA[<h2 id="1-引入问题">1. 引入问题</h2><p>在编写LaTeX的时候，肯定很多的小伙伴不想使用vim，而是想要用sublime来编辑，于是直接在CLI下输入sublime，但是出现的是<br><img src="/img/windows_path_env/01.png" alt=""></p><div class="note note-danger">            <p>也许你会觉得这样引入很奇怪，但是不妨先看看我为什么这样讲.</p>          </div><p>于是就产生了本篇文章和下边的问题：</p><ol><li>为什么你可以在命令行窗口中输入vim，notepad，<code>&lt;Enter&gt;</code>之后就可以打开notepad？</li><li>为什么你在&lt;运行&gt;窗口中输入<code>cmd</code>，<code>notepad</code>等也能够打开这些应用？</li><li>为什么安装<code>python</code>的时候要叫你添加环境变量?</li><li>环境变量和经常说到的<code>Path</code>又是什么关系？</li></ol><h2 id="2-运行-下的环境变量">2. &lt;运行&gt;下的环境变量</h2><p>环境变量是什么：说白了就是给系统指明最要的文件目录地址。</p><div class="note note-success">            <p>所谓&lt;运行&gt;下的环境变量实际上就是在运行窗口下运行应用。</p>          </div><h3 id="2-1-最重要的Path环境变量">2.1 最重要的Path环境变量</h3><p>然后我们运行某个程序时，操作系统就会从我们指定的路径中去寻找这个可执行程序。找到了就执行，找不到就报错。操作系统会去那些路径下寻找呢？就是Path环境变量里边寻找。如图：<br><img src="/img/windows_path_env/02.png" alt=""></p><p>Path变量有两个，一个是系统的，一个是当前登录的用户的。</p><h3 id="2-2-认识环境变量">2.2 认识环境变量</h3><p>如图，打开环境变量，我们看到有一个PROCESSOR_LEVEL的变量;我们尝试运行来查看它的值，结果报错，如下图：<br><img src="/img/windows_path_env/03.png" alt=""></p><h3 id="2-3-设置环境变量">2.3 设置环境变量</h3><p>问题出在哪里呢？就是变量这里。系统怎么知道这个东西是一个变量，不是一个单纯的字符换呢？你得告诉它这是一个变量，怎么告诉它呢？和Linux下类似，只不过:</p><ul><li>Linux下使用得的是**$<Var-name>**的格式，</li><li>windows下你的使用**%<var-name>%**的格式，</li></ul><p>好那么就看一下改进之后的运行结果:我们使用如下的命令，就会发现，它识别出来PROCESSOR_LEVEL的值了，就是6.但是还是报错了。<br><img src="/img/windows_path_env/04.png" alt=""></p><p><strong>原因解释</strong></p><p>但是这个例子可能不太恰当，毕竟&lt;运行&gt;窗口时用来运行可执行程序的，你给它一个6，它怎么给你运行呢？我用这个例子就是为了第二个问题作的回答。那么我们就用一个具体的例子来演示，比入把sublime加入到**“运行”**中<br><img src="/img/windows_path_env/05.png" alt=""></p><h3 id="2-4-环境变量设置进阶">2.4 环境变量设置进阶</h3><p>你们可以应用的快捷方式加入到环境变量里边，这样也可以运行的，但是你稍微的想想，你电脑上的应用很多吧，如果把你的应用像视频里的那样一个一个的单独加入到环境变量中，那么你的环境变量的内容是不是就很多了。</p><p>所以才有了Path环境变量这个东西，把你的可执行文件路径放在一个文件夹里边，然后把这个文件夹加入到Path环境变量中，这样在你运行你自己添加的某个可执行程序时系统就会到你添加到Path中的那个文件夹里边去寻找，就可以执行了。而且这样还有一个好处就是你不用再多输入两个烦人的%%了，是不是很爽。</p><p>接下来就把最开始的那个sublime的环境变量删了吧</p><blockquote><p>不仅仅只在&lt;运行&gt;窗口里边可以识别环境变量，在你的<strong>文件管理器</strong>等地方都能够使用，前提是你得用<code>%%</code>声明这是一个产量而不是一个简单的字符串.</p></blockquote><h2 id="3-cli下的环境变量">3. cli下的环境变量</h2><p>还有一个问题没有解决，就是在命令行下边打开应用。刚才我们的设置是不足以在CLI下打开sublime的，你可以试一试在CLI中输入sublime，你看看你是不是会得到下图：<br><img src="/img/windows_path_env/06.png" alt=""></p><p>为什么在命令行下可以打开其他的应用呢？有些人可能是认为我们无法打开是因为那是一个快捷方式的原因,然而并不是，如下图：<br><img src="/img/windows_path_env/07.png" alt=""></p><p>3.2 还有人可能以为是我把第一个设置的sublime的环境变量删除了的缘故;其实也不是，如下图：<br><img src="/img/windows_path_env/08.png" alt=""></p><p><strong>究竟是什么呢？</strong></p><p>这就需要我们了解一个东西了，就是<code>PATHEXT</code>这个环境变量下边是它的解释说明：</p><div class="note note-success">            <ul><li>Windows的“运行”命令为一些有经验的用户提供了一个简单快速的方法来打开文件，而不再需要通过“开始”目录，或在文件夹中寻找文件。例如：当我再“运行”窗口中输入cmd.exe 并点击确定时，命令行窗口就直接被打开了。同样的，输入 msconfig.exe后，可以直接打开“系统配置”界面</li><li>其实很多人都知道，当使用“运行”命令时，并不需要总是输入某些文件的扩展名的，例如只输入文件名部分，用cmd代替cmd.exe即可。如果这样可以，那是因为EXE文件扩展名是XP中的可靠扩展名而无须提供。当你没有输入扩展名时，XP会尝试几种默认扩展名，这些XP默认的扩展名就在PATHEXT变量中声明</li><li>PATHEXT系统变量默认的声明如下：.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH</li></ul>          </div><h3 id="4-解决方法">4 解决方法</h3><p>其实我们只需要把刚才的那个PATHEXT的环境变量里边加上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">;,lnk<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>需要注意的是<code>.MSC</code>扩展名并不在此之列。这个后缀的文件用来打开XP的管理控制台。如果你希望打开类似Services这类MMC文件，而不在“运行”窗口输入文件全名(services.msc)，那么就需要将<code>.MSC</code>添加到XP的<code>PATHEXT</code>变量中。</p>          </div><h2 id="2022-09-16补充">2022.09.16补充</h2><p>如过你使用scoop的话，不管是快捷方式还是.exe文件，直接扔到scoop的shims文件夹就行了,前提是你的scoop的正常。<br><img src="/img/windows_path_env/09.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TikZ工具合集</title>
    <link href="/2024/03/26/tikz_tools/"/>
    <url>/2024/03/26/tikz_tools/</url>
    
    <content type="html"><![CDATA[<h2 id="1-前言">1. 前言</h2><p>其实之前我已经写过一篇文章来总结了部分的TiKZ的可视化编辑软件，但是自己后面又发现了有很多的好用的工具，然后就都去用了一遍，也体会到了各个工具的优劣。后面发现，在某些方面TiKZ还是有一定的局限性。我也就去了解了各种的矢量图绘制软件，于是就有了这篇<strong>矢量图绘制</strong>软件推荐。</p><p>但是感觉有的时候，其实真没有必要太过于追求矢量图，位图也挺好的。但是我折腾就要折腾到底，满足自己近乎变态的绘图要求。所以下面我的内容将不在限定于TiKZ，但是绝大多数（90%）的软件都是支持导出tikz的 …</p><blockquote><p>为什么要写这篇文章?</p><ol><li>纪念自己曾经折腾TiKZ的这段经历</li><li>为了给没有入坑的人提供一点参考, 让各位少走一点弯路</li></ol></blockquote><p>更多参考示例, 这个里面有各式各样的精美抑或是令你感到unbelievable的示例：</p><blockquote><p><a href="https://tex.stackexchange.com/questions/158668/nice-scientific-pictures-show-off">https://tex.stackexchange.com/questions/158668/nice-scientific-pictures-show-off</a></p></blockquote><h2 id="2-工具内容">2. 工具内容</h2><p>相关的部分工具大致划分为：</p><ol><li>分为绘图软件</li><li>绘图语言</li></ol><blockquote><p>PS: 其实这种划分并不太准确（欢迎讨论交流），同时也欢迎交流其他的矢量图绘制软件。</p></blockquote><p><img src="/img/tikz_tools/mindmap.png" alt=""></p><h2 id="3-工具使用介绍">3. 工具使用介绍</h2><h3 id="3-1-TiKZit">3.1 TiKZit</h3><p>在介绍tikz之前，先给新手介绍一个比较友好的tikz可视化绘图软件TikZit,github的地址为:<a href="https://github.com/tikzit/tikzit">https://github.com/tikzit/tikzit</a>; 是一个Github上的开源项目，是一个GitHub上的开源项目,这个东西的使用体验还好吧，也是我在这个方面的入门软件。我大概学了一个下午吧。这个软件的入门文档作者写的很好，按照它的教程一步步的走下来，基本上这个软件的功能你就可以摸透了.</p><ol><li>功能简单，入手快.可以作为新手入门tikz的铺垫，</li><li>可以调用pdflatex进行预览</li><li>支持自定义node和edge的样式，可以方在文件中通过 \input{ } 调用</li></ol><blockquote><p>对于中文支持即使更改默认的latex编译引擎pdflatex为xelatex的位置，并且在tikzdefs中引入ctex宏包仍然不支持中文</p></blockquote><p>我去软件的github仓库开了一个issue，但是还是没能解决问题<br><img src="/img/tikz_tools/tikzit_1.png" alt=""></p><p>大致的使用方法如下:<br><img src="/img/tikz_tools/tikzit_2.png" alt=""></p><div class="note note-danger">            <ol><li>到了后期就会发现功能有一点的单一</li><li>node和edge的样式太少（但是可以修改源码）</li><li>部分的样式定义不合理的话软件会崩溃</li><li>部分定义的样式在GUI界面无法显示</li></ol>          </div><blockquote><p>对应的BUG的解决? 中文node和样式不合理导致的崩溃：均可以退出软件然后手动修改源码</p></blockquote><p><strong>使用演示</strong><br><img src="/img/tikz_tools/tikzit_3.png" alt=""></p><div class="note note-success">            <p>使用tips:</p><ol><li>使用<code>Ctrl + J</code>打开源码进行修改</li><li>把自己的样式定义在一个文件中，宏定义文件定义在一个文件中</li></ol>          </div><p>其中有两个样式文件(配置文件) <code>.tikzstyles</code> 和 <code>.tikzdefs</code>， 其中第一个样式文件是必须的，第二个样式文件会被tikzit自动导入，这两个文件中的内容大概长这个样子</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-comment">%%%%%  .tikzstyles</span><br><span class="hljs-comment">% TiKZ style file generated by TikZiT. You may edit this file manually,</span><br><span class="hljs-comment">% but some things (e.g. comments) may be overwritten. To be readable in</span><br><span class="hljs-comment">% TikZiT, the only non-comment lines must be of the form:</span><br><span class="hljs-comment">% \tikzstyle&#123;NAME&#125;=[PROPERTY LIST]</span><br><br><span class="hljs-comment">% Node styles</span><br><span class="hljs-keyword">\tikzstyle</span>&#123;red circle&#125;=[fill=white, draw=red, shape=circle]<br><br><span class="hljs-comment">% Edge styles</span><br><span class="hljs-comment">%%%%%  .tikzdefs</span><br><span class="hljs-keyword">\PassOptionsToClass</span>&#123;<span class="hljs-keyword">\CurrentOption</span>&#125;&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;ctex&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;bm&#125;<br><span class="hljs-keyword">\newcommand</span>&#123;<span class="hljs-keyword">\param</span>&#125;[1]&#123;<span class="hljs-keyword">\ensuremath</span>&#123;<span class="hljs-keyword">\vec</span>&#123;<span class="hljs-keyword">\bm</span>&#123;<span class="hljs-params">#1</span>&#125;&#125;&#125;&#125;<br></code></pre></td></tr></table></figure><p>从上面可以看出tikzit的style文件其实就是一系列声明的node style (如果你对tikz熟悉的话). 但是目前为止我觉得用这个东西来绘制贝塞尔曲线还可以试试，其他的就算了.</p><h3 id="3-2-TiKZ-and-PgfPlots">3.2 TiKZ and PgfPlots</h3><p>LATEX 自带的tikz宏包肯定不必多说了吧，你随便在网上一搜就有一堆的结果,有很多的相关内容.</p><h3 id="3-3-MetaPost">3.3 MetaPost</h3><p>可以稍微的介绍以下 MetaPost 的内容，MetaPost 是脱胎于 D. E. K. 的 MetaFont 的一个东西，感觉和TiKZ差不多. 你可以在你的电脑上本地执行MetaPost的文件，也可以使用在线网站: <a href="http://www.tlhiv.org/mppreview/">http://www.tlhiv.org/mppreview/</a></p><p>具体的使用文档可以查看官方文档，只需要在你电脑的终端中输入如下的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">texdoc metapost<br></code></pre></td></tr></table></figure><p>操作示意图</p><p><img src="/img/tikz_tools/metapost_1.png" alt=""></p><p><strong>1. 文件</strong></p><p>一段简单的测试代码（使用样例）, <a href="http://xn--fig-c88dq7at3b227b1jau35cy6g.mp">把它保存为文件fig.mp</a></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">% fig.mp<br>% 这里是注释<br><br>% 设置输出图片的格式为eps<br>filenametemplate <span class="hljs-string">&quot;%j-%c.eps&quot;</span>;<br><br><span class="hljs-keyword">beginfig </span>(<span class="hljs-number">1</span>) ; <br>    for i=<span class="hljs-number">0</span> upto <span class="hljs-number">9</span>:<br>        draw (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)&#123;<span class="hljs-keyword">dir </span><span class="hljs-number">45</span>&#125;..&#123;<span class="hljs-keyword">dir </span>-<span class="hljs-number">10</span>i&#125;(<span class="hljs-number">6</span>cm,<span class="hljs-number">0</span>);<br>    endfor<br><br>    for i=<span class="hljs-number">0</span> upto <span class="hljs-number">9</span>:<br>        draw (<span class="hljs-number">7</span>cm,<span class="hljs-number">1</span>cm)&#123;<span class="hljs-keyword">dir </span><span class="hljs-number">45</span>&#125;..&#123;<span class="hljs-keyword">dir </span><span class="hljs-number">10</span>i&#125;(<span class="hljs-number">13</span>cm,<span class="hljs-number">1</span>cm);<br>    endfor<br>endfig ;<br><br>end<br></code></pre></td></tr></table></figure><p><strong>2. 编译</strong></p><p>在命令行输入如下的指令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mpost fig.mp<br></code></pre></td></tr></table></figure><p><strong>3. 输出</strong></p><p>然后你会得到如下的输出：<br><img src="/img/tikz_tools/metapost_2.png" alt=""></p><p><strong>4. 查看</strong></p><p>打开eps文件（可以使用Gsview）就可以看到内容了，如下：<br><img src="/img/tikz_tools/metapost_3.png" alt=""></p><blockquote><p>详细的使用方法可以参见如下链接</p><ol><li>参见：<a href="https://www.tug.org/docs/metapost/mpman.pdf">https://www.tug.org/docs/metapost/mpman.pdf</a></li><li>查阅自带的文档：<code>texdoc metapost</code></li></ol></blockquote><h3 id="3-4-Asymptote">3.4 Asymptote</h3><p>个人感觉这个软件（语言）挺好的, 软件的介绍(来自百度百科)：</p><blockquote><p>Asymptote 是一种为了绘制技术图形而设计的矢量图语言，其灵感来自 MetaPost，它具有 IEEE 标准的浮点数支持、原生的三维图形支持、灰度 /RGB/CMYK/HSV 等不同色彩指定方式以及类似 C++ 的语法。与 MetaPost不同，Asymptote 原生的支持多段路径（因此不局限于单连通区域）、填充图案、Gouraud 着色（shading）以及PostScript 图像（和pdf等）</p></blockquote><p>自己那段时间真的想把这个东西学会，我在学习的过程中看到它的语法和C差不多，而且文档也讲的挺详细的。</p><p>它有两种绘图模式：</p><ol><li><strong>BathMode</strong> (写为一个文件)</li><li><strong>InteractiveMode</strong> （命令行实时交互）</li></ol><p>重要的是用它来绘制二维和三维图形的方法感觉比TikZ简单多了，而且这个也是TeXLive自带的一个宏包， 可以和TiKZ类似， 可以直接写在 .tex 文件中，直接编译, 还可以支持生成交互模式的三维pdf格式文档。</p><blockquote><p>PS：要使用交互功能需要使用支持JavaScript的pdf阅读器（比如Adobe Acrobat）。</p></blockquote><p><strong>Asymptote 使用演示</strong></p><p>1.<strong>BatchMode</strong></p><p><img src="/img/tikz_tools/asy_1.gif" alt=""></p><p>2.<strong>InteractiveMode</strong></p><p><img src="/img/tikz_tools/asy_2.gif" alt=""></p><p>视频中用到的MarkDown文档在这里</p><h3 id="3-5-Matlab2TikZ">3.5 Matlab2TikZ</h3><p>其实Matlab本身就可以导出相对比较精准的矢量图，可以绘制出图以后直接在绘图窗口另存为pdf格式，此时就是高清的矢量图了，如下：<br><img src="/img/tikz_tools/matlab_1.png" alt=""></p><p>当然，你们可能会遇到即使是选择了pdf, eps等矢量图格式，但是导出的图片依然非常的糊，那么只需要把如下的导出设置渲染方式更改一下即可:</p><blockquote><p>但是我记得matlab好像默认就是OpenGL位图格式导出的，此时你可以选择dpi</p></blockquote><p><img src="/img/tikz_tools/matlab_2.png" alt=""></p><blockquote><p>还可以使用matlab自带的函数 exportgraphics 进行导出，语法为</p></blockquote><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">exportgraphics(gcf,<span class="hljs-string">&#x27;test.pdf&#x27;</span>,<span class="hljs-string">&#x27;ContentType&#x27;</span>,<span class="hljs-string">&#x27;vector&#x27;</span>); <br></code></pre></td></tr></table></figure><p>但是如果你追求完美的数学字体和统一的  的话，那么就可以使用如下推荐的一个工具:<code>MaTlaB2TiKZ</code>, 一个GitHub上的开源项目, 项目地址为:<a href="https://github.com/matlab2tikz">https://github.com/matlab2tikz</a>; 这个可以认为是我这篇博客里边的又一个重点, 它的功能十分的强大，可以和MatlaB梦幻联动，能不强大？具体的使用使用方法可以参见github在下载下来的源码里边的如下文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">~\MatLab2TiKZ\src\matlab2tikz.m<br></code></pre></td></tr></table></figure><p>下边我给出几个个最基本的，也是最常用的使用方法样例</p><p><strong>二维函数绘图导出</strong></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs matlab">clear,clc;<br><span class="hljs-comment">% 绘制二维图</span><br>x = <span class="hljs-number">0</span>:<span class="hljs-number">0.1</span>:<span class="hljs-number">2</span>*<span class="hljs-built_in">pi</span>;<br>y = <span class="hljs-built_in">sin</span>(x);<br><span class="hljs-built_in">plot</span>(x, y, <span class="hljs-string">&#x27;r&#x27;</span>)<br><br><span class="hljs-comment">% 导出（默认当前文件夹下）</span><br>addpath C:\Latex\MatLab2TiKZ\src<br>matlab2tikz(<span class="hljs-string">&#x27;Test2D.tex&#x27;</span>)<br></code></pre></td></tr></table></figure><p><strong>三维函数导出</strong></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% 绘制三维图</span><br>peaks;<br><br><span class="hljs-comment">% 导出</span><br>addpath C:\Latex\MatLab2TiKZ\src<br>matlab2tikz(<span class="hljs-string">&#x27;Test3D.tex&#x27;</span>)<br></code></pre></td></tr></table></figure><blockquote><p>PS: 也可以先把图形绘制出来，调整好后再导出TiKZ源码, 只需使用如下两条语句：</p></blockquote><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% import matlab2tikz function</span><br>addpath C:\Latex\MatLab2TiKZ\src<br><br><span class="hljs-comment">% Export graphicx</span><br>matlab2tikz(<span class="hljs-string">&#x27;Test3D.tex&#x27;</span>) <br></code></pre></td></tr></table></figure><p><strong>MatLab2TiKZ的编译效果</strong><br><img src="/img/tikz_tools/matlab_3.png" alt=""></p><h3 id="3-6-gnuplot">3.6 gnuplot</h3><p>对于这个软件，我只能用一个词来形容, 那就是 <strong>短小精悍,</strong> 但是我用的不多. 以下为gnuplot的一个简单使用样例:<br><img src="/img/tikz_tools/gnuplot_1.gif" alt=""></p><blockquote><p>备注: 怎么在gnuplot中清屏(即清除历史输入输出信息) ？system “cls”, 如果是在类Unix上则为 system “clear”</p></blockquote><p>关于GnuPlot在LaTeX中的使用，我在这里把GnuPlot在TiKZ中的使用详细介绍一下.在介绍怎么使用 TikZ 与 Gnuplot 之前，我们先说怎么编译。在发行里，gnuplot并不包含在内。它的原理是 TikZ 调用 Gnuplot 之后，在编译的过程中，我们将会得到两个中间文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">filename.pgf-plot.gnuplot<br><br>filename.pgf-plot.table<br></code></pre></td></tr></table></figure><p>其中，前者是 <strong>pgf-plot.table</strong> 的设定文件，而后者就是调用 Gnuplot 之后产生的一个数据表（点的坐标），然后 TikZ 调用这些点的坐标得到函数图。为了能够使用 TikZ 与 Gnuplot，需要做两件事</p><ol><li>在电脑安装 Gnuplot</li><li>命令行加入参数【临时】: <strong>pdflatex –shell-escape</strong> filename.tex</li></ol><p>或者是修改配置文件【永久】, vscode 的配置文件中加上–shell-escape 如下图：<br><img src="/img/tikz_tools/gnuplot_2.png" alt=""></p><p>想要更进一步了解gnuplot的使用方法的可以参见我的宏包<code>ztikz</code>，其中有着诸多的<code>gnuplot</code>应用示例.</p><h3 id="3-7-Geogebra">3.7 Geogebra</h3><p>GeoGebra这个软件想必大家都知道吧，一个很有名的数学教学软件； 它的功能太多了，网上也有很都多使用它做出来的炫酷的项目。<br>但是我们主要是使用它的导出TiKZ源代码的功能.</p><div class="note note-success">            <ol><li>尽量使用GeoGebra5吧，真心感觉GeoGebra6不太好用</li><li>导出的代码选择PGF/TiKZ别用PStrik（太底层了）</li></ol>          </div><p><strong>导出演示</strong><br><img src="/img/tikz_tools/geogebra_1.png" alt=""></p><p>导出对应的绘图源码后,在你的文件中input进来就可以用了.</p><blockquote><p>编译出bug了不要慌张，看一看它导出的源代码，可能需要GNUplot参与编译过程,只需要在命令行使用如下的命令编译即可</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">xelatex --shell escape main.tex<br></code></pre></td></tr></table></figure><h3 id="3-8-LaTeXDraw">3.8 LaTeXDraw</h3><p>同样的这也是一个开源的的软件，软件接口可以通过<a href="https://sourceforge.net/projects/latexdraw/files/latexdraw/4.0.3/">source forge地址</a>进行下载。官网上有一些使用样例，可以仿照着学一学:<br><img src="/img/tikz_tools/latexdraw_1.png" alt=""></p><p>官方网站的又一个使用演示:<br><img src="/img/tikz_tools/latexdraw_2.png" alt=""></p><p>这个软件很强大，但是我没有怎么深入用过它。我用了一段时间的TiKZiT后就转纯TiKZ了。 但是它默认的安装是无法导出pdf等格式的，需要安装一个perl脚本。 这个是官方的说明：<br><img src="/img/tikz_tools/latexdraw_3.png" alt=""></p><blockquote><p>我就不演示了，毕竟我目前也不咋用这个东西了。</p></blockquote><h3 id="3-9-Adobe-Illustrator">3.9  Adobe Illustrator</h3><p>这里介绍的这个 GeoGeBra 的使用和之前那片文章的使用方法不太一样。那篇文章是使用的GeoGeBra导出TiKZ代码的功能，这里我们主要是利用 GeoGeBra生成pdf文档的方法联合 Adobe Illustrator绘制一部分的矢量图（数学笔记之类的）。</p><blockquote><p>PS:满足你排版数学矢量图笔记的需要</p></blockquote><p>AI的各个功能都很强的，但是数学方面不太行，主要体现在如下的几点:</p><ol><li>不支持数学公式的输入</li><li>不能进行函数图像的绘制</li></ol><p>所以为了支持数学公式的输入我们需要给AI添加一个插件: <strong>latex2ai</strong>. 这个是官方项目地址</p><p>里边有各种的注意事项，好好阅读一下就行了，里边讲的还是很详细的。对应的使用教程为演示如下：</p><ol><li><strong>公式使用方法和模板的配置</strong><br><img src="/img/tikz_tools/ai_1.gif" alt=""></li></ol><p><strong>2. 联合GeoGeBra</strong><br><img src="/img/tikz_tools/ai_2.gif" alt=""></p><blockquote><p>安装提示：</p></blockquote><ol><li>AI的路径和你的.ai文件的路径中均不能含有非ASCII字符（也就是说：汉字是不允许的）</li><li>你可以自定义你的模板，里边可以包含你自己添加的宏包。但是千万别修改文档类。</li><li>GeoGeBra导出的三维图形是位图（png）的，但是你可以选择分辨率，所以也没有多大的影响。</li></ol><h3 id="3-10-LaTeXDraw">3.10 LaTeXDraw</h3><p>也不知道是什么原因，我安装了Perl等一系列的插件之后，这个软件现在还是无法导出pdf，我在官方的主页也没有找到修复的方法。</p><p>但是除了不能导出pdf外，LaTeXDraw这个软件真的是好用的，导出PSTriks代码很方便。界面的设计也是十分的简洁，看着也很舒服。</p><h3 id="3-11-PPT-PowerPoint">3.11 PPT (PowerPoint)</h3><p>你以为PPT就只能够做一下幻灯片 ？？？ NO! NO! NO! 其实很多发表的论文中的图都是使用PPT来绘制的，可以直接导出svg， 然后随便到网上找一个svg装pdf的网站即可，他们网站上还有非常多的好用的pdf工具，下面截取部分加以展示：<br><img src="/img/tikz_tools/pdftools.png" alt=""></p><blockquote><p>这里给大家推荐一个良心的网站：<a href="https://tools.pdf24.org/zh/svg-to-pdf">svg转pdf</a> 他们还有一个对应的pdf编辑的工具箱，个人感觉比绝大多数的pdf工具强。</p></blockquote><p>操作演示：</p><p><img src="/img/tikz_tools/ppt_1.gif" alt=""></p><h3 id="3-12-IPE">3.12 IPE</h3><p>强烈推荐这个软件，目前我已经入坑这个软件了。主要的优点</p><ol><li>UI 设计精良，看着很舒服</li><li>软件的功能设计合理，快捷键人性化</li><li>具有良好的拓展性，可以安装诸多的插件。</li><li>方便绘制几何图形和函数图像</li></ol><p>界面截图:<br><img src="/img/tikz_tools/ipe_1.png" alt=""></p><p>我的一些排版作品：<br><img src="/img/tikz_tools/ipe_2.png" alt=""></p><p><img src="/img/tikz_tools/ipe_3.png" alt=""></p><p><img src="/img/tikz_tools/ipe_4.png" alt=""></p><p><strong>1.怎么安装插件?</strong></p><p>进入他们的官网: <a href="https://github.com/otfried/ipelets">https://github.com/otfried/ipelets</a>; 把对应的 <strong>.lua</strong> 代码文件复制到你IPE的目录 Ipelets下，如图（我自己安装的插件）：<br><img src="/img/tikz_tools/ipe_5.png" alt=""></p><blockquote><p>PS: 部分的插件安装还是需要参考官方文档.</p></blockquote><ol><li><strong>我的IPE插件</strong><br><img src="/img/tikz_tools/ipe_6.png" alt=""></li></ol><p><strong>2. IPE学习</strong></p><ul><li>对应的视频教程: <a href="https://www.bilibili.com/video/BV14E411u7Na/?spm_id_from=333.337.search-card.all.click&amp;vd_source=96bb8d1f8bd0536bf4c7face3f42d777">https://www.bilibili.com/video/BV14E411u7Na/?spm_id_from=333.337.search-card.all.click&amp;vd_source=96bb8d1f8bd0536bf4c7face3f42d777</a></li><li>对应的实例教程: <a href="https://www.bilibili.com/video/BV1rE411N7RU/?spm_id_from=333.337.search-card.all.click">https://www.bilibili.com/video/BV1rE411N7RU/?spm_id_from=333.337.search-card.all.click</a></li></ul><p>看完了上面的两个教程之后，你会觉得这就是一个为了TiKZ而生的软件。</p><h3 id="3-13-Inkscape">3.13 Inkscape</h3><p>最近总算是有机会来接触Inkscape则会个软件了，感觉对于IPE就是碾压，IPE有的优点，Inkscape几乎都有，IPE没有的，InkScape也有。而且你还可以自己去调用它的API接口，很强。终于理解了为什么那个外国小哥要用Inkscape了.</p><p>比如Inkscape中的LaTeX公式对象可以在InkScape中编辑，而不用去修改源码，这点胜过IPE和AI，也有官方的说明：<br><img src="/img/tikz_tools/inkscape_1.png" alt=""></p><p>首先便是使得InkScape支持  了，很简单，直接无脑安装一个 TexText就可以了，下载地址：</p><p>然后稍微参考一下官方的安装教程就很安装好了。</p><p><strong>注：</strong></p><ol><li><strong>你的插件可能会报错：</strong><br><img src="/img/tikz_tools/inkscape_2.png" alt=""></li></ol><p><strong>解决办法</strong></p><p>把你的模板文件中的中文全部删掉，使用原始的模板文件，模板文件如下：</p><p><img src="/img/tikz_tools/inkscape_3.png" alt=""></p><p><img src="/img/tikz_tools/inkscape_4.png" alt=""></p><p><strong>改了之后我还产生报错</strong></p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs moonscript">Command <span class="hljs-name">C</span>:\Users\PC\scoop\apps\inkscape\current\bin\inkscape.exe <span class="hljs-comment">--pdf-poppler --pdf-page=1 --export</span><br></code></pre></td></tr></table></figure><p><strong>我报错的原因</strong></p><p>是我之前使用Scoop安装过一次InkScape，导致TexText还是去找原来路径下的InkScape。</p><p><strong>解决</strong></p><p>只需要使用windows的.bat文件把TexText重新安装一次就行了，不要使用GUI的安装方式。</p><p><strong>报错二</strong></p><p>想要在LaTeX中使用中文产生了如下的报错：</p><p><img src="/img/tikz_tools/inkscape_5.png" alt=""></p><p>需要去修改TexText的模板文件</p><p><strong>解决方法</strong></p><p>模板增加为：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">\documentclass[<span class="hljs-attribute">fontset</span>=windows]&#123;article&#125;        % 必须加上[<span class="hljs-attribute">fontset</span>=windows]，否则会报错fandol字体找不到<br>\usepackage&#123;ctex&#125;<br></code></pre></td></tr></table></figure><p><strong>InkScape的插件</strong></p><p>InkScape的插件是十分丰富的，其余的InkScape插件的安装地址</p><p>推荐安装的一个TeX代码相关的插件：<a href="https://github.com/textext/gtksourceview-for-inkscape-windows/releases/download/1.0.0/Install-GtkSourceView-3.24-Inkscape-1.0-64bit.exe">GtkSourceView【64位】</a></p><p><strong>作用（官方解释）</strong><br><img src="/img/tikz_tools/inkscape_6.png" alt=""></p><p><strong>具体的使用效果</strong><br><img src="/img/tikz_tools/inkscape_7.png" alt=""></p><p>安装好的使用截图：<br><img src="/img/tikz_tools/inkscape_8.png" alt=""></p><p>其余的功能就和AI是差不多的了，参考学习一下就行了。</p><h3 id="3-14-Dia">3.14  Dia</h3><p>他们的绘图实时渲染不怎么好，UI界面看着很难受, 但是内在很强大，支持多种格式的导出，如图（截取部分）：<br><img src="/img/tikz_tools/dia_1.png" alt=""></p><p>导出后的文件的渲染效果也很好。所以这告诉了我们一个道理，外在往往不是那么的重要, 导出的示例图形<br><img src="/img/tikz_tools/dia_2.png" alt=""></p><h3 id="3-15-TpX">3.15 TpX</h3><p>这个软件的使用体验上面的Dia差不多, 软件下载地址: <a href="https://sourceforge.net/projects/tpx/">https://sourceforge.net/projects/tpx/</a>; 界面截图：<br><img src="/img/tikz_tools/tpx_1.png" alt=""></p><h3 id="3-16-FlowframTK">3.16 FlowframTK</h3><p>软件下载：<a href="https://texblog.net/latex-archive/uncategorized/jpgfdraw/">https://texblog.net/latex-archive/uncategorized/jpgfdraw/</a>; 这个软件的原名其实是叫做Jpgfdraw，后来因为种种的原因，改成了这个名字。而且这个软件的安装方式也很奇葩。它依赖与Java环境，使用的是一个Java脚本来安装的，可以看看官方的安装教程:<br><img src="/img/tikz_tools/jpgfdraw_1.png" alt=""></p><p>安装好之后，可能你们会不知道在哪里打开这个应用，它不是我们熟知的 <strong>.exe</strong>, 也不是Linux下的 <strong>.sh</strong>, 它的启动是双击windows下的一个批处理脚本 <strong>.bat</strong> 文件，如下：<br><img src="/img/tikz_tools/jpgfdraw_2.png" alt=""></p><p>这个是它的界面,看看怎么样：<br><img src="/img/tikz_tools/jpgfdraw_3.png" alt=""></p><p>功能啥的，我稍微的体验了一下，感觉不太好。应该还有提升的空间。但是这个软件的官方文档（就在安装目录下）说明是十分的详细的，如果想要学习这个软件还是比较简单的， 这个是它帮助文档的部分目录截取:<br><img src="/img/tikz_tools/jpgfdraw_4.png" alt=""></p><blockquote><p>制作这个软件，作者还是很用心的 &gt;_&lt;</p></blockquote><h3 id="3-17-AxMath-and-AxGlyph">3.17 AxMath and AxGlyph</h3><p>这两个软件可以和MS那一套结合，类似于MathType，但是个人感觉比MathType强一百倍。当然也可以单独的使用，就i类似于其他的软件了。AxMath主要是用于数学公式的编辑，AxGlyph主要是用于矢量图的绘制。但是…但是那个Axglyph有时导出pdf会报错，具体的bug原因没有找到。如果你习惯于使用MS那一套，那么这两个东西是你的不二之选。</p><blockquote><p>PS: 这两个软件是付费的，也没有多贵，买了也算是支持国产.下面就是这两个软件的使用截图：</p></blockquote><p><strong>0. AxMath使用演示</strong><br><img src="/img/tikz_tools/axmath_1.png" alt=""></p><p>个人作品</p><p><strong>1.AxGlyph的演示</strong></p><p>我选取一部分官网的图片，自己用它做的事也不多。<br><img src="/img/tikz_tools/axmath_2.png" alt=""></p><p>个人的作品</p><p><strong>2.官网使用截图</strong><br><img src="/img/tikz_tools/axmath_3.png" alt=""></p><p><img src="/img/tikz_tools/axmath_4.png" alt=""></p><h3 id="3-18-Mermaid">3.18 Mermaid</h3><p>这是一个开源项目，下面是官方介绍：</p><blockquote><p>Mermaid is a JavaScript-based diagramming and charting tool that uses Markdown-inspired text definitions and a renderer to create and modify complex diagrams. The main purpose of Mermaid is to help documentation catch up with development.</p></blockquote><p>简要的概括就是：使用MarkDown语法来制作流程图，思维导图，表格等各种<strong>图</strong>的工具。项目地址：<a href="https://mermaid.js.org/">https://mermaid.js.org/</a>; 官方仓库也给了许多的例子：<br><img src="/img/tikz_tools/mme_1.png" alt=""></p><p><img src="/img/tikz_tools/mme_2.png" alt=""></p><p>具体的安装</p><ol><li>通过NPM安装在本地</li><li>使用在线的编辑网站</li></ol><p>但是导出的矢量图是svg格式的，因为我们往往使用的都是pdf格式，所以我写了一个把svg转化为pdf的python脚本。【也可以用网上那种 <a href="https://tools.pdf24.org/zh/svg-to-pdf">svg转pdf的网站</a>】</p><p>下面演示一下我那个脚本的使用示例截图:</p><p><strong>1. Shell脚本配置如下</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 自定义一个svg2pdf的命令</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svg2pdf</span></span> &#123;<br>    python C:\BIN\Svg2Pdf.py <span class="hljs-variable">$args</span><br>    <span class="hljs-comment"># 注意：这里的脚本路径根据你的实际路径更改</span><br>&#125;<br><span class="hljs-comment"># 注：如下的命令会报错</span><br><span class="hljs-comment"># Set-Alias -Name svg2pdf -Value &quot;python C:\BIN\Svg2Pdf.py&quot;</span><br><span class="hljs-comment"># 这样不带参数会报错：因为默认的python已经把这个脚本运行完,没有传入参数. 解析到的参数为：[&#x27;C:\\BIN\\Svg2Pdf.py&#x27;]</span><br><br><span class="hljs-comment"># Update:2023-12-05</span><br><span class="hljs-comment"># 使用inkscape作为转换工具, 可以解决更多的兼容性问题</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svg2pdf</span></span> &#123;<br>    <span class="hljs-comment"># 注意：这里的脚本路径根据你的实际路径更改</span><br>    <span class="hljs-comment"># 1. 使用python的svg库转换 --&gt; 会失真</span><br>    <span class="hljs-comment"># python C:\BIN\Svg2Pdf.py $args</span><br>    <span class="hljs-comment"># 2. 使用inkscape转换，效果更好</span><br>    inkscape <span class="hljs-literal">--export-type</span>=pdf <span class="hljs-variable">$args</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2.Python脚本如下</strong></p><blockquote><p>PS：这个脚本只能够处理比较简单的转换工作，有时候会字体丢失</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> svglib.svglib <span class="hljs-keyword">import</span> svg2rlg<br><span class="hljs-keyword">from</span> reportlab.graphics <span class="hljs-keyword">import</span> renderPDF<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 获取参数列表</span><br>    <span class="hljs-comment"># sys.argv[0]表示第一个参数，是脚本自己【即sysTest.py】</span><br><br>    args = sys.argv[<span class="hljs-number">1</span>:]<br>    <span class="hljs-comment"># 显示传入的参数</span><br>    <span class="hljs-comment"># print(sys.argv)</span><br>    input_file = args[<span class="hljs-number">0</span>]<br>    output_file = args[<span class="hljs-number">1</span>]<br><br>    <span class="hljs-comment"># 开始转换</span><br>    drawing = svg2rlg(input_file)<br>    renderPDF.drawToFile(drawing, output_file)<br></code></pre></td></tr></table></figure><h3 id="3-19-SolidWroks">3.19 SolidWroks</h3><p>一些复杂的三维模型可以使用专门的软件来制作，这个方面solidworks, UG等肯定是一个很好的选择。毕竟专业的软件干专业的事。在本文中，我们主要讨论关于solidworks导出三维模型矢量图相关，毕竟二维的矢量图是十分的方便导出的。</p><p>我们这里以SOLIDWorks为例，同时还需要用到一个东西，就是 SOLIDWORKS Composer. 这个可执行文件位置应该在这里：<br><img src="/img/tikz_tools/sw_1.png" alt=""></p><p>导出矢量图相关的操作如下,假如有一如下的3维模型<br><img src="/img/tikz_tools/sw_2.png" alt=""></p><p>首先把这个模型另存为 <code>.smg</code> 格式<br><img src="/img/tikz_tools/sw_3.png" alt=""></p><p>然后打开 SOLIDWORKS Composer, 导入刚才导出的 .smg 文件，如下<br><img src="/img/tikz_tools/sw_4.png" alt=""></p><p>然后切换到 技术图解 菜单，进行相关的导出设置，然后导出为 M416.svg, 如下<br><img src="/img/tikz_tools/sw_5.png" alt=""></p><blockquote><p>我这里就是默认导出为线稿了，你可以设置材质，光照等参数，然后导出，看个人喜好</p></blockquote><p>得到svg之后，参考之前我的文章中的一个svg转pdf的inkscape命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">inkscape --export-type=pdf M416.svg<br></code></pre></td></tr></table></figure><p>执行过程如下<br><img src="/img/tikz_tools/sw_6.png" alt=""></p><p>所以你可以得到一个pdf文件， 使用sumatrapdf打开，结果如下<br><img src="/img/tikz_tools/sw_7.png" alt=""></p><p>solidworks相关方法参考</p><p>下面是一个设置了线宽和色彩的基本导出例子<br><img src="/img/tikz_tools/sw_8.png" alt=""></p><blockquote><p>很完美的一个矢量图，perfect</p></blockquote><h3 id="3-20-sane-tikz">3.20 sane_tikz</h3><p>一个使用python生成tikz代码的仓库，地址: <a href="https://github.com/negrinho/sane_tikz">https://github.com/negrinho/sane_tikz</a>; 仓库中的一个示例代码，来看看他的书写风格</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sane_tikz.core <span class="hljs-keyword">as</span> stz<br><br>label_spacing = <span class="hljs-number">0.25</span><br>tick_label_spacing = <span class="hljs-number">0.25</span><br>tick_length = <span class="hljs-number">0.25</span><br>segment_spacing = <span class="hljs-number">0.6</span><br>length_multiplier = <span class="hljs-number">0.8</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">segment</span>(<span class="hljs-params">length, label_str, left_tick_label_str, right_tick_label_str</span>):<br>    seg = stz.line_segment([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [length, <span class="hljs-number">0</span>])<br>    left_tick = stz.centered_vertical_line_segment([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], tick_length)<br>    right_tick = stz.centered_vertical_line_segment([length, <span class="hljs-number">0</span>], tick_length)<br>    left_tick_label = stz.latex([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], left_tick_label_str)<br>    right_tick_label = stz.latex([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], right_tick_label_str)<br>    stz.place_above_and_align_to_the_center(left_tick_label, left_tick,<br>                                            tick_label_spacing)<br>    stz.place_above_and_align_to_the_center(right_tick_label, right_tick,<br>                                            tick_label_spacing)<br>    seg_label = stz.latex([-label_spacing, <span class="hljs-number">0</span>], label_str)<br>    <span class="hljs-keyword">return</span> [<br>        seg, left_tick, right_tick, left_tick_label, right_tick_label, seg_label<br>    ]<br><br><br>segs = [<br>    segment(length_multiplier * <span class="hljs-number">5</span>, <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-string">&quot;5&quot;</span>),<br>    segment(length_multiplier * <span class="hljs-number">1</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>),<br>    segment(length_multiplier * <span class="hljs-number">3</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>)<br>]<br><br>stz.distribute_vertically_with_spacing(segs[::-<span class="hljs-number">1</span>], segment_spacing)<br>stz.draw_to_tikz_standalone(segs, <span class="hljs-string">&quot;segments.tex&quot;</span>)<br></code></pre></td></tr></table></figure><p>绘制出来的图像<br><img src="/img/tikz_tools/py_1.png" alt=""></p><p>还有一些很复杂的图的例子<br><img src="/img/tikz_tools/py_2.png" alt=""></p><h3 id="3-21-quiver">3.21 quiver</h3><p>这是一个专门用于绘制交换图的应用，github仓库地址:<a href="https://github.com/varkor/quiver">https://github.com/varkor/quiver</a>; 它也有一个在线网站:<a href="https://q.uiver.app/">https://q.uiver.app/</a>; 下面是一些是官方仓库的示意图:<br><img src="/img/tikz_tools/quiver_1.png" alt=""></p><p><img src="/img/tikz_tools/quiver_2.png" alt=""></p><p><img src="/img/tikz_tools/quiver_3.png" alt=""></p><p><img src="/img/tikz_tools/quiver_4.png" alt=""></p><p>对于不喜欢tikz代码的人来说，可以一试</p><h3 id="3-22-自己开发库">3.22 自己开发库</h3><p>最近我也在开发一个跨平台的tikz绘图库，充分使用gnuplot和octave等工具，但是目前还在开发中，但是现在的大致样子如下<br><img src="/img/tikz_tools/self_1.png" alt=""></p><p><img src="/img/tikz_tools/self_2.png" alt=""></p><p>最后一个图的代码长这样</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\begin</span>&#123;tikzpicture&#125;[font=<span class="hljs-keyword">\small</span>, &gt;=Latex]<br>    <span class="hljs-comment">% draw grid(coordinates)</span><br>    <span class="hljs-keyword">\ShowGrid</span>&#123;(-8, -8); (8, 8)&#125;<br>    <span class="hljs-comment">% \fill[black] (0, 0)node[below right]&#123;$O$=(0, 0)&#125; circle (1pt);</span><br>    <span class="hljs-keyword">\Show</span>&#123;(0, 0)&#125;[<span class="hljs-built_in">$</span>O=(0, 0)<span class="hljs-built_in">$</span>][below right=.5em and 1em]<br>    <span class="hljs-keyword">\ShowAxis</span> &#123;(0, -8); (0, 8)&#125;<br>    <span class="hljs-keyword">\ShowAxis</span> &#123;(-8, 0); (8, 0)&#125;<br><br>    <span class="hljs-comment">% Test unit</span><br>    <span class="hljs-keyword">\fill</span>[red] (-4cm, 4em)node[left]&#123;<span class="hljs-built_in">$</span>A<span class="hljs-built_in">_</span>1<span class="hljs-built_in">$</span>=(-4cm, 4em)&#125; circle (1pt);<br>    <span class="hljs-keyword">\fill</span>[blue] (-4cm, 4cm)node[left]&#123;<span class="hljs-built_in">$</span>A<span class="hljs-built_in">_</span>2<span class="hljs-built_in">$</span>=(-4cm, 4cm)&#125; circle (1pt);<br><br>    <span class="hljs-comment">% draw function</span><br>    <span class="hljs-keyword">\draw</span>[color=orange, domain=-3:3] plot (<span class="hljs-keyword">\x</span>, 2*<span class="hljs-keyword">\x</span>+1);<br>    <span class="hljs-keyword">\draw</span>[color=cyan, domain=-1:7.6] plot (<span class="hljs-keyword">\x</span>, -.9*<span class="hljs-keyword">\x</span>+7);<br><br>    <span class="hljs-comment">% draw an ellipse</span><br>    <span class="hljs-comment">% 1.use self define cmd</span><br>    <span class="hljs-keyword">\NormalPlotPrecise</span>&#123;1500&#125;<br>    <span class="hljs-keyword">\NormalPlot</span>[][-7:7.8]&#123;3*sin(1/x)&#125;<br>    <span class="hljs-keyword">\NormalPlot</span>[green, name path=exp][-1.5:7.5] &#123;x*exp(-x)&#125;<br>    <span class="hljs-keyword">\ParamPlot</span>[red, name path=ellipse][0:2*pi]&#123;7*sin(t), 4*cos(t)&#125;<br><br>    <span class="hljs-comment">% fill(needs \usetikzlibrary&#123;patterns&#125;)</span><br>    <span class="hljs-keyword">\begin</span>&#123;scope&#125;<br>        <span class="hljs-keyword">\clip</span> (2, 0) rectangle (8, 1); <br>        <span class="hljs-keyword">\fill</span>[pattern=north east lines] plot file&#123;./2d<span class="hljs-built_in">_</span>plot/gnuplot<span class="hljs-built_in">_</span>output<span class="hljs-built_in">_</span>data/data<span class="hljs-built_in">_</span>gen<span class="hljs-built_in">_</span>2.table&#125;;<br>    <span class="hljs-keyword">\end</span>&#123;scope&#125;<br>    <span class="hljs-keyword">\begin</span>&#123;scope&#125;<br>        <span class="hljs-keyword">\clip</span> (-6, 0) rectangle (-2, -2);<br>        <span class="hljs-keyword">\NormalPlot</span>[][-6:-1]&#123;3*sin(1/x)&#125;<br>        <span class="hljs-keyword">\fill</span>[pattern=crosshatch, pattern color=orange] plot file&#123;./2d<span class="hljs-built_in">_</span>plot/gnuplot<span class="hljs-built_in">_</span>output<span class="hljs-built_in">_</span>data/data<span class="hljs-built_in">_</span>gen<span class="hljs-built_in">_</span>4.table&#125; -- (-2, 0) -- (-6, 0);<br>    <span class="hljs-keyword">\end</span>&#123;scope&#125;<br><br>    <span class="hljs-comment">% find intersection</span><br>    <span class="hljs-keyword">\ShowIntersecions</span>&#123;exp; ellipse&#125;&#123;2&#125;<br>    <span class="hljs-comment">% 或者是如下的语句</span><br>    <span class="hljs-comment">% \path[name intersections=&#123;of=exp and ellipse&#125;];</span><br>    <span class="hljs-comment">% \ShowPoint[color=red] &#123;(intersection-1); (intersection-2)&#125;</span><br><br>    <span class="hljs-comment">% draw intersection dot </span><br>    <span class="hljs-keyword">\ShowPoint</span> &#123;(2.068, 5.137); (4.242, 3.181); (6.843, 0.840); (7.324, 0.408)&#125;<br>        [<span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>1<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>2<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>3<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>4<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>5<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>6<span class="hljs-built_in">$</span>; <span class="hljs-built_in">$</span>p<span class="hljs-built_in">_</span>7<span class="hljs-built_in">$</span>][above]<br>    <span class="hljs-keyword">\ShowPoint</span>[radius=3pt, color=blue, opacity=.5, type=rectangle] &#123;(-2.380, -3.761)&#125;<br>    <span class="hljs-keyword">\ShowPoint</span>[color=orange, opacity=1, radius=2pt] &#123;(1.456, 3.912)&#125;<br><span class="hljs-keyword">\end</span>&#123;tikzpicture&#125;<br></code></pre></td></tr></table></figure><p>而且还有cache机制，绘制复杂的函数也很快。但是还有部分功能还有没有整合好，但是我相信，要开发出来了，快了</p><h2 id="4-结语">4. 结语</h2><p>这次推荐的软件和绘制语言，就是我最近的折腾内容了，其实挺无聊的。总之，内容为王，排版只是一些锦上添花的内容, 更多内容可以参见如下讨论</p><h2 id="5-致谢">5. 致谢</h2><ul><li><strong>感谢优秀开源的的TeX排版系统 ！！！</strong></li><li><strong>感谢伟大的开源工作者 ！！！</strong></li><li><strong>正是他们的无私付出，才使得很多的优秀软件能够被我们使用 ！！！</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTeX</tag>
      
      <tag>TikZ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TeXLive on Android</title>
    <link href="/2024/03/26/texlive_android/"/>
    <url>/2024/03/26/texlive_android/</url>
    
    <content type="html"><![CDATA[<h2 id="更新：2023-09-03">更新：2023-09-03</h2><p>对文章进行重构</p><h2 id="更新：2022-2-10">更新：2022-2-10</h2><p>补充一个外接键盘输入问题，推荐一个版半本地化的verbtex软件</p><h2 id="更新：2022-1-5">更新：2022-1-5</h2><ol><li>外接键盘无法切换中文输入法的解决</li><li>添加了另外一种不需要搭建TeXLive环境的半本地LaTeX写作方案</li></ol><h2 id="1-序言">1. 序言</h2><p>这天突发奇想，想要在Android上进行TexLive的安装，想着Android和Linux几乎同源，既然可以在Linux上安装，为什么不能够在手机上使用呢？我觉得在平板上安装TexLive也应该类似，但是没有试过。</p><p>这里只能够说<a href="https://baike.baidu.com/item/%E5%94%90%E7%BA%B3%E5%BE%B7%C2%B7%E5%85%8B%E5%8A%AA%E7%89%B9/1436781">Donald Ervin Knuth</a>太NB（实在是想不到什么好词）了，使得TeX具有这么良好的移植性。向他老人家致敬，也祝愿他老人家身体健康，也希望他老人家早日完成巨著《计算机程序设计艺术》。</p><p>这里的在手机上使用LaTeX不是用那些所谓的在线LaTeX编辑网站，而是在手机上安装TexLive发行版,在自己得手机上实现编译。</p><p>这是一段表示警告的文字</p><div class="note note-danger">            <p>我个人不在手机上进行LaTeX的文件编辑于编译，因为在电脑上配合vscode编写文档的体验要完胜手机</p>          </div><p>写本文的目的也是处于无聊，万一有时候你能够用得上，那么我写这篇文章也就值了。常见的LaTeX编辑网站主要就是如下的吧？欢迎补充在评论区</p><ul><li><a href="https://www.overleaf.com/">Overleaf</a></li><li><a href="https://www.slager.link/#/home">slager</a></li><li><a href="https://texpage.com/">TexPage</a></li><li><a href="https://www.mathcha.io/editor">mathcha</a></li></ul><p>上边的网站大概涵括了大多数的LaTeX在线网站吧。对了，还有一个<a href="https://space.bilibili.com/223146252?spm_id_from=333.337.0.0">妈咪叔</a>开发的网站，但是用于写作应该是有一点的不合适。</p><p>但是为了足够的宣传他的工作，我专门用一个卡片来强调。他完全自掏腰包的搭建了这个网站，还提供了免费的Mathpix的API接口给我们用（每天30次，够用了）。<strong>大家不得请他一杯咖啡？？</strong></p><h2 id="2-手机安装TexLive">2. 手机安装TexLive</h2><h3 id="2-1-准备">2.1 准备</h3><p>首先你得安装一个手机上得终端模拟器（应该叫Shell吧，管它了），以下统称终端。这个终端得名字就叫做Termux，Termux的详细使用见<a href="https://www.sqlsec.com/2018/05/termux.html">教程</a>这个软件可以在网上找，但是可能版本比较的陈旧。我是从Google应用商店下载的（需要科学上网）。当然也可以从这个知乎用户分享的链接进行下载：</p><p>的分享连接来下载.本篇文章也是参考<a href="https://www.zhihu.com/people/zhu-meng-99-23">芒果不盲</a>这篇文章来做的，下边是他的相关博客</p><blockquote><p>相关引用文章侵删</p></blockquote><p>百度网盘链接：</p><p>提取码：1234</p><p>安装Termux可以完全照着它的来：</p><p><strong>1. 先换源</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">&#x27;s@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27;</span> <span class="hljs-variable">$PREFIX</span>/etc/apt/sources<span class="hljs-selector-class">.list</span><br>sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">&#x27;s@^\(deb.*games stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@&#x27;</span> <span class="hljs-variable">$PREFIX</span>/etc/apt/sources<span class="hljs-selector-class">.list</span>.d/game<span class="hljs-selector-class">.list</span><br>sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">&#x27;s@^\(deb.*science stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@&#x27;</span> <span class="hljs-variable">$PREFIX</span>/etc/apt/sources<span class="hljs-selector-class">.list</span>.d/science<span class="hljs-selector-class">.list</span><br>pkg update<br></code></pre></td></tr></table></figure><p>复制到Termux的界面中<strong>依次</strong>执行（一句一句的复制，然后执行）,换源过程中已知回车就行，使用它的默认设定</p><p><strong>2. 基础工具的安装和美化Termux（可选）</strong></p><p>参见上边的<a href="https://zhuanlan.zhihu.com/p/439870373">那篇文章</a>（不想过多的抄袭）,本文的主要目的是解决texlive-full无法安装的问题。基本准备结束，<strong>重启终端</strong></p><h3 id="2-2-安装TexLive">2.2 安装TexLive</h3><p>其实参考上边的那篇文章无法安装的原因的本质是我们的源里面没有TexLive-full这个包了，所以你只会得到</p><p>报错：<strong>E：unable to locate package texlive-full。<strong>如图：我用了一个不存在的包</strong>abcdefg</strong>来检验。</p><p><img src="/img/texlive_android/01.jpeg" alt=""></p><p>那么他又变成什么名字了呢？其实你可以搜索一下texlive关键词就行了。在你手机里边的Termux输入如下的语句</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pkg search texlive<br></code></pre></td></tr></table></figure><p>然后你就会得到如下的结果</p><p><img src="/img/texlive_android/02.jpeg" alt=""></p><p>所以我们可以用<strong>texlive-installe</strong>r来安装。下载<strong>texlive-installe</strong>r，使用语句</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pkg <span class="hljs-keyword">install</span> texlive-installer<br></code></pre></td></tr></table></figure><p>一直回车就行，然后运行命令</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">termux-<span class="hljs-keyword">install</span>-tl<br></code></pre></td></tr></table></figure><p>你就会进入一个界面</p><p><img src="/img/texlive_android/03.jpeg" alt=""></p><p><strong>安装选项（可选）</strong></p><p>你可以输入S（大写的），选择安装的包的多少，默认full-scheme（全部的宏包）推荐新手使用默认选项，不要做任何的修改。同时：上边也有很多的安装时的可选参数，可以自行研究。</p><p><strong>开始安装</strong></p><p>接下来直接输入I（大写的）就可以开始安装了，安装过程可能比较漫长，我安装了4200多个宏包，花了两个多小时，具体的情况因人而异。手机安装时的大致模样</p><p><img src="/img/texlive_android/04.jpg" alt=""></p><p>安装完成后的截图</p><p><img src="/img/texlive_android/05.jpeg" alt=""></p><p>,但是此时你输入xelatex可能无法识别，需要你执行一下如下的语句（稍微有点Linux基础的，应该都懂吧）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source /data/data/com.termux/files/usr/etc/profile.d/texlive.sh<br></code></pre></td></tr></table></figure><p><strong>检验安装是否成功</strong></p><p>依次输入如下的语句，检查各个引擎和宏包管理软件tlmgr是否安装好了。下边有运行结果截图：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">xelatex -v              % 最常用，绝对不能出问题<br>latex -v<br>paflatex -v<br>tlmgr --version         % 宏包管理软件,也很重要<br></code></pre></td></tr></table></figure><p><img src="/img/texlive_android/06.jpeg" alt=""></p><h2 id="3-使用TexLive">3.使用TexLive</h2><p>这里需要你有一点的vim或者是nano的基础（不会也行），原则上你的手机上的任何的文本编辑器都能够写处.tex文档。只不过使用vim就在终端里面，方便一些。此处测试文档编辑基本的vim操作：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">:wq                            % 保存并退出（normal模式下）<br>:q!                            % 强制退出（normal模式下）<br>i                              % 进入编辑模式<br>Esc(或Ctrl + c)                % 退出编辑模式<br></code></pre></td></tr></table></figure><p><strong>编写测试文件</strong></p><p>输入命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim main.tex<br></code></pre></td></tr></table></figure><p>输入如下的内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>&#123;article&#125;<br><br><span class="hljs-keyword">\usepackage</span>&#123;ctex&#125;<br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><br>Test Basic english<span class="hljs-keyword">\\</span><br>Hello&#123;&#125; <span class="hljs-keyword">\LaTeX</span><br><br><br>测试中文<span class="hljs-keyword">\\</span><br>这是一句中文<br>Hello&#123;&#125; <span class="hljs-keyword">\LaTeX</span><br><br><br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p><img src="/img/texlive_android/07.jpeg" alt=""></p><p><strong>编译文件</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">xelatex <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.tex</span><br></code></pre></td></tr></table></figure><p><strong>查看编译输出（可选）</strong></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ls</span> -<span class="hljs-keyword">al</span><br></code></pre></td></tr></table></figure><p>上述流程演示截图</p><p><img src="/img/texlive_android/08.jpeg" alt=""></p><p><strong>查看编译输出的pdf文件</strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">termux-open main.pdf<br></code></pre></td></tr></table></figure><p><img src="/img/texlive_android/09.jpeg" alt=""></p><h2 id="4-在手机上编辑LaTeX的一些拓展选项">4.在手机上编辑LaTeX的一些拓展选项</h2><h3 id="4-1-键盘输入">4.1 键盘输入</h3><p>就在手机上打字是很痛苦的，所以可以考虑外接一个键盘进行输入。</p><h3 id="4-2-投屏操作">4.2 投屏操作</h3><p>就在这么小的手机上写代码，体验是极为糟糕的。所以可以选择把手机屏幕投射到电脑上去，在结合外接的键盘进行编写。（不要问【喷】我为什么不在电脑用原生的TexLive和Vscode，而非得投屏，请仔细看我的前言）</p><p><strong>1.电脑投屏到手机</strong></p><p>使用windows自带的投屏进行操作：这里讲解安装这个应用：无线显示</p><p><img src="/img/texlive_android/10.png" alt=""></p><p>具体的操作见</p><p><strong>2.手机投屏到电脑</strong></p><p>手机电脑在同一局域网内部（连接同一个WIFI），具体操作</p><p><img src="/img/texlive_android/11.jpeg" alt=""></p><p><img src="/img/texlive_android/12.jpeg" alt=""></p><p><strong>3.使用软件Xdisplay实现投屏</strong></p><p><strong>同时在手机和电脑上下载Xdisplay软件。</strong></p><p>**电脑端：**直接在<a href="https://www.splashtop.cn/cn/">网站</a>上下载就行了</p><p><img src="/img/texlive_android/13.png" alt=""></p><p>**手机端：**我是在Google商店（需要科学上网）下载的。你们可以网站下载Android版</p><p><img src="/img/texlive_android/14.jpeg" alt=""></p><p>**电脑端和手机端的设置：**电脑打开软件即可，电脑手机用USB线连接。手机需要打开USB调试（4击版本号进入开发者模式，然后就会出现了）， 部分手机连接时需要选择【<strong>传输文件和照片】。</strong></p><p><img src="/img/texlive_android/15.jpeg" alt=""></p><h2 id="5-结语">5.结语</h2><p>Have Fun， Happy LaTeXing !!!</p><h2 id="6-外接键盘无法切换中文输入法">6 外接键盘无法切换中文输入法</h2><p>直接把toolbar向左边拖动，就可以了。截图如下：</p><p><img src="/img/texlive_android/16.jpeg" alt=""></p><p>只不过此时命令的跳转不好操作</p><h2 id="7-半本地化的VerbTeX">7 半本地化的VerbTeX</h2><p>只需要在google商店下载一个免费的VerbTeX即可：我才它的工作机制应该是调用的在线引擎，编译生成PDF后进行下载到手机端查看。然后再说一说它支持的功能吧：</p><ol><li>语法高亮</li><li>引用本地图片</li><li>LaTeX 语法</li><li>快捷输入</li><li>大纲查看</li></ol><p><strong>不足之处</strong></p><p>目前好像无法更改其他的编译的引擎，所以只能够使用的有pdflatex和xelatex，但是对于一个手机端的LaTeX编辑器，他已经很好了。下面是演示效果：</p><p><img src="/img/texlive_android/17.jpg" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>TeXLive</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gnuplot介绍</title>
    <link href="/2024/03/26/gnuplot_intro/"/>
    <url>/2024/03/26/gnuplot_intro/</url>
    
    <content type="html"><![CDATA[<div class="note note-danger">            <p><strong>2023-07-22 更正</strong><br>感谢 <a href="https://www.zhihu.com/people/ddf187d555a89784cf7c0a2e67493996">@唐慕</a> 指正：gnuplot和GNU组织没有任何的关系,仅仅只是当初开发者由于名字冲突才取的一个折中的办法.相关详细解答见如下链接:<a href="www.gnuplot.info/faq/faq.html#x1-70001.2">gnuplot FAQ</a>所以之后也别在把gnuplot拼写为Gnuplot了,再次感谢评论区小伙伴提醒,特此更正.</p>          </div><h2 id="0-前言">0.前言</h2><p>gnuplot作为一个免费开源软件，很多人肯定都没有听说过，取而代之的是Python的matplotlib，以及Matlab，Maple，Mathematica等著名的商业软件。我曾经也忽视了这个家伙，后面才发现这个东西真的就是短<strong>小精悍.</strong> 我之前用它处理一个csv风格的数据，matplotlib要等个10s左右才出结果，但是我使用gnuplot绘制的化，秒出。gnuplot的输出结果如下</p><p><img src="/img/gnuplot_intro/01.png" alt=""></p><p>我不是到这里来 引战的，只是说一下这个gnuplot的优势，也许某一天你能够用得到，那么我的这一篇文章也就多了一份的意义。</p><p>我用着一个软件的一个重要原因就是它的3维图像等能够输出矢量图（<strong>下面的所有演示图形均为矢量图</strong>），当然matlab也可以（太重了），但是mathematica我是折腾了半天也不行，不理解 。但是后面我会介绍其它方便导出3维矢量图的软件，比如Solidworks，UG等，当然，这就是后话了。。。</p><p>如果你想让gnuplot导出的图片更加完美的话，可以使用它的epslatex终端，然后使用LaTeX编译它的输出文件，这样你就可以随意定制样式了。它支持的终端种类是十分丰富的，在我的电脑上就有如下的几十个可用类型终端：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span> <span class="hljs-keyword">set</span> terminal<br>Available <span class="hljs-comment">terminal types:</span><br>       cairolatex  <span class="hljs-comment">LaTeX picture environment using graphicx package and Cairo backend</span><br>           canvas  <span class="hljs-comment">HTML Canvas object</span><br>              cgm  <span class="hljs-comment">Computer Graphics Metafile</span><br>          context  <span class="hljs-comment">ConTeXt with MetaFun (for PDF documents)</span><br>          domterm  <span class="hljs-comment">DomTerm terminal emulator with embedded SVG</span><br>             dumb  <span class="hljs-comment">ascii art for anything that prints text</span><br>              dxf  <span class="hljs-comment">dxf-file for AutoCad (default size 120x80)</span><br>              emf  <span class="hljs-comment">Enhanced Metafile format</span><br>         epscairo  <span class="hljs-comment">eps terminal based on cairo</span><br>         epslatex  <span class="hljs-comment">LaTeX picture environment using graphicx package</span><br>              fig  <span class="hljs-comment">FIG graphics language V3.2 for XFIG graphics editor</span><br>              gif  <span class="hljs-comment">GIF images using libgd and TrueType fonts</span><br>             hpgl  <span class="hljs-comment">HP7475 and relatives [number of pens] [eject]</span><br>             jpeg  <span class="hljs-comment">JPEG images using libgd and TrueType fonts</span><br>              lua  <span class="hljs-comment">Lua generic terminal driver</span><br>               mf  <span class="hljs-comment">Metafont plotting standard</span><br>               mp  <span class="hljs-comment">MetaPost plotting standard</span><br>             pcl5  <span class="hljs-comment">PCL5e</span>/PCL5c printers <span class="hljs-keyword">using</span> HP-GL/<span class="hljs-comment">2</span><br>         pdfcairo  <span class="hljs-comment">pdf terminal based on cairo</span><br>           pict2e  <span class="hljs-comment">LaTeX2e picture environment</span><br>              png  <span class="hljs-comment">PNG images using libgd and TrueType fonts</span><br>         pngcairo  <span class="hljs-comment">png terminal based on cairo</span><br>       postscript  <span class="hljs-comment">PostScript graphics, including EPSF embedded files (*.eps)</span><br>          pslatex  <span class="hljs-comment">LaTeX picture environment with PostScript \specials</span><br>            pstex  <span class="hljs-comment">plain TeX with PostScript \specials</span><br>         pstricks  <span class="hljs-comment">LaTeX picture environment with PSTricks macros</span><br>               qt  <span class="hljs-comment">Qt cross-platform interactive terminal</span><br>          sixelgd  <span class="hljs-comment">sixel using libgd and TrueType fonts</span><br>              svg  <span class="hljs-comment">W3C Scalable Vector Graphics</span><br>          texdraw  <span class="hljs-comment">LaTeX texdraw environment</span><br>             tikz  <span class="hljs-comment">TeX TikZ graphics macros via the lua script driver</span><br>         tkcanvas  <span class="hljs-comment">Tk canvas widget</span><br>          unknown  <span class="hljs-comment">Unknown terminal type - not a plotting device</span><br>          windows  <span class="hljs-comment">Microsoft Windows</span><br>              wxt  <span class="hljs-comment">wxWidgets cross-platform interactive terminal</span><br></code></pre></td></tr></table></figure><p>当然如果你的美术功底够的话，直接使用Adobe Illustrator, CoreDraw等，你实在是厉害的话可以全程使用tikz，众所周知tikz除了不会生孩子，啥都会。</p><p>本文并不是gnuplot入门内容，想要入门的选手可以参看如下的几个网站：</p><p>当你学会了基本的操作之后就可以开始学一些tricks了，如果你不满足当下的水平的话，推荐如下的网站：</p><blockquote><p>大部分都是从这里那里抄来的，侵删</p></blockquote><blockquote><p>这个应该够你学了吧</p></blockquote><p>我的主要参考书籍如下（700多页，很实用）：<br><img src="/img/gnuplot_intro/02.png" alt=""></p><p>这本书后面有一个index of plots，里里面列举了这本书所绘制的全部图像</p><p><img src="/img/gnuplot_intro/03.png" alt=""><br><img src="/img/gnuplot_intro/04.png" alt=""></p><p><img src="/img/gnuplot_intro/05.png" alt=""></p><p><img src="/img/gnuplot_intro/06.png" alt=""></p><p><img src="/img/gnuplot_intro/07.png" alt=""></p><p><img src="/img/gnuplot_intro/08.png" alt=""></p><p><img src="/img/gnuplot_intro/08.png" alt=""></p><p><img src="/img/gnuplot_intro/10.png" alt=""></p><p><img src="/img/gnuplot_intro/11.png" alt=""></p><p><img src="/img/gnuplot_intro/12.png" alt=""></p><p><img src="/img/gnuplot_intro/13.png" alt=""></p><p><img src="/img/gnuplot_intro/14.png" alt=""></p><p><img src="/img/gnuplot_intro/15.png" alt=""></p><p><img src="/img/gnuplot_intro/16.png" alt=""></p><p><img src="/img/gnuplot_intro/17.png" alt=""></p><p><img src="/img/gnuplot_intro/18.png" alt=""></p><p><img src="/img/gnuplot_intro/18.png" alt=""></p><blockquote><p>当然部分人可能会推荐马欢的gnuplot教程，但是我觉得这个教程很不全面。我还是把链接给出来吧</p></blockquote><h2 id="1-说明">1. 说明</h2><h3 id="1-1-环境说明">1.1 环境说明</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. powershell</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">Major  Minor  Patch  PreReleaseLabel BuildLabel -----  -----  -----  --------------- ---------- 7      3      6</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. windows</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">Windows 11 家庭中文版 22H2</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. gnuplot 版本</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">Version 5.4 patchlevel 7    last modified 2023-05-16</span><br></code></pre></td></tr></table></figure><h3 id="1-2-文件说明">1.2 文件说明</h3><p>最近使用gnuplot，添加了几个常用的gnuplot绘图的powershell命令，如下 :</p><ul><li>二维函数绘制</li><li>三维显示函数绘制</li><li>参数方程绘制</li></ul><p>我设置了绝大部分的绘图设置，这些命令的默认效果基本能够符合大众的审美。想要修改默认效果的，直接去修改</p><p>默认的源文件即可。<strong>gayhub</strong>仓库地址,其中的文件说明如下:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">├── Gnuplot <br>│   ├── Gplot_2d.gp  **二维绘图脚本** <br>│   ├── Gplot_3d.gp  **三维绘图脚本** <br>│   └── [GPplot.gp](http://gpplot.gp/) **参数绘图简本** <br>├──  <br>└── Microsoft.PowerShell_profile.ps1powershell 的 **$Profile** 文件<br></code></pre></td></tr></table></figure><p>我的这几个绘图脚本放到了如下路径:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">C:/BIN/<br></code></pre></td></tr></table></figure><p>想要体验的，如果你比较懒，可以直接新建这个文件夹，把这3个脚本仍里面就行了。想要自己调整的，可以把对应的文件放到你们喜欢的任意位置，但是此时你们就需要修改powershell的**$profile**文件中的对应的这几个绘图脚本的路径。下面以Gplot_3d.gp为例:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment"># 3维函数绘图命令</span><br><span class="hljs-comment"># 1. 首先修改文件</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gplot_3d_change_Text</span> </span>&#123;<br>    <span class="hljs-title function_ invoke__">param</span> (<br>        [<span class="hljs-keyword">string</span>]<span class="hljs-variable">$f</span><br>    )<br>    sed -i <span class="hljs-string">&quot;34s|f(x, y) = .*|f(x, y) = <span class="hljs-subst">$f</span>|&quot;</span> C:/BIN/Gplot_3d.gp  <span class="hljs-comment"># 修改成你的脚本的实际位置</span><br>&#125;<br><span class="hljs-comment"># 2.然后调用gnuplot进行绘制</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Gplot_3d</span></span>&#123;<br>    Gplot_3d_change_Text -f <span class="hljs-variable">$args</span> <br>    gnuplot C:/BIN/Gplot_3d.gp               <span class="hljs-comment"># 修改成你的脚本的实际位置</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;The 3d Function Graphic(pdf) has Successfully Created,`r`nwhich name is &#x27;Function_output_3d.pdf&#x27; as default.`r`nIt Will be automatic opened by Your default pdf_reader ...&quot;</span><br>    pdf Function_output_3d.pdf<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-使用演示">2.使用演示</h2><div class="note note-danger">            <ol><li>以下的命令均为在powershell中执行</li><li><strong>Gplot_2d</strong> 命令和 <strong>GPplot</strong> 有两个参数 -f(unction) 函数, -r(ange) y的范围或者是z的范围</li></ol>          </div><h3 id="2-1-三维参数方程绘图示例1">2.1 三维参数方程绘图示例1</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">GPplot -f &#x27;1*cos(u)*cos(v), 3*cos(u)*sin(v), 2*sin(u)&#x27;<br></code></pre></td></tr></table></figure><p><img src="/img/gnuplot_intro/19.png" alt=""></p><p>添加z轴范围:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">GPplot -f &#x27;1*cos(u)*cos(v), 3*cos(u)*sin(v), 2*sin(u)&#x27; -r &#x27;-1:1.5&#x27;<br></code></pre></td></tr></table></figure><p><img src="/img/gnuplot_intro/20.png" alt=""></p><h3 id="2-2-三维参数方程绘图示例2">2.2 三维参数方程绘图示例2</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">GPplot -f &#x27;<span class="hljs-number">1</span>/(<span class="hljs-number">1</span>/<span class="hljs-built_in">cos</span>(v)), <span class="hljs-number">3</span>*<span class="hljs-built_in">tan</span>(v)*<span class="hljs-built_in">cos</span>(u), <span class="hljs-number">1</span>*<span class="hljs-built_in">tan</span>(v)*<span class="hljs-built_in">sin</span>(u)&#x27;<br></code></pre></td></tr></table></figure><p><img src="https://picx.zhimg.com/80/v2-79d0a4431509a906dfc39dcf940197bd_720w.png?source=d16d100b" alt="img"></p><h3 id="2-3-其他的一些绘图示例">2.3 其他的一些绘图示例</h3><p><img src="https://picx.zhimg.com/80/v2-88700bb9b8b0e9c43b20bc9f782aa647_720w.png?source=d16d100b" alt="img"></p><p><img src="https://picx.zhimg.com/80/v2-0ddcd48cce59ae965a69399012567881_720w.png?source=d16d100b" alt="img"></p><p><img src="https://pic1.zhimg.com/80/v2-8d1c69299b2623d87876b0409418e4a0_720w.png?source=d16d100b" alt="img"></p><p><img src="https://pica.zhimg.com/80/v2-6d01c64010103348a9706d7e6cb3322b_720w.png?source=d16d100b" alt="img"></p><h3 id="2-4-后续进一步处理">2.4 后续进一步处理</h3><p>尽管默认输出的图像基本能够满足，但是很多时候是需要精修的，这个使用就可以使用inkscape了，装一个支持TeX的插件，想咋修图就咋修。下面是一个inkscape编辑示例：</p><blockquote><p>其中的哪个梯度的示意图就是使用inkscape加的</p></blockquote><p><img src="https://pica.zhimg.com/80/v2-bbeaa9a9cbc1e89824943cdaa773e84c_720w.png?source=d16d100b" alt="img"></p><h3 id="2-5-三维显示函数绘制">2.5 三维显示函数绘制</h3><p>这个就比较简单了，看看下面的例子你几乎就会了。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Gplot_3d</span> &#x27;x**<span class="hljs-number">2</span>-y**<span class="hljs-number">2</span>/<span class="hljs-number">3</span>&#x27;<br></code></pre></td></tr></table></figure><p><img src="https://picx.zhimg.com/80/v2-fc5bccdd3b8e71b2a0d0321124db79e9_720w.png?source=d16d100b" alt="img"></p><h3 id="2-6-其他显式函数的例子">2.6 其他显式函数的例子</h3><p><img src="https://pic1.zhimg.com/80/v2-e133663d96126409a33abc732ddcaada_720w.png?source=d16d100b" alt="img"></p><p><img src="https://pica.zhimg.com/80/v2-dd28a8a55af310e0f012a50ab5ed809d_720w.png?source=d16d100b" alt="img"></p><p><img src="https://picx.zhimg.com/80/v2-c6f74ad716ee4e6d9253c52939b66252_720w.png?source=d16d100b" alt="img"></p><h3 id="2-7-二维函数演示">2.7 二维函数演示</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Gplot_2d</span> &#x27;<span class="hljs-number">2</span>-exp(<span class="hljs-number">1</span>/x)&#x27; -r <br></code></pre></td></tr></table></figure><p>运行之后他会弹出一个gnuplot的窗口，如下：</p><p><img src="https://picx.zhimg.com/80/v2-388df0e5a3dbf00b97f9603e332d6295_720w.png?source=d16d100b" alt="img"></p><p>然后你可以修改以下再导出，结果如下</p><p><img src="https://pic1.zhimg.com/80/v2-4e3070e072f0240c2c25027b7b4a215c_720w.png?source=d16d100b" alt="img"></p><p>其他的示例</p><p><img src="https://picx.zhimg.com/80/v2-735dec7324aecb26c5433701d30c0434_720w.png?source=d16d100b" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>应用程序</tag>
      
      <tag>LaTeX</tag>
      
      <tag>TikZ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C/CPP 中文乱码</title>
    <link href="/2024/03/26/c_cpp_lang_config/"/>
    <url>/2024/03/26/c_cpp_lang_config/</url>
    
    <content type="html"><![CDATA[<h2 id="1-前言">1. 前言</h2><p>什么默认的gcc/g++编译出来中文乱码，或者是使用集成开发环境Visual Studio, Clion, Vscode乱码，有叫你改注册表的，有叫你引用库的，有叫你修改文件编码的，… 我也折腾了很久，发现了如下的三个方法:</p><ol><li>更改系统语言/区域设置</li><li>临时更改终端的Active code page</li><li>注册表更改终端的Active code page</li></ol><blockquote><p>本文没有讲到所谓的文件保存编码问题，若以下方法不管用，请参见其余网络内容，见谅</p></blockquote><h2 id="2-方法一">2. 方法一</h2><p><img src="/img/c_cpp_lang_config/01.png" alt=""></p><p><img src="/img/c_cpp_lang_config/02.png" alt=""></p><p><img src="/img/c_cpp_lang_config/03.png" alt=""></p><p>然后重启电脑，一切正常。</p><h2 id="3-修改注册表">3. 修改注册表</h2><p>这个可以看作上面操作的一个偏方，这第一种方法的本质相同，都是修改部分终端的 Active code page为65001，但是第一种方法会把你的所有终端的 Active code page设为65001，所以想要使用英文系统的可以使用第二个方法。</p><p><img src="/img/c_cpp_lang_config/04.png" alt=""></p><blockquote><ol><li>一般情况下这个CodePage值得你自己添加 2. 对应的想要修改cmd的对应值，需要新建一个</li></ol></blockquote><h2 id="4-临时设置">4. 临时设置</h2><p>第三种方法就是引入对应的库windows.h, stdlib.h然后执行，然后执行如下命令即可:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">system(<span class="hljs-string">&quot;chcp 65001&quot;</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>然后你的VS或者是Clion就可以正常printf输出中文了，不用去修改什么注册表和系统语言设置。</p><h2 id="5-检验方法">5. 检验方法</h2><p>只需要在下面的终端中输入对应的命令</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">chcp</span><br></code></pre></td></tr></table></figure><p>即可查看，我自己修改后的各终端结果：</p><p><img src="/img/c_cpp_lang_config/05.png" alt=""></p><p><img src="/img/c_cpp_lang_config/06.png" alt=""></p><p><img src="/img/c_cpp_lang_config/07.png" alt=""></p><p>此时的VS和Clion的输出窗口也都正常了</p><p><img src="/img/c_cpp_lang_config/08.png" alt="Visual Studio"></p><p><img src="/img/c_cpp_lang_config/09.png" alt="Clion"></p>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C/CPP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Math book Series/Pulish House</title>
    <link href="/2024/03/26/math_book_series/"/>
    <url>/2024/03/26/math_book_series/</url>
    
    <content type="html"><![CDATA[<p>A collection of mathematics books prepared for students majoring in mathematics. Consist of Most Publishing house and Famous book series you ever know. Please choose a book that suits you for studying, Don’t get lost in the multitude of books.</p><p>More is Less,Less is More.</p><p>After seeing this post, you will know where to find a book(I don’t provide …</p><blockquote><p>I won’t provide any books from domestic publishers.</p></blockquote><h2 id="1-Springer">1. Springer</h2><ul><li>(Grundlehren der mathematischen Wissenschaften)</li></ul><p><a href="https://www.springer.com/series/138www.springer.com/series/138">https://www.springer.com/series/138www.springer.com/series/138</a></p><p><img src="https://picx.zhimg.com/80/v2-73adaff2c66aaf3c9c6fe7ea2d04da7c_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-1275b72a9d856df32728f9a2de034c2b_720w.png?source=d16d100b" alt=""></p><p><img src="https://pic1.zhimg.com/80/v2-e3917bf086a4e611dd57f0edb2292f2a_720w.png?source=d16d100b" alt=""></p><ul><li>GTM(Graduate Texts in Mathematics):</li></ul><p><a href="https://www.springer.com/series/136www.springer.com/series/136">https://www.springer.com/series/136www.springer.com/series/136</a></p><p><img src="https://pic1.zhimg.com/80/v2-cb7a448aa2eab26735ebd42f559ae533_720w.png?source=d16d100b" alt=""></p><ul><li>UTM(Undergraduate Texts in Mathematics):</li></ul><p><img src="https://pic1.zhimg.com/80/v2-f2bb9cee2d97e2f8d809465ada3e1e09_720w.png?source=d16d100b" alt=""></p><ul><li>SUMS(Springer Undergraduate Mathematics Series):</li></ul><p><img src="https://pic1.zhimg.com/80/v2-4da328ade913930a1d56f35eb5f7568e_720w.png?source=d16d100b" alt=""></p><ul><li>UTX(Universitext):</li></ul><p><img src="https://pic1.zhimg.com/80/v2-201b6a86cdcc371870b0a809146800fa_720w.png?source=d16d100b" alt=""></p><ul><li>LNM(Lecture Notes in Mathematics):</li></ul><p><img src="https://picx.zhimg.com/80/v2-5719b04c61861bacf84db7833cad80d4_720w.png?source=d16d100b" alt=""></p><ul><li>SMM(Springer Monographs in Mathematics):</li></ul><p><img src="https://pic1.zhimg.com/80/v2-5190a88f01bf9d68d34eb6dc015ed7a4_720w.png?source=d16d100b" alt=""></p><ul><li>PBM(Problem Books in Mathematics):</li></ul><p><img src="https://picx.zhimg.com/80/v2-2e445889cc73c2576608d3d5d3c97f4e_720w.png?source=d16d100b" alt=""></p><ul><li>Applied Mathematical Sciences:</li></ul><p><img src="https://picx.zhimg.com/80/v2-1ad12e9039686dee1f5c4c5f3ac2624b_720w.png?source=d16d100b" alt=""></p><ul><li>Springer Proceedings in Mathematics &amp; Statistics:</li></ul><p><img src="https://pica.zhimg.com/80/v2-3e39a32da4b0300d61e3f2dbaddf4dd1_720w.png?source=d16d100b" alt=""></p><ul><li>Modern Birkhäuser Classics:</li></ul><p><img src="https://picx.zhimg.com/80/v2-88f94c698fd875f2a386b39d03cc6d6d_720w.png?source=d16d100b" alt=""></p><ul><li>Birkhäuser Advanced Texts Basler Lehrbücher:</li></ul><p><img src="https://pica.zhimg.com/80/v2-324df565e23efdbb4cab9a41a437781d_720w.png?source=d16d100b" alt=""></p><ul><li>…</li></ul><h2 id="2-AMS-American-Mathematical-Society">2. AMS(American Mathematical Society)</h2><p>site:</p><p><img src="https://pic1.zhimg.com/80/v2-cff3f056dab07343ff0f7f4544e5a755_720w.png?source=d16d100b" alt=""></p><h3 id="2-1-Books-for-Undergraduate">2.1 Books for Undergraduate</h3><ul><li>AMSTEXT(AMS Pure and Applied Undergraduate Texts)</li><li>STML(Student Mathematical Library)</li><li>TEXT(AMS/MAA Textbooks)</li><li>…</li></ul><p><img src="https://picx.zhimg.com/80/v2-3cfff7df9ea6fe24c3e2403a9b409ee6_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-5b38612f81cee438b63079018deeb0a7_720w.png?source=d16d100b" alt=""></p><p><img src="https://pica.zhimg.com/80/v2-6e3a931b8db5a431557a8f8685da64fb_720w.png?source=d16d100b" alt=""></p><h3 id="2-2-Books-for-Graduate">2.2 Books for Graduate</h3><ul><li>GSM(Graduate Studies in Mathematics)</li><li>CAR(The Carus Mathematical Monographs)</li><li>CLN(Courant Lecture Notes)</li><li>ULECT(University Lecture Series)</li><li>…</li></ul><p><img src="https://picx.zhimg.com/80/v2-aeb2672f0ae2d7dda1e10da7080fc3f8_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-ce8c1ed6afd1103d5f1d197723c6fe47_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-8c12db421f3561747c8c0f355ee59fe2_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-dad587135690a24d240b9f9f9f15ce02_720w.png?source=d16d100b" alt=""></p><h3 id="2-3-Monographs-and-Collections">2.3 Monographs and Collections</h3><ul><li>CHEL(AMS Chelsea Publishing)</li><li>CAR(The Carus Mathematical Monographs)</li><li>…</li></ul><p><img src="https://picx.zhimg.com/80/v2-435f9572796199b8b9b78251fbba1d9e_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-d314c253401eeb3c7bd227d515d875c5_720w.png?source=d16d100b" alt=""></p><h2 id="3-LMS-London-Mathematical-Society">3. LMS (London Mathematical Society)</h2><p>site:</p><p><img src="https://picx.zhimg.com/80/v2-007c29d5e17b9021f144f6bdebea9c16_720w.png?source=d16d100b" alt=""></p><ul><li>LMS Lecture Notes</li><li>LMS Student Texts</li><li>…</li></ul><p><img src="https://picx.zhimg.com/80/v2-9e116e2e63727cb26fd233b7f7924317_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-c0ffd79047aa1d5382d27f3c6dea0d71_720w.png?source=d16d100b" alt=""></p><h2 id="4-EMS-European-Mathematical-Society">4. EMS (European Mathematical Society)</h2><p>site:</p><p><img src="https://pic1.zhimg.com/80/v2-87150c19e05e2db79f2fc939d24e8d31_720w.png?source=d16d100b" alt=""></p><ul><li>EMM(EMS Monographs in Mathematics)</li><li>ETB(EMS Textbooks in Mathematics)</li><li>ELM(EMS Series of Lectures in Mathematics)</li><li>DMS(Documenta Mathematica Series)</li><li>…</li></ul><p><img src="https://pic1.zhimg.com/80/v2-51cc595efaa38d65f4473b18e363554b_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-279bf5e47ca2c768621c2e3679ad0727_720w.png?source=d16d100b" alt=""></p><p><img src="https://pica.zhimg.com/80/v2-6615535abfe1e01e29f892648b6555d7_720w.png?source=d16d100b" alt=""></p><p><img src="https://pic1.zhimg.com/80/v2-ca836e1ae4edb9e41d7e772cc0a3f9c7_720w.png?source=d16d100b" alt=""></p><h2 id="5-Oxford-University-Press">5. Oxford University Press</h2><p>site:</p><p><img src="https://picx.zhimg.com/80/v2-c6f9cc4ee38948e577fa78b16e5642f2_720w.png?source=d16d100b" alt=""></p><ul><li>Oxford Mathematical Monographs</li><li>Oxford Graduate Texts in Mathematics</li><li>Oxford Lecture Series in Mathematics and Its Applications</li><li>Oxford Texts in Applied and Engineering Mathematics</li><li>Oxford Applied Mathematics and Computing Science Series</li><li>Numerical Mathematics and Scientific Computation</li><li>…</li></ul><p><img src="https://pica.zhimg.com/80/v2-62cee1b8c211f79bc18281ad86a28097_720w.png?source=d16d100b" alt=""></p><p><img src="https://pic1.zhimg.com/80/v2-ee93ec251eaad02defed2b86bf0de48c_720w.png?source=d16d100b" alt=""></p><p><img src="https://pic1.zhimg.com/80/v2-066269453e62108ac79f8b4d26469374_720w.png?source=d16d100b" alt=""></p><p><img src="https://pica.zhimg.com/80/v2-7735613682172c6f8470075de028b88c_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-33c2c9e4ee5975dcdadc07b3a4cbd2f6_720w.png?source=d16d100b" alt=""></p><p><img src="https://pic1.zhimg.com/80/v2-08fcdb070e0ba543a4be8f83e809c620_720w.png?source=d16d100b" alt=""></p><h2 id="6-Standford-Math-51-Textbook">6. Standford Math 51 Textbook</h2><p>There is a colection of boks only for stanford student, which updating year by year. Though it hard to get the ebook if you are Not enrolled at Stanford University. Here i provide some info and what Math 51 TextBook are.</p><p><img src="https://pica.zhimg.com/80/v2-1853bcbf2e3a4226638a70eb5e1bbea9_720w.png?source=d16d100b" alt=""></p><p>There is a repository on github provide these books if you don’t have any valid</p><p>Or refer a reddit post:</p><p>A Recommended Book List by Standford:</p><p><img src="https://picx.zhimg.com/80/v2-7a25026aa1a9f156e353077717bbed99_720w.png?source=d16d100b" alt=""></p><h2 id="7-Princeton-Mathematical-Series">7. Princeton Mathematical Series</h2><p>site:</p><p><img src="https://picx.zhimg.com/80/v2-1d1f8565e574149a42088837bdf4ea27_720w.png?source=d16d100b" alt=""></p><h2 id="8-CRC-Press-Routledge">8. CRC Press &amp; Routledge</h2><h3 id="8-1-All-book-serise">8.1 All book serise</h3><p>site:</p><p><img src="https://pic1.zhimg.com/80/v2-24d465a9be00a477f4d9b09918e130e3_720w.png?source=d16d100b" alt=""></p><h3 id="8-2-Advances-in-Applied-Mathematics">8.2 Advances-in-Applied-Mathematics</h3><p>site:</p><p><img src="https://picx.zhimg.com/80/v2-1c2139fa2fdb9de65903c2bd8e347ac9_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-03a01f9a482d4e024f305be8eaf46506_720w.png?source=d16d100b" alt=""></p><h3 id="8-3-Textbooks-in-Mathematics">8.3 Textbooks in Mathematics</h3><p>site:</p><p><img src="https://pica.zhimg.com/80/v2-79109d0cff55ecd7508d70f1e09ae5b6_720w.png?source=d16d100b" alt=""></p><p><img src="https://picx.zhimg.com/80/v2-11e2c7b8799f43607d23f2368d3112bf_720w.png?source=d16d100b" alt=""></p><h2 id="9-CSAM-Cambridge-Studies-in-Advanced-Mathematics">9. CSAM (Cambridge Studies in Advanced Mathematics)</h2><p>site:</p><p><img src="https://pic1.zhimg.com/80/v2-e56603d5df0e71c207de5e435aa9c336_720w.png?source=d16d100b" alt=""></p><h2 id="10-Thanks">10. Thanks</h2><p>Thanks a lot.A collection of mathematics books prepared for students majoring in mathematics. Consist of Most Publishing house and Famous book series you ever know. Please choose a book that suits you for studying, Don’t get lost in the multitude of books.</p><p>More is Less,Less is More.</p><p>After seeing this post, you will know where to find a book(I don’t provide …</p><blockquote><p>I won’t provide any books from domestic publishers.</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Math</category>
      
    </categories>
    
    
    <tags>
      
      <tag>book</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Some Sites to Block list</title>
    <link href="/2024/03/26/blocksites/"/>
    <url>/2024/03/26/blocksites/</url>
    
    <content type="html"><![CDATA[<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">*://www.csdn.net/*<br>*://www.csdn.com/*<br>*://blog.csdn.net/*<br>*://www.baidu.com/*<br>*://wenku.baidu.com/*<br>*://c.tieba.baidu.com/*<br>*://zhidao.baidu.com/*<br>*://baike.sogou.com/*<br>*://baike.baidu.com/*<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ASCII Art in TeX</title>
    <link href="/2024/03/26/ascii_art/"/>
    <url>/2024/03/26/ascii_art/</url>
    
    <content type="html"><![CDATA[<h2 id="1-前言">1. 前言</h2><p>作为一个程序猿，很多人都喜欢ASCII艺术，然后你就可以见到部分的人在Linux上安装有<code>figlet</code>,  大概的样子就是下面这样：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs text">% Geek<br>  ____           _<br> / ___| ___  ___| | __<br>| |  _ / _ \/ _ \ |/ /<br>| |_| |  __/  __/   &lt;<br> \____|\___|\___|_|\_\<br><br>% Banner<br>#####    ##   #    # #    # ###### #####<br>#    #  #  #  ##   # ##   # #      #    #<br>#####  #    # # #  # # #  # #####  #    #<br>#    # ###### #  # # #  # # #      #####<br>#    # #    # #   ## #   ## #      #   #<br>#####  #    # #    # #    # ###### #    #<br></code></pre></td></tr></table></figure><p>除了命令行工具外，还有许多的在线ASCII字符画生成网站 ，比如如下的几个网站：关于动物的ascii艺术字，自定义Spring Boot 动物 banner下载，各种有意思的banner、ascii图案，还有中文文字banner，作为Spring Boot和终端命令行banner会让项目更有意思。</p><p><img src="/img/ascii_art/ascii_animal.png" alt=""></p><blockquote><p>网址: <a href="http://www.bootschool.net/ascii-art/animals">www.bootschool.net/ascii-art/animals</a></p></blockquote><p>这样的网站断然是十分的多的，这里就不一一例举了。下面回到我们的重点，怎么在 LATEX 中使用这样的ASCII艺术。这里分为两种(这部分全是我抄的，因为本文的重点不在这部分，原文地址在文末 )：</p><ul><li>彩色图</li><li>灰度图</li></ul><p>这里只展示一下第一种类型，大概就像下面这样 ：<br><img src="/img/ascii_art/dek_1.png" alt=""></p><p>,当把这个图片放大之后就其实内部是这样的：<br><img src="/img/ascii_art/dek_2.png" alt=""></p><p>,它是由一个个的x组成的，每一个x的颜色不同从而构成了这样的一副图片;</p><blockquote><p>我记得在早期，好像也有人使用这种ASCII的方法来打印图片，好像就是Knuth 本人.</p></blockquote><p>本文的关注点是生成类似如下类型的图片 ， 相应的彩色图片的输出直接去看原始的文章即可:</p><blockquote><p>注意：你可能需要注意一下你的imagemagick的命令行调用方式</p></blockquote><p>原始的答主已经把左右的代码贴出来了，当然也可以看文末我整理好的代码 [ &gt;_&lt; ]</p><blockquote><p>本文也主要是对原始的一个回答做出相应的补充，原始的作者之讲述了一种方式，但是着这种方式应该有部分人不能运行成功，于是补充一个相对现代的工具链</p></blockquote><p><img src="/img/ascii_art/banner.png" alt=""></p><h2 id="2-正文">2. 正文</h2><h3 id="2-1-原始回答">2.1 原始回答</h3><p>原始的回答中，<a href="https://tex.stackexchange.com/users/8540/karl-ove-hufthammer">karl ove hufthammer</a> 提到的方法如下:</p><ul><li>首先使用 <a href="https://www.xfig.org/">xfig</a> 绘制段落的shape（需要给对应的路径添加comment ‘+’ 和 comment ‘-’）</li><li>然后使用 <a href="https://linux.die.net/man/1/fig2dev">fig2dev</a> 把xfig导出的.fig文件转换为 .shape(这个.shape文件中就包含了  形式的段落形状的定义，下面会详细介绍)</li><li>最后在LaTeX文档中引入 <a href="https://www.ctan.org/pkg/shapepar">shapepar</a> 宏包，再导入刚才的.shape文件中的形状定义，最后的使用方法如下</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>[10pt]&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;   <br><span class="hljs-keyword">\usepackage</span>&#123;shapepar&#125;<br><span class="hljs-keyword">\input</span>&#123;sum.shape&#125;<br><span class="hljs-comment">% in .shape file</span><br><span class="hljs-comment">% \def\sumpar#1&#123;\shapepar&#123;\sumshape&#125;#1\par&#125;</span><br><br><span class="hljs-comment">% in .tex source</span><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br>    <span class="hljs-keyword">\sumpar</span>&#123;&lt;your text&gt;&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>这种方法是肯定可行的，但是想要成功的复现出来你可能会遇到如下困难：</p><ul><li>xfig无法正确安装（或者自己无法编译）</li><li>fig2dev无法正确安装（或者自己无法编译）</li><li>复杂的形状,比如上述的  符号，很难在xfig这个古老的软件中绘制出来</li></ul><p>这里对原始的方法做一些note</p><ul><li>关键程序安装</li></ul><p>对于xfig, 我这里使用的程序是使用Arch Linux上的 yay 进行安装的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yay -S xfig<br></code></pre></td></tr></table></figure><p>对于 fig2dev 我这里也是使用Arch自带的包管理器 pacman 进行安装的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo pacman -S fig2dev<br></code></pre></td></tr></table></figure><p>一些额外的软件可以参见xfig官方网站</p><ul><li>添加comment方法</li></ul><p><img src="/img/ascii_art/xfig_1.png" alt=""></p><ul><li>保存的Tips</li></ul><p><img src="/img/ascii_art/xfig_2.png" alt=""></p><ul><li>.fig文件的编译</li></ul><p>在命令行中使用如下的命令即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">fig2dev -L shape -n &lt;cmd after \def&gt; &lt;file name&gt;.fig &lt;output name&gt;.shape<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">% </span><span class="language-bash">比如你定义为 -n <span class="hljs-built_in">sum</span>，那么到时候你在LaTeX中使用的命令为 \sumpar&lt;some text&gt;</span><br></code></pre></td></tr></table></figure><p>最终编译结果就像下面这样：<br><img src="/img/ascii_art/xfig_3.png" alt=""></p><p>其实从上面也可以看出来，你如果想要在这样古老的一个软件上进行手绘，是很难得到一些复杂的图形的，于是我们下面采用更加现代的方法 Inkscape + <a href="https://www.freefileconvert.com/">file convert</a></p><blockquote><p>可以参见后文，使用autotrace进行 .svg 到 .fig 的转换</p></blockquote><h3 id="2-2-补充与修正">2.2 补充与修正</h3><p>首先在Inkscape中插入   这个符号，取消它的填充，设置对应的stoke style (其实关系不大)，构建方法如下<br><img src="/img/ascii_art/inkscape_1.png" alt=""></p><p>,然后经过调整，你就可以得到如下的符号<br><img src="/img/ascii_art/inkscape_2.png" alt=""></p><p>最后导出为svg。至此，我们就需要使用哪个在线网站 <a href="https://www.freefileconvert.com/">file convert</a> 把我们导出的 .svg 文件转为 .fig文件，</p><p>使用方法如下:<br><img src="/img/ascii_art/convert_1.png" alt=""></p><p><img src="/img/ascii_art/convert_2.png" alt=""></p><p>但是我们还没有完成我们的 .fig 文件制作，很显然我们缺少了添加 comment 这一步，这一步也很简单，按照如下步骤操作即可：</p><ul><li>替换 .fig 文件按前面的 ‘导言区’</li></ul><p>我们刚才下载下来的 .fig 文件长这样</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs text">#FIG 3.2 UniConvertor 2.0 sk1project.net<br>Portrait<br>Center<br>Inches<br>Custom<br>100.00<br>Single<br>-1<br>1200 2<br>2 3 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 239<br> 4504 5766 2973 7654 2962 7667 2953 7678 2949 7683 2946 7687<br> 2943 7691 2940 7695 2939 7697 2938 7698 2938 7700 2937 7701<br> 2936 7703 2935 7704 2935 7706 2934 7708 2934 7709 2934 7711<br> 2933 7712 2933 7714 2933 7716 2933 7717 2933 7719 2933 7721<br> 2933 7723 2933 7725 2933 7727 2933 7729 2934 7731 2934 7733<br> 2934 7735 2935 7737 2935 7738 2936 7740 2936 7741 2937 7743<br> 2938 7744 2939 7746 2939 7746 2940 7747 2940 7748 2940 7748<br> 2941 7749 2942 7751 2944 7752 2945 7753 2946 7754 2947 7755<br> 2949 7756 2950 7757 2951 7757 2953 7758 2954 7759 2956 7760<br> 2958 7760 2960 7761 2961 7762 2963 7762 2967 7763 2971 7764<br> 2976 7765 2980 7766 2990 7767 3001 7767 3026 7768 3054 7768<br> 6614 7768 6985 6696 6877 6696 6867 6726 6855 6756 6843 6785<br> 6829 6814 6814 6843 6799 6871 6782 6899 6765 6926 6747 6953<br> 6728 6979 6708 7005 6687 7030 6665 7055 6643 7079 6619 7103<br> 6595 7126 6570 7148 6545 7170 6518 7191 6491 7212 6463 7232<br> 6435 7251 6406 7270 6376 7288 6345 7305 6314 7321 6283 7337<br> 6250 7352 6217 7366 6184 7380 6150 7392 6116 7404 6100 7410<br> 6079 7417 6053 7426 6020 7435 5937 7456 5829 7478 5694 7499<br> 5531 7516 5340 7528 5118 7532 3290 7532 4787 5685 4804 5660<br> 4814 5643 4815 5642 4816 5640 4817 5638 4817 5637 4818 5635<br> 4818 5634 4819 5632 4819 5631 4820 5629 4820 5627 4820 5626<br> 4821 5624 4821 5623 4821 5621 4821 5619 4821 5617 4821 5614<br> 4821 5610 4821 5608 4820 5605 4820 5604 4820 5602 4820 5601<br> 4819 5600 4819 5598 4819 5597 4818 5596 4818 5594 4816 5591<br> 4814 5588 4812 5584 4809 5580 4803 5570 4794 5556 3398 3641<br> 5097 3641 5303 3644 5541 3658 5669 3672 5799 3692 5864 3705<br> 5930 3720 5996 3736 6061 3755 6125 3777 6189 3800 6252 3827<br> 6314 3856 6344 3871 6374 3888 6403 3905 6432 3923 6461 3942<br> 6489 3961 6516 3982 6543 4003 6570 4025 6596 4048 6621 4072<br> 6645 4096 6669 4122 6692 4149 6714 4176 6736 4205 6757 4234<br> 6777 4265 6796 4297 6814 4329 6831 4363 6848 4398 6863 4434<br> 6877 4471 6985 4471 6614 3466 3054 3466 3033 3466 3014 3467<br> 3006 3467 2998 3468 2991 3468 2984 3469 2981 3470 2978 3470<br> 2975 3471 2972 3472 2970 3472 2967 3473 2965 3474 2962 3475<br> 2960 3476 2958 3477 2957 3478 2956 3478 2955 3479 2954 3480<br> 2954 3480 2953 3481 2952 3482 2951 3482 2950 3483 2949 3484<br> 2949 3485 2948 3486 2947 3486 2947 3487 2946 3488 2945 3489<br> 2945 3490 2944 3491 2944 3492 2943 3493 2942 3495 2941 3497<br> 2940 3500 2939 3502 2938 3505 2938 3507 2937 3510 2937 3513<br> 2936 3519 2935 3526 2933 3558 2933 3601 4504 5766<br>2 1 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 1<br> 4504 5766<br></code></pre></td></tr></table></figure><p>我们把 ‘导言区’ 替换成如下的内容</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">#FIG 3.2  Produced by xfig version 3.2.9<br>#encoding: UTF-8<br>Landscape<br>Center<br>Inches<br>Letter<br>100.00<br>Single<br>-2<br>1200 2<br></code></pre></td></tr></table></figure><p>然后在添加对应的comment内容(就是一条注释而已, ‘# +’)， 最终得到的完整文件为</p><blockquote><p>相应的路径的 comment - 操作，在对应的路径前面添加 ‘# -’ 即可</p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs text">#FIG 3.2  Produced by xfig version 3.2.9<br>#encoding: UTF-8<br>Landscape<br>Center<br>Inches<br>Letter<br>100.00<br>Single<br>-2<br>1200 2<br># +<br>2 3 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 239<br> 4504 5766 2973 7654 2962 7667 2953 7678 2949 7683 2946 7687<br> 2943 7691 2940 7695 2939 7697 2938 7698 2938 7700 2937 7701<br> 2936 7703 2935 7704 2935 7706 2934 7708 2934 7709 2934 7711<br> 2933 7712 2933 7714 2933 7716 2933 7717 2933 7719 2933 7721<br> 2933 7723 2933 7725 2933 7727 2933 7729 2934 7731 2934 7733<br> 2934 7735 2935 7737 2935 7738 2936 7740 2936 7741 2937 7743<br> 2938 7744 2939 7746 2939 7746 2940 7747 2940 7748 2940 7748<br> 2941 7749 2942 7751 2944 7752 2945 7753 2946 7754 2947 7755<br> 2949 7756 2950 7757 2951 7757 2953 7758 2954 7759 2956 7760<br> 2958 7760 2960 7761 2961 7762 2963 7762 2967 7763 2971 7764<br> 2976 7765 2980 7766 2990 7767 3001 7767 3026 7768 3054 7768<br> 6614 7768 6985 6696 6877 6696 6867 6726 6855 6756 6843 6785<br> 6829 6814 6814 6843 6799 6871 6782 6899 6765 6926 6747 6953<br> 6728 6979 6708 7005 6687 7030 6665 7055 6643 7079 6619 7103<br> 6595 7126 6570 7148 6545 7170 6518 7191 6491 7212 6463 7232<br> 6435 7251 6406 7270 6376 7288 6345 7305 6314 7321 6283 7337<br> 6250 7352 6217 7366 6184 7380 6150 7392 6116 7404 6100 7410<br> 6079 7417 6053 7426 6020 7435 5937 7456 5829 7478 5694 7499<br> 5531 7516 5340 7528 5118 7532 3290 7532 4787 5685 4804 5660<br> 4814 5643 4815 5642 4816 5640 4817 5638 4817 5637 4818 5635<br> 4818 5634 4819 5632 4819 5631 4820 5629 4820 5627 4820 5626<br> 4821 5624 4821 5623 4821 5621 4821 5619 4821 5617 4821 5614<br> 4821 5610 4821 5608 4820 5605 4820 5604 4820 5602 4820 5601<br> 4819 5600 4819 5598 4819 5597 4818 5596 4818 5594 4816 5591<br> 4814 5588 4812 5584 4809 5580 4803 5570 4794 5556 3398 3641<br> 5097 3641 5303 3644 5541 3658 5669 3672 5799 3692 5864 3705<br> 5930 3720 5996 3736 6061 3755 6125 3777 6189 3800 6252 3827<br> 6314 3856 6344 3871 6374 3888 6403 3905 6432 3923 6461 3942<br> 6489 3961 6516 3982 6543 4003 6570 4025 6596 4048 6621 4072<br> 6645 4096 6669 4122 6692 4149 6714 4176 6736 4205 6757 4234<br> 6777 4265 6796 4297 6814 4329 6831 4363 6848 4398 6863 4434<br> 6877 4471 6985 4471 6614 3466 3054 3466 3033 3466 3014 3467<br> 3006 3467 2998 3468 2991 3468 2984 3469 2981 3470 2978 3470<br> 2975 3471 2972 3472 2970 3472 2967 3473 2965 3474 2962 3475<br> 2960 3476 2958 3477 2957 3478 2956 3478 2955 3479 2954 3480<br> 2954 3480 2953 3481 2952 3482 2951 3482 2950 3483 2949 3484<br> 2949 3485 2948 3486 2947 3486 2947 3487 2946 3488 2945 3489<br> 2945 3490 2944 3491 2944 3492 2943 3493 2942 3495 2941 3497<br> 2940 3500 2939 3502 2938 3505 2938 3507 2937 3510 2937 3513<br> 2936 3519 2935 3526 2933 3558 2933 3601 4504 5766<br>2 1 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 1<br> 4504 5766<br></code></pre></td></tr></table></figure><p>把这个文件作为figdev的输入文件，运行如下的命令(这里我保存为sum.fig)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">fig2dev sum.fig -L shape -n sum sum.shape<br></code></pre></td></tr></table></figure><p>运行之后可以得到如下的输入信息<br><img src="/img/ascii_art/fig2dev.png" alt=""></p><p>然后我们来看看最后的 <code>sum.shape</code> 文件里面都是一些什么东西</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\def</span><span class="hljs-keyword">\sumpar</span><span class="hljs-params">#1</span>&#123;<span class="hljs-keyword">\shapepar</span>&#123;<span class="hljs-keyword">\sumshape</span>&#125;<span class="hljs-params">#1</span><span class="hljs-keyword">\par</span>&#125;<br><span class="hljs-keyword">\def</span><span class="hljs-keyword">\sumshape</span>&#123;<span class="hljs-comment">%</span><br>&#123;25.1235&#125;<span class="hljs-comment">%</span><br>&#123;0.123457&#125;b&#123;0.864198&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;0.123457&#125;t&#123;0.864198&#125;&#123;44.6914&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;0.864198&#125;t&#123;0.246914&#125;&#123;45.58&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;1.85185&#125;t&#123;0.123457&#125;&#123;46.0653&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;2.34568&#125;t&#123;0.482396&#125;&#123;28.9003&#125;st&#123;29.3827&#125;&#123;16.9869&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;2.34568&#125;t&#123;0.482396&#125;&#123;5.44353&#125;t&#123;29.3827&#125;&#123;16.9869&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;2.46914&#125;t&#123;0.572131&#125;&#123;5.44364&#125;t&#123;32.3457&#125;&#123;14.0692&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;2.71605&#125;t&#123;0.751601&#125;&#123;5.44386&#125;t&#123;33.9506&#125;&#123;12.5547&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;2.96296&#125;t&#123;0.931071&#125;&#123;5.44408&#125;t&#123;35.5556&#125;&#123;11.0402&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;3.08642&#125;t&#123;1.02081&#125;&#123;5.44419&#125;t&#123;36.2963&#125;&#123;10.3447&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;3.33333&#125;t&#123;1.20028&#125;&#123;5.44442&#125;t&#123;37.1605&#125;&#123;9.57096&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;3.45679&#125;t&#123;1.29001&#125;&#123;5.44453&#125;t&#123;38.0247&#125;&#123;8.75199&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;3.7037&#125;t&#123;1.46948&#125;&#123;5.44475&#125;t&#123;38.7654&#125;&#123;8.1017&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;3.95062&#125;t&#123;1.64895&#125;&#123;5.44497&#125;t&#123;39.5062&#125;&#123;7.45141&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;4.32099&#125;t&#123;1.91815&#125;&#123;5.4453&#125;t&#123;40.3704&#125;&#123;6.72289&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;4.5679&#125;t&#123;2.09762&#125;&#123;5.44552&#125;t&#123;41.1111&#125;&#123;6.07261&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;4.93827&#125;t&#123;2.36683&#125;&#123;5.44586&#125;t&#123;41.8519&#125;&#123;5.46755&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;5.30864&#125;t&#123;2.63603&#125;&#123;5.44619&#125;t&#123;42.5926&#125;&#123;4.86249&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;5.80247&#125;t&#123;2.99497&#125;&#123;5.44663&#125;t&#123;43.3333&#125;&#123;4.30265&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;6.2963&#125;t&#123;3.35391&#125;&#123;5.44707&#125;t&#123;44.0741&#125;&#123;3.74282&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;7.03704&#125;t&#123;3.89232&#125;&#123;5.44774&#125;t&#123;45.0617&#125;&#123;3.02653&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;7.90123&#125;t&#123;4.52046&#125;&#123;5.44851&#125;t&#123;45.9259&#125;&#123;2.47892&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;8.64198&#125;t&#123;5.05887&#125;&#123;5.44918&#125;t&#123;46.5432&#125;&#123;2.13299&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;9.62963&#125;t&#123;5.77675&#125;&#123;5.45006&#125;t&#123;47.4074&#125;&#123;1.63061&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;10.3704&#125;t&#123;6.31516&#125;&#123;5.45073&#125;t&#123;47.9012&#125;&#123;1.40814&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;11.2346&#125;t&#123;6.9433&#125;&#123;5.4515&#125;t&#123;48.2716&#125;&#123;1.35436&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;12.0988&#125;t&#123;7.57144&#125;&#123;5.45228&#125;t&#123;48.642&#125;&#123;1.30058&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;12.5926&#125;t&#123;7.93038&#125;&#123;5.45272&#125;e&#123;50.1235&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;25.9259&#125;t&#123;17.6217&#125;&#123;5.46468&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;26.7901&#125;t&#123;18.2499&#125;&#123;5.20691&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;27.5309&#125;t&#123;18.7883&#125;&#123;4.29813&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;28.5185&#125;t&#123;19.5062&#125;&#123;2.77945&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;40&#125;t&#123;10.2116&#125;&#123;2.76467&#125;b&#123;48.8889&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;40&#125;t&#123;10.2116&#125;&#123;2.76467&#125;t&#123;48.8889&#125;&#123;1.23457&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;40.7407&#125;t&#123;9.61199&#125;&#123;2.76372&#125;t&#123;48.5185&#125;&#123;1.34879&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;41.4815&#125;t&#123;9.01235&#125;&#123;2.76276&#125;t&#123;48.2716&#125;&#123;1.33956&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;42.2222&#125;t&#123;8.4127&#125;&#123;2.76181&#125;t&#123;47.9012&#125;&#123;1.45379&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;43.2099&#125;t&#123;7.61317&#125;&#123;2.76054&#125;t&#123;47.284&#125;&#123;1.72955&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;44.1975&#125;t&#123;6.81364&#125;&#123;2.75927&#125;t&#123;46.5432&#125;&#123;2.12876&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;45.0617&#125;t&#123;6.11405&#125;&#123;2.75816&#125;t&#123;45.679&#125;&#123;2.69413&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;45.9259&#125;t&#123;5.41446&#125;&#123;2.75704&#125;t&#123;44.6914&#125;&#123;3.38295&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;46.6667&#125;t&#123;4.81482&#125;&#123;2.75609&#125;t&#123;43.7037&#125;&#123;4.11446&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;47.284&#125;t&#123;4.31511&#125;&#123;2.75529&#125;t&#123;42.716&#125;&#123;4.88866&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;47.7778&#125;t&#123;3.91534&#125;&#123;2.75466&#125;t&#123;41.8519&#125;&#123;5.58209&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;48.1481&#125;t&#123;3.61552&#125;&#123;2.75418&#125;t&#123;41.1111&#125;&#123;6.19476&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;48.5185&#125;t&#123;3.3157&#125;&#123;2.75371&#125;t&#123;40.2469&#125;&#123;6.93089&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;48.7654&#125;t&#123;3.11581&#125;&#123;2.75339&#125;t&#123;39.5062&#125;&#123;7.58625&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;49.0123&#125;t&#123;2.91593&#125;&#123;2.75307&#125;t&#123;38.642&#125;&#123;8.36506&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;49.3827&#125;t&#123;2.61611&#125;&#123;2.75259&#125;t&#123;37.284&#125;&#123;9.59502&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;49.6296&#125;t&#123;2.41623&#125;&#123;2.75228&#125;t&#123;35.9259&#125;&#123;10.8677&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;50&#125;t&#123;2.1164&#125;&#123;2.7518&#125;t&#123;34.1975&#125;&#123;12.468&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;50.1235&#125;t&#123;2.01646&#125;&#123;2.75164&#125;t&#123;32.2222&#125;&#123;14.4006&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;50.2469&#125;t&#123;1.91652&#125;&#123;2.75148&#125;t&#123;29.8765&#125;&#123;16.7036&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;50.3704&#125;t&#123;1.81658&#125;&#123;2.75132&#125;t&#123;27.1605&#125;&#123;19.3769&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;50.3704&#125;t&#123;1.81658&#125;&#123;2.75132&#125;jt&#123;4.5679&#125;&#123;41.9695&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;51.8519&#125;t&#123;0.617284&#125;&#123;45.4079&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;52.5926&#125;t&#123;0.123457&#125;&#123;45.6456&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;53.2099&#125;t&#123;0.864198&#125;&#123;44.6914&#125;<span class="hljs-keyword">\\</span><span class="hljs-comment">%</span><br>&#123;53.2099&#125;e&#123;45.5556&#125;<span class="hljs-comment">%</span><br>&#125;<br></code></pre></td></tr></table></figure><p>最后把这个 <code>sum.shape</code> 文件和你的 <code>.tex</code> 文件放在同一路径下，在 <code>.tex</code> 文件中粘贴如下代码:</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-keyword">\documentclass</span>[10pt]&#123;article&#125;<br><span class="hljs-keyword">\usepackage</span>&#123;graphicx&#125;   <br><span class="hljs-keyword">\usepackage</span>&#123;shapepar&#125;<br><span class="hljs-keyword">\input</span>&#123;sum.shape&#125;<br><br><br><span class="hljs-keyword">\begin</span>&#123;document&#125;<br><span class="hljs-keyword">\sumpar</span>&#123;3 . 1 4 1 5 9 2 6 5 3 5 8 9 7 9 3 2 3 8 4 6 2 6 4 3 3 8 3 2 7 9 5 0 2 8 8 4 1 9 7 1 6 9 3 9 9 3 7 5 1 0 5 8 2 0 9 7 4 9 4 4 5 9 2 3 0 7 8 1 6 4 0 6 2 8 6  2 0 8 9 9 8 6 2 8 0 3 4 8 2 5 3 4 2 1 1 7 0 6 7 9 8 2 1 4 8 0 8 6 5 1 3 2 8 2 3 0 6 6 4 7 0 9 3 8 4 4 6 0 9 5 5 0 5 8 2 2 3 1 7 2 5 3 5 9 4 0 8 1 2 8 4 8 1  1 1 7 4 5 0 2 8 4 1 0 2 7 0 1 9 3 8 5 2 1 1 0 5 5 5 9 6 4 4 6 2 2 9 4 8 9 5 4 9 3 0 3 8 1 9 6 4 4 2 8 8 1 0 9 7 5 6 6 5 9 3 3 4 4 6 1 2 8 4 7 5 6 4 8 2 3 3  7 8 6 7 8 3 1 6 5 2 7 1 2 0 1 9 0 9 1 4 5 6 4 8 5 6 6 9 2 3 4 6 0 3 4 8 6 1 0 4 5 4 3 2 6 6 4 8 2 1 3 3 9 3 6 0 7 2 6 0 2 4 9 1 4 1 2 7 3 7 2 4 5 8 7 0 0 6  6 0 6 3 1 5 5 8 8 1 7 4 8 8 1 5 2 0 9 2 0 9 6 2 8 2 9 2 5 4 0 9 1 7 1 5 3 6 4 3 6 7 8 9 2 5 9 0 3 6 0 0 1 1 3 3 0 5 3 0 5 4 8 8 2 0 4 6 6 5 2 1 3 8 4 1 4 6  9 5 1 9 4 1 5 1 1 6 0 9 4 3 3 0 5 7 2 7 0 3 6 5 7 5 9 5 9 1 9 5 3 0 9 2 1 8 6 1 1 7 3 8 1 9 3 2 6 1 1 7 9 3 1 0 5 1 1 8 5 4 8 0 7 4 4 6 2 3 7 9 9 6 2 7 4 9  5 6 7 3 5 1 8 8 5 7 5 2 7 2 4 8 9 1 2 2 7 9 3 8 1 8 3 0 1 1 9 4 9 1&#125;<br><span class="hljs-keyword">\end</span>&#123;document&#125;<br></code></pre></td></tr></table></figure><p>最后使用 pdflatex 或者是 xelatex 编译均可，结果如下：<br><img src="/img/ascii_art/inkscape_3.png" alt=""></p><h2 id="3-More-Example">3. More Example</h2><p>这里在举例一些更加复杂的例子, 包括我们之前提到的 comment + 和 comment - 的操作.</p><p>inkscape 中的图形为</p><p><img src="/img/ascii_art/more_1.png" alt=""></p><p>编译结果为：</p><p><img src="/img/ascii_art/more_2.png" alt=""></p><p>完整的 .fig 代码</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs text">#FIG 3.2  Produced by xfig version 3.2.9<br>#encoding: UTF-8<br>Landscape<br>Center<br>Inches<br>Letter<br>100.00<br>Single<br>-2<br>1200 2<br># -<br>2 3 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 239<br> 4713 5719 3182 7607 3171 7620 3161 7632 3158 7636 3154 7641<br> 3152 7644 3149 7648 3148 7650 3147 7651 3146 7653 3145 7655<br> 3145 7656 3144 7658 3144 7659 3143 7661 3143 7662 3142 7664<br> 3142 7666 3142 7667 3142 7669 3142 7671 3142 7672 3142 7674<br> 3142 7676 3142 7679 3142 7681 3142 7683 3142 7684 3143 7686<br> 3143 7688 3143 7690 3144 7691 3144 7693 3145 7695 3146 7696<br> 3147 7698 3147 7699 3148 7700 3148 7700 3149 7701 3149 7702<br> 3150 7703 3151 7704 3152 7705 3153 7706 3155 7707 3156 7708<br> 3157 7709 3159 7710 3160 7711 3162 7712 3163 7712 3165 7713<br> 3166 7714 3168 7714 3170 7715 3172 7716 3176 7717 3180 7717<br> 3184 7718 3189 7719 3199 7720 3210 7721 3234 7721 3263 7721<br> 6823 7721 7194 6649 7086 6649 7076 6679 7064 6709 7051 6739<br> 7038 6768 7023 6796 7008 6824 6991 6852 6974 6879 6955 6906<br> 6936 6932 6916 6958 6895 6984 6874 7008 6851 7032 6828 7056<br> 6804 7079 6779 7102 6753 7123 6727 7145 6700 7165 6672 7185<br> 6644 7205 6614 7223 6585 7241 6554 7258 6523 7275 6491 7290<br> 6459 7305 6426 7319 6393 7333 6359 7346 6324 7357 6309 7363<br> 6288 7371 6261 7379 6229 7389 6146 7410 6038 7431 5903 7452<br> 5740 7469 5548 7481 5326 7485 3499 7485 4996 5638 5012 5613<br> 5023 5597 5024 5595 5025 5593 5025 5592 5026 5590 5027 5588<br> 5027 5587 5028 5585 5028 5584 5028 5582 5029 5581 5029 5579<br> 5029 5577 5029 5576 5029 5574 5030 5572 5030 5570 5030 5567<br> 5029 5564 5029 5561 5029 5558 5029 5557 5029 5556 5028 5554<br> 5028 5553 5028 5552 5027 5550 5027 5549 5026 5548 5025 5545<br> 5023 5541 5021 5538 5018 5533 5011 5523 5003 5510 3607 3595<br> 5306 3595 5512 3597 5750 3612 5877 3626 6007 3646 6073 3658<br> 6139 3673 6204 3690 6269 3709 6334 3730 6398 3754 6461 3780<br> 6522 3809 6553 3825 6582 3841 6612 3858 6641 3876 6669 3895<br> 6698 3914 6725 3935 6752 3956 6778 3978 6804 4001 6829 4025<br> 6854 4050 6878 4075 6901 4102 6923 4130 6945 4158 6965 4188<br> 6985 4218 7004 4250 7023 4283 7040 4316 7056 4351 7072 4387<br> 7086 4424 7194 4424 6823 3419 3263 3419 3242 3420 3223 3420<br> 3214 3420 3207 3421 3199 3422 3193 3422 3190 3423 3187 3424<br> 3184 3424 3181 3425 3178 3426 3176 3426 3173 3427 3171 3428<br> 3169 3429 3167 3430 3166 3431 3165 3432 3164 3432 3163 3433<br> 3162 3434 3161 3434 3161 3435 3160 3436 3159 3436 3158 3437<br> 3157 3438 3157 3439 3156 3440 3155 3441 3155 3441 3154 3442<br> 3153 3443 3153 3444 3152 3445 3152 3446 3151 3448 3150 3451<br> 3149 3453 3148 3455 3147 3458 3146 3461 3146 3463 3145 3466<br> 3144 3472 3143 3479 3142 3512 3142 3554 4713 5719<br>2 1 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 1<br> 4713 5719<br># +<br>2 3 0 1 0 -1 50 -1 -1 0.0 0 0 -1 0 0 165<br> 2357 2307 2340 2307 2322 2308 2304 2309 2287 2310 2270 2312<br> 2253 2315 2235 2317 2219 2321 2185 2328 2153 2338 2121 2348<br> 2089 2361 2059 2375 2029 2390 2000 2406 1972 2424 1945 2443<br> 1919 2464 1894 2486 1871 2508 1848 2532 1826 2557 1806 2583<br> 1786 2610 1769 2638 1752 2667 1737 2697 1723 2727 1711 2758<br> 1700 2790 1691 2823 1683 2856 1680 2873 1677 2890 1674 2907<br> 1672 2925 1671 2942 1670 2960 1669 2977 1669 2995 1669 8055<br> 1669 8073 1670 8090 1671 8108 1672 8125 1674 8142 1677 8160<br> 1680 8177 1683 8193 1691 8227 1700 8259 1711 8291 1723 8323<br> 1737 8353 1752 8383 1769 8412 1786 8440 1806 8467 1826 8493<br> 1848 8518 1871 8542 1894 8564 1919 8586 1945 8606 1972 8626<br> 2000 8643 2029 8660 2059 8675 2089 8689 2121 8701 2153 8712<br> 2185 8721 2219 8729 2235 8732 2253 8735 2270 8738 2287 8740<br> 2304 8741 2322 8742 2340 8743 2357 8743 7980 8743 7998 8743<br> 8016 8742 8033 8741 8051 8740 8068 8738 8085 8735 8102 8732<br> 8119 8729 8152 8721 8185 8712 8217 8701 8248 8689 8279 8675<br> 8308 8660 8337 8643 8365 8626 8392 8606 8418 8586 8443 8564<br> 8467 8542 8490 8518 8511 8493 8532 8467 8551 8440 8569 8412<br> 8586 8383 8601 8353 8615 8323 8627 8291 8638 8259 8647 8227<br> 8655 8193 8658 8177 8661 8160 8663 8142 8665 8125 8667 8108<br> 8668 8090 8668 8073 8669 8055 8669 2995 8668 2977 8668 2960<br> 8667 2942 8665 2925 8663 2907 8661 2890 8658 2873 8655 2856<br> 8647 2823 8638 2790 8627 2758 8615 2727 8601 2697 8586 2667<br> 8569 2638 8551 2610 8532 2583 8511 2557 8490 2532 8467 2508<br> 8443 2486 8418 2464 8392 2443 8365 2424 8337 2406 8308 2390<br> 8279 2375 8248 2361 8217 2348 8185 2338 8152 2328 8119 2321<br> 8102 2317 8085 2315 8068 2312 8051 2310 8033 2309 8016 2308<br> 7998 2307 7980 2307 2357 2307<br></code></pre></td></tr></table></figure><p>所以有了inkscape这个强大的工具，par in any shape in possible. 除此之外，还可以参考</p><h2 id="4-本文源码仓库">4. 本文源码仓库</h2><h2 id="5-结语">5. 结语</h2><p>这次全程使用vim操作，的确很舒服<br><img src="/img/ascii_art/end.png" alt=""></p>]]></content>
    
    
    <categories>
      
      <category>LaTeX</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>ASCII art</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ArchLinux 入门</title>
    <link href="/2024/03/26/archlinux_intro/"/>
    <url>/2024/03/26/archlinux_intro/</url>
    
    <content type="html"><![CDATA[<h2 id="1-敬告">1. 敬告</h2><p>这是一个过来人的真实经历. 我为什么要用 Linux ? 也许是因为 Linux 的自定义程度高吧, 而且在折腾的过程中也能学到一点东西，从此我也很喜欢上了 Linux 的命令行, 以前觉得那些使用命令行的人太傻了，放着好好的 GUI 界面不去用. 现在看来，其实二者各有千秋, 命令行下其实常用命令就那几个, 慢慢积累的,不用的就去查. 部分情况下也许是命令行比较高效, 但是既然 GUI 用户占大多数，说明 GUI 这个理念也迎合了很多的人.</p><p>在使用 Linux 一段时间后, 我的 Windows 也被我调教的挺好的, 而且我也不是那么排斥 Windows, 所以目前打算就这样用着. 入坑 Arch 需谨慎, 你要有那种 “一个人, 一支烟, 一bug一整天” 的精神. 不然的话, 你还是乖乖用 Windows 吧, 但是你一旦度过这个最艰难的时期你就会觉得,也就这样吧。不管怎样, 祝各位 Archlinux 用户都有一个愉快的使用体验, 祝天天滚挂 &gt;_&lt;.</p><p>其次记住, Linux 它不是 windows; windows 也不是 Linux; 所以你不应该用 windows 的要求去要求 Linux, 同样用 Linux 的要求去要求 windows也是不合理的。最后, Linux也好, windows也好, 它们都只是一个工具而已, 是为了给我们提供服务, 所以什么适合自己就用什么吧.</p><h2 id="2-阅前提醒">2. 阅前提醒</h2><p>文章很长, 我想在这里把我个人的所有关于 Linux 感受说出来, 特别是对于 Arch. 我并不想你浪费时间来阅读一个你不感兴趣的内容, 所以不感兴趣可以关闭这个网页了. 好了, 正文开始！想要看 Archlinux 安装的请直接跳到 <strong>[第6节]</strong></p><h2 id="3-此文目的">3. 此文目的</h2><p>此篇文章的目的: 记录我使用Linux的经历, 至少以后还能留下一些东西. 因为我现在发现我那种折腾的耐心了, 可以这样说. 反正我感觉我每天都在和Linux斗智斗勇, 几乎每个软件都有bug。我甚至都不知道我为什么最初会选择Linux, 我好像忘记了我选择 Linux 的初衷.现在每天折腾Linux都很痛苦, 仿佛以前的那种折腾Linux的快乐再也没有了, 以前的我是那么的乐此不疲。希望我把这篇文章写完之后, 回忆起当初使用 Linux 的种种, 能够找到属于 Linux 的那份快乐, 不然我可能真的要放弃 Linux 了</p><ul><li>但是Linux本来就是你爱用不用的</li><li>这里没有其他的意思, 其实我还是挺想用Linux的</li></ul><h2 id="4-Where-to-learn">4. Where to learn ?</h2><ol><li><p>首先是去小破站（B站）, 众所周知, 小破站是最大的学习网站</p></li><li><p>其次当然是去官方的Arch wiki或者是在Arch的bug里边看看是不是系统本身的原因, 抑或是Arch的Fomular</p></li><li><p>然后就是先查百度, 看有没有人的经历和我相同, 这样改Bug就快得多.因为百度还会展示以下的这些网站里边的相关的内容。</p><blockquote><p>有时候我觉得百度的搜索结果还是挺好的</p></blockquote></li><li><p>百度的方法不行, 就上知乎, 看看有没有类似的经历</p></li><li><p>知乎不行, 就上csdn</p><blockquote><p>虽然很多人都说这里是一个垃圾堆, 但是我觉得那是对于那种高手而言的；我虽然没有经常逛, 但毕竟这是我第一个接触到的编程相关的网站, 还是它把握领进门的吧。但是现在我也觉得csdn的做法有一点的恶心了, 唉……</p></blockquote></li><li><p>csdn不行, 我就会上老牌社区博客园看看</p><blockquote><p>现在我觉得博客园很好, 很清爽, 很干净, 社区氛围很好, 力荐</p></blockquote></li><li><p>博客园还不行的话我就只有上github了, 毕竟我的英语并不是很好, 虽然有浏览器的翻译, 但你们有没有觉得有时候浏览器的翻译怪怪的, 我从Arch wiki得出的经验</p></li><li><p>实在是没有办法了就只有上国外的网站搜索了。比如Quora, Stack Overflow, Stack Exchange, 或者是一些民间社区。 但是你得英语好, 再者就是盲目的google了</p></li><li><p>最后一招:也是我的杀手鐗: remake。软件卸载了然后重装。</p></li></ol><h2 id="5-How-to-learn">5. How to learn ?</h2><p>很多人可能都会认为上边的内容过于的浮夸, 但是我觉得，从一个电脑小白到安装手动 Linux 的路还是比较长的. 也许你需要去了解磁盘的分区方式, Linux 的文件系统, 挂载的概念, 文件系统的 inode, 以及 block 等东西。</p><blockquote><p>特别感谢在 2023 年寒假一直陪伴我的: <a href="https://linux.vbird.org/">鳥哥的 Linux 私房菜</a>. 尽管 <code>服务器假设篇</code> 那本书我几乎没怎么看，但是 <code>基础篇</code> 我几乎看完了, 部分内容至今仍觉得历历在目 …</p></blockquote><p>因为我是准备安装 Windows + Linux 双系统, 然而原本的 win10 里边还有很多的重要文件, 课件, 包括一些难以安装的工业软件等。我不想到时候 archlinux 没有安装成功, 反而把原本的 win10 也搞挂了。所以即使是网上有很详细的双系统安装教程, 我也不敢一步一步的照着做。我还是得去查询每一条命令的实际作用, 查询这个命令运行后对原本文件系统的影响。</p><p>也许不会相信我所说的, 可能觉得太过夸张了。但是我当时连:</p><ul><li>linux 命令行</li><li>GPT,  MBR</li><li>BIOS, UEFI</li><li>GRUB</li></ul><p>这些东西都没有听说过, 更不用说知道它们是干什么的. 特别是在目睹了网上很多老鸟安装双系统后失败的惨状, 作为一个电脑小白, 我害怕极了. 我不会放开手去按照网上的教程安装，所以我的解决办法是:</p><ul><li>先去小破站把上边所说的什么: linux命令行, GPT,  MBR,  BIOS,  UEFI, GRUB 了解一下</li><li>然后在小破站看看装机视频(就是单纯安装 windows 的, 听听那些 up 对于每一步操作的解释, 在这里推荐up: <code>硬件茶谈</code>, 他的视频解决了我在这一阶段的大部分问题)</li><li>不实际操作, 总是会感觉不踏实: 但只有一个实体机, 怎么做实验呢? 对了, 使用虚拟机。我用的是 VMware。为了练习安装操作系统，我的 Vmware的系统快照最终变成了一个 “树” 形图，现在还是那些操作失败的系统安装分支都被删除的样子:</li></ul><p><img src="/img/archlinux_intro/os_shoots_1.png" alt=""></p><p><img src="/img/archlinux_intro/os_shoots_2.png" alt=""></p><p>这些系统快照在容积最大的时候, 占了我大约 200G 的磁盘, 接下来就是实体机的安装了</p><h2 id="6-安装教程">6. 安装教程</h2><p>在虚拟机上进行演练后, 我自信满满的</p><ul><li>在我的硬盘分出一个区</li><li>安装基础包</li><li>编写基本配置</li><li>安装 DWM</li></ul><p>虽然最终是安装好了，但是, 我还是想要记录下我这个过程中经理的种种 …</p><h3 id="6-1-制作启动盘">6.1 制作启动盘</h3><p>我使用的是 rufus,一个免费的软件, 在windows上制作的, 具体的注意点:</p><ul><li>选项 --&gt; GPT</li><li>写入方式 --&gt; DD</li></ul><p>关于选项设置, 对于自己的电脑的启动方式, 可以在 Windows 上的 <code>运行</code> 框中输入:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">msinfo32<br></code></pre></td></tr></table></figure><p>来查看, 如果 <code>BIOS MODE</code> 显示的是 <code>UEFI</code> 那么就选择 <code>GPT</code>, 如果是 <code>Legacy</code> 那么就选择 <code>MBR</code>.进入LiveCD, HONOR 笔记本开机时长按的两个按键的说明:</p><ul><li>F2: 设置 BIOS</li><li>F12: 选择启动项</li></ul><h3 id="6-1-连接网络">6.1 连接网络</h3><p>要在实体机中安装 Arch, 你首先的连的上网, 来下载 Arch 的基本环境组件(固件, 驱动, 内核等等).首先, 在虚拟机中我是使用的NAT来让我的虚拟机链接上网络的, 但那是在实体机里边怎么搞呢? 其实挺简单的；假如你想使用无线网的话, 依次输入如下命令即可</p><div class="note note-warning">            <p>备注: 在后文中,  <code>#</code> 后边的内容代表注释</p>          </div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">iwctl                                               # 进入iwd模式<br>device list                                         # 扫描你的无线网卡<br>station &lt;your netcard name&gt; scan                    # 使用你的网卡扫描周围的可用wifi<br>station &lt;your netcard name&gt; get-networks            # 列出刚才扫描到的wifi的名称<br>station &lt;your netcard name&gt; connect &lt;wifi name&gt;     # 他会自动要求你输入密码（不会显示你键入的字符, 但是你的确时输入进去了, 键入完成后 摁 &lt;Enter&gt;即可）<br>exit                                                # 退出iwd模式[重要]；别在iwd模式下运行下边的命令, 不然你会得到 &quot;command not found&quot;<br></code></pre></td></tr></table></figure><p>但是, 我还是推荐第二种联网方案的,就是直接利用DHCP.简单来说就是直接从你的路由器</p><blockquote><p>要可以上网的, 别用那种电都没插的, 或者是其他的离谱路由器</p></blockquote><p>上接一根网线出来连接到你的电脑上。(USB口的可以买一个转接器)然后你的电脑自动就能够上网了, 不用你设置什么的。为什么我推荐这种方式呢?</p><ol><li>稳定: 如果安装的过中, 隔壁的老王利用你的wifi偷看“学习资料”, 或者是各种原因导致你的wifi不稳定</li><li>速度快:  同样也是为了防火,  防电, 防老王。这样你的安装会很快(应该可以减少焦虑吧)</li></ol><blockquote><p>我就是用的DHCP, 网速平均能够达到30mb/s左右</p></blockquote><p>首先, 因为在虚拟机的时候我可以手动选择启动时进入BIOS界面。怎么检测你是否连接上互联网了呢?<br>连接一下网站试试呗,运行如下的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ping www.baidu.com    # www.可以不加；(如果不断地返回了 64bytes from …… 之类的字眼, 说明联网成功)<br></code></pre></td></tr></table></figure><h3 id="6-2-refleactor-服务">6.2 refleactor 服务</h3><p>系统里边又一个名为 <code>refleactor</code> 的服务, 它会挑选一下我们下载软件的仓库地址, 然后把它们放到</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">/etc/pacman.d/mirrorlist    <br><span class="hljs-meta prompt_"># </span><span class="language-bash">在Linux中没有C,  D盘之类的概念。你可以认为它只有一个文件夹,这个文夹的名字叫<span class="hljs-string">&quot;/&quot;</span>.你之后的所有东西都放在这个文件夹里边</span><br></code></pre></td></tr></table></figure><p>的文件下, 这个文件夹的大概结构图示（扩容的问题:  很简单的, 后边会讲）</p><p><img src="/img/archlinux_intro/file_system.png" alt="来源: 菜鸟教程(侵权删)"></p><p>为什么要禁用reflector ?</p><blockquote><p>你想, 它同步的是全球的下载源（地址）, 什么自由美利坚啊, 加拿大啊之类的, 当然也有我们中国的。 但是我们下载&lt;东西&gt;的时候时好像是默认使用排在前边的几个地址。你想, 你从美国下载快,  还是中国快。</p></blockquote><p>所以我们就可以添加几个中国的源(下载地址)到开头: (再次提醒: <code>#</code> 后边的内容是注释)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch                # 中国科学技术大学开源镜像站<br>Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch       # 清华大学开源软件镜像站<br>Server = https://repo.huaweicloud.com/archlinux/$repo/os/$arch               # 华为开源镜像站<br>Server = http://mirror.lzu.edu.cn/archlinux/$repo/os/$arch                   # 兰州大学开源镜像站<br></code></pre></td></tr></table></figure><p>怎么添加呢?挺简单地（你会vim的基础操作情况下）</p><h3 id="ref-vim-基础操作">ref: vim 基础操作</h3><ol><li>怎么退出 vim ? 没想到吧, 你第一次接触 vim 你可能都无法退出这个东西</li></ol><ul><li>先按个几下 <code>&lt;Esc&gt;</code> 键,看到 vim 的左下角出现 normal mode 或者是 Insert mode 消失</li><li>在英文模式下输入 <code>:wq</code> 即可,但是这个是保存后退出</li><li>不保存强制退出就输入 <code>:q!</code></li></ul><ol start="2"><li>怎么插入文本, 或者说怎么使用“人性化”的方法进行类似 notepad 的操作</li></ol><ul><li>在 <code>normal mode</code> 的情况下, 在英文输入的情况下, 键入 <code>a i o</code> 中任何一个字母即可</li><li>然后用上下左右方向 <code>(k j h l)</code> 键进行光标的移动</li></ul><ol start="3"><li>复制粘贴</li></ol><ul><li>在 normal 模式下使用 <code>&lt;n&gt;yy</code> 可以实现复制 n 行, 然后用 p 粘贴</li><li>部分的 vim 支持系统的剪切板, 输入 <code>echo has('clipboard')</code> 即可验证</li></ul><ol start="4"><li>搜索</li></ol><ul><li>在normal模式下输入 <code>:/&lt;text you find&gt;</code></li><li>搜索支持正则表达式</li></ul><h3 id="6-3-磁盘分区-重点">6.3 磁盘分区[重点]</h3><h4 id="6-3-1-电脑启动流程">6.3.1 电脑启动流程</h4><p><img src="/img/archlinux_intro/boot_process.png" alt=""></p><p>这一段感觉不知道该怎么讲, 如有讲的不对的地方, 欢迎补充. 我也不知道能否清楚, 我尽力 …</p><h4 id="6-3-2-常见术语">6.3.2 常见术语</h4><ul><li>BIOS</li><li>Legacy</li><li>Legacy BIOS</li><li>UEFI</li><li>EFI</li><li>ESP</li><li>UEFI BIOS</li><li>GPT</li><li>MBR</li><li>BootLoader</li><li>Kernel</li><li>GRUB(2)</li><li>LILO</li><li>OC</li><li>clover</li></ul><p><strong>1.BootLoader</strong><br>&lt;开机管理程序&gt; 或叫做 &lt;启动引导程序&gt;。在加载内核上具有唯一性, 你不能说用 windoes 的 BootLoader 去加载 Linux 的内核, 这是不行的。下边来解释原因, 以Linux下的 GRUB2 为例:</p><p>我们上边提到在 BIOS 读完信息后, 接下来就是会到第一个开机设备的 MBR（LBA0）去读取 boot loader 了。这个 boot loader 可以具有:</p><ul><li>菜单功能、</li><li>直接载入核心文件</li><li>以及控制权移交的功能等</li></ul><p>系统必须要有 loader 才有办法载入该操作系统的核心就是了。但是我们都知道,  MBR 是整个硬盘的第一个 sector 内的一个区块, 充其量整个大小也才 446 Bytes 而已。即使是 GPT 也没有很大的扇区来储存 loader 的数据。我们的 loader 功能这么强, 光是程序码与设置数据不可能只占这么一点点的容量吧? 那如何安装?</p><p>为了解决这个问题, 所以 Linux 将 boot loader 的程序码执行与设置值载入分成两个阶段来执行:</p><ul><li><p>阶段一: 执行 boot loader 主程序:  第一阶段为执行 boot loader 的主程序, 这个主程序必须要被安装在开机区, 亦即是 MBR 或者是 boot sector 。但如前所述, 因为MBR 实在太小了, 所以, MBR 或 boot sector 通常仅安装 boot loader 的最小主程序,  并没有安装 loader 的相关配置文件；</p></li><li><p>阶段二: 主程序载入配置文件:  第二阶段为通过 boot loader 载入所有配置文件与相关的环境参数文件 （包括<strong>文件系统定义</strong>与主要配置文件 grub.cfg）,  一般来说, 配置文件都在 /boot 下面。</p></li></ul><p><strong>2. BIOS</strong><br>使用汇编语言写到主板上的一个16位固件（硬件上的软件）—&gt; 计算机执行的第一个程序</p><p><strong>3. UEFI</strong><br>使用C语言写到主板上的一个固件(可以看作一个低级的操作系统), 主要就是想要取代BIOS这个固件接口, 所以又叫做UEFI BIOS</p><p><strong>4. EFI（EFI system partition）</strong><br>GPT格式的硬盘中的系统启动分区, 又叫做ESP分区。 EFI其实就是<strong>系统自动安装</strong>或者是你<strong>手动添加</strong>的一个BootLoader, 通常都是一个**.efi**作为后缀的文件。然后这个BootLoader就会带着主板找到其它操作操作系统的BootLoader, 然后被找到的这个BootLoader就加载这个操作系统的内核内核, 从而启动操作系统。</p><p><strong>5. BIOS寻找操作系统的方式</strong><br>Legacy 和 UEFI → 可以进入BIOS模式后进行设置; 比如在Legacy模式下, 在BIOS中要把第一启动项设为安装由操作系统的那个硬盘。之后BIOS会扫描第一启动硬盘的第一个分区(MBR或这是LBA0),找到boot之类的启动文件,只用利用Loader才能加载系统内核, 从而进入操作系统</p><p><strong>6. 磁盘的分区格式</strong><br>MBR, GPT</p><p><strong>7. 加载OS内核</strong><br>BootLoader的主要工作之一, 常见的BootLoader有GRUB(2), LILO, spfdisk, Boot Manager(windows的boot loader), OC, clover. 好像还有一个叫变色龙是吧?</p><blockquote><p>黑苹果玩家出来挨打</p></blockquote><p><strong>8. kernel</strong><br>就是操作系统的内核, 我们平时说的 <code>Linux</code> 其实应该叫 <code>GNU/Linux</code>; 因为 Linux 是 GNU 组织采用了 Linus 的 Linux 内核产生的</p><p><strong>9. (BIOS and UEFI) OR (MBR and GPT)?</strong><br>下面引用鸟哥书中的一句话:</p><blockquote><p>如果你的分区表为 GPT 格式的话, 那么 BIOS 也能够从 LBA0 的 MBR相容区块读取第一阶段的启动引导程序代码,  如果你的启动引导程序能够认识 GPT 的话, 那么使用 BIOS 同样可以读取到正确的操作系统核心！换句话说,  如果启动引导程序不懂 GPT , 例如 Windows XP 的环境, 那自然就无法读取核心文件, 开机就失败了</p></blockquote><p>明确几个点:</p><ol><li>安装 Windows + Linux 双系统的话, 你应该先安装 windows, 再安装 Linux; windows 的安装会覆盖你的 MBR 和 BootSector, 从而你原本在 MBR 里边的 Linux 的 BootLoader 会被覆盖成 <strong>啥也不能干</strong> 的 windows 的 Boot Manager,然后你就只有使用 Linux 的修复模式来修复 MBR 了</li><li>多系统在磁盘上的关系, 如图:GPT也有MBR的兼容区, 所以说只要你在 windows 里边预先分出一块空余的磁盘(不要分区), 之后你在这个分区里边可以使劲造(还是别太使劲了), 你原来的 windows 里边的文件不会受到丝毫的影响（亲身体会）. 但是在安装引导的时候得注意一下:</li></ol><p><img src="/img/archlinux_intro/system_relation.png" alt=""></p><ol start="3"><li>BootLaoder的作用</li></ol><ul><li>提供菜单: 使用者可以选择不同的开机项目, 这也是多重开机的重要功能！</li><li>载入核心文件: 直接指向可开机的程序区段来开始操作系统；</li><li>转交其他 loader: 将开机管理功能转交给其他 loader 负责。（windows的不行）</li></ul><p>bootloader的示意图</p><p><img src="/img/archlinux_intro/bootloader.png" alt=""></p><h4 id="6-3-3-引导方案">6.3.3 引导方案</h4><p>在本教程中 Linux 的引导不安装在 windows 的 EFI 分区, 转而新建一个 <code>/Boot</code> 分区来存放 Linnux 和 Windows:</p><ul><li>一部分用户 windows 自带的那个存放 BootLoader 的分区小的可怜(虽然BootLoader也很小)</li><li>另一方面是为了防止损坏 windows 原本的引导</li></ul><h4 id="6-3-4-分区方案">6.3.4 分区方案</h4><p>首先在你的 windows 中使用 windows 自带的磁盘管理分出 200G 左右的 free space, 下面是我实体机的分区情况:</p><table><thead><tr><th>1G</th><th>\boot</th><th>fat32</th></tr></thead><tbody><tr><td>8G</td><td>swap</td><td>swap</td></tr><tr><td>The rest</td><td>\</td><td>ext4</td></tr></tbody></table><blockquote><p>每个人可以按照自己的偏好进行调整, 由于我的实体机已经安装完成, 于是下边在虚拟机中进行演示, 数据按照表格来</p></blockquote><ol><li><p>磁盘分区: MBR 格式的硬盘使用fdisk(cfdisk 图形界面),GPT 格式的硬盘使用gdisk(cgdisk 图形界面);<br>最后一定要写入分区表才有效, 即输入w, 具体的方法我不多讲, 还是简单的;</p></li><li><p>查看分区后磁盘情况, 使用命令:</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">lsblk                        # 查看分区情况, 如下图<br></code></pre></td></tr></table></figure><p><img src="/img/archlinux_intro/disk_partition.png" alt=""></p><div class="note note-success">            <p>注: 这个是我已经安装好的虚拟机双系统, 我已经把预留的60G分成了20G windows + 30G Arch; 然后我又把这个 30G 分成: 512M的/boot:/dev/nvme0n1p6 + 4G的swap:/dev/nvme0n1p7 + 30.5GM的/dev/nvme0n1p8</p>          </div><ol start="3"><li>格式化分区:其实应该叫做格式化文件系统, 常见的文件系统如下:</li></ol><ul><li>windows 下的FAT,  FAT16,  FAT32,  NTFS文件系统</li><li>Linux 下的ext2, ext3, ext4, SGI’s XFS, btrfs 文件系统</li></ul><p>输入以下的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 制作boot分区,  必须为fat格式</span><br>mkfs.fat -F32 /dev/nvme0n1p6<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 制作swap分区</span><br>mkswap /dev/nvme0n1p7<br>swapon /dev/nvme0n1p7<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 制作主分区的文件系统</span><br>mkfs.ext4 /dev/nvme0n1p8<br><span class="hljs-meta prompt_"># </span><span class="language-bash">或 mkfs -t ext4 /dev/nvme0n1p8</span>                    <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. 最好在使用fdisk -l 或者是 lsblk查看各个文件系统的情况</span><br></code></pre></td></tr></table></figure><h3 id="6-4-安装基本系统">6.4 安装基本系统</h3><h4 id="6-4-1-软件源配置">6.4.1 软件源配置</h4><p>因为Arch使用 pacman 作为包管理器, 所以你应该先编辑一下pacman的配置文件, 设置pacman的下载仓库有哪些, 不然仓库没有的话你就会缺少依赖, 然后就会一直改bug. pacman配置文件位于 <code>/etc/pacman.conf</code>, 运行如下的命令进行编辑:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim   /etc/pacman.conf<br></code></pre></td></tr></table></figure><p>打开后你会看到Arch自带有三个软件源</p><ul><li>[core]</li><li>[extra]</li><li>[community]</li></ul><p>但是你还应该把另外一个软件源给解封（它默认是被注释了的）—&gt; 给两行解除注释, 就是 <code>[multilib]</code>, 它的作用就是提供 32 位支持库。</p><blockquote><p>你还可以在添加一个archlinuxcn这个源, 但是它不是官方的源, 是我们中国人自己搞的</p></blockquote><p>在刚才的那个/etc/pacman.conf文件里边加入下边的内容即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">[archlinuxcn]<br>Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch                   # 中国科学技术大学开源镜像站<br>Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch          # 清华大学开源软件镜像站<br>Server = https://mirrors.hit.edu.cn/archlinuxcn/$arch                    # 哈尔滨工业大学开源镜像站<br>Server = https://repo.huaweicloud.com/archlinuxcn/$arch                  # 华为开源镜像站<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装这个源你还需要运行下边的命令,安装签名</span><br>sudo pacman -S archlinuxcn-keyring<br><span class="hljs-meta prompt_"># </span><span class="language-bash">最后相比大家安装Arch的一大原因就是看上了它的AUR吧, 据说就没有上边找不到的野包。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">为此你只需要下载一个yay就行了, yay就可以从AUR中下载软件</span><br>sudo pacman -S yay<br></code></pre></td></tr></table></figure><blockquote><p>你也可以编辑 pacman 的镜像源, 把中国的镜像源放在最前边, 可能网速会好一点, 和前边的禁用 reflector 一样</p></blockquote><p>最后就是要更新一下你的系统, 万一不是最新的, 但时候在安装的结束之际给你弹个ERROR出来, 相信我你会裂开的, 怎么更新呢?很简单, 运行下边的命令就可以了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo pacman -Syyu<br></code></pre></td></tr></table></figure><h4 id="6-4-2-硬盘安装">6.4.2 硬盘安装</h4><p>其实你细心一点就会对发现, 我们的配置都是改的U盘里边的那个系统, 即ISO文件, 根本没有和我们的安装硬盘扯上半点的关系, 毕竟我们是要把Arch安装到电脑的硬盘上, 而不是一个U盘里边。所以要怎么把Arch安装到电脑的硬盘上呢?</p><p>这里就涉及到一个Linux下的常用命令: <strong>挂载</strong></p><ul><li><p>什么是挂载? 其实就是把你的储存设备(文件系统, 分区)挂到一个Linux的目录下边, 然后被挂载的目录就叫**挂载点。**你从挂载点进去就是进入了你的那个储存设备</p></li><li><p>什么是目录? 比如 windows下的 <code>C:\users\..\Desktop</code> 就是一个目录, <code>(C:\users\..\)Desktop</code> 就是挂载点.</p></li></ul><p>只不过我们在 Linux 下使用的是 <code>/mnt</code> 这个目录, 作为挂载点; 所以就很简单了, 只需要把电脑的硬盘的分区挂载到 <code>/mnt</code> 目录下, 我们在这个U盘的系统里边, 把东西下载到 <code>/mnt</code> 目录下, 就等于我们把东西下载到电脑的硬盘上了.</p><p>回归正题:</p><ol><li>我们要把 Arch 的系统主要内容安装在主分区, 就是最大的那个 ext4 玩意儿, 也就是 <code>/dev/nvme0n1p6</code></li><li>还得把 Arch 的引导安装在 <code>/boot</code> 分区, 也就是 <code>/dev/nvme0n1p8</code></li></ol><p>挂载操作相关命令如下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1.挂载主分区</span><br>mount /dev/nvme0n1p8 /mnt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2.挂载引导分区</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">这也就是他们说的挂载必须从根目录开始的原因, 你不可能直接挂到boot上吧（都没有这个目录呢）</span><br>mkdir /mnt/boot <br><span class="hljs-meta prompt_"># </span><span class="language-bash">此时Arch的pacstrap脚本就会自动把系统的引导安装到这里</span>                                                <br>mount /dev/nvme0n1p6 /mnt/boot                  <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3.检查挂载情况</span><br>ls /mnt<br><span class="hljs-meta prompt_"># </span><span class="language-bash">如果出现 lost + found 就说明已经挂载上了</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">或是是使用lsblk来查看挂载点</span><br></code></pre></td></tr></table></figure><p>接下来就可以开始下载东西来安装了,这么久的前期工作, 终于等来安装了;使用如下的命令即可:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">pacstrap \mnt base linux linux-firmware base-devel vim<br><span class="hljs-meta prompt_"># </span><span class="language-bash">安装过程中一定不能出现报错</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">各个参数的解释:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. pacstrap: <span class="hljs-built_in">arch</span> 自带的一个安装东西的脚本, 可以看作你们平时用的p2p下载, 华军软件源下载, 或者是2345超级下载之类的</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. \mnt: 表示下载的东西放在那里, 因为我们要把Arch安装在主分区是吧, 前边我们也把主分区挂载到了/mnt下,后边的就是要下载的东西。千万别少装, 后边出bug你就知道回来了</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. base: 基础软件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. linux: linux的内核,也可以使用其它的内核, 如 linux-lts, linux-zen. 我使用的是 linux-zen</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">5. linux-firmware: 固件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">6. base-devel:编译的工具, 含有gcc之类的, 提供了make命令等。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">7. vim: 文本编辑器</span><br></code></pre></td></tr></table></figure><blockquote><p>有小伙伴可能还会问, 你上边不是说在Linux下, 文件系统是从 <code>/</code> 开始的吗? 而且U盘里变的文件系统是从 <code>/</code> 开始的吗? 怎么又多了一个 <code>/mnt</code> 和 <code>/boot</code> 目录出来呢?</p></blockquote><p>这个是安装 Arch 过程中的另外一个操作:叫做 <code>arch-chroot</code>; 别着急,后边我们会详细讲解这个命令</p><h4 id="6-4-3-fatab文件">6.4.3 fatab文件</h4><p>首先恭喜你走到了这一步, 很多人在前边就放弃了, 离胜利不远了; 那么fstab有什么用呢? 还记得我们之前说的吗? 我们是不是手动的把我们的分区挂载到了一些目录下边。但是你的电脑肯定得关机吧, 那么重新开机以后你又得手动去挂载, 麻烦吗? 所以生成 fstab 文件就是在电脑开机后自动读取这个fstab文件, 然后挂载相关的文件系统, 使用如下命令:</p><blockquote><p>这里的文件系统就是指的分区, 因为一般情况下, 一个分区只能有一个文件系统</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 生成 fstab 文件</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">&gt;: 覆盖重写; &gt;&gt;: 表示追加在文件末尾</span><br>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab          <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 查看fstab文件得信息,检查fstab是否配置成功</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">如果是重新生成可以使用:genfstab -U /mnt &gt; /mnt/etc/fstab</span>            <br>cat /mnt/etc/fstab<br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">cat</span> 是常用得Linux下的查看文件命令</span><br></code></pre></td></tr></table></figure><h3 id="6-5-基本环境配置">6.5 基本环境配置</h3><p>走完上边的流程, 你得到了一个很简洁的系统, 简洁到代码编辑器,  dhcpcd, 反正要啥没啥。还有就是,现在的系统你肯定很不适应: 语言为英文, 时间也不对 … 但是先别急, 我们还得完成一个操作, 就是前边提到得一个命令 —— <code>arch-chroot</code>. 它有什么用呢? 字面上看就是改变 (change) 根 (root)目录。那么实际意义是什么呢? 对了, 就是这个字面意义</p><p>那个改变根目录有什么作用呢?前边我们是不是说过, 在Linux下一切得目录都是从 <code>/</code> 开始的, 也就是说, <code>/</code> 就是最顶层的目录, 你不能够到达比 <code>/</code> 目录更上边的目录了</p><blockquote><p>这样就可以起到保护你的学习资料, 从而免于被别人偷看</p></blockquote><p>同时, 它也会改变你的工作目录, 你原来是在 <code>/mnt</code> 下(U盘里), 现在你就在 <code>/</code> 下了(电脑硬盘里,也就是的的新安装的Arch系统里面)这样也就能够解释上边的问题了. 使用如下命令切换根目录:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">arch-chroot /mnt<br><span class="hljs-meta prompt_"># </span><span class="language-bash">此时你的命令提示符会从 root@archiso ~<span class="hljs-comment"># 变为 [root@archiso /]</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">然后就可以执行下边的设置了</span><br></code></pre></td></tr></table></figure><div class="note note-success">            <p>如果你之前在安装时配置了vim, 并且发现在新的系统里边少了一些配置文件, vim使用起来不顺手的话, 你可以退出当前的新系统。你在新系统里边没有你的vim配置文件, 因为你只能使用原来的/mnt下你安装的文件, 而你的vim配置文件在/mnt的上级, 你说, 你怎么使用?此时退出新系统, 进入U盘中的系统重新配置一下, copy过来即可, 使用如下命令退出新系统*</p>          </div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">exit<br><span class="hljs-meta prompt_"># </span><span class="language-bash">退出新系统</span><br></code></pre></td></tr></table></figure><h4 id="6-5-1-locale-设置">6.5.1 locale 设置</h4><p><strong>时区设置</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br></code></pre></td></tr></table></figure><p><strong>硬件时钟的同步</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hwclock --systohc<br></code></pre></td></tr></table></figure><p><strong>设置locale</strong><br>什么是locale?实际上就是生活习惯, 根据不同地区人们的不同的生活习惯, 电脑会调整相应的有关东西, 比如语言, 货币, 日期格式等。也就是说让Arch知道我们是中国人, 你的配置得按着我们中国人的习惯来</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">nano /etc/locale.gen<br><span class="hljs-meta prompt_"># </span><span class="language-bash">取消以下两行得注释</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">使用vim的/, 搜索字符串:</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&quot;#en_US&quot;</span> -&gt; 回车, 找到 <span class="hljs-string">&quot;UTF-8&quot;</span> 那一行 删掉前面的 <span class="hljs-string">&#x27;#&#x27;</span>（取消注释）</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&quot;#zh_CN&quot;</span> -&gt; 回车, 找到 <span class="hljs-string">&quot;UTF-8&quot;</span> 那一行 删掉前面的 <span class="hljs-string">&#x27;#&#x27;</span>（取消注释）</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">% </span><span class="language-bash">生成locale, 因为上边解除注释只是代表我们能用这个locale</span><br>locale-gen<br></code></pre></td></tr></table></figure><p><strong>新建 /etc/locale.conf</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/locale.conf <br><span class="hljs-meta prompt_"># </span><span class="language-bash">就是设置你的系统语言了, 添加下边的内容</span><br>LANG=en_US.UTF-8<br><span class="hljs-meta prompt_"># </span><span class="language-bash">不要改成中文的, 不然会造成 <span class="hljs-built_in">tty</span> 乱码</span><br></code></pre></td></tr></table></figure><h4 id="6-5-2-设置-host">6.5.2 设置 host</h4><ol><li>设置 hostname</li></ol><p>那些改host文件的windows玩家, 这个东西, 你们肯定熟悉吧。你随便设一个英文名就行了, 但是下边配置host的时候名字得一致</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/hostname<br><span class="hljs-meta prompt_"># </span><span class="language-bash">直接填入的hostname即可</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">比如我设置为 Archlinux</span><br></code></pre></td></tr></table></figure><ol start="2"><li>设置 host</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/hosts<br><span class="hljs-meta prompt_"># </span><span class="language-bash">然后在里边输入如下的内容</span><br>127.0.0.1      localhost<br>::1            localhost<br>127.0.1.1      Archlinux.domain        Archlinux<br><span class="hljs-meta prompt_"># </span><span class="language-bash">提示: 是 tab 键, 不是空格</span><br></code></pre></td></tr></table></figure><h4 id="6-5-3-设置-root-密码">6.5.3 设置 root 密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">passwd<br><span class="hljs-meta prompt_"># </span><span class="language-bash">然后会叫你输入密码, 不会实时的显示在屏幕上, 但是你的确是输入进去了的</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">最后会叫你确认你的密码, 所以不用担心密码输错</span><br></code></pre></td></tr></table></figure><h3 id="6-6-多操作系统引导">6.6 多操作系统引导</h3><p>如果你只需要安装单个 Linux 操作系统, 那么这一部分你可以直接跳过; 对于需要安装 Linux+Windows 双系统, 甚至是多个操作系统, 包括 MacOS, 亦或者是多个 Linux 系统的用户来说, 多个操作系统的引导是一个很重要的话题:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">pacman -S grub efibootmgr  intel-ucode os-prober<br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. intel-ucode: 厂家为电脑的cpu更新驱动</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">amd 的 cpu 就安装 amd-ucode</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. grub: 上边说过了, 不多讲</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. efibootmgr: efibootmgr 被 grub 脚本用来将启动项写入 NVRAM</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. os-prober: 发现 windows 操作系统的引导</span><br></code></pre></td></tr></table></figure><h4 id="6-6-1-GRUB基本配置">6.6.1 GRUB基本配置</h4><p>具体的详细步骤和参数意义可以参见 Arch 官方维基, 下面以命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">fdisk -l<br></code></pre></td></tr></table></figure><p>来进行相关信息的查看.可用的参考信息有: 磁盘类型, <code>ESP分区</code> 位置（本例中就是寻找 <code>bootmgfw.efi</code> 所在的分区位置）, 相关命令输出如下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@Archlinux zpd]# fdisk -l<br>Disk /dev/nvme0n1: 931.51 GiB, 1000204886016 字节, 1953525168 个扇区<br>磁盘型号: WD_BLACK SN770 1TB<br>单元: 扇区 / 1 * 512 = 512 字节<br>扇区大小(逻辑/物理): 512 字节 / 512 字节<br>I/O 大小(最小/最佳): 512 字节 / 512 字节<br>磁盘标签类型: gpt<br>磁盘标识符: 0042EA61-A4D7-452B-9DFA-0AF034C48726<br><br>设备                  起点       末尾       扇区   大小 类型<br>/dev/nvme0n1p1        2048     411647     409600   200M EFI 系统<br>/dev/nvme0n1p2      411648     444415      32768    16M Microsoft 保留<br>/dev/nvme0n1p3      444416 1371561983 1371117568 653.8G Microsoft 基本数据<br>/dev/nvme0n1p4  1925212160 1926260735    1048576   512M Windows 恢复环境<br>/dev/nvme0n1p5  1926260736 1951426559   25165824    12G Windows 恢复环境<br>/dev/nvme0n1p6  1951426560 1953523711    2097152     1G Windows 恢复环境<br>/dev/nvme0n1p7  1505779712 1507876863    2097152     1G Linux 文件系统<br>/dev/nvme0n1p8  1507876864 1524654079   16777216     8G Linux 文件系统<br></code></pre></td></tr></table></figure><p>所以我们要寻找的分区就是: <code>/dev/nvme0n1p1</code>, 然后使用如下命令进行挂载操作,挂载点为: <code>/boot</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mount /dev/nvme0n1p1 /boot<br></code></pre></td></tr></table></figure><blockquote><p>为了保险起见, 可以查看一下其中是否存在 EFI 文件夹</p></blockquote><p>然后使用 <code>os-prober</code> 工具查找 <code>bootmgf.efi</code>, 运行如下的命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">os-prober<br></code></pre></td></tr></table></figure><blockquote><p>os-prober 官方认为启动别的操作系统是不安全的, 所以就默认禁用了 os-prober 查找其他操作系统启动文件的功能. 尽管不自动启用, 但你仍然可以修改这一默认行为. 在文件 <code>/etc/default/grub</code> 中增加配置项:<code>GRUB_DISABLE_OS_PROBER=false</code>, 然后再生成我们的 GRUB 配置文件</p></blockquote><p>如果你可以得到类似如下输出, 就说明 <code>os-prober</code> 找到了 windows 的启动引导项了:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@Archlinux zpd]# os-prober<br>/dev/nvme0n1p1@/EFI/Microsoft/Boot/bootmgfw.efi:Windows Boot Manager:Windows:efi<br></code></pre></td></tr></table></figure><p>之后就是如下的常规操作:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 创建一个文件夹</span><br>mkdir /boot/grub<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 生成配置文件</span><br>grub-mkconfig &gt; /boot/grub/grub.cfg         <br><span class="hljs-meta prompt_"># </span><span class="language-bash">也可以用: grub-mkconfig -o /boot/grub/grub.cfg</span><br></code></pre></td></tr></table></figure><h4 id="6-6-2-GRUB-主题">6.6.2 GRUB 主题</h4><p>GRUB 默认的主题是纯黑白的, 大概就像下面这样(示例图片选自:<a href="https://www.techmesto.com/set-windows-as-default-in-linux-dual-boot/">linux-grub-windows-dual-boot</a>):</p><p><img src="/img/archlinux_intro/linux-grub-windows-dual-boot.png" alt="linux-grub-windows-dual-boot"></p><p>可能部分的用户并不喜欢, 所以我们可以自定义这个 grub 菜单界面的主题。这里采用的工具是: <a href="https://github.com/vinceliuice/grub2-themes">grub2-themes</a>, 它提供的主题样式如下:</p><p><img src="/img/archlinux_intro/grub-theme-preview.png" alt=""></p><p>这个工具的使用十分的简单, 只需参考仓库对应的README即可, 但是我还是在这里补充一些易错点.其实主要的问题就出现在 os-prober 寻找 windows 的 <code>.efi</code> 上, 下面是我在默认的 windows 和 Linux 的引导都正常下的配置<br>方法:</p><ol><li>首先把 Windows 的 <code>.efi</code> 文件对应的分区挂载到 Linux 的 <code>/boot/EFI</code> 文件夹下, windows 的 <code>.efi</code> 文件在我这里位于 <code>/dev/nvme0n1p1</code> 分区. 所以使用命令: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mount /dev/nvme0n1p1 /boot/EFI<br></code></pre></td></tr></table></figure></li><li>然后运行命令: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo os-prober<br></code></pre></td></tr></table></figure>看一看是否能检测到 Linux 和 Windows 两个系统的启动文件, 如果正常的话, 应该会有类似如下的输出: <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo grub-mkcontig temp.cfg</span><br>Generating grub configuration file ...<br>Found theme:/usr/share/grub/themes/vimix/theme.txt<br>Found linux image:/boot/vmlinuz-linux-zen<br>Found initrd image:/boot/intel-ucode.img /boot/initramfs-linux-zen.img<br>Found fallback initrd image(s)in /boot:intel-ucode.img initramfs-linux-zen-fallback.img<br>Warning:os-prober will be executed to detect other bootable partitions<br>Its output will be used to detect bootable binaries on them and create new boot entries.<br>Found Windows Boot Manager on /dev/nvmeon1p1@/EFI/Microsoft/Boot/bootmgfw.efi<br>Adding boot menu entry for UEFI Firmware Settings ..<br>done<br></code></pre></td></tr></table></figure>尤其得关注那个 <code>Windows Boot Manager</code> 项.</li><li>如果以上两步均正常, 那么最后可以使用 grub2-themes 提供的脚本命令生成对应的 grub 配置 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo ./install.sh -t vimix -s 1080p<br></code></pre></td></tr></table></figure>最后再检查一下对应的 grub 配置文件: <code>/boot/grub/grub.cfg</code> 是否正常, 我最后的文件长这样(不要抄袭, 每个人的情况是不同的): <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># DO NOT EDIT THIS FILE</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># It is automatically generated by grub-mkconfig using templates</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">from /etc/grub.d and settings from /etc/default/grub</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"></span><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/00_header ###</span></span><br>insmod part_gpt<br>insmod part_msdos<br>if [ -s $prefix/grubenv ]; then<br>load_env<br>fi<br>if [ &quot;$&#123;next_entry&#125;&quot; ] ; then<br>set default=&quot;$&#123;next_entry&#125;&quot;<br>set next_entry=<br>save_env next_entry<br>set boot_once=true<br>else<br>set default=&quot;0&quot;<br>fi<br><br>if [ x&quot;$&#123;feature_menuentry_id&#125;&quot; = xy ]; then<br>menuentry_id_option=&quot;--id&quot;<br>else<br>menuentry_id_option=&quot;&quot;<br>fi<br><br>export menuentry_id_option<br><br>if [ &quot;$&#123;prev_saved_entry&#125;&quot; ]; then<br>set saved_entry=&quot;$&#123;prev_saved_entry&#125;&quot;<br>save_env saved_entry<br>set prev_saved_entry=<br>save_env prev_saved_entry<br>set boot_once=true<br>fi<br><br>function savedefault &#123;<br>if [ -z &quot;$&#123;boot_once&#125;&quot; ]; then<br>    saved_entry=&quot;$&#123;chosen&#125;&quot;<br>    save_env saved_entry<br>fi<br>&#125;<br><br>function load_video &#123;<br>if [ x$feature_all_video_module = xy ]; then<br>    insmod all_video<br>else<br>    insmod efi_gop<br>    insmod efi_uga<br>    insmod ieee1275_fb<br>    insmod vbe<br>    insmod vga<br>    insmod video_bochs<br>    insmod video_cirrus<br>fi<br>&#125;<br><br>if [ x$feature_default_font_path = xy ] ; then<br>font=unicode<br>else<br>insmod part_gpt<br>insmod ext2<br>search --no-floppy --fs-uuid --set=root 95e4daca-8211-4bb5-8407-1bfd1123e560<br>    font=&quot;/usr/share/grub/unicode.pf2&quot;<br>fi<br><br>if loadfont $font ; then<br>set gfxmode=1920x1080,auto<br>load_video<br>insmod gfxterm<br>set locale_dir=$prefix/locale<br>set lang=en_US<br>insmod gettext<br>fi<br>terminal_input console<br>terminal_output gfxterm<br>insmod part_gpt<br>insmod ext2<br>search --no-floppy --fs-uuid --set=root 95e4daca-8211-4bb5-8407-1bfd1123e560<br>insmod gfxmenu<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_12.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_14.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_16.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_24.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_32.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/dejavu_sans_48.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/terminus-12.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/terminus-14.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/terminus-16.pf2<br>loadfont ($root)/usr/share/grub/themes/vimix/terminus-18.pf2<br>insmod jpeg<br>insmod png<br>set theme=($root)/usr/share/grub/themes/vimix/theme.txt<br>export theme<br>if [ x$feature_timeout_style = xy ] ; then<br>set timeout_style=menu<br>set timeout=-1<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Fallback normal <span class="hljs-built_in">timeout</span> code <span class="hljs-keyword">in</span> <span class="hljs-keyword">case</span> the timeout_style feature is</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">unavailable.</span><br>else<br>set timeout=-1<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/00_header ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/10_linux ###</span></span><br>menuentry &#x27;Arch Linux, with Linux linux-zen&#x27; --class arch --class gnu-linux --class gnu --class os $menuentry_id_option &#x27;gnulinux-linux-zen-advanced-95e4daca-8211-4bb5-8407-1bfd1123e560&#x27; &#123;<br>    savedefault<br>    load_video<br>    set gfxpayload=keep<br>    insmod gzio<br>    insmod part_gpt<br>    insmod fat<br>    search --no-floppy --fs-uuid --set=root F8A7-B7F8<br>    echo&#x27;Loading Linux linux-zen ...&#x27;<br>    linux/vmlinuz-linux-zen root=UUID=95e4daca-8211-4bb5-8407-1bfd1123e560 rw  loglevel=5 quiet nowatchdog<br>    echo&#x27;Loading initial ramdisk ...&#x27;<br>    initrd/intel-ucode.img /initramfs-linux-zen.img<br>&#125;<br>menuentry &#x27;Arch Linux, with Linux linux-zen (fallback initramfs)&#x27; --class arch --class gnu-linux --class gnu --class os $menuentry_id_option &#x27;gnulinux-linux-zen-fallback-95e4daca-8211-4bb5-8407-1bfd1123e560&#x27; &#123;<br>    savedefault<br>    load_video<br>    set gfxpayload=keep<br>    insmod gzio<br>    insmod part_gpt<br>    insmod fat<br>    search --no-floppy --fs-uuid --set=root F8A7-B7F8<br>    echo&#x27;Loading Linux linux-zen ...&#x27;<br>    linux/vmlinuz-linux-zen root=UUID=95e4daca-8211-4bb5-8407-1bfd1123e560 rw  loglevel=5 quiet nowatchdog<br>    echo&#x27;Loading initial ramdisk ...&#x27;<br>    initrd/intel-ucode.img /initramfs-linux-zen-fallback.img<br>&#125;<br>menuentry &#x27;Arch Linux, with Linux linux-zen (recovery mode)&#x27; --class arch --class gnu-linux --class gnu --class os $menuentry_id_option &#x27;gnulinux-linux-zen-recovery-95e4daca-8211-4bb5-8407-1bfd1123e560&#x27; &#123;<br>    load_video<br>    set gfxpayload=keep<br>    insmod gzio<br>    insmod part_gpt<br>    insmod fat<br>    search --no-floppy --fs-uuid --set=root F8A7-B7F8<br>    echo&#x27;Loading Linux linux-zen ...&#x27;<br>    linux/vmlinuz-linux-zen root=UUID=95e4daca-8211-4bb5-8407-1bfd1123e560 rw single <br>    echo&#x27;Loading initial ramdisk ...&#x27;<br>    initrd/intel-ucode.img /initramfs-linux-zen-fallback.img<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/10_linux ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/20_linux_xen ###</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/20_linux_xen ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/25_bli ###</span></span><br>if [ &quot;$grub_platform&quot; = &quot;efi&quot; ]; then<br>insmod bli<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/25_bli ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/30_os-prober ###</span></span><br>menuentry &#x27;Windows Boot Manager (on /dev/nvme0n1p1)&#x27; --class windows --class os $menuentry_id_option &#x27;osprober-efi-94D9-50AD&#x27; &#123;<br>    savedefault<br>    insmod part_gpt<br>    insmod fat<br>    search --no-floppy --fs-uuid --set=root 94D9-50AD<br>    chainloader /EFI/Microsoft/Boot/bootmgfw.efi<br>&#125;<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/30_os-prober ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/30_uefi-firmware ###</span></span><br>if [ &quot;$grub_platform&quot; = &quot;efi&quot; ]; then<br>    fwsetup --is-supported<br>    if [ &quot;$?&quot; = 0 ]; then<br>        menuentry &#x27;UEFI Firmware Settings&#x27; $menuentry_id_option &#x27;uefi-firmware&#x27; &#123;<br>            fwsetup<br>        &#125;<br>    fi<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/40_custom ###</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">This file provides an easy way to add custom menu entries.  Simply <span class="hljs-built_in">type</span> the</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">menu entries you want to add after this comment.  Be careful not to change</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">the <span class="hljs-string">&#x27;exec tail&#x27;</span> line above.</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/40_custom ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/41_custom ###</span></span><br>if [ -f  $&#123;config_directory&#125;/custom.cfg ]; then<br>source $&#123;config_directory&#125;/custom.cfg<br>elif [ -z &quot;$&#123;config_directory&#125;&quot; -a -f  $prefix/custom.cfg ]; then<br>source $prefix/custom.cfg<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/41_custom ###</span></span><br></code></pre></td></tr></table></figure>然后取消挂载, 重启, 即可看到效果</li></ol><p>再说一说我在这个过程中遇到的另一个坑吧. 我当时把 <code>/dev/nvme0n1p1</code> 分区挂载到了 <code>/boot</code> 目录下, 然后再运行 os-prober 命令就只能找到 Windows 的启动文件, 但是就找不到 Linux 的启动文件了, 这种情况下输出的 <code>grub.cfg</code> 文件大概长这样:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># DO NOT EDIT THIS FILE</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># It is automatically generated by grub-mkconfig using templates</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">from /etc/grub.d and settings from /etc/default/grub</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"></span><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/00_header ###</span></span><br>insmod part_gpt<br>insmod part_msdos<br>if [ -s $prefix/grubenv ]; then<br>  load_env<br>fi<br>if [ &quot;$&#123;next_entry&#125;&quot; ] ; then<br>   set default=&quot;$&#123;next_entry&#125;&quot;<br>   set next_entry=<br>   save_env next_entry<br>   set boot_once=true<br>else<br>   set default=&quot;0&quot;<br>fi<br><br>if [ x&quot;$&#123;feature_menuentry_id&#125;&quot; = xy ]; then<br>  menuentry_id_option=&quot;--id&quot;<br>else<br>  menuentry_id_option=&quot;&quot;<br>fi<br><br>export menuentry_id_option<br><br>if [ &quot;$&#123;prev_saved_entry&#125;&quot; ]; then<br>  set saved_entry=&quot;$&#123;prev_saved_entry&#125;&quot;<br>  save_env saved_entry<br>  set prev_saved_entry=<br>  save_env prev_saved_entry<br>  set boot_once=true<br>fi<br><br>function savedefault &#123;<br>  if [ -z &quot;$&#123;boot_once&#125;&quot; ]; then<br>    saved_entry=&quot;$&#123;chosen&#125;&quot;<br>    save_env saved_entry<br>  fi<br>&#125;<br><br>function load_video &#123;<br>  if [ x$feature_all_video_module = xy ]; then<br>    insmod all_video<br>  else<br>    insmod efi_gop<br>    insmod efi_uga<br>    insmod ieee1275_fb<br>    insmod vbe<br>    insmod vga<br>    insmod video_bochs<br>    insmod video_cirrus<br>  fi<br>&#125;<br><br>if [ x$feature_default_font_path = xy ] ; then<br>   font=unicode<br>else<br>insmod part_gpt<br>insmod ext2<br>search --no-floppy --fs-uuid --set=root 95e4daca-8211-4bb5-8407-1bfd1123e560<br>    font=&quot;/usr/share/grub/unicode.pf2&quot;<br>fi<br><br>if loadfont $font ; then<br>  set gfxmode=1920x1080,auto<br>  load_video<br>  insmod gfxterm<br>  set locale_dir=$prefix/locale<br>  set lang=en_US<br>  insmod gettext<br>fi<br>terminal_input console<br>terminal_output gfxterm<br>if [ x$feature_timeout_style = xy ] ; then<br>  set timeout_style=menu<br>  set timeout=-1<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Fallback normal <span class="hljs-built_in">timeout</span> code <span class="hljs-keyword">in</span> <span class="hljs-keyword">case</span> the timeout_style feature is</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">unavailable.</span><br>else<br>  set timeout=-1<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/00_header ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/10_linux ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/10_linux ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/20_linux_xen ###</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/20_linux_xen ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/25_bli ###</span></span><br>if [ &quot;$grub_platform&quot; = &quot;efi&quot; ]; then<br>  insmod bli<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/25_bli ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/30_os-prober ###</span></span><br>menuentry &#x27;Windows Boot Manager (on /dev/nvme0n1p1)&#x27; --class windows --class os $menuentry_id_option &#x27;osprober-efi-94D9-50AD&#x27; &#123;<br>savedefault<br>insmod part_gpt<br>insmod fat<br>search --no-floppy --fs-uuid --set=root 94D9-50AD<br>chainloader /EFI/Microsoft/Boot/bootmgfw.efi<br>&#125;<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/30_os-prober ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/30_uefi-firmware ###</span></span><br>if [ &quot;$grub_platform&quot; = &quot;efi&quot; ]; then<br>fwsetup --is-supported<br>if [ &quot;$?&quot; = 0 ]; then<br>menuentry &#x27;UEFI Firmware Settings&#x27; $menuentry_id_option &#x27;uefi-firmware&#x27; &#123;<br>fwsetup<br>&#125;<br>fi<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/40_custom ###</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">This file provides an easy way to add custom menu entries.  Simply <span class="hljs-built_in">type</span> the</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">menu entries you want to add after this comment.  Be careful not to change</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">the <span class="hljs-string">&#x27;exec tail&#x27;</span> line above.</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/40_custom ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/41_custom ###</span></span><br>if [ -f  $&#123;config_directory&#125;/custom.cfg ]; then<br>  source $&#123;config_directory&#125;/custom.cfg<br>elif [ -z &quot;$&#123;config_directory&#125;&quot; -a -f  $prefix/custom.cfg ]; then<br>  source $prefix/custom.cfg<br>fi<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/41_custom ###</span></span><br></code></pre></td></tr></table></figure><p>可以看到:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## BEGIN /etc/grub.d/10_linux ###</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">## END /etc/grub.d/10_linux ###</span></span><br></code></pre></td></tr></table></figure><p>之间根本就没有任何的 Linux 启动选项, 所以导致我的 GRUB 菜单中只有一个 windows 启动项. 但是我这次并没有通过 LiveCD 进行对应的 <code>grub.cfg</code> 文件的更改, 我直接在 Windows 下使用 <code>Disk Genius</code> 修改的. 操作示意图如下:</p><p><img src="/img/archlinux_intro/disk_genius_grub.png" alt="disk genius -- grub.cfg"></p><p>上图中的那个 <code>分区(4)</code> 其实就是我那个 Linux 文件系统下的 <code>/boot</code> 文件夹, 所以我们要修改的文件就是那个: <code>grub.cfg</code>, 修改好之后, 再替换原始的文件.重启系统, 马上恢复正常引导.</p><blockquote><p>不建议新手像我这样手动修改 <code>grub.cfg</code> 文件, 但是如果你熟悉这个文件的结构和语法, 那我反而更推崇手写这个文件, archlinux 的官方文档中也有对应的 grub 启动菜单配置教程: <a href="https://wiki.archlinux.org/title/GRUB#Boot_menu_entry_examples">grub menu</a></p></blockquote><p>最后的效果如下:</p><p><img src="/img/archlinux_intro/grub_menu.jpg" alt="grub menu"></p><blockquote><p>实体机的 GRUB menu 界面不好截图，手机像素有点差，将就看吧</p></blockquote><h4 id="6-6-3-救赎-–-引导丢失">6.6.3 救赎 – 引导丢失</h4><p>下面就说一个我亲身体验的:系统引导丢失, 无法进入系统的案件</p><blockquote><p>某次我使用 timeshift 恢复系统时, 它问我要不要恢复 grub 引导, 然后我选择了同意。自然而然的, 重启后无法进入系统了（Arch 和 windows）。就连启动 windows 都只能够进入 BIOS 进行选择启动项了, 也就是说我的GRUB崩了。</p></blockquote><p>然后我就重新制作了一个启动盘, 进入 LiveCD 模式, 也就是 Arch 的安装时的模式。重新把 Arch 的主分区和 boot 分区分别挂载在了<code>/mnt</code> 和 <code>/mnt/boot</code> 目录.</p><blockquote><p>尽量不要颠倒下面命令的执行顺序</p></blockquote><ol><li>重新生成了 fstab 文件</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab<br></code></pre></td></tr></table></figure><ol start="2"><li>重新安装了 Arch 的内核, 也就是如下的命令:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pacstrap \mnt  linux<br></code></pre></td></tr></table></figure><ol start="3"><li>重新挂载 windows 的 ESP 分区到 <code>/mnt/boot</code> 目录. 使用命令</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">os-prober<br></code></pre></td></tr></table></figure><p>找到 Linux 和 Windows 的引导文件</p><ol start="4"><li>重新生成 GRUB 的启动引导项</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">grub-mkconfig &gt; /boot/grub/grub.cfg         <br><span class="hljs-meta prompt_"># </span><span class="language-bash">也可以用:  grub-mkconfig -o /boot/grub/grub.cfg</span><br></code></pre></td></tr></table></figure><ol start="5"><li>最后</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">exit<br></code></pre></td></tr></table></figure><p>重启, GRUB 成功引导 arch 和 Windows 两个系统</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@Archlinux zpd]# grub-mkconfig &gt; /boot/grub/grub.cfg<br>正在生成 grub 配置文件 ...<br>警告:  os-prober 将运行以检测其它可引导分区。<br>将使用 os-prober 的输出, 以检测分区中可引导的二进制文件, 并为其创建新的启动项。<br>发现了 Windows Boot Manager, 位于 /dev/nvme0n1p1@/EFI/Microsoft/Boot/bootmgfw.efi<br>正在添加 UEFI 固件设置的引导菜单项……<br>完成<br></code></pre></td></tr></table></figure><h3 id="6-7-基本软件">6.7 基本软件</h3><h4 id="6-7-1-计算机联网">6.7.1 计算机联网</h4><p>为了方便之后的网络连接以及管理, 我个人安装了如下软件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo pacman -S networkmanager network-manager-applet  wpa_supplicant<br></code></pre></td></tr></table></figure><h4 id="6-7-2-其余软件">6.7.2 其余软件</h4><p>还有一部分额外的软件, 可以根据个人喜好进行安装:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo pacman -S mtools git dosfstools ntfs-3g sudo linux-headers<br><span class="hljs-meta prompt_"># </span><span class="language-bash">1. mtools, dosfstools: Linux下的工具程序</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. git: 分布式版本管理工具</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. ntfs-3g: 兼容ntfs文件系统</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">4. sudo: 不多讲了</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">5. linux-headers: 就是格式规范的、可以被编译器识别的软件接口规格书</span><br></code></pre></td></tr></table></figure><h4 id="6-7-3-完成安装">6.7.3 完成安装</h4><p>完成以上的所有任务后, 恭喜你, 你得到了一个 Archlinux 系统, 蓝色双面鹰永在. 退出安装, 准备进行系统:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">exit          # 退出安装环境<br>umountmnt     # 取消文件系统的挂载<br>reboot        # 重启<br></code></pre></td></tr></table></figure><h3 id="6-8-进入系统">6.8 进入系统</h3><h4 id="6-8-1-连接网络">6.8.1 连接网络</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">设置开机自启并且现在就启动</span><br>systemctl enable --now NetworkManager<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">进入图形化的wifi连接界面</span><br>nmtui<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">每天一边遍,防止滚挂</span><br>sudo pacman -Syyu<br></code></pre></td></tr></table></figure><h4 id="6-8-2-root-默认编辑器">6.8.2 root 默认编辑器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim  ~/.bash.profile<br><span class="hljs-meta prompt_"># </span><span class="language-bash">添加如下的内容</span><br>export EDITOR=&#x27;vim&#x27;<br></code></pre></td></tr></table></figure><h4 id="6-8-3-准备非-root-用户">6.8.3 准备非 root 用户</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 添加用户</span><br>useradd -m -G wheel  &lt;your name&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 创建密码, 注意别去改root</span><br>passwd &lt;your name&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">3. 取消wheel用户组的注释</span><br>EDITOR=vim visudo                                    <br><span class="hljs-meta prompt_"># </span><span class="language-bash">也就是去掉 <span class="hljs-comment">#%wheel ALL=(ALL) AL前边的注释</span></span><br></code></pre></td></tr></table></figure><h4 id="6-8-4-DE-环境安装">6.8.4 DE 环境安装</h4><p>我这里的教程只保证你们安装好基本的 Display server, 至于你们喜欢什么桌面环境, 这个也许需要你自己去选择.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1. 安装显示服务</span><br>sudo pacman -S xorg                <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2. 安装显卡驱动</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2.1 核显:Intel</span><br>sudo pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel    <br><span class="hljs-meta prompt_"># </span><span class="language-bash">amd请参见:archwiki</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">2.2 独立显卡</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">A 卡</span><br>pacman -S xf86-video-amdgpu        <br><span class="hljs-meta prompt_"># </span><span class="language-bash">N 卡</span><br>pacman -S nvidia nvidia-utils      <br></code></pre></td></tr></table></figure><h4 id="6-8-5-平铺桌面">6.8.5 平铺桌面</h4><p>如果用户喜欢轻量化的平铺桌面管理器, 我这里倒是有一个推荐的配置: <a href="https://github.com/yaocccc/dwm">yaocccc-dwm</a>. 配置好的效果大概是这样: <a href="https://www.bilibili.com/video/BV1Ef4y1Z7kA/?share_source=copy_web&amp;vd_source=a9d745bfbf443d7fec13113cdd89ee46">yaocccc-dwm-showoff</a>. 我目前的桌面大概长这样:</p><p><img src="/img/archlinux_intro/dwm-example.png" alt="dwm-example"></p><h2 id="7-日前现状">7 日前现状</h2><h3 id="7-1-痛点">7.1 痛点</h3><p>Windows 上的那些软件自然不能迁移到 Linux 下, 如:</p><ul><li>大型工业软件如 SolidWorks, AutoCAD, Matlab.</li><li>还有数学软件 Mathematica, Maple.</li><li>最后就是 Adobe 系列</li></ul><p>这些东西都没有办法迁移(大部分的用户应该都用不起正版 + 找不到linux的&quot;科技&quot;版). 可是既然你已经开始使用 Linux 了, 就说明你应该接纳 Linux, 上边的要求(要求 Linux 有 Windows 上的软件),也许有些过于的苛刻了. Linux 完全可以反问一句:我为什么要有这些软件呢? 的确也是这个道理。其实如果仅仅只是想要体验一下, 装个虚拟机, 尽管性能比较差, 但是也够了.</p><h3 id="7-2-软件推荐">7.2 软件推荐</h3><div class="note note-danger">            <p>我现在又用回 Windows 了, weztrem 这个终端模拟器 + WSL2 还是很能打的.</p>          </div><p>但是在Linux下我的日常生活所需基本都能够满足, 主要是依靠如下的软件:</p><ol><li>写作: LaTeX, WPS; 目前我使用 LaTeX 写论文, 制作演示文稿, 对应的表格需求很少</li><li>音乐: spotify, 网易云(而且有人基于网页端封装了一个), qqMusic 还不错</li><li>代码: Jetbrain 全家桶 + (n)vim, code-oss(VScode 的开源版本)</li><li>文档查看器: okular, zathura</li><li>交友通讯: linuxqq, 微信暂时无解, Telegram</li><li>科学上网: V2aray, clash-for-windows, 现在那个 <code>dae</code> 似乎比较的火.</li><li>终端: simple-terminal(suckless), wezterm(目前在 Windows 上用着很舒服，打算迁移到 Linux 上), konsole 还不错</li><li>终端小工具: ranger, yazi, autojump,</li></ol><blockquote><p>这两个东西是类似于端口代理的, 不是其他的VPN软件那样全局的代理, 附注一张图,懂得自然懂:</p></blockquote><p><img src="/img/archlinux_intro/proxy.png" alt="取自知乎"></p><ol start="7"><li><p>浏览器: Vivalda, Chrome</p></li><li><p>剪辑绘图: kdenlive, Gimp, krita, inkscape</p></li><li><p>输入法: fcxit5+rime, 好像还有一个 <code>oh-my-rime</code> 感兴趣的可以看看.</p><blockquote><p>输入法的坑:  在某些应用中无法切换中文输入, 比如 dolphin, gedit, telegram …</p></blockquote><p>解决方法也是比较简单的，首先运行命令进行输入法的配置检查:</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">fcitx-diagnose                        <br><span class="hljs-meta prompt_"># </span><span class="language-bash">或者是 fcitx-diagnose 来查看潜在问题（你按照它的提示基本都可以 解决bug）</span><br></code></pre></td></tr></table></figure><p>基本都是更改以下的几个配置文件:</p><ul><li><code>/etc/profile</code></li><li><code>～/.xprofile</code></li><li><code>/etc/environment</code></li></ul></li><li><p>专业软件: Matlab ☞ Octave, Mathematica</p></li></ol><h3 id="7-3-DE-相关">7.3 DE 相关</h3><p>目前我的桌面环境是: 我没有桌面环境(DE), 我用的就是简单的 <code>xorg</code> + <code>picom</code> + <code>dwm</code>.个人感觉其他的 GUI 太重了, 不喜欢. 至于游戏, 我不打游戏的, 据说 Linux 的游戏体验不咋的.</p><h2 id="8-Linux-基础知识-技巧">8. Linux 基础知识/技巧</h2><p>新手刚接触 Linux 难免会有些摸不着头脑，我自己平时也总结了一些常用技巧，就列在这里，希望能帮助到大家.</p><blockquote><p>下面的部分技巧可能并不是通用的，请注意</p></blockquote><h3 id="8-1-zsh-终端小技巧">8.1 zsh 终端小技巧</h3><ul><li><code>&amp;</code>      : 在一个命令后面添加&amp;可以把命令放到后台执行</li><li><code>ctrl + z</code>  : 把正在前台执行的命令放到后台并“暂停”（在命令行窗口输出）</li><li><code>jobs</code>      : 查看当前在后台执行的命令</li><li><code>fg %[num]</code> : 将后台命令调到前台(这里的num不是pid,是jobs命令返回的进程编号)，对应的命令bg</li><li><code>ps</code>        : 列出系统中正在运行的进程（很少，很实用）</li><li><code>htop</code>      : 列出系统进程（更加的详细的系统进程信息，比较多）</li><li><code>Ctrl + r</code>  : 搜索历史命令</li></ul><h3 id="8-2-系统管理员知识">8.2 系统管理员知识</h3><ul><li><code>sudo pacman -S package_name</code> # 安装软件包</li><li><code>pacman -Ss</code> # 在同步数据库中搜索包，包括包的名称和描述</li><li><code>sudo pacman -Syyu</code> # 升级系统。-yy：标记强制刷新、-u：标记升级动作</li><li><code>sudo pacman -Rns package_name</code> # 删除软件包，及其所有没有被其他已安装软件包使用的依赖包</li><li><code>sudo pacman -R package_name</code> # 删除软件包，保留其全部已经安装的依赖关系</li><li><code>pacman -Qi package_name</code> # 检查已安装包的相关信息。-Q：查询本地软件包数据库</li><li><code>pacman -Qdt</code> # 找出孤立包。-d：标记依赖包、-t：标记不需要的包、-dt：合并标记孤立包</li><li><code>sudo pacman -Fy</code> # 更新命令查询文件列表数据库</li><li><code>pacman -F some_command</code> # 当不知道某个命令属于哪个包时，用来在远程软件包中查询某个命令属于哪个包（即使没有安装）</li><li><code>pactree package_name</code> # 查看一个包的依赖树)</li><li><code>sudo pacman -Rns $(pacman -Qtdq)   </code> # 删除孤立软件包（常用）</li><li><code>sudo pacman -Sc</code> # 删除当前未安装的所有缓存包和未使用的同步数据库（可选）</li><li><code>sudo pacman -Scc</code> # 从缓存中删除所有文件，这是最激进的方法，不会在缓存文件夹中留下任何内容（一般不使用）</li><li><code>paccache -r</code> # 删除已安装和未安装包的所有缓存版本，但最近 3 个版本除外)</li></ul><h3 id="8-3-系统服务的管理">8.3 系统服务的管理</h3><ul><li><code>systemctl start dhcpcd</code> # 启动服务</li><li><code>systemctl stop dhcpcd</code> # 停止服务</li><li><code>systemctl restart dhcpcd</code> # 重启服务</li><li><code>systemctl reload dhcpcd</code> # 重新加载服务以及它的配置文件</li><li><code>systemctl status dhcpcd</code> # 查看服务状态</li><li><code>systemctl enable dhcpcd</code> # 设置开机启动服务</li><li><code>systemctl enable --now dhcpcd</code> # 设置服务为开机启动并立即启动这个单元</li><li><code>systemctl disable dhcpcd</code> # 取消开机自动启动</li><li><code>systemctl daemon-reload dhcpcd</code> # 重新载入 systemd 配置。扫描新增或变更的服务单元、不会重新加载变更的配置</li></ul><h3 id="8-4-top-命令">8.4 top 命令</h3><ul><li><code>z</code>: 开启高亮</li><li><code>x</code>: 高亮一列</li><li><code>b</code>: 高亮一行</li><li><code>&gt;/&lt;</code>: 进行左右移动</li></ul><h3 id="8-5-其余技巧">8.5 其余技巧</h3><ul><li><code>nohup &lt;cmd&gt; &amp;</code>: 让命令在后台运行,不输出运行日志</li><li><code>pkill</code>: 可以杀死一个进程的父进程和子进程</li><li><code>pstree</code>: 显示进程树</li><li><code>htop</code>: 显示进程信息，支持鼠标操作/排序</li></ul><h2 id="9-配置文件">9 配置文件</h2><h3 id="9-1-zshrc">9.1 zshrc</h3><p>这里给一部分我的 zsh 终端的配置文件吧，个人感觉对于新手有一定的帮助.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Zsh的语言高亮和建议</span><br>source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh<br>source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh<br>[[ -s /etc/profile.d/autojump.sh ]] &amp;&amp; source /etc/profile.d/autojump.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">use comand <span class="hljs-string">&quot;env&quot;</span> to find out</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">export</span> PS1=<span class="hljs-string">&quot;%n@%c &gt;&gt; &quot;</span></span><br>if [[ $(tty) == &quot;/dev/tty1&quot; ]] &#123;<br>export PS1=&quot; --&gt; &quot;<br>&#125; else &#123;<br>export PS1=&quot;  &quot;<br>&#125; <br>export dwm=~/Downloads/dwm-yaoccc<br>export Desktop=/mnt/Users/PC/Desktop<br>export qqmusic=/opt/apps/com.qq.music.deepin/files/run.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置终端的语言为英文</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">export</span> LANG=en_US</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">alias</span>:命令别名设置</span><br>alias l=&#x27;exa --long --git&#x27;<br>alias c=clear<br>alias v=vim<br>alias nv=nvim<br>alias za=zathura<br>alias r=ranger<br>alias rm=&#x27;rm -i&#x27;<br>alias s=source<br>alias p=pwd<br>alias chrome=google-chrome-stable<br>alias xmind=/opt/XMind-2020/data/opt/XMind/XMind<br>alias telegram=telegram-desktop<br>alias tor=tor-browser<br>alias camera=kamoso<br>alias manim=/home/zpd/.local/bin/manim<br>alias clion=/opt/clion-2022.2.1/bin/clion.sh<br>alias wine=deepin-wine5<br>alias neo=neofetch<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">挂载windows</span><br>function mnt_win()&#123;<br>  sudo mount /dev/nvme0n1p3 /mnt <br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">更新pacman的镜像源</span><br>function mirrors()&#123;<br>  curl -s &quot;https://archlinux.org/mirrorlist/?country=CN&amp;protocol=https&amp;use_mirror_status=on&quot; | sed -e &#x27;s/^#Server/Server/&#x27; -e &#x27;/^#/d&#x27; | rankmirrors -n 5 - <br>&#125;<br>function udp_mir()&#123;<br>  mirrors &gt;&gt; ./mirrors_latest<br>  sudo rm -f /etc/pacman.d/mirrorlist<br>  sudo mv ./mirrors_latest /etc/pacman.d/mirrorlist<br>  cat /etc/pacman.d/mirrorlist<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查找应用程序pid</span><br>function pid()&#123;<br><span class="hljs-meta prompt_">   # </span><span class="language-bash">program_name=$(pstree -p | grep <span class="hljs-variable">$1</span> | <span class="hljs-built_in">head</span> -1)</span><br>   program_name=$(ps -ef|grep $1)<br>   echo $&#123;program_name&#125;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置软件代理,并非系统代理</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">dae+daed based</span><br>function proxyon()&#123;<br>sudo systemctl enable --now dae<br>daed run &gt; /dev/null 2&gt;&amp;1&amp; <br>echo -e &quot;\nProxy ready, open http://localhost:2023 to start proxying.\nNote:Close proxy in the panel before command &#x27;proxyoff&#x27;.&quot;<br>&#125;<br>function proxyoff()&#123;<br>sudo systemctl disable --now dae<br>pkill dae<br>sudo pkill daed<br>unset http_proxy<br>unset https_proxy<br>unset all_proxy<br>echo -e &quot;\nUnset http,https,all proxy, proxy off&quot;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">外接显示屏设置</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">默认笔记本放在副屏的右边,下面这条命令可以把显示器放在屏幕的左边</span><br>function scrtoleft()&#123;<br>    xrandr --output eDP-1 --left-of HDMI-1<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-2-wezterm">9.2 wezterm</h3><p>个人对于 wezterm 这个终端模拟器的评价非常高，而且还跨平台，支持图片查看, 支持终端复用, 也许将来会把 linux 下的 st 换为 wezterm. 我的配置文件很简单，如下:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">------------ Init ------------</span><br><span class="hljs-keyword">local</span> wezterm = <span class="hljs-built_in">require</span> <span class="hljs-string">&#x27;wezterm&#x27;</span><br><span class="hljs-keyword">local</span> act = wezterm.action<br><span class="hljs-keyword">local</span> <span class="hljs-built_in">config</span> = &#123;&#125;<br><span class="hljs-keyword">if</span> wezterm.config_builder <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">config</span> = wezterm.config_builder()<br><span class="hljs-keyword">end</span><br><br><br><br><span class="hljs-comment">---------- Basic windows config ------------</span><br><span class="hljs-comment">-- cli: wezterm start --position 500,200</span><br><span class="hljs-built_in">config</span>.default_cwd = <span class="hljs-string">&#x27;C:/Users/PC/Desktop/&#x27;</span><br><span class="hljs-built_in">config</span>.enable_tab_bar = <span class="hljs-literal">false</span><br><span class="hljs-built_in">config</span>.tab_bar_at_bottom = <span class="hljs-literal">true</span><br><span class="hljs-built_in">config</span>.window_decorations = <span class="hljs-string">&quot;RESIZE&quot;</span><br><span class="hljs-built_in">config</span>.window_close_confirmation = <span class="hljs-string">&#x27;NeverPrompt&#x27;</span><br><span class="hljs-built_in">config</span>.initial_cols = <span class="hljs-number">90</span><br><span class="hljs-built_in">config</span>.initial_rows = <span class="hljs-number">25</span><br><span class="hljs-built_in">config</span>.window_padding = &#123; left = <span class="hljs-number">2</span>, right = <span class="hljs-number">2</span>, top = <span class="hljs-number">0</span>, bottom = <span class="hljs-number">0</span> &#125;<br><br><br><br><span class="hljs-comment">---------- Themes config ------------</span><br><span class="hljs-comment">-- opcity and blur</span><br><span class="hljs-built_in">config</span>.window_background_opacity = <span class="hljs-number">.85</span><br><span class="hljs-comment">-- config.win32_system_backdrop = &#x27;Acrylic&#x27;</span><br><span class="hljs-built_in">config</span>.font_size = <span class="hljs-number">15</span><br><span class="hljs-comment">-- color scheme</span><br><span class="hljs-built_in">config</span>.color_scheme = <span class="hljs-string">&#x27;Dracula+&#x27;</span><br><span class="hljs-comment">-- shell</span><br><span class="hljs-built_in">config</span>.default_prog = &#123; <span class="hljs-string">&#x27;C:/Program Files/PowerShell/7/pwsh.exe&#x27;</span>, <span class="hljs-string">&#x27;-l&#x27;</span> &#125;<br><span class="hljs-comment">-- cursor</span><br><span class="hljs-built_in">config</span>.default_cursor_style = <span class="hljs-string">&quot;BlinkingBar&quot;</span><br><span class="hljs-built_in">config</span>.cursor_blink_rate = <span class="hljs-number">800</span><br><span class="hljs-built_in">config</span>.cursor_thickness = <span class="hljs-string">&quot;1px&quot;</span><br><span class="hljs-comment">-- font: WezTerm bundles JetBrains Mono, Nerd Font Symbols and Noto Color Emoji fonts and uses those for the default font configuration.</span><br><br><br><br><span class="hljs-comment">---------- Launch menu ------------</span><br><span class="hljs-built_in">config</span>.launch_menu = &#123;<br>  <span class="hljs-comment">-- cmd-&#x27;-l&#x27;:show login log</span><br>  &#123; label = <span class="hljs-string">&#x27;cmd&#x27;</span>, args = &#123;<span class="hljs-string">&#x27;cmd&#x27;</span>, <span class="hljs-string">&#x27;-l&#x27;</span>&#125;, cwd = <span class="hljs-string">&#x27;C:/Users/PC&#x27;</span> &#125;,<br>&#125;<br><br><br><br><span class="hljs-comment">---------- Key bindings ------------</span><br><span class="hljs-comment">-- Activate copy mode: Ctrl + Shift + X (vim-like copy mode)</span><br><span class="hljs-built_in">config</span>.keys = &#123;<br>  <span class="hljs-comment">-- 1.tab key bindings</span><br>  <span class="hljs-comment">-- New Tab, Close Tab</span><br>  &#123; key = <span class="hljs-string">&#x27;n&#x27;</span>,              mods = <span class="hljs-string">&#x27;CTRL&#x27;</span>,          action = act.SpawnTab <span class="hljs-string">&#x27;CurrentPaneDomain&#x27;</span>             &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;q&#x27;</span>,              mods = <span class="hljs-string">&#x27;CTRL&#x27;</span>,          action = act.CloseCurrentTab  &#123; confirm = <span class="hljs-literal">true</span> &#125;      &#125;,<br><br>  <span class="hljs-comment">-- 2. panes key bindings</span><br>  <span class="hljs-comment">-- search in cli(&#x27;CRAL+R&#x27; to cycle through &#x27;case-sensitive&#x27;, &#x27;ignoring case&#x27;, &#x27;regular&#x27;)</span><br>  &#123; key = <span class="hljs-string">&#x27;F&#x27;</span>,              mods = <span class="hljs-string">&#x27;SHIFT|CTRL&#x27;</span>,    action = act.Search&#123; CaseInSensitiveString = <span class="hljs-string">&#x27;&#x27;</span> &#125;      &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;s&#x27;</span>,              mods = <span class="hljs-string">&#x27;SHIFT|CTRL&#x27;</span>,    action = act.Search( <span class="hljs-string">&quot;CurrentSelectionOrEmptyString&quot;</span> ) &#125;,<br>  <span class="hljs-comment">-- Split Pane</span><br>  &#123; key = <span class="hljs-string">&quot;Enter&quot;</span>,          mods = <span class="hljs-string">&#x27;CTRL|SHIFT&#x27;</span>,    action = act.SplitHorizontal  &#123; domain = <span class="hljs-string">&#x27;CurrentPaneDomain&#x27;</span> &#125; &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;h&#x27;</span>,              mods = <span class="hljs-string">&#x27;CTRL|SHIFT&#x27;</span>,    action = act.SplitVertical    &#123; domain = <span class="hljs-string">&#x27;CurrentPaneDomain&#x27;</span> &#125; &#125;,<br>  <span class="hljs-comment">-- Adjust Pane</span><br>  &#123; key = <span class="hljs-string">&#x27;LeftArrow&#x27;</span>,      mods = <span class="hljs-string">&#x27;CTRL|SHIFT&#x27;</span>,    action = act.AdjustPaneSize   &#123; <span class="hljs-string">&#x27;Left&#x27;</span>,  <span class="hljs-number">2</span> &#125; &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;RightArrow&#x27;</span>,     mods = <span class="hljs-string">&#x27;CTRL|SHIFT&#x27;</span>,    action = act.AdjustPaneSize   &#123; <span class="hljs-string">&#x27;Right&#x27;</span>, <span class="hljs-number">2</span> &#125; &#125;,<br>  <span class="hljs-comment">-- Rotates panes,Swith pane </span><br>  &#123; key = <span class="hljs-string">&#x27;r&#x27;</span>,              mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.RotatePanes <span class="hljs-string">&#x27;CounterClockwise&#x27;</span>  &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;Enter&#x27;</span>,          mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.TogglePaneZoomState             &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;s&#x27;</span>,              mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.PaneSelect       &#123; alphabet = <span class="hljs-string">&#x27;1234567890&#x27;</span>, mode = <span class="hljs-string">&#x27;SwapWithActive&#x27;</span>&#125; &#125;,<br>  <span class="hljs-comment">-- Active pane</span><br>  &#123; key = <span class="hljs-string">&#x27;LeftArrow&#x27;</span>,      mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.ActivatePaneDirection <span class="hljs-string">&#x27;Left&#x27;</span>    &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;RightArrow&#x27;</span>,     mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.ActivatePaneDirection <span class="hljs-string">&#x27;Right&#x27;</span>   &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;UpArrow&#x27;</span>,        mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.ActivatePaneDirection <span class="hljs-string">&#x27;Up&#x27;</span>      &#125;,<br>  &#123; key = <span class="hljs-string">&#x27;DownArrow&#x27;</span>,      mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.ActivatePaneDirection <span class="hljs-string">&#x27;Down&#x27;</span>    &#125;,<br><br>  <span class="hljs-comment">-- 3. show launcher</span><br>  &#123; key = <span class="hljs-string">&#x27;m&#x27;</span>,              mods = <span class="hljs-string">&#x27;ALT&#x27;</span>,           action = act.ShowLauncher                    &#125;,<br>&#125;<br><br><br><br><span class="hljs-comment">---------- Mouse Config ------------</span><br><span class="hljs-built_in">config</span>.mouse_bindings = &#123;<br>  <span class="hljs-comment">-- 1. windows drag</span><br>  &#123; event = &#123; Drag = &#123; streak = <span class="hljs-number">1</span>, button = <span class="hljs-string">&#x27;Left&#x27;</span> &#125; &#125;, mods = <span class="hljs-string">&#x27;CTRL&#x27;</span>,  action = act.StartWindowDrag, &#125;,<br>  <span class="hljs-comment">-- 2. open hyper link</span><br>  &#123; event = &#123; Up =   &#123; streak = <span class="hljs-number">1</span>, button = <span class="hljs-string">&#x27;Left&#x27;</span> &#125; &#125;, mods = <span class="hljs-string">&#x27;CTRL&#x27;</span>,  action = act.OpenLinkAtMouseCursor, &#125;,<br>&#125;<br><br><br><br><span class="hljs-comment">-- return configuration to wezterm</span><br><span class="hljs-keyword">return</span> <span class="hljs-built_in">config</span> <br></code></pre></td></tr></table></figure><p>在 windows 上的效果如图:</p><p><img src="/img/archlinux_intro/wezterm_1.png" alt="wezterm I"><br><img src="/img/archlinux_intro/wezterm_2.png" alt="wezterm II"></p><h2 id="10-一篇文章">10 一篇文章</h2><p>我最近看到的一篇关于Linux的文章:<a href="https://zongpingding.github.io/2024/03/26/work_with_linux/">王垠-完全使用Linux工作</a>, 你们也可以看一看, 应该可以改变很多人对 Linux 的刻板印象.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>calculus_of_variation</title>
    <link href="/2024/03/26/calculus_of_variation/"/>
    <url>/2024/03/26/calculus_of_variation/</url>
    
    <content type="html"><![CDATA[<h2 id="问题提出">问题提出</h2><p>针对变分问题：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>G</mi><mo fence="true" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>y</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo fence="true" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo><mo>=</mo><msubsup><mo>∫</mo><msub><mi>x</mi><mn>0</mn></msub><msub><mi>x</mi><mn>1</mn></msub></msubsup><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mi>d</mi><mi>x</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>y</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>0</mn></msub><mo separator="true">,</mo><mspace width="1em"/><mi>y</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\left\{\begin{aligned}&amp; G\bigl[y(x)\bigr]=\int_{x_0}^{x_1}F(x, y, y&#x27;)dx \\&amp; y(x_0) = y_0,\quad y(x_1) = y_1 \end{aligned}\right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.2263em;vertical-align:-1.8632em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-2.2em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.192em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.316em' style='width:0.8889em' viewBox='0 0 888.89 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.316em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.8889em' height='0.316em' style='width:0.8889em' viewBox='0 0 888.89 316' preserveAspectRatio='xMinYMin'><path d='M384 0 H504 V316 H384z M384 0 H504 V316 H384z'/></svg></span></span><span style="top:-4.6em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3632em;"><span style="top:-4.3632em;"><span class="pstrut" style="height:3.4143em;"></span><span class="mord"></span></span><span style="top:-2.2111em;"><span class="pstrut" style="height:3.4143em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8632em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3632em;"><span style="top:-4.3632em;"><span class="pstrut" style="height:3.4143em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">G</span><span class="mopen"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mclose"><span class="delimsizing size1">]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4143em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.012em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-2.2111em;"><span class="pstrut" style="height:3.4143em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8632em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>根据<code>变分法基本原理</code></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>δ</mi><mi>G</mi><mo>=</mo><msubsup><mo>∫</mo><msub><mi>x</mi><mn>0</mn></msub><msub><mi>x</mi><mn>1</mn></msub></msubsup><mrow><mo fence="true">(</mo><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><mfrac><mrow><mi mathvariant="normal">d</mi><msub><mi>F</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub></mrow><mrow><mi mathvariant="normal">d</mi><mi>x</mi></mrow></mfrac><mo fence="true">)</mo></mrow><mo>⋅</mo><mi>δ</mi><mi>y</mi><mtext>  </mtext><mi mathvariant="normal">d</mi><mi>x</mi><mo>=</mo><mn>0</mn></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\delta G = \int_{x_0}^{x_1}\left(F_y - \dfrac{ {\rm d}F_{y&#x27;} }{ {\rm d}x }\right)\cdot\delta y\;\mathrm{d}x = 0\tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.462em;vertical-align:-1.012em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4143em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.012em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathrm">d</span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">δy</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span><span class="tag"><span class="strut" style="height:2.462em;vertical-align:-1.012em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></p><h2 id="拉格朗日引理">拉格朗日引理</h2><p>然后这里给出一个<code>拉格朗日引理</code></p><blockquote><p>拉格朗日引理(Лемма Лагранжа)：若对于每个连续函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\eta(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span>, 有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><msubsup><mo>∫</mo><msub><mi>t</mi><mn>0</mn></msub><msub><mi>t</mi><mn>1</mn></msub></msubsup><mi mathvariant="normal">Φ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi>η</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi>d</mi><mi>t</mi><mo>=</mo><mn>0</mn></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle\int_{t_0}^{t_1}\Phi(t)\eta(t)dt=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.5555em;vertical-align:-1.012em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5435em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.8129em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.012em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">Φ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ,这里 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Φ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Phi(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Φ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span> 在区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>t</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>t</mi><mn>1</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[t_0, t_1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> 上连续，则在该区间上 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Φ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>≡</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\Phi(t) \equiv 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Φ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p></blockquote><h2 id="E-L方程">E-L方程</h2><p>于是根据上面给出的拉格朗日引理，我们可以得到<code>E-L方程</code></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><mfrac><mrow><mi mathvariant="normal">d</mi><msubsup><mi>F</mi><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup></mrow><mrow><mi mathvariant="normal">d</mi><mi>x</mi></mrow></mfrac><mo>=</mo><mn>0</mn></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">F_y - \dfrac{\mathrm{d} F_y&#x27;}{\mathrm{d}x} = 0 \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.211em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.525em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathrm">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7731em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathrm">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span><span class="tag"><span class="strut" style="height:2.211em;vertical-align:-0.686em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p>对上述的<code>E-L方程</code>展开可以得到:</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><mfrac><mrow><mi mathvariant="normal">d</mi><msubsup><mi>F</mi><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup></mrow><mrow><mi mathvariant="normal">d</mi><mi>x</mi></mrow></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><mrow><mo fence="true">(</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>F</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>F</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub></mrow><mrow><mi mathvariant="normal">∂</mi><mi>y</mi></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>y</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>F</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub></mrow><mrow><mi mathvariant="normal">∂</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mrow><mi mathvariant="normal">∂</mi><mi>x</mi></mrow></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>x</mi></mrow></msub><mo>−</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>y</mi></mrow></msub><mo>−</mo><msup><mi>y</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}F_y - \dfrac{\mathrm{d}F_y&#x27;}{\mathrm{d}x} &amp; = F_y - \left(\dfrac{\partial F_{y&#x27;}}{\partial x}\cdot \dfrac{\partial {x}}{\partial x} + \dfrac{\partial F_{y&#x27;}}{\partial y}\cdot \dfrac{\partial {y}}{\partial x} +\dfrac{\partial F_{y&#x27;}}{\partial y&#x27;}\cdot \dfrac{\partial {y&#x27;}}{\partial x}\right) \\&amp; = F_y - F_{y&#x27;x} - y&#x27;F_{y&#x27;y} - y&#x27;&#x27;F_{y&#x27;y&#x27;} \\&amp; = 0\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.775em;vertical-align:-2.6375em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1375em;"><span style="top:-5.1375em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.525em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathrm">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7731em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathrm">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.0475em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"></span></span><span style="top:-1.5475em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.6375em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1375em;"><span style="top:-5.1375em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6779em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4289em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-3.0475em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.5475em;"><span class="pstrut" style="height:3.525em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.6375em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>可以得到<code>E-L方程</code>的另一种形式</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>F</mi><mi>y</mi></msub><mo>−</mo><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>x</mi></mrow></msub><mo>−</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>y</mi></mrow></msub><mo>−</mo><msup><mi>y</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><msub><mi>F</mi><mrow><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">F_y - F_{y&#x27;x} - y&#x27;F_{y&#x27;y} - y&#x27;&#x27;F_{y&#x27;y&#x27;} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.088em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.088em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p>]]></content>
    
    
    
    <tags>
      
      <tag>Math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Easyimage图床搭建</title>
    <link href="/2024/03/26/easy_image/"/>
    <url>/2024/03/26/easy_image/</url>
    
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>这里主要是基于以下仓库: <a href="https://github.com/icret/EasyImages2.0">EasyImages2.0I</a></p><p>之前参考的多篇文章都是使用宝塔面板来进行安装EasyImage，但是我在这里坚决不使用宝塔，你使用宝塔就相当于把自己的root权限给了别人，把你的整个计算机给了别人。所以坚持自己搭建，对于宝塔是否留有后门先存疑?</p><p>还有一点值得吐糟的就是网上大部分的教程有如下弊端:</p><ul><li>基于宝塔搭建（甚至官方github仓库都是这个方法，我不知道为什么）</li><li>大部分的教程都是错的，甚至我在某个教程中发现了如下的代码:  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-comment">// 顺便可以看一下php的扩展全不全</span><br>    <span class="hljs-title function_ invoke__">phpinfo</span>();<br></code></pre></td></tr></table></figure>完整的代码不应该是这样的吗?  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-comment">// 顺便可以看一下php的扩展全不全</span><br>    <span class="hljs-title function_ invoke__">phpinfo</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure></li></ul><blockquote><p>本博客主要<a href="https://chenhaotian.top/linux-app/easy-image/index.html">参考文章</a></p></blockquote><h2 id="主要步骤">主要步骤</h2><p>基本全部都是照着上面的博客来，但是我做了如下改变，把原文去修改如下的文件<code>/etc/nginx/sites-enabled/default</code>变成了目录 <code>/etc/nginx/conf.d/</code>中增加配置<code>server</code>项<code>easyimage.conf</code>，主要内容如下:</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs toml">server &#123;<br>    server_name zpding.tech<span class="hljs-comment">;</span><br>    listen 9000<span class="hljs-comment">;</span><br>    root /var/www/EasyImages2.0/<span class="hljs-comment">;</span><br>    index index.php index.html<span class="hljs-comment">;</span><br><br>    client_header_timeout 300s<span class="hljs-comment">;</span><br>    client_body_timeout 300s<span class="hljs-comment">; # 防止大图片上传超时</span><br>    client_max_body_size 2000m<span class="hljs-comment">; # 应不小于100m，防止上传大图片 HTTP 413 错误</span><br><br>    location / &#123;<br>        try_files $uri $uri/ =404<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~ \.php$ &#123;<br>        include snippets/fastcgi-php.conf<span class="hljs-comment">;</span><br>        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~ /\.ht &#123;<br>        deny all<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~* ^/(config|docs|i|public)/.*\.(php|php5)$ &#123;<br>        deny all<span class="hljs-comment">; # 安全设置</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>同时也没有采用他的SSL证书的方法，目前仅打算个人使用，而且关键的是目前我只有一个域名。所以就暂时不绑定了，但是看到一篇文章说是可以一个域名绑定多个端口:<a href="https://juejin.cn/s/nginx%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AA%E5%9F%9F%E5%90%8D%E5%A4%9A%E4%B8%AA%E7%AB%AF%E5%8F%A3">nginx配置一个域名多个端口</a></p><p>目前服务器在国内，不打算备案，所以还没有去研究，等之后再研究.</p><h2 id="文章备份">文章备份</h2><blockquote><ul><li>为了防止参考博客删除，在此做一备份</li><li>以下所有操作均在root下进行</li></ul></blockquote><h3 id="安装PHP相关">安装PHP相关</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt update -y<br></code></pre></td></tr></table></figure><h3 id="PHP本体">PHP本体</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt install php7.4 php7.4-fpm<br></code></pre></td></tr></table></figure><h3 id="拓展">拓展</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt install php7.4-fileinfo php7.4-iconv php7.4-zip php7.4-mbstring php7.4-gd<br></code></pre></td></tr></table></figure><h3 id="PHP接口配置">PHP接口配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/php/7.4/fpm/php.ini<br></code></pre></td></tr></table></figure><p>查找 <code>upload_max_filesize</code>, <code>post_max_size</code>, <code>memory_limit</code>,按需求设置，然后重启PHP</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart php7.4-fpm<br></code></pre></td></tr></table></figure><h3 id="安装Nginx">安装Nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt install nginx<br></code></pre></td></tr></table></figure><h3 id="安装easyimage">安装easyimage</h3><p>首先就是clone它的github仓库:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /var/www/<br>git clone https://github.com/icret/EasyImages2.0.git<br></code></pre></td></tr></table></figure><h4 id="权限修改">权限修改</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod -R 755 /var/www/EasyImages2.0/<br>chown -R www-data:www-data /var/www/EasyImages2.0/<br></code></pre></td></tr></table></figure><h4 id="配置Nginx">配置Nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/nginx/conf.d/easyimage.conf<br></code></pre></td></tr></table></figure><p>然后贴入最开始的内容:</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs toml">server &#123;<br>    server_name zpding.tech<span class="hljs-comment">;</span><br>    listen 9000<span class="hljs-comment">;</span><br>    root /var/www/EasyImages2.0/<span class="hljs-comment">;</span><br>    index index.php index.html<span class="hljs-comment">;</span><br><br>    client_header_timeout 300s<span class="hljs-comment">;</span><br>    client_body_timeout 300s<span class="hljs-comment">; # 防止大图片上传超时</span><br>    client_max_body_size 2000m<span class="hljs-comment">; # 应不小于100m，防止上传大图片 HTTP 413 错误</span><br><br>    location / &#123;<br>        try_files $uri $uri/ =404<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~ \.php$ &#123;<br>        include snippets/fastcgi-php.conf<span class="hljs-comment">;</span><br>        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~ /\.ht &#123;<br>        deny all<span class="hljs-comment">;</span><br>    &#125;<br><br>    location ~* ^/(config|docs|i|public)/.*\.(php|php5)$ &#123;<br>        deny all<span class="hljs-comment">; # 安全设置</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="启动Nginx">启动Nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">nginx -t<br><span class="hljs-meta prompt_"># </span><span class="language-bash">这一步是可选的</span><br>nginx -s reload<br>systemctl restart nginx<br></code></pre></td></tr></table></figure><p>SSL证书获得</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt install certbot python3-certbot-nginx<br>certbot --nginx -d your_domain zpding.tech<br><span class="hljs-meta prompt_"># </span><span class="language-bash">测试SSL证书自动更新</span><br>certbot renew --dry-run<br></code></pre></td></tr></table></figure><p>安装环境部署完毕，访问你的域名即可进行网站初始化</p><h2 id="成果">成果</h2><p>在服务器中的具体位置如下:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">user@GhostBlog:~$ l /var/www/EasyImages2.0/i/2023/12/19/<br>total 11612<br>drwxr-xr-x 2 www-data www-data    4096 Dec 18 17:11 .<br>drwxr-xr-x 3 www-data www-data    4096 Dec 18 17:11 ..<br>-rw-r--r-- 1 www-data www-data  317469 Dec 18 17:11 1u4vvf.png<br>-rw-r--r-- 1 www-data www-data 5832718 Dec 18 17:11 1u52is.png<br>-rw-r--r-- 1 www-data www-data 5722964 Dec 18 17:11 1u5e21.png<br></code></pre></td></tr></table></figure><blockquote><p>当然了，时间不同目录也就不同了</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>图床</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Introduction to Hexo and Fluid</title>
    <link href="/2024/03/26/introduction_to_hexo_and_fluid/"/>
    <url>/2024/03/26/introduction_to_hexo_and_fluid/</url>
    
    <content type="html"><![CDATA[<p>摘要：本篇博客主要注重于Hexo和Fluid主题的安装和使用，尤其是LeTeX的配置。</p><span id="more"></span><p>以下是Hexo的基本使用教程，主要涵盖以下部分</p><ul><li>Hexo 安装</li><li>Hexo 写作</li><li>Hexo 高级配置</li></ul><p>完整的示例可以参见官方链接 <a href="https://hexo.fluid-dev.com/posts/hello-fluid/">Fluid 官方展示</a>,更加系统的教程请参见官方教程<a href="https://hexo.fluid-dev.com/docs/">Fluid Doc</a></p><h2 id="Hexo-安装">Hexo 安装</h2><h3 id="nodejs-npm安装">nodejs, npm安装</h3><p>这里略过,很简单,稍微说一下hexo的安装,在你的命令行执行如下命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install hexo-cli -g<br></code></pre></td></tr></table></figure><p>然后选定一个目录执行命令作为hexo的根目录(我这里是在C盘的根目录下生成Hexo_Blog作为我的根目录)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo init Hexo_Blog<br>cd .\Hexo_Blog\<br></code></pre></td></tr></table></figure><h3 id="about-和-category-页的创建">about 和 category 页的创建</h3><p>“关于” 和 &quot;分类&quot;页可以自己创建，使用如下语法:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo new page about<br>hexo new page categories<br></code></pre></td></tr></table></figure><p>然后，如果今后想给自己写的文章设置about和category就可以分别在front matter中使用<code>tags: [tag1, tag2]</code>, <code>categories: [category1]</code>:一个示例:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">---<br>title: jQuery对表单的操作及更多应用<br>date: 2017-05-26 12:12:57<br><span class="hljs-section">categories: [web前端]</span><br><span class="hljs-section">---</span><br></code></pre></td></tr></table></figure><div class="note note-warning">            <p>注意：hexo一篇文章只能属于一个分类，也就是说如果在&quot;web前端&quot;后面添加&quot;-xxx&quot;，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web前端”下的 “-xxx ”分类）。</p>          </div><h3 id="主题安装">主题安装</h3><p>主要参考 <a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid 官方</a>,在Hexo的项目文件夹下使用如下命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save hexo-theme-fluid<br></code></pre></td></tr></table></figure><p>首先在博客目录下创建 <code>_config.fluid.yml</code>，将主题的 <code>_config.yml</code> 内容复制进去</p><div class="note note-warning">            <p>这样主要是对原始文件进行一个备份，方便恢复</p>          </div><p>然后修改 Hexo 博客目录中的 <code>_config.yml</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">theme<span class="hljs-punctuation">:</span> fluid  # 指定主题<br><br>language<span class="hljs-punctuation">:</span> zh-CN  # 指定语言，会影响主题显示的语言，按需修改<br></code></pre></td></tr></table></figure><p>创建「关于页，参见官方（略）</p><h3 id="快速开始">快速开始</h3><h4 id="创建一篇新文章">创建一篇新文章</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo new &quot;new post&quot;<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><p>可以在 front matter 中指定这一篇博客的封面，也就是它在主页的小图,详情请参见图片章节</p><h4 id="在本地部署然后预览">在本地部署然后预览</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s<br></code></pre></td></tr></table></figure><p>以上三条命令可以作为一条命令执行，意思分别是</p><ul><li><code>hexo clean</code>: 清除原始构建，从头开始</li><li><code>hexo g</code>(generate): 构建文件</li><li><code>hexo s</code>(start): 在本地浏览器4000端口进行预览</li></ul><h4 id="远程部署">远程部署</h4><p>在gtihub新建一个仓库，名为 <code>&lt;your name&gt;.github.io</code>,可以为public也可以是private，然后在<a href="https://hexo.io/zh-cn/docs/github-pages">Hexo 官网</a>网站复制如下代码,<br>在储存库中建立<code>.github/workflows/pages.yml</code>这个文件,填入如下代码,其中<code>Use Node.js 16.x</code> 中的16更改为你自己的nodejs版本.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs json">name<span class="hljs-punctuation">:</span> Pages<br><br>on<span class="hljs-punctuation">:</span><br>  push<span class="hljs-punctuation">:</span><br>    branches<span class="hljs-punctuation">:</span><br>      - main # default branch<br><br>jobs<span class="hljs-punctuation">:</span><br>  build<span class="hljs-punctuation">:</span><br>    runs-on<span class="hljs-punctuation">:</span> ubuntu-latest<br>    steps<span class="hljs-punctuation">:</span><br>      - uses<span class="hljs-punctuation">:</span> actions/checkout@v3<br>        with<span class="hljs-punctuation">:</span><br>          token<span class="hljs-punctuation">:</span> $<span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span> secrets.GITHUB_TOKEN  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br>          # If your repository depends on submodule<span class="hljs-punctuation">,</span> please see<span class="hljs-punctuation">:</span> https<span class="hljs-punctuation">:</span><span class="hljs-comment">//github.com/actions/checkout</span><br>          submodules<span class="hljs-punctuation">:</span> recursive<br>      - name<span class="hljs-punctuation">:</span> Use Node.js <span class="hljs-number">16.</span>x<br>        uses<span class="hljs-punctuation">:</span> actions/setup-node@v2<br>        with<span class="hljs-punctuation">:</span><br>          node-version<span class="hljs-punctuation">:</span> &#x27;<span class="hljs-number">16</span>&#x27;<br>      - name<span class="hljs-punctuation">:</span> Cache NPM dependencies<br>        uses<span class="hljs-punctuation">:</span> actions/cache@v2<br>        with<span class="hljs-punctuation">:</span><br>          path<span class="hljs-punctuation">:</span> node_modules<br>          key<span class="hljs-punctuation">:</span> $<span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span> runner.OS  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span>-npm-cache<br>          restore-keys<span class="hljs-punctuation">:</span> |<br>            $<span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span> runner.OS  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span>-npm-cache<br>      - name<span class="hljs-punctuation">:</span> Install Dependencies<br>        run<span class="hljs-punctuation">:</span> npm install<br>      - name<span class="hljs-punctuation">:</span> Build<br>        run<span class="hljs-punctuation">:</span> npm run build<br>      - name<span class="hljs-punctuation">:</span> Upload Pages artifact<br>        uses<span class="hljs-punctuation">:</span> actions/upload-pages-artifact@v2<br>        with<span class="hljs-punctuation">:</span><br>          path<span class="hljs-punctuation">:</span> ./public<br>  deploy<span class="hljs-punctuation">:</span><br>    needs<span class="hljs-punctuation">:</span> build<br>    permissions<span class="hljs-punctuation">:</span><br>      pages<span class="hljs-punctuation">:</span> write<br>      id-token<span class="hljs-punctuation">:</span> write<br>    environment<span class="hljs-punctuation">:</span><br>      name<span class="hljs-punctuation">:</span> github-pages<br>      url<span class="hljs-punctuation">:</span> $<span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#123;</span> steps.deployment.outputs.page_url  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br>    runs-on<span class="hljs-punctuation">:</span> ubuntu-latest<br>    steps<span class="hljs-punctuation">:</span><br>      - name<span class="hljs-punctuation">:</span> Deploy to GitHub Pages<br>        id<span class="hljs-punctuation">:</span> deployment<br>        uses<span class="hljs-punctuation">:</span> actions/deploy-pages@v2<br></code></pre></td></tr></table></figure><p>然后把你之前在本地Hexo根目录下的文件上传到这个仓库中，之后使用 <code>&lt;your name&gt;.github.io</code>即可实现轻松访问.</p><p>当你在本地的博客没有问题之后就可以考虑把笔记同步更新部署到远程的github了,使用如下的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo d<br></code></pre></td></tr></table></figure><p>但是如果你使用的是git的话，还需要进行如下的操作:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>然后修改Hexo根目录下的 <code>_config.yml</code>文件中的deploy相关设置:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">deploy</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repository:</span> <span class="hljs-string">git@github.com:YOUR_ID/YOUR_ID.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><blockquote><p>将其中的YOUR_ID改成你自己的GitHub账号</p></blockquote><p>其实就是deploy的简写.More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a>,然后的话就是直接修改一下hexo根目录下的<code>_config.yml</code>文件的deploy部分,如下:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">### Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/zongpingding/zongpingding.github.io</span><br></code></pre></td></tr></table></figure><div class="note note-danger">            <p>或者是直接使用 git add, git commit , git push 的流程也是可以的，也就是不去修改上述的什么deploy</p><p>注意：上面的缩进是两个空格，不是tab</p>          </div><h3 id="自定义">自定义</h3><p>其实Fluid官方的源代码里面写的很清楚了，每一张图片，每一句话，每一个图标的作用，只需要按照这源文件进行修改即可。<br>主要修改的就是如下的几个方面:</p><ul><li>主页，归档页，分类页，关于页的图片</li><li>浏览器标签中的Icon，默认是fluid.png</li><li>关于页面的友链</li></ul><div class="note note-warning">            <p>注意:</p><ul><li><p>修改图片时，是直接修改<code>hexo-theme-fluid/source/img/</code>内部的图片，并不是Hexo根目录下public中的img文件夹。因为这个public文件夹会在每一次的<code>hexo clean</code>命令后经历删除，重建的过程。</p></li><li><p>但是修改的 config 文件是hexo根目录下的<code>_config.fluid.yml</code>文件.</p></li><li><p>还有一个的需要注意的点就是，chrome的tab里面的png图片不支持alpha属性，也就是无法加载透明图片.</p></li></ul>          </div><h2 id="标题级别">标题级别</h2><p>在Hexo中使用Markdown的标题级别根级别从第二级标题(##)开始，也就是可以认为整个Hexo文章的标题就是整个文章的第一级标题了(#). 因为，如果你在正文中还是以一级标题开始，那么你博客的目录跳转不会正常工作.</p><h2 id="代码高亮">代码高亮</h2><p>这一部分的代码高亮主体由Hexo本身提供，Hexo主要支持如下两种高亮语法:</p><ul><li>代码块标签插件</li><li>反引号代码块标签插件</li></ul><blockquote><p>提示：Hexo 支持用任何格式书写文章，只需安装相应渲染插件即可。不论文章以何种格式书写（Markdown、EJS、Swig、Nunjuck、Pug、ASCIIDoc），上述三种代码块语法总是可用。</p></blockquote><h3 id="Hexo-extend-style">Hexo extend style</h3><p>第一种形式,想要了解更多这种形式用法的可以参考 <a href="http://octopress.org/docs/plugins/codeblock/">code block</a>.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&#123;% code lang:python%&#125;<br>def partition(arr,low,high): <br><span class="hljs-code">    i = ( low-1  )         # 最小元素索引</span><br><span class="hljs-code">    pivot = arr[high]     </span><br><span class="hljs-code">  </span><br><span class="hljs-code">    for j in range(low , high): </span><br><span class="hljs-code">  </span><br><span class="hljs-code">        # 当前元素小于或等于 pivot </span><br><span class="hljs-code">        if   arr[j] &lt;= pivot: </span><br><span class="hljs-code">          </span><br><span class="hljs-code">            i = i+1 </span><br><span class="hljs-code">            arr[i],arr[j] = arr[j],arr[i] </span><br><span class="hljs-code">  </span><br><span class="hljs-code">    arr[i+1],arr[high] = arr[high],arr[i+1] </span><br><span class="hljs-code">    return ( i+1  )</span><br><span class="hljs-code">&#123;% endcode %&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">partition</span>(<span class="hljs-params">arr,low,high</span>): <br>    i = ( low-<span class="hljs-number">1</span>  )         <span class="hljs-comment"># 最小元素索引</span><br>    pivot = arr[high]     <br>  <br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(low , high): <br>  <br>        <span class="hljs-comment"># 当前元素小于或等于 pivot </span><br>        <span class="hljs-keyword">if</span>   arr[j] &lt;= pivot: <br>          <br>            i = i+<span class="hljs-number">1</span> <br>            arr[i],arr[j] = arr[j],arr[i] <br>  <br>    arr[i+<span class="hljs-number">1</span>],arr[high] = arr[high],arr[i+<span class="hljs-number">1</span>] <br>    <span class="hljs-keyword">return</span> ( i+<span class="hljs-number">1</span>  )<br></code></pre></td></tr></table></figure><h3 id="Original-Markdown-style">Original Markdown style</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">partition</span>(<span class="hljs-params">arr,low,high</span>): <br>    i = ( low-<span class="hljs-number">1</span>  )         <span class="hljs-comment"># 最小元素索引</span><br>    pivot = arr[high]     <br>  <br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(low , high): <br>  <br>        <span class="hljs-comment"># 当前元素小于或等于 pivot </span><br>        <span class="hljs-keyword">if</span>   arr[j] &lt;= pivot: <br>          <br>            i = i+<span class="hljs-number">1</span> <br>            arr[i],arr[j] = arr[j],arr[i] <br>  <br>    arr[i+<span class="hljs-number">1</span>],arr[high] = arr[high],arr[i+<span class="hljs-number">1</span>] <br>    <span class="hljs-keyword">return</span> ( i+<span class="hljs-number">1</span>  ) <br></code></pre></td></tr></table></figure><h2 id="标签插件">标签插件</h2><h3 id="Hexo-自带Tag">Hexo 自带Tag</h3><p>常用的标签插件</p><ul><li>引用块: quote</li><li>代码块: codeblock(code)</li><li>引用文章: post_path, post_link</li></ul><p>比如下面这两个比较简单的来自官网的样例</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">&#123;% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %&#125;<br>Every interaction is both precious and an opportunity to delight.<br>&#123;% endblockquote %&#125;<br></code></pre></td></tr></table></figure><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote><h3 id="Fluid-Highligh-Env">Fluid Highligh Env</h3><p>或者是其它的高亮颜色块,这一部分的高亮色块是fluid主题提供的,跟多的示例还请参考 <a href="https://hexo.fluid-dev.com/docs/guide/#tag-%E6%8F%92%E4%BB%B6">fluid tag</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&#123;% note success %&#125;<br>这是一段文字<br>&#123;% endnote %&#125;<br><br>&#123;% note danger%&#125;<br>这是一段表示警告的文字<br>&#123;% endnote %&#125;<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>这是一段文字</p>          </div><div class="note note-danger">            <p>这是一段表示警告的文字</p>          </div><h2 id="LaTeX公式">LaTeX公式</h2><h3 id="基本使用">基本使用</h3><p>如果你对数学公式的要求并不高,那么现在的hexo都已经不需要你自己去配置什么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">{\rm \LaTeX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span></span></span> 解析之类的了,以前还得自己选择是mathjax还是katex,现在就是很方便了,下面就是一个简单的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">{\rm \LaTeX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span></span></span> 公式.</p><p>如果是Mathjax，那么你的公式就得像下面这样写，个人感觉很不舒服。</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs LaTeX"><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br><span class="hljs-keyword">\begin</span>&#123;align&#125;<br><span class="hljs-built_in">&amp;</span> XA = B <span class="hljs-keyword">\Longleftrightarrow</span> XAA<span class="hljs-built_in">^</span>&#123;-1&#125; = BA<span class="hljs-built_in">^</span>&#123;-1&#125; <span class="hljs-keyword">\\</span><span class="hljs-keyword">\\</span>[1em]<br><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\left</span>(<span class="hljs-keyword">\frac</span>&#123;A&#125;&#123;B&#125; <span class="hljs-keyword">\right</span>) <span class="hljs-keyword">\xrightarrow</span>&#123;P&#125; <span class="hljs-keyword">\left</span>(<span class="hljs-keyword">\frac</span>&#123;AA<span class="hljs-built_in">^</span>&#123;-1&#125;&#125;&#123;BA<span class="hljs-built_in">^</span>&#123;-1&#125;&#125;<span class="hljs-keyword">\right</span>)<br>= <span class="hljs-keyword">\left</span>(<span class="hljs-keyword">\frac</span>&#123;E&#125;&#123;BA<span class="hljs-built_in">^</span>&#123;-1&#125;&#125;<span class="hljs-keyword">\right</span>) <span class="hljs-keyword">\\</span><span class="hljs-keyword">\\</span>[1em]<br><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\Gamma</span><span class="hljs-built_in">_</span><span class="hljs-keyword">\epsilon</span>(x)=[1-e<span class="hljs-built_in">^</span>&#123;-2<span class="hljs-keyword">\pi</span><span class="hljs-keyword">\epsilon</span>&#125;]<span class="hljs-built_in">^</span>&#123;1-x&#125;<span class="hljs-keyword">\prod</span><span class="hljs-built_in">_</span>&#123;n=0&#125;<span class="hljs-built_in">^</span><span class="hljs-keyword">\infty</span><span class="hljs-keyword">\frac</span>&#123;1-<span class="hljs-keyword">\exp</span>(-2<span class="hljs-keyword">\pi</span><span class="hljs-keyword">\epsilon</span>(n+1))&#125;&#123;1-<span class="hljs-keyword">\exp</span>(-2<span class="hljs-keyword">\pi</span><span class="hljs-keyword">\epsilon</span>(x+n))&#125;<br><span class="hljs-keyword">\end</span>&#123;align&#125;<br><span class="hljs-built_in">$</span><span class="hljs-built_in">$</span><br></code></pre></td></tr></table></figure><div class="note note-warning">            <p>注意:当采用Mathjax作为后端时，多行公式的换行需要使用 <code>\\\\</code>. 如果每一行的公式之间距离过近，可以采用 <code>\\\\[1em]</code>类似的语法手动增加间距</p>          </div><p>更多的在MathJax中输入公式的注意事项参见 <a href="http://masikkk.com/article/MathJax/">MathJax 公式</a>.当然行内公式也是很简单的,著名的勾股定理 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^2+b^2=c^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>.</p><h3 id="后端设置">后端设置</h3><p>鉴于目前Mathjax孱弱的数学公式能力，于是我们考虑更换目前默认的LaTeX后端mathjax,主要参考<a href="https://hexo.fluid-dev.com/docs/guide/#latex-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">katex配置</a>.</p><p>因为我们要安装katex，所以进行如下的设置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm uninstall hexo-renderer-marked --save<br>npm install hexo-renderer-markdown-it --save<br>npm install @traptitech/markdown-it-katex --save<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>进行npm的相关操作后，建议再检查一下自己的 <code>package.json</code>文件内容。</p>          </div><p>我的内容如此:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo-site&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;private&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;build&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo generate&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;clean&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo clean&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;deploy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo deploy&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hexo server&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;hexo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;7.0.0&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@traptitech/markdown-it-katex&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.6.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-generator-archive&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-generator-category&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-generator-index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-generator-tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-renderer-ejs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-renderer-markdown-it&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-renderer-stylus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-theme-fluid&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.9.6&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;hexo-theme-landscape&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.0.0&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>然后在Hexo根目录下的 <code>_config.yml</code>文件中添加如下语句:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;@traptitech/markdown-it-katex&quot;</span><br></code></pre></td></tr></table></figure><p>我大概添加在如下的位置，可以参考<br><img src="/img/introduction_to_hexo_and_fluid/katex_config.png" alt="katex 配置"></p><p>下面是katex的渲染效果</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>X</mi><mi>A</mi><mo>=</mo><mi>B</mi><mo>⟺</mo><mi>X</mi><mi>A</mi><msup><mi>A</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mi>B</mi><msup><mi>A</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mrow><mo fence="true">(</mo><mfrac><mi>A</mi><mi>B</mi></mfrac><mo fence="true">)</mo></mrow><mover><mo stretchy="true" minsize="3.0em">→</mo><mpadded width="+0.6em" lspace="0.3em"><mi>P</mi></mpadded></mover><mrow><mo fence="true">(</mo><mfrac><mrow><mi>A</mi><msup><mi>A</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><mrow><mi>B</mi><msup><mi>A</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mfrac><mi>E</mi><mrow><mi>B</mi><msup><mi>A</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi mathvariant="normal">Γ</mi><mi>ϵ</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><msup><mi>e</mi><mrow><mo>−</mo><mn>2</mn><mi>π</mi><mi>ϵ</mi></mrow></msup><msup><mo stretchy="false">]</mo><mrow><mn>1</mn><mo>−</mo><mi>x</mi></mrow></msup><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant="normal">∞</mi></munderover><mfrac><mrow><mn>1</mn><mo>−</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo>−</mo><mn>2</mn><mi>π</mi><mi>ϵ</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><mrow><mn>1</mn><mo>−</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo>−</mo><mn>2</mn><mi>π</mi><mi>ϵ</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}&amp; XA = B \Longleftrightarrow XAA^{-1} = BA^{-1} \\&amp; \left(\frac{A}{B} \right) \xrightarrow{P} \left(\frac{AA^{-1}}{BA^{-1}}\right)= \left(\frac{E}{BA^{-1}}\right) \\&amp; \Gamma_\epsilon(x)=[1-e^{-2\pi\epsilon}]^{1-x}\prod_{n=0}^\infty\frac{1-\exp(-2\pi\epsilon(n+1))}{1-\exp(-2\pi\epsilon(x+n))}\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.4838em;vertical-align:-3.4919em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.9919em;"><span style="top:-6.7792em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:-4.6281em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span><span style="top:-1.7266em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.4919em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.9919em;"><span style="top:-6.7792em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⟺</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span><span style="top:-4.6281em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1003em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.011em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-1.7266em;"><span class="pstrut" style="height:3.6514em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord">Γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">ϵ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span><span class="mord mathnormal mtight">ϵ</span></span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal">ϵ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord">−</span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal">ϵ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">))</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.4919em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><div class="note note-success">            <ul><li><p>个人感觉katex比Mathjax强大，而且书写起来更加的自然，我对katex也更加的熟悉.</p></li><li><p>但是不使用Mathjax的话，读者就不方便复制TeX源码，但是我觉得这个问题不大</p></li></ul>          </div><h3 id="数学公式渲染选项">数学公式渲染选项</h3><p>Fluid有一个数学公式是否开启的<code>specific: false</code>选项，<br>如果你把这个选项设置为true，那么就必须在front matter中指定 <code>math: true</code>后，你之后的公式才会加载，这样可以为非数学文章提高加载速度.</p><div class="note note-warning">            <p>注意:</p><ul><li><p>如果你把这个specific选项设置为true，即使是默认的math=ture,只要你没有在front matter中声明 <code>math: true</code>那么公式始终不会被渲染.</p></li><li><p>chrome 安装<code>AllToTeX</code>这个插件后会自动渲染公式，所以你会看到在chrome上这个选项没有作用的情况</p></li><li><p>注意在这个Hexo+Fluid配置下，KaTeX无法解析此种形式的公式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">$&#123;&#123;&#125;&#125;&#123;&#123;&#125;&#125;$<br></code></pre></td></tr></table></figure><p>也就是你没事就少打一点括号,目前还不知道是哪里的bug.</p></li></ul>          </div><h2 id="图片插入">图片插入</h2><h3 id="本地文件夹图片">本地文件夹图片</h3><p>你需要把文件放到当前路径下然后插入如下的两个路径：</p><ul><li>博客下的source文件夹内部</li><li>Fluid主题的source文件夹下</li></ul><div class="note note-success">            <p>TIP</p><p>如果是本地图片，目录文件夹可自定义，但必须在 source 目录下，博客与主题的 source 目录最终会合并，因此优先选择博客的 source。可以在Hexo的img目录下为每一次的博客单独创建<br>一个用于存放图片的文件夹，方便以后管理</p><p>图片大小建议压缩到 1MB 以内，否则会严重拖慢页面加载.所以在这里推荐一个压缩图片的免费网站: <a href="https://squoosh.app/">squoosh</a></p>          </div><p>加载图片的语法如下:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">![<span class="hljs-string">Local Picture</span>](<span class="hljs-link">/img/introduction_to_hexo_and_fluid/banner.webp</span>)<br><br>![<span class="hljs-string">Extrenal picture</span>](<span class="hljs-link">https://w.wallhaven.cc/full/l8/wallhaven-l83o92.jpg</span>)<br></code></pre></td></tr></table></figure><p><img src="/img/introduction_to_hexo_and_fluid/banner.webp" alt="Local Picture"><br><img src="https://w.wallhaven.cc/full/l8/wallhaven-l83o92.jpg" alt="Extrenal picture"></p><div class="note note-warning">            <p>图片默认居中，挺好的</p>          </div><h3 id="图床配置">图床配置</h3><p>我自己是弄了一个图床，用于自己的图片管理，引用方法还是使用链接的方式</p><h3 id="svg图片">svg图片</h3><p>这里说一下在MarkDown中插入矢量图svg，同时配以<code>居中</code>选项,大致的两种语法如下:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">1.使用默认的图片语法<br>![<span class="hljs-string">SVGPicture</span>](<span class="hljs-link">http://sample.com/test.svg</span>)<br><br>2.使用拓展的HTML语法<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">align</span>=<span class="hljs-string">center</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">object</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;image/svg+xml&quot;</span> </span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">data</span>=<span class="hljs-string">&quot;http://sample.com/test.svg&quot;</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>实际效果：<br>第一种是使用默认的markdown语言，Fluid已经对此元素进行了优化,你不用再去调整对应的宽度之类的了，<br>跨平台（设备）自适应.<br><img src="/img/introduction_to_hexo_and_fluid/svgpic.svg" alt="SVG Example"></p><p>第二种便是自己写对应的html代码，但是并不方便.</p><div align=center>  <object type="image/svg+xml"     data="/img/introduction_to_hexo_and_fluid/svgpic.svg">  </object></div><h2 id="评论区设置">评论区设置</h2><p>本博客采用的是gicus进行博客搭建,不用使用npm安装额外的第三方包，只需要创建一个giscus的public仓库即可，详情可以参考<a href="https://zhuanlan.zhihu.com/p/603658639">知乎文章</a>，然后你就可以得到这样的一个列表：</p><p><img src="/img/introduction_to_hexo_and_fluid/giscus_params.png" alt="giscus 参数配置列表"></p><p>然后你就只需要把这些参数填写到你的Fluid主题的配置文件<code>_config.fluid.yml</code>的860行左右的giscus的参数配置位置，配置完成后大致如下：</p><p><img src="/img/introduction_to_hexo_and_fluid/giscus_example.png" alt="giscus 配置样例"></p><p>然后你就有评论区了.</p><blockquote><p>目前已经更换为utterances评论插件，相应的配置也是十分的简单的</p></blockquote><h2 id="远程服务器部署">远程服务器部署</h2><p>关于后续的服务器部署或者是站点域名自定义请参见: <a href="https://www.zpding.tech/2024/06/29/website_domain/">website domain</a></p><h2 id="工作流">工作流</h2><p>当你完成以上步骤之后，只需要在你的本地写好对应的markdown文档，然后运行hexo的三部曲：</p><ul><li>hexo new: 新建一篇文章</li><li>hexo cl: 清楚已经构建的public仓库</li><li>hexo g：把source目录下的markdown文件转化为静态页面</li><li>hexo s: 在本地启动项目，检查有无错误等</li><li>hexo d: 本地检查没有错误的话，就可以部署到你的远程Linux服务器上</li></ul>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
      <tag>MarkDown</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux常见错误</title>
    <link href="/2024/03/26/linux_common_error/"/>
    <url>/2024/03/26/linux_common_error/</url>
    
    <content type="html"><![CDATA[<h2 id="hostname-unknown">hostname unknown</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">unable to resolve host &lt;Name&gt;: Name or service not known<br></code></pre></td></tr></table></figure><blockquote><p>Solution: add the <Name> to file /etc/hosts  as  127.0.0.1 <Name></p></blockquote><h2 id="group-not-exists">group not exists</h2><p>when run the following cmd sudo adduser <user name> admin</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">there is a error usermod: group &#x27;admin&#x27; does not exist<br></code></pre></td></tr></table></figure><p>but group admin exists in file /etc/suders exactely.</p><blockquote><p>Solution: simple add a group admin by groupadd admin</p><ul><li>the file /etc/suders has no relation to group admin 's exists.</li></ul></blockquote><h2 id="nginx-默认访问的html文件位置">nginx 默认访问的html文件位置</h2><p>在ubuntu下的位置nginx默认访问的index文件位置如下:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">/var/www/html/index.nginx-debian.html<br></code></pre></td></tr></table></figure><blockquote><p>参考: <a href="https://segmentfault.com/q/1010000009529048">https://segmentfault.com/q/1010000009529048</a></p></blockquote><p>并且以此还产生了一种快速部署hexo博客到服务器的方法，把hexo生成的public文件夹中的所有内容复制到默认的nginx访问此目录下，如图</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">drwxr-xr-x 7 root root 4096 Dec 18 17:02 .<br>drwxr-xr-x 3 root root 4096 Dec 18 14:59 ..<br>drwxr-xr-x 3 root root 4096 Dec 18 17:02 2023<br>drwxr-xr-x 3 root root 4096 Dec 18 17:02 archives<br>drwxr-xr-x 3 root root 4096 Dec 18 17:02 css<br>drwxr-xr-x 2 root root 4096 Dec 18 17:02 fancybox<br>-rw-r--r-- 1 root root 6937 Dec 18 17:02 index.html<br>-rw-r--r-- 1 root root  617 Dec 18 16:31 index.nginx-debian.html<br>drwxr-xr-x 2 root root 4096 Dec 18 17:02 js<br></code></pre></td></tr></table></figure><p>然后访问你的服务器ip就可以打开你的博客了,一般的网页根目录下都必须要有一个<code>index.html</code>文件，web服务器在处理用户请求时会默认寻找名为index.html的文件作为网站的主页（网页入口）</p><h2 id="Linux下ip查看">Linux下ip查看</h2><h3 id="内网ip">内网ip</h3><p>运行命令<code>ipconfig</code>后会返回如下的结果:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs text">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1450<br>inet 172.16.0.3  netmask 255.255.0.0  broadcast 172.16.255.255<br>inet6 fe80::f816:3eff:fe80:7ec8  prefixlen 64  scopeid 0x20&lt;link&gt;<br>ether fa:16:3e:80:7e:c8  txqueuelen 1000  (Ethernet)<br>RX packets 265734  bytes 68590660 (68.5 MB)<br>RX errors 0  dropped 0  overruns 0  frame 0<br>TX packets 381513  bytes 228398471 (228.3 MB)<br>TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<br><br>lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536<br>inet 127.0.0.1  netmask 255.0.0.0<br>inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;<br>loop  txqueuelen 1000  (Local Loopback)<br>RX packets 6  bytes 504 (504.0 B)<br>RX errors 0  dropped 0  overruns 0  frame 0<br>TX packets 6  bytes 504 (504.0 B)<br>TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0<br></code></pre></td></tr></table></figure><h3 id="公网ip">公网ip</h3><p>其中eth0对应的172.16.0.3 就是你的网卡ip，内网ip。想要查看公网ip，使用如下命令</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">curl ifconfig.me<br></code></pre></td></tr></table></figure><blockquote><p>这个方法本质上就是访问一个网页，然后这个网页返回你的公网ip</p></blockquote><h2 id="nginx权限与防火墙">nginx权限与防火墙</h2><p>如图我创建了一个测试的nginx网站，监听的是 81端口，<code>test.conf</code>文件如下；</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs toml">server &#123;<br>  listen 81<span class="hljs-comment">;</span><br>  location / &#123;<br>    root /home/<span class="hljs-comment">;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>尽管我的home目录下没有index.html文件，但是浏览器报错502，其实就是我设置的端口81访问被拒绝。</p><blockquote><p>Solution: 在京东云防火墙开启81端口的访问即可,更改81端口的访问权限后，再添加一个index.html文件，不然会报错403 Forbidden</p></blockquote><p>一般解决方法:查看nginx监听的端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -ef | grep nginx<br></code></pre></td></tr></table></figure><p>选择nginx master进程的pid，假如是<code>555</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo netstat -anp | grep 555<br></code></pre></td></tr></table></figure><p>然后可以得到如下的输出</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">user@lavm-dpbk4woj1d:~/Temp$ sudo netstat -anp | grep 555<br>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      566/nginx: master p<br>tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN      566/nginx: master p<br>tcp6       0      0 :::80                   :::*                    LISTEN      566/nginx: master p<br>unix  3      [ ]         STREAM     CONNECTED     36277    566/nginx: master p<br>unix  3      [ ]         STREAM     CONNECTED     36278    566/nginx: master p<br>unix  3      [ ]         STREAM     CONNECTED     36275    566/nginx: master p<br>unix  3      [ ]         STREAM     CONNECTED     36276    566/nginx: master p<br></code></pre></td></tr></table></figure><p>于是说明我们的nginx监听了81,80端口.修改了81端口的访问权限之后仍然有报错403, 一般有如下的两个原因:</p><ul><li>index.html不存在（极大部分原因）</li><li>权限不够</li></ul><p>此时然后查看nginx的日志</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim -R /var/log/nginx/error.log<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">2023/12/18 19:01:39 [error] 1702#1702: *18 directory index of &quot;/home/&quot; is forbidden, <br>client: 103.172.183.221, server: , request: &quot;GET / HTTP/1.1&quot;, host: &quot;117.72.10.237:81&quot;<br></code></pre></td></tr></table></figure><p>进一步，网页的根目录设置为 <code>/home/</code>,然而这个下面的文件信息为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">drwxr-xr-x  3 root root 4096 Dec 18 15:12 .<br>drwxr-xr-x 19 root root 4096 Dec 18 18:39 ..<br>drwxr-xr-x  7 user  user  4096 Dec 18 19:13 zpd<br></code></pre></td></tr></table></figure><p>我们只需要把上面的<code>test.conf</code>中的 root设置为 `/home/user/,然后使用如下命令重启nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo nginx -s reload<br></code></pre></td></tr></table></figure><blockquote><p>更多请参考:<a href="https://cloud.tencent.com/developer/article/1949092">解决Nginx出现403 forbidden</a></p></blockquote><h2 id="nginx的配置文件误删除">nginx的配置文件误删除</h2><p>首先删除nginx及其配置文件，使用命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get purge nginx nginx-common nginx-full<br></code></pre></td></tr></table></figure><p><code>purge</code>选项可以在删除软件的同时删除其配置文件,然后重新安装nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install nginx<br></code></pre></td></tr></table></figure><p>如果不行，用如下的命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo dpkg --force-confmiss -i /var/cache/apt/archives/nginx-common_*.deb<br></code></pre></td></tr></table></figure><blockquote><p>参考:<a href="https://www.jianshu.com/p/73983662ae19">Ubuntu – 如何恢复/etc/nginx</a></p></blockquote><h2 id="普通用户启动Vim-root保存">普通用户启动Vim,root保存</h2><p>使用如下的命令即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">:w !sudo tee %<br></code></pre></td></tr></table></figure><blockquote><p>参考: <a href="https://developer.aliyun.com/article/27531">https://developer.aliyun.com/article/27531</a></p></blockquote><h2 id="Azure服务器双重防火墙">Azure服务器双重防火墙</h2><p>我在Azure的虚拟机平台放行了9000端口，但是本地的ufw仍然如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs rext">user@GhostBlog:/etc/nginx/conf.d$ sudo ufw status verbose<br>Status: active<br>Logging: on (low)<br>Default: deny (incoming), allow (outgoing), disabled (routed)<br>New profiles: skip<br><br>To                         Action      From<br>--                         ------      ----<br>22/tcp                     ALLOW IN    Anywhere<br>80,443/tcp (Nginx Full)    ALLOW IN    Anywhere<br>22/tcp (v6)                ALLOW IN    Anywhere (v6)<br>80,443/tcp (Nginx Full (v6)) ALLOW IN    Anywhere (v6)<br></code></pre></td></tr></table></figure><p>也就是还需要本地放行9000端口,使用如下命令添加放行端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo ufw allow 9000<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">放行端口生效</span><br>sudo ufw enable<br></code></pre></td></tr></table></figure><p>然后的最终结果为:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs text">user@GhostBlog:/etc/nginx/conf.d$ sudo ufw status<br>Status: active<br><br>To                         Action      From<br>--                         ------      ----<br>22/tcp                     ALLOW       Anywhere<br>Nginx Full                 ALLOW       Anywhere<br>9000                       ALLOW       Anywhere<br>22/tcp (v6)                ALLOW       Anywhere (v6)<br>Nginx Full (v6)            ALLOW       Anywhere (v6)<br>9000 (v6)                  ALLOW       Anywhere (v6)<br></code></pre></td></tr></table></figure><p>然后就可以加载了。</p><blockquote><p>1.但是感觉京东云应该也可以这样弄，启用默认的ufw，但是多了一步验证<br>2.想要参考更多的关于ufw的细节可以参考 <a href="https://blog.xiaoz.org/archives/18666">https://blog.xiaoz.org/archives/18666</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SCP文件传输</title>
    <link href="/2024/03/26/scp/"/>
    <url>/2024/03/26/scp/</url>
    
    <content type="html"><![CDATA[<p>主要参考: <a href="https://www.cnblogs.com/zhuawang/p/12433357.html">scp命令 Linux和Windows文件互传</a></p><h2 id="生成密钥">生成密钥</h2><p>按照原始博客操作即可, 在windows上使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -t rsa<br></code></pre></td></tr></table></figure><p>然后一直回车，生成一个密钥在 <code>C:\Users\PC.ssh\id_rsa.pub</code>然后复制其中的内容到Linux的如下文件中:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">/home/zpd/.ssh/authorized_keys<br></code></pre></td></tr></table></figure><p>然后就可以愉快玩耍了</p><blockquote><p>主要如果只是复制到普通用户的这个文件中，那么你只能把文件上传到这个用户具有写权限的目录中</p></blockquote><h2 id="实践">实践</h2><p>比如在windows上把当前路径下的 main.c传到Linux下的 <code>/home/zpd/temp/</code>目录，只需要运行如下命令:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">scp main.c zpd@&lt;my ip&gt;:/home/zpd/Temp/<br></code></pre></td></tr></table></figure><h2 id="自定义命令">自定义命令</h2><p>我自己自定了两个powershell命令:<code>push_file</code>, <code>pull_file</code>分别负责从Windows上给Linux传输文件，以及从上面拉取文件。把下面这段代码粘贴到你的powershell配置文件中:</p><blockquote><p>注意：我在Linux上建立了一个<code>Windows_Linux_Share</code>文件夹用于平时的文件交换<br>假设你的用户名为: <code>user</code>, 你服务器的IP地址为 <code>192.168.0.1</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">scp</span>  <br><span class="hljs-meta prompt_"># </span><span class="language-bash">push file from <span class="hljs-built_in">local</span> windows</span><br>function push_file&#123;<br>param(<br>[switch] $recurse<br>)<br>if ($recurse)&#123;<br>scp -r $args user@192.168.0.1:/home/user/Windows_Linux_Share<br>&#125;else&#123;<br>scp $args user@192.168.0.1:/home/user/Windows_Linux_Share<br>&#125;<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">pull file from remote linux</span><br>function pull_file&#123;<br>param(<br>[switch] $recurse<br>)<br>if ($recurse)&#123;<br>scp -r user@192.168.0.1:/home/zpd/Windows_Linux_Share/$args ./<br>&#125;else&#123;<br>scp user@192.168.0.1:/home/zpd/Windows_Linux_Share/$args ./<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用如下语法打开powershell的配置文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">notepad $profile<br></code></pre></td></tr></table></figure><p>然后你的记事本就会打开这个配置文件，把他粘贴到最后即可，然后回到powershell中执行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">. $profile<br></code></pre></td></tr></table></figure><p>让刚才那两个命令生效。使用方法如下:<br>这里我在我家加目录下建立了一个 <code>~/Windows_Linux_Share/</code>的共享文件夹。<br>文件的上传：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">单个文件（非文件夹）</span><br>push_file &lt;path to your single file in windows&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">文件夹及其内部所有文件(就是scp的原本语法)</span><br>push_file -r &lt;path to your folder in windows&gt;<br><br><br>下载文件# 单文件<br>pull_file &lt;path to your single file in Linux&gt;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">文件夹及其内部所有文件</span><br>pull_file -r &lt;path to your folder in Linux&gt;<br></code></pre></td></tr></table></figure><blockquote><p>两个命令的调用格式是类似的</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows屏保Fliqlo设置</title>
    <link href="/2024/03/26/windows_fliqlo/"/>
    <url>/2024/03/26/windows_fliqlo/</url>
    
    <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前就想要了解以下Fliqlo这个东西，但是之前在Windows上一直没有折腾成功，反正就是<code>flash</code>, <code>.Net</code>之类的bug，一直没有去解决，于是就放弃了.但是今天突然想起来了还有这个玩意儿，所以就有了今天这篇文章。</p><h2 id="安装">安装</h2><p>按照官网来就行了，软件的内部有一个 <code>ReadMe.txt</code>, 内容如下:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs text">Fliqlo Screensaver for Windows ReadMe<br>Updated on March 12, 2021 (for version 1.5.1)<br><br>SYSTEM REQUIREMENTS<br>- Windows 10 / 8.1<br>- Internet connection to display content<br><br>BEFORE INSTALLATION<br>If you already have an older version of the Fliqlo screensaver installed, you need to uninstall it before installing the new version. To uninstall the screensaver, in Control Panel or Apps &amp; Features (Windows 10), uninstall the program named &quot;Fliqlo&quot;. For manual removal, in File Explorer, find and remove the file named &quot;Fliqlo.scr&quot; in C:\Windows\system32 and/or C:\Windows\SysWOW64 folders.<br><br>INSTALLATION<br>Right-click the file named &quot;Fliqlo.scr&quot; and select &quot;Install&quot; to make it your default screensaver, then Screen Saver Settings panel will open automatically. Alternatively, in File Explorer, copy or move the file named &quot;Fliqlo.scr&quot; to C:\Windows\system32. Then open Screen Saver Settings panel to set Fliqlo as your default screensaver.<br><br>UNINSTALLATION<br>In File Explorer, remove the file named &quot;Fliqlo.scr&quot; installed by the above method.<br><br>PLEASE NOTE<br>Currently, this software is built without code-signing, so during installation you may see a Windows security warning that the publisher could not be verified. To bypass the warning, you need to allow the unsigned software to run on your computer when the warning appears.<br><br>TERMS OF USE<br>This software can be used in your home, office, and store. No portion of the software, including the other files in the downloaded zip archive named &quot;FliqloScr.zip&quot;, may be redistributed, sold, renamed, converted, or made available for download from websites other than fliqlo.com. Instead, please provide a link to https://fliqlo.com/ if you wish to share the software.<br><br>DISCLAIMER<br>This software is provided to you free of charge. The author gives no warranty in relation to these softwares, and you use them at your own risk. By using or installing the software, you agree to be bound by the terms of this agreement. The author will not be liable for any damage to your system, any loss or corruption of any data or software, or any other loss or damage that you may suffer as a result of downloading or using the software, whether it results from the author&#x27;s negligence or in any other way.<br><br>PRIVACY POLICY<br>Please check on the fliqlo.com website.<br><br>DONATION<br>If you want to make a donation to support the further development of this software, it is highly appreciated. To donate, double-click the internet shortcut file named &quot;Donate with PayPal.url&quot; in the zip archive named &quot;FliqloScr.zip&quot;, or visit the author&#x27;s PayPal.me page (https://www.paypal.me/yjadc/). You may then enter any amount you wish, and PayPal.me will securely do the rest. Thank you for your support!<br>* Please refrain from donating less than $1, such as $0.1, as most will be processed as PayPal transaction fees and the actual donation is $0.<br><br>ABOUT THE AUTHOR<br>Yuji Adachi<br>Freelance Web/UI designer, living in Tokyo, Japan<br><br>SUPPORT<br>Website: https://fliqlo.com/<br>Email: info@9031.com<br><br>© 2021 9031<br></code></pre></td></tr></table></figure><p>我是采用的第一种方式进行安装的，因为我把应用移动到<code>system32</code>文件夹之后出现了什么 <code>.Net</code>的错误，不想去折腾了。</p><h2 id="快捷键调用">快捷键调用</h2><p>采用了一个简单的方法：直接把这个东西固定到我的如 <code>任务栏</code>, 这样就可以使用windows默认的 <code>win + &lt;num&gt;</code>直接调用这个应用，比如我固定到第一个位置，当我摁下 <code>win+1</code> 时就会自动执行这个Fliqlo应用。</p><p>但是你很有可能会遇到如下的问题：找不到任何的方法可以直接把这个非 <code>.exe</code>文件直接固定到任务栏，于是我们采用曲线救国的策略:</p><ul><li><p>首先把这个应用 <code>Fliqlo.scr</code>更改为 <code>Fliqlo.exe</code>，然后执行这个文件，这样你就会在你的任务栏看到这个应用的图标，然后右键固定任务栏即可。</p></li><li><p>更改<code>.exe</code>为<code>.scr</code>? 为什么？因为默认的运行 <code>.exe</code>格式的文件时，这个效果并不是你希望的，他会打开这个应用的设置界面，并不是启动屏保。只有执行以 <code>.scr</code> 为后缀的这个文件时才会打开屏保。<br>怎么修改？ 直接把右键这个固定的快捷方式，然后选择<code>属性</code>，然后把<code>C:\BIN\Fliqlo.exe</code>改为 <code>C:\BIN\Fliqlo.scr</code>即可</p></li></ul><blockquote><ul><li>其实你在cmd窗口中运行这个应用时，不知道为什么，它还是打开了fliqlo的设置界面，而非对应的屏保，但是你在powershell中执行这个应用时就是正确的结果.</li><li>其实从上面也可以看出，我们不能用AutoHotKey的 <code>Run &quot;Fliqlo.scr&quot;</code>命令来启用屏保了，以为它好像是默认采用cmd去执行这个应用.</li></ul></blockquote><h2 id="备注">备注</h2><p>我之前写的一个autohotkey快捷键脚本，如下:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">; Fliqo 快捷锁屏<br>#k::<br>&#123;<br> Run &quot;cmd Fliqlo.scr&quot;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Computer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>完全使用Linux工作</title>
    <link href="/2024/03/26/work_with_linux/"/>
    <url>/2024/03/26/work_with_linux/</url>
    
    <content type="html"><![CDATA[<blockquote><p>转载自: <a href="https://dywang.csie.cyut.edu.tw/dywang/download/pdf/linux-wangyin.pdf">王垠:完全使用Linux工作</a></p></blockquote><h2 id="序">序</h2><p>我已经半年没有使用 Windows 的方式工作了.Linux 高效的完成了我所有的工作.</p><p>GNU/Linux 不是每个人都想用的.如果你只需要处理一般的事务，打游戏，那么你不需要了解下面这些了.</p><p>我不是一个狂热的自由软件份子，虽然我很喜欢自由软件.这篇文章也不是用来推行自由软件运动的，虽然我觉得自由软件运动是非常好的.</p><p>这篇文章也不是用来比较 Linux 和 Windows 内核效率，文件系统，网络服务的.我现在是作为一个用户而不是一个开发者来说话的，我们的讨论是基于操作，应用层面的.是为了告诉大学里还不了解，或者不理解 UNIX 的科学工作者和大学生，UNIX 比 Windows 更适合用于科学研究工作，请大家理解 UNIX 的工作方式，不要用 Windows 的标准来要求 Linux，而要用一个科学工作者的标准来要求自己，用UNIX 的思想来武装自己.</p><p>我显然是反对在大学，特别是理工科专业推广 Windows 的.我也反对在对&quot;娃娃&quot;们的计算机启蒙教育中使用 Windows.因为 Windows 不论从技术上，经济上，思想风格上都是与我们培养高科技人才的目标格格不入的.Windows 的流行属于历史遗留问题，爷爷一级的人当然已经不可救药，但是我们不应该让下一代继续走上歧途.</p><h2 id="UNIX-不是计算机专家的专利">UNIX 不是计算机专家的专利</h2><p>当我建议一些非计算机专业的人用 Linux 的时候，很多人说：</p><ul><li>“UNIX 是计算机系的人用的，我们不能理解.”</li><li>“UNIX 是男孩用的，我们女孩不用.”</li></ul><p>但是其实世界上的大多数科学家和工程师几乎用的都是 UNIX 作为他们的电脑工具.就因为它简单，可靠，稳定，强大，有趣.甚至很多时候 UNIX 就是唯一的选择.</p><p>你说：“我们都会用 UNIX 的话，你们计算机专业的人还用来干什么?” 很容幸的告诉你，计算机专业的有一部分人就是专门为你们提供这样强大而方便的计算机工具的.如果他们制造的工具只有自己会用的话，那这个工具还有什么用?</p><h2 id="理解-GNU-Linux">理解 GNU/Linux</h2><p>不要用 Windows 的标准来要求 Linux.由于GNU/Linux这个词太长，下面如果没有特别指明，“Linux&quot;就是指GNU /Linux”.</p><p>在这个年代，恐怕没有人需要我来介绍 Linux 是什么了吧?如果你觉得&quot;Linux 只不过是跟 DOS 差不多的东西&quot;，那请问问你旁边的 Linux 用户，Linux 到底是什么?</p><p>那为什么我还要写一篇这样的文章?因为，我发现还有很多人不不理解 Linux 和 UNIX，虽然他们也在用它，但是他们有时会问：“为什么 Linux 不能像 Windows 那样 …?”，“怎么Redhat Linux不能 mount NTFS 分区!”，“Linux 下用什么整理硬盘?”，“什么时候OpenOffice才能完全兼容Word文件啊?”，“现在还有什么Windows能干的事情Linux干不了的?”…</p><p>他们有40G的硬盘，却只为 Linux 分配了2G空间，有时还抱怨&quot;这个东西怎么占这么多硬盘!&quot; 似乎 Windows 该占用大部分硬盘.他们把重要的数据装在Windows的分区，似乎信不过Linux.他们总是到处寻找新奇的，好看的GUI程序，对命令行的东西一概不屑一顾.他们对Drag&amp;Drop，菜单配置，自动升级非常感兴趣.他们如果找到一个很像 Windows 程序的 Linux 程序，一定会很高兴的说：&quot;哈哈!Linux 也能…了!&quot;如果Linux在某种测试中胜过Windows，他们会高兴得跳起来.他们没有办法用Linux 解决问题的时候，甚至用Wine来运行Windows程序.有时实在没办法，只好重起到Windows，或者干脆省得麻烦，在 Windows 下装一个 VMWare 虚拟一个 Linux 玩.</p><p>你如果出现了上面的情况，说明你的思想受到了 Windows 的某种潜移默化的影响和误导.你没有能够从本质上理解存在于 Linux 身上的 UNIX 思想.你支持 Linux，你喜欢 Linux，你能从中感觉到快乐，这非常好.你现在只需要明白的是：Linux 从来就不是一个玩具，它是天才UNIX的后代.UNIX 是自晶体管发明以来最伟大的发明，它从诞生那一天开始就比 Windows 的设计出色.</p><p>你要体会什么叫做&quot;设计&quot;，一个糟糕的设计并不是到后来缝缝补补就可以变好的，而一个出色的设计，不但可以以不变应万变，而且可以影响到后来者.一个出色的设计配上一个出色的实现，那就是非常出色的发明.Linux 就是这样的一个出色的发明.Linux 并不需要追赶 Windows，也不需要打垮微软.它的最终目标是改变整个计算机世界，还人们自由，给人们乐趣和方便.</p><p>Unix 是简单的，你不需要成为一个天才也能理解这种简单.</p><p>UNIX的设计者 Dennis Ritchie 说：“Unix is simple. It just takes a genius to understand its simplicity.” 但是我不这么认为，因为我不是一个天才，但是我却勇敢的把 Windows 完全删除掉，遇到不明白的事情的时候努力用 UNIX 的方式去解决，而不是寻求 Windows 的帮助.现在我体会到了 UNIX 的思想和好处，我可以用比 Windows 高效几倍的效率工作.因为我相信这样的信念：“Windows 能办到的事 Linux 一定能办到，而且办的更好.”</p><p>这小节开头的话应该改成：“Unix 是简单的，你不需要成为一个天才或是计算机专家.但是在这个冲斥着 Windows 错误观念的世界，你需要信念和勇气才能理解它的简单.” 我下面就告诉你一些我理解到的东西.首先，你要知道的是微软在国际科学领域是根本没有地位的.</p><h2 id="微软的地位">微软的地位</h2><p>微软的名声在欧洲和美国的大学里，特别是在计算机系里之坏，大家可能有所耳闻.我认识的 MIT，Stanford 的教授，贝尔实验室的专家，甚至一个欧洲小国的高中计算机老师都绝口不提微软的名字.在他们眼里，微软只是一个没有真技术，专靠在落后国家商业宣传和垄断经营的小公司.这个&quot;小&quot;并不是说它人少，钱少，而是说它先进技术少.</p><p>我上次和王益合作写了一个算法演示程序，那个算法是贝尔实验室一位科学家Steven Fortune很天才的发明，为了程序能够被身边大多数人使用，我们选择了 VC+MFC 作为平台.我在分析算法时还得到 Fortune 很热情的鼓励，寄给我一份资料，还多次回信耐心的给我讲解了很多细节.但是程序完成之后，我把样品发给 Fortune，他回信说：“对不起.我机器上没有 MFC.” 话说的很客气，但是我已经感觉到了他对 Windows的不屑.然后我把 MFC 静态编译进程序再发给他，他就没有再回信了.他显然不是瞧不起我，而是确实有难处.</p><p>你能感觉到这位科学家对微软和 Windows 是什么态度了吧?不是反感，而是他心里根本没有 Windows 这个东西!微软在高科技领域没有发展，那么它怎么生存呢?到发展中国家去发展一下，他们的人民还对电脑一无所知，我说不定甚至可以打入大学的计算机系呢.我送他们软件，我捐钱盖大楼，我出钱找图灵奖获得者来演讲，让他们觉得我们都是科学家!</p><p>好了，现在全国的大学包括清华，几乎所有人机器必装盗版 Win2000，Office XP，学校的选课系统是非IE不能正确浏览，论文用 Word 编辑，演示用ppt做，email 的通知附件是 doc 文件，你不用 Word 打不开，连 863 项目都用 VC 写程序了.我很久以前就看到一份报纸说，“微软为什么不严厉打击盗版?” 这篇文章说，微软非但不打击中国的盗版行为，而且有放任之趋势.放长线吊大鱼，“以后我要你们加倍的来还我!” 确实如此，它的目的快实现了.</p><h3 id="Windows-笼罩下的中国计算机教育">Windows 笼罩下的中国计算机教育</h3><p>说句丢脸的话，比尔盖茨很久以前是我的偶像 …</p><p>在中国，比尔盖茨被很多人奉为神圣，“少年电脑天才”，甚至有的人提到他的名字就做出&quot;抱拳对天&quot;的姿势.很多人谈到微软的&quot;新技术&quot;，“高科技” 都是眉飞色舞.各种&quot;VC编程圣经&quot;，&quot;深入了解 Visual C++&quot;之类的书，在开头几页都会出现非常肉麻的字眼，“在那团团的混沌中，一个开天辟地的精灵，Windows 1.0，诞生了 …”</p><p>微软的软件被这么多人盗用，那么人们是怎样使用这些盗版程序的呢?先看看电脑培训班，教的都是一些 DOS 命令，打字，Windows 基本操作，Word 文档处理，PowerPoint，高级班可能有 Excel，Access… 参加各种微软认证考试，MCSE，MSDE 的人络绎不绝.考试辅导班都贴出了&quot;280元，考过为止&quot;之类的字样.考试参考资料更是昂贵，有些电脑书店整整两书架都是&quot;Microsoft Press&quot;的东西.我有个同学参加认证考试，每门考试都要200多元.而且你一次考不过可以再考，又要交钱.他后来还津津乐道跟我说，看我，花了 XXXX(一个四位数)元考过了微软认证，得到一张比尔盖茨亲笔签名的证书和价值6000元的 Windows XP 内部发行版.</p><p>“电脑要从娃娃抓起”，我们再来看看娃娃们学的是什么.大部分家长给孩子买了电脑之后，他们首先就会装一个盗版的 Windows，然后买来盗版的游戏开始玩.如果哪个孩子会用 Delphi 编程序，那可不得了.报社记者，电视台争相报导，说，某某学校的初中生某某，在别人都还在玩电脑游戏这种&quot;初级阶段&quot;的时候就已经用 Delphi 写程序了.镜头还瞄准了他显示器上面的像框中的比尔盖茨头像!</p><p>我刚进入大学计算机系时还不懂得什么是操作系统，因为我以前只用过&quot;中华学习机&quot;.看到新入学的同学们各个谈论的都是 “Windows 95”，“VC”… 我简直觉得我落后了好几十年一样，整个一土人，根本跟他们答不上话.好不容易找到一个比较熟的同学问了一下：“你们天天谈论的瘟95是什么啊?” 答：“win95就是一个操作系统，跟DOS是一类.”“朵死是什么?” “你连DOS都不知道是什么?别在计算机系混了.” 学校上课当然不讲VC编程之类的东西，但是上 Pascal 的老师有一次就说：“嗨，我们学校真是落后.现在别人都用 C, C++，甚至 VC 了，我们还在讲 Pascal.不知道什么时候才能有VC课啊.你们出去也是要用VC的，只好自学了.” 于是，有些同学很多时候上课都捧着一本很重的&quot;Windows 编程大全&quot;之类的书，根本没有听课.吃饭时就念念有词的跟我说，“代码的优化是无止境的”，“匈牙利命名法真是伟大的发明” … 这就是中国很多大学计算机系的情况.</p><p>感觉到无知了?这不是偶然的，而是微软长久以来埋下的伏笔.它要让无知的大家都把它奉为神圣，它要让支持UNIX，Xwindow的人一旦说 UNIX 好，Xwindow 好的时候，都被一群人围着说教：“这个 Windows 也能做到”，“你对 Windows 有偏见”，“微软才是主流啊”，“你敢瞧不起 win2k?”，“.NET 就是世界潮流”，“微软的毕竟是新技术”，“有钱就是有技术”…甚至在一番论战比较后败下来还是要说：“Windows 性能差点，但是易用性强”，&quot;Windows 是老百姓用的，要求别那么?quot;，“微软那么有钱，以后想超过 UNIX 还不容易吗?” …</p><h3 id="发达国家的计算机教育">发达国家的计算机教育</h3><p>我前段时间在 USENET 发文问有关 Scheme 语言的问题时，认识了一位丹麦人.他解决了我所有的问题，并且建议我阅读一些很&quot;深奥&quot;的有关程序语言语法，文法的书，他告诉我很多网站可以学习 LISP，Scheme，人工智能，算法.他叫我看 Jonathan Rees 的论文 “Syntactic Closures”.他还打包给我寄过来一份 MIT 的 “How to Design Programs”.他说他在自己的 PC 机上装的是 Linux，他用 Emacs 编辑，运行Scheme 程序.他对 Emacs 的了解和爱好真是使人惊讶.他大学本科毕业时做的毕业设计是一个 Scheme 解释器.这对于我来说是望尘末及了.</p><p>他是那么的不厌其烦，我的每一个问题他都详细的回答.我有时都觉得过于详细了，怎么这么耐心啊?我觉得他似乎是我的高中老师.他是什么样的人呢?我好奇的打听了他的情况.原来，他是丹麦一所普通高中的计算机老师.</p><p>他说他在高中里讲授程序设计和算法，计算机语言文法.他说用 Scheme，他的学生不用再为内存泄漏等程序语言本身的问题而烦恼，而专注于问题和算法本身.有利于培养学生解决问题的能力，特别是用计算机解决数学问题的能力.</p><p>天哪!为什么欧洲出现那么多数学家，几何学家?你看看别人重视的是什么!我们的计算机教育如果继续这样下去，只会沿着弯路越走越远!</p><h3 id="微软和它的朋友们的如意算盘">微软和它的朋友们的如意算盘</h3><p>下面来看看微软的收入是怎么来的.首先，Windows 98系列操作系统，一个就是 100多美元，每次升级又是几乎同样的价钱.Windows NT 还要贵几倍，而且有用户数目限制，5个用户的，10个用户的… 以后如果要增加用户数目还要按比例付钱.</p><p>花了如此多钱买来的操作系统就能用了吗?它竟然连压缩程序都没有提供!你装上Windows 之后一般第一件事就是去下载一个 WinZip 吧，“只要 29 美元”.Windows会中病毒啊，马上花 70 美元买一个 Norton AntiVirus 吧.还有黑客呢?再买一个Norton Internet Security 好了，100 美元.系统需要优化，磁盘需要整理，买一个Norton System Works 是你最佳的解决方案，100美元.</p><p>可是你现在还是不能干正事啊!你想要一个 Word, PowerPoint?那就买一套 Office XP 吧，一起买便宜些，$459.90.</p><p>那些程序不会用啊!那些菜单怎么设置，到底有什么功能啊?看&quot;帮助&quot;也学不会.买本书看看吧，我推荐&quot;Special Edition Using Microsoft Office XP&quot;，不贵,$27.99.这本书里面大部分是屏幕抓图，还是买一本旧的比较划算,$17.85.</p><p>你如果只是当个秘书，上面的差不多还凑合了.可是你有更高的追求，你想成为 Windows程序员首先买一个 Visual Studio.NET 吧，要不然怎么编译程序,$494.95.</p><p>为了紧跟微软动向，世界潮流，不能不注册个 MSDN 什么的吧?这个贵一点，不过物有所值啊，$2,799.</p><p>嗯，你现在已经是上层阶级，白领人士了.你现在可以像这样&quot;自由&quot;的，&quot;安全&quot;的生活了.</p><h2 id="为什么要反对使用-Windows">为什么要反对使用 Windows</h2><p>很多人都说不应该完全否定 Window，Windows 也有它的长处.不应该骂微软.</p><p>对.Windows 容易操作，适合普通用户.如果微软把它自己定位在 P&amp;G，Philips 那样的地位，能够给我们的百姓提供周到的，完善的，价廉物美的服务.那我肯定是很喜欢它的.但是从上面的种种情况说明，微软是一个野心极大的国际垄断组织!它的产品没有一个是不出问题的：Windows 不稳定，容易中病毒，而微软不为大家免费提供杀毒软件.我就是要让你们花钱买我的朋友 Symantec 的杀毒软件，谁叫你们已经上了我的贼船?这叫什么售后服务啊!</p><p>你买来微软的程序，安装的时候一般都有一个协议，说：“由于微软的程序造成你的数据损坏或丢失，微软概不负责.” 我想很多人肯定觉得这个不合理，不想按那个 “I accept”.但是你的软件买都买来了，钱都花了，现在一按 “I decline”，安装程序马上就会退出.你只好被迫点击了 “I accept”!这不是不平等条约吗?</p><p>我已经目睹了好几个朋友的文档被 Microsoft Word 损坏，有的是编辑了十多天的30多页的论文，有的是费了很大工夫做出来的个人简历，那个朋友为此失去了到自己向往的P&amp;G 工作的机会.就在他要投简历的前一个晚上，就在那一瞬间… 不知道他痛哭的时候有没有想起要投诉微软，可是谁叫我们用的都是盗版呢，况且你还点击了 “I accept”.</p><p>微软仗势已经占有大部分PC市场，制定不符合国际标准的&quot;微软的标准&quot;，以不合理的方式压制其它公司的软件，这个问题已经在美国司法部闹了很久了.他甚至在 Windows系列操作系统中放置能够通过网络泄漏用户信息的代码，以至于 Windows 刚进入澳大利亚时被澳大利亚政府禁止使用.</p><p>有些人说：“微软毕竟开创了一个历史，造就了今天的 IT 行业.” 但是，如果没有微软，我们今天早就用上非常稳定，非常可靠，非常方便，非常&quot;傻瓜&quot;的软件了!微软是阻挡信息技术发展的罪魁祸首.</p><p>微软的程序的工作方式(注意，我只是说操作方式，病毒的事情另外算)确实适合于一般家庭，上上网，发发邮件，打打游戏都不错.可是微软却要把自己包装成什么&quot;高科技&quot;企业，要在世界各地设置&quot;研究院&quot;，在大学计算机系赠送不适合用于科研的 Windows产品，甚至出钱请图灵奖得主来中国畅谈&quot;二十一世纪的计算&quot;，还在大会上宣传自己的 .NET 技术.非要把别人认为自己是科学的，自己是领导世界高科技的.但是呢?它什么高科技也没有.欧洲，美国，哪一个关键部门在用微软的东西?NASA? DOE? CERN?你仔细想一想，微软的程序对人类到底有什么重大作用?</p><h3 id="什么是-Windows-能干而-Linux-干不了的事情">什么是 Windows 能干而 Linux 干不了的事情 ?</h3><blockquote><p>“Windows 能干而 Linux 干不了的事情，那就是不需要干的事情.”</p></blockquote><p>有个朋友看我半年没有用 Windows，有时就会问我：“你只用 Linux，有没有发现有些Windows 能处理的事情 Linux 干不了?”</p><p>我回答说：“Windows 能干而 Linux 干不了的事情，那就是不需要干的事情.”</p><h3 id="Windows-能做的有益的事情-Linux-都能做">Windows 能做的有益的事情 Linux 都能做</h3><p>Windows 下的某些功能确实是我们需要的，那么 Linux 的开发者们和用户也需要这种功能，他们就会去实现这种功能，而且比 Windows 的方式好得多.由于大多数科学家，工程师用的都是 Linux 或者某种商业 UNIX, 所以几乎所有商业的科学工程程序，比如Matlab, Mathematica, AutoCAD, Candence的，Synopsys的，Avant! 的…全都是先有UNIX 的版本(包括Linux)，然后再考虑移植给 Windows，甚至根本不移植给Windows，因为 Windows 的机器一般没有足够的能力运行这样的程序.你不要以为只有 Windows 才有 PSpice, UNIX 的 HSpice 要好得多，而且可以运行在大型主机上.当然它们不是免费的，但是它们值那个价钱.</p><p>但是 Windows 下有些东西在 Linux 下没有很相似的，或者你找到很多类似的，但是它们每一个比起 Windows 的那个程序都要差很多，那么原因有两种可能性：</p><p>有一个完全类似的程序，但是由于它乍一看不漂亮，被你忽略了.而其它程序虽然看起来很漂亮，但是它们是一些初学编程的人写的.现在由于 Gtk, Qt 的诞生，Linux 下开发图形界面程序极其简单，很多初中生甚至小学生都可以随手编出一些漂亮不中用的程序.如果你整天寻找这样的程序挑来挑去，永远也找不到你满意的.当然也有一流的程序用 Gtk 和 Qt，比如 GVIM 就可以用 Gtk 作为图形界面，我还知道 Synopsys 一些程序用了 Qt.</p><p>我曾经也犯过这样的错误，从外表区分一切.结果优秀的 FVWM, lftp, Mutt, wget 都被我忽略过.当我找回它们的时候，我是那么的羞愧不已，它们现在都是我的朋友 我第一次看到 FVWM 觉得它只不过是一个有很厚很难看边框的东西.可是现在，我的同学看到 FVWM 都说：“哇!真漂亮.”</p><h3 id="有另一种完全不同的方式可以达到相同的目的，甚至更好">有另一种完全不同的方式可以达到相同的目的，甚至更好</h3><p>很多人很关心 Open Office, Star Office, AbiWord, … 他们多么盼望有一天某一个Linux 程序能够完全兼容的打开一个复杂的 doc 文档.但是你永远也不可能有那一天.为什么呢?因为微软为了占有市场，必定不会让其它系统的程序能够完全兼容它的文档格式.它一定会不断变化 doc 文档的内部结构，隐藏一些秘密，让其它公司的程序打开 doc 文档时总是有某种问题，从而你必需购买 Microsoft Office 和 Windows.</p><p>你应该想一下，那么多的高智商的大学教授，科学家，学生，他们用的都是 Linux 或者其它类型的 UNIX，他们没有 Word 可用，怎么处理文档呢?这么多年没有一个像Open Office 的程序出现，难道大家没有办法写文档吗?</p><p>显然不是这样.你看看那些高水平的学术杂志，论文，那些大学教授的网页，那些漂亮的幻灯片，它们是什么做的?原来 UNIX 用户早就有非常方便的 troff, LaTeX, SGML等东西可以处理文档，而且它们比起 Word 都要高明的多.Word 显然被这些大拿忽略了，以至于很久以来没有人想在 Linux 下开发一个类似 Word 的程序，除非某些公司想抢微软的饭碗.</p><p>很多人留着 Windows 在硬盘上的原因无非是为了用 Word 和 PowerPoint.我见过一个教授，他的 Windows 笔记本电脑上除了 PowerPoint 什么都没有.有一天演示的时候，他指着堆乱字符说：“对不起，这是一个公式…怎么每次都是这样…” 其实有比PowerPoint 好几百倍的东西可以制造幻灯片，你可以用最简单的方法制造世界一流效果的论文和幻灯片.你待会儿可以看看我的TeX网页，你就会知道为什么我可以完全离开 Windows.</p><h3 id="Windows-能做的那些没用的事情-Linux-永远做不好">Windows 能做的那些没用的事情 Linux 永远做不好</h3><h4 id="电脑游戏">电脑游戏</h4><p>有些人说 Linux 下不能玩 Windows 下所能得到的所有游戏.的确，Linux 下虽然也有少量的游戏，比如 Quake.但是它没有 Counter Strike, 没有 Star Craft, …</p><p>并不是说电脑游戏不该玩，但是应该适可而止.电脑是用来处理事务，帮助你学习，解决问题的工具，而不是一个玩具!整天沉迷于电脑游戏中，而不出去感觉外面的世界，你会变得越来越冷酷，越来越缺乏人情味.你与真实的世界越来越远.</p><p>你可以在 CS 里杀人，你可以在 Tomb Raider 里探险，你甚至可以在 Tony Hawk’s Pro Skaters 里滑板… 但是 It’s not real!你虽然有很高的&quot;反恐技巧&quot;，但是遇到歹徒的时候，你是那么的怯懦；你虽然控制 Laura 伸手敏捷，但是你打篮球的时候怎么总是被人断球?你虽然可以轻易的在 THPS 里作出一个 “360 kickflip to hangten grind to fakie”，但是你踩在自己的滑板上的时候还不会 ollie!</p><p>说回来，如果你偶尔玩一下电脑游戏未尝不可.但是世界上有远比 Windows + PC 更好的游戏方式.Sony 的 PlayStation2, SEGA 的 DreamCast, Nintendo 的 N64，Namco的街机…每一个都比 Windows 游戏精彩，每一个都有如此高的3D性能，以至于Pentium4, Itanium + GForce4 都无法与它们比美!</p><p>Linux 的用户们都是关心解决世界的关键问题的份子，他们哪里有时间用自己的机器来玩游戏啊?他们每天用Linux高效的做完自己的工作就到阳光下享受自然去了.要玩游戏也是玩一些类似推箱子，贪吃蛇之类的智力小游戏.所以，你知道为什么 Linux 几乎没有游戏了吧?</p><h4 id="整理硬盘-优化系统">整理硬盘,优化系统</h4><p>这是一个非常有意思的话题，仅次于有关&quot;病毒&quot;的话题.相信很多 Windows 用户都有整理硬盘的经历.在很多 Windows 用户眼里，“硬盘用久了，会出现碎片，速度会减慢，需要一个程序来整理，整理硬盘的时候不要做其它工作”，这好像是天经地义的事情.</p><p>我也曾经津津有味的看着 Norton Defrag 一点一点的把我的硬盘排序，调整，用图形的方式显示出来，然后报告?quot;100% 没有碎片.你的硬盘现在已经达到最佳状态.&quot; 我现在才发觉我那时是多么的幼稚.</p><p>Linux 和 UNIX 用户似乎从来没有&quot;整理硬盘&quot;这种说法呢?你觉得很奇怪吗?如果你觉得很奇怪，那说明你的思想在某种程度上被微软的垃圾程序禁锢了.你需要明白，UNIX 的大型主机很多必须是一天24小时，一年365又1/4天不停运转的，要是每个星期都要整理一次硬盘，在整理的时候几乎不能干任何事情，那是绝对行不通的!</p><p>Linux 机器根本不用整理硬盘，这就是为什么没有看到过 Linux 用户整理硬盘.Linux 的文件系统是比 Windows 的 FAT, FAT32, NTFS 高明得多的文件系统，它们不但可以对文件设置权限，实施完全的保护，而且可以&quot;越用越整齐&quot;，“越用碎片越少”!你应该把文件大部分放在 Linux 的分区，而不是 Windows 分区，因为它比 Windows分区可靠得多.</p><p>还有更滑稽的事情就是有很多&quot;Norton System Doctor&quot;，“Windows 优化大师”，“超级兔仔注册表魔法” 之类的程序存在，而且价格昂贵.似乎一个操作系统本来应该有很多问题，需要别的厂商做程序来&quot;优化&quot;它，而且为了得到优化，你需要付钱!这些问题 Linux 根本就没有，所以不需要什么优化.Linux 内核本身就是高度优化的.</p><h4 id="IDE">IDE</h4><p>有些人在抱怨为什么 Linux 没有一个良好的 IDE 开发环境.Linux 现在已经有一些IDE 了，但是总是有很多问题.你是不是正在寻找，正在期望 Linux 某一天可以有一个VC那样的开发环境?你有没有发现你正在进入微软给你设下的怪圈?你为什么一定要用 IDE?你说：“IDE 开发迅速，调试方便，适合大型程序…” 那说明微软的程序在你脑子里已经比较根深蒂固，你需要好好清醒一下了，看看我来告诉你.</p><p>高明的 UNIX 程序员不用 IDE，IDE 从来就是给初级 Windows 程序员用的.</p><p>你看看大型的 UNIX 程序，包括 Linux 内核，各种网络服务程序，Xwindow 程序在内，哪一个是 IDE 搞出来的?我们实验室的 EDA 程序也没有一个是 IDE 弄的，我还知道Candence, Synopsys，Mentor 的高性能的图形界面 EDA 程序也都不是 IDE 写的.你信不信，微软的人在写 Windows 本身的时候也根本不用 IDE.微软内部程序员最喜欢的编辑器其实是 VIM，用 VIM 的微软程序员上次向乌干达的可怜儿童捐助了1000多美元，这是值得称赞的.</p><p>有一次某杂志采访一些出名的 Linux 内核程序员，包括 Linus 在内，没有一个人用IDE，有的人用 VIM，有的用 Emacs，只有 Linus 说&quot;GNU Emacs is evil&quot;，但是其实他用的是一种跟 Emacs 有同样键绑定功能的 MicroEmacs.大家都是用编辑器编辑了程序文件，然后用 make 这样的自动工具调用 gcc 编译器完成编译工作的.甚至高级的 Windows 程序员也不用 IDE，他们可以从命令行调用 cl，nmake 来编译自己的程序.虽然这样的 Windows 程序员很少，但是他们却是最了解 Windows，最高明的Windows 程序员.</p><p>为什么 UNIX 程序员不用 IDE?明白了这个道理你就能体会到 UNIX 的设计思想了.首先，一个 IDE 集成了编辑器，编译器，汇编器，调试器，跟踪器… 这个编辑器功能肯定比不上 VIM 或 Emacs，编译器比不上 GCC，汇编器比不上 as，调试器比不上 gdb，ddd, 跟踪器比不上 strace, ltrace, truss.你得到的是一套整合的低能的程序.如果你对调试器的功能不满意，你只好换用另外一套 IDE，但是这套 IDE 的热键，菜单，编辑器功能，按钮… 跟原来那个有很大不同.你不得不花很多时间来熟悉新的环境，而不能保持原来的某些东西.</p><p>而在 UNIX 下就不一样了.你可以用你最喜欢的 VIM 编辑程序，你在 VIM 里可以调用GNU make，make 可以调用 gcc, ld, … make 的出错信息可以被 VIM 捕获，VIM 能帮你在源程序里定位.你如果喜欢 icc, 你可以让 make 用 icc 而不是 gcc.你如果觉得 gdb 跟踪变量时比较麻烦，你可以用 ddd 来显示各种数据结构之间的关系.你还可以在 Emacs 里调用 gdb，那样就可以同步显示源代码了.而且 VIM 和 Emacs 还可以编辑很多其它东西，比如信件，LaTeX 文档，HTML，配置文件… 你不用另外找一个什么编辑器来干这些杂活了.很多程序比如 Mutt, tin 都可以在内部使用 VIM，这样就更方便了.实际上 make 在其它方面还能帮你很多忙，我的每一个比较大型的 LaTeX文档都是用 make 维护的.</p><h3 id="Linux-能干的高精尖的事情-Windows-都干不了">Linux 能干的高精尖的事情 Windows 都干不了</h3><p>当然有很多事情是Linux/UNIX的专利了.因为 Windows 只能装在 PC 机上，好像以前也有 Alpha 可以使用 Windows NT，但是就是没见到有人用.PC 机的能力是很低的，像我们编程序处理 NP-Hard 问题的人，用 Windows 的机器显然速度不够，而且有时一个问题算上几天甚至几个星期，Windows 机器是以&quot;死机&quot;著称的，我们怎么能放心?所以几乎所有科学计算程序，EDA 程序，高性能图像处理程序都不是 Windows 的.他们有时也会移植一些给 Windows，但是常常降低那些程序的能力.你比较过 Windows 版本的 Mathematica 和 Linux 的有什么区别吗?</p><p>IBM 制造的最大的并行计算机有 8000 多个处理器，Windows 不可能有能力管理这么多处理器，它用的是什么操作系统?答案是 Linux.</p><p>《泰坦尼克号》电影里的三维动画，那么细腻逼真，Windows机器能做出来吗?不行.那也是 Linux 机器做的.</p><p>民航总局用来训练地情人员的虚拟现实训练设备，Windows 当然无能为力.那都是商业的 IRIX 机器.</p><p>UNIX 是最早支持 TCP/IP 网络协议的系统.它上面有很多可以互相协作的网络服务程序，它们经过多年的使用和修订，已经达到比较完善的程度.而就在1997年，微软的比尔盖茨还在扬言：“Internet 是没有前途的.” 微软的这个&quot;远见卓识&quot;大家应该都已见识，它后来加上的网络服务程序IIS漏洞之多，让公安部都频频发出警报，大家也是见识了的.</p><p>其实你知道了，Windows 没有一样有用的事情能比 UNIX 干的更好.</p><h3 id="Linux-干不了的有用的事情-Windows-照样干不了">Linux 干不了的有用的事情 Windows 照样干不了</h3><p>当然 Linux 不是万能的.它也有不能干的事情，电脑也有干不了的事情.但是 Linux干不了的事情，Windows 肯定也干不了.这些事情就是我们需要探索，需要努力的事情了.在你探索的过程中，Linux 必定是你的好伙伴.</p><p>不要把Linux和Xwindow掩盖起来!不要把我们的用户当成傻瓜.</p><p>什么?你早就知道 Windows 是垃圾?噢!你怎么不早说呢!害我废话这么多.嘿嘿.</p><blockquote><p>“好了.你知道 Windows 是垃圾，你现在用什么?”<br>“Linux + Xwindow”</p><p>“那我问你，Xwindow 是什么样的?”</p><p>“不就是跟 Windows 差不多吗?只不过 ‘Start’ 按钮比较方，而且上面不是一个Windows 标志，而是一个脚丫子.点击一下居然还有很漂亮的中文菜单.我喜欢!”</p><p>“你知道什么是’根窗口’吗?”</p><p>“不知道.从来没听说过呢?”</p><p>“根窗口就是遮盖整个屏幕的那个最大的窗口.”</p><p>“哪儿有什么窗口啊!我没有看到呢?”</p></blockquote><p>你发现了问题吗?这些 Linux 用户说是在用 Linux 和 Xwindow，但是他们对 Linux和 Xwindow 几乎完全不了解.很多人用了那么久 Xwindow 都不知道根窗口是什么东西，不知道其实按钮也是窗口，不知道窗口管理器和其它程序有什么关系，大家都以为窗口上面的按钮是程序自己放上去的，不知道窗口?quot;class name&quot;，&quot;resource name&quot;是什么东西.他们也不知道 .Xdefaults 是用来干什么的.特别是他们很多人都不知道 Xwindow 的字体是如何命名的，什么是 fontset，有了一个新的字体也不知道怎么安装.</p><p>他们被遮在 Linux 之上的一层一层的包装迷惑了，他们等待有图形界面的工具来帮助完成一切事情，他们认为 Linux 跟 Windows 一样，只是麻烦一点.他们知道 Linux内核很好，但是他们感觉不到 Linux 和 Xwindow 在操作层面的天生的先进性，随后不久就把 Linux 完全删除掉了.你发现没有，要用户理解 UNIX 和 Xwindow 的操作层面的先进性，才是留住用户的最好办法.如果用户体会不到操作时的方便和高效，内核再好他们也不会理会.</p><p>但是用摹仿 Windows 的作法来吸引用户，永远会失败的.因为 Linux 如果摹仿Windows那一套低效率的方式，那么 Linux 的这套&quot;低效率方式&quot;永远比不上Windows 的那一套&quot;低效率方式&quot;.那么用户就会说：“这个 Linux，没有一样比的上 Windows.”</p><p>Linux 天生就是继承了 UNIX 的高效的工作方式，为什么我们要把它掩盖起来?我们为什么只告诉用户 KDE 的菜单怎么用?我们为什么不能像早期的 Xwindow 书籍那样第一节就告诉用户什么是 X server, 什么是 X client，什么是 Window Manager, 什么是根窗口.第二章就告诉用户窗口有哪些属性，什么是 classname, resource name, hint，怎样使用 .Xdefaults, xrdb …</p><p>在这里我又不得不说一下那些 Linux 的发行公司和写书的人，他们把 Linux 和Xwindow 包装起来，却没有从基本上告诉用户 Xwindow 的工作原理.很多书籍讲授的层次就是在Gnome, KDE 的菜单操作的层次，靠大量抓图来占篇幅，&quot;繁荣&quot;Linux 书籍市场.</p><p>现在很多人已经把能够利用别人的库写出一个好看的程序作为自己编程水平的象征.在这?quot;图形化&quot;，“可视化” 的年代，你如果还在用 troff, LaTeX 写文档，你还在用VIM 自己编辑 HTML，用 Mutt 处理邮件，你还在用文本模式的 gdb 调试程序，你还在用Xlib 写程序, 你还在用 tin 上 USENET，你还在自己写 Makefile，写机器代码，你还在玩 Clossal Cave 这样的字符模式冒险游戏，那你就是老古董.</p><p>其实这种思想是错误的.虽然你是一个坚决的 Linux 支持者，但是你的思想是 Windows的思想.你认为图形界面，菜单，按钮就可以解决一切问题，就可以给你高效方便.你还是没能摆脱微软给你的潜移默化的东西.你其实离不开 Windows 那样的环境，你迟早会删掉自己的 Linux.</p><h2 id="GUI-vs-CLI">GUI vs. CLI</h2><blockquote><p>做一个坚定不移的&quot;两面派&quot;</p></blockquote><p>大家看到这个标题是不是热血沸腾?两派大虾都可以围攻我了：</p><ul><li><p>GUI派用户：&quot;哇!我一看你这小子就是 CLI 的.要不然自己写什么 Makefile?用什么Mutt?</p></li><li><p>CLI派用户：“切~ 你还用 X!高手都不用 X.你是 GUI 那边的.”</p></li><li><p>可怜的我：“555~~ 你们都不要我~~ GUI 和 CLI 就那么水火不容吗?”</p></li></ul><p>计算机界这样的门派之分还很多.很有特点的就是 CLI 和 GUI 了.CLI (Command LIne)的狂热份子声称永远不用 X.我上次在实验室看到一个同学用一个 SecureCRT 登录到Sun 机器，然后用一个 vanilla vi 编辑程序，我建议他启动一个 GVIM 过来显示在Exceed 上可以有语法加亮.但是他坚决反对，说：“高手不用X.你想想，要是我在一个很慢的网络连接怎么用 X?而且好多服务器没有装 X 程序.”</p><p>但是我们实验室的网速可够快，Windows 机器都有 Exceed 啊，而且 Sun 机器有全套X 客户程序包括 GVIM.他说他是 CLI 的坚决拥护者，但是他却在用 Windows，他后来打开了好几个 SecureCRT，每次从文本框输入地址，用户名和密码，从下拉菜单选择&quot;SSH2&quot;，然后点击&quot;Connnect&quot;.他还不断的夸SecureCRT 是&quot;网络管理员投票选出的最受欢迎的登录方式&quot;.老天，SecureCRT 本身就是个 GUI 啊，他其实没有明白Xwindow 的好处.</p><p>你说我是 GUI 的?我虽然很少在 console 下工作.但是我对 bash, VIM 很熟悉，我可以让 bash 按照我的键绑定方式来工作.我可以在 rxvt 里使用 Mutt 来收发 email.我的每个桌面上都常常堆放着一打不同大小的 rxvt.我用 VIM 编辑 LaTeX.我自己写Makefile 来维护 LaTeX 文档.我有时用 mpg321 来放 mp3.我上BBS用的我自己写的expect 脚本. 好了，CLI 派的朋友可以收我做盟友了</p><p>你说我是 CLI 的老古董?我的 FVWM 被我配置为可以&quot;手写操作&quot;，我只要画一个&quot;r&quot;就可以启动 rxvt，我只要画一个 “U” 就可以启动 GVIM，… 我用 GVIM 语法加亮模式编辑程序，我用 Mozilla 浏览网页，… GUI 派的现在好像认我做朋友了</p><p>好了.CLI 派的朋友，虽然我很喜欢命令行，但是我有时在屏幕上左右画一下就可以执行:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">Module FvwmConsole -terminal rxvt -geometry 45x5-0+0\<br>-bg gold -fg midnightblue \<br>-fn &quot;-adobe-courier-medium-r-*-*-14-*-*-*-*-*-*-*&quot; <br></code></pre></td></tr></table></figure><p>你是不是现在又想把我逐出师门?</p><p>GUI 派的朋友，虽然我很喜欢窗口.但是我可以在 FvwmConsole 里输入：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">All (rxvt) MoveToDesk <br></code></pre></td></tr></table></figure><p>把我所有的 rxvt 移动到我现在工作的桌面.“这家伙，怎么这么快就叛变了!”</p><p>其实何必分什么 GUI 和 CLI，UNIX 和 Xwindow 都是工业标准，它们从设计那天开始就有非常灵活的用法，各个程序，不管是 GUI 还是命令行的都可以互相协作.UNIX 和X 是一家，何必搞的那么偏激，非此即彼?你从我上面的行为可以看出 GUI 和 CLI的模糊界线吗?我就是坚定不移的&quot;两面派&quot;.</p><h2 id="UNIX-是简单的">UNIX 是简单的</h2><blockquote><p>“我相信简单就是最好，如果太复杂，我是不能理解的.” - Seymour Cray</p></blockquote><p>很多第一次用 Linux 的人会惊奇的发现，Linux 的程序居然不?quot;安装&quot;就可以运行，程序拷贝到随便那个目录都可以用，而不是一定要占用你第一个分区的空间.程序的设置只是一些简简单单的文本文件.你根本不需要什么&quot;注册表修改器&quot; 就可以改变系统的设置.这就叫做简单，但是简单就是美.虽然这只是 UNIX 简单性的一个肤浅的认识，你已经体会到了某些东西.</p><p>但是简单并不意味着功能弱，并不意味着落后.相反，简单意味着强大，意味着生命力.</p><p>我不会再继续阐述我理解到的&quot;UNIX 的简单&quot;，因为这个需要自己去体会.</p><h2 id="UNIX-是永恒的">UNIX 是永恒的</h2><p>有人说：“Plan9 会取代 UNIX，Mach 会取代 Linux 内核.”</p><p>但是你如果是一个深入体会了 UNIX 的人，你就会知道：UNIX 的思想是永恒的，不管时过境迁，Plan9 是否代替 UNIX，UNIX 的灵魂都会在 Plan9 身上现形!</p><p>我为同一个设备写过 Linux 内核和 Windows VxD 驱动程序.写 Linux 驱动程序时，我对 UNIX 设计的完美的一致性，远见性所折服.UNIX 用同样界面的 read(), write()系统调用就可以对不同的对象：普通文件，设备文件，管道，管道文件，socket，…进行统一的读写操作.我跟本不需要写一个测试用的应用程序就可以对我的设备驱动进行测试，因为 cat, cp, dd, 它们也使用了同样的 read(), write()，设备和普通文件在应用程序眼里没有区别.在那个还没有 Smalltalk, 没有 C++ 的年代，UNIX 的设计者已经使用了所谓的 “面向对象方法”.对，C 语言也可以实现面向对象.</p><p>UNIX 的系统调用几十年都没有很大变化，这非但不是顽固，不进步的象征，反而是UNIX 的远见卓识的体现!这就跟 TeX 程序几十年都不变的情况差不多.这些才是真正的永恒的 master piece! 你应该改变所有软件都必需从 0.1, 1.0, 1.1, 1.2, 2.0,…, 3.0, 3.1, 95, 98, 2000, XP, … 不断升级的想法.</p><p>Windows 就不同了，它在最开头只是一个 DOS 之上的图形包装而已.后来为了兼容以前的糟糕设计，不得不加上很多累赘.我写 VxD 驱动程序的时候就深有体会，Windows 95 程序对设备的操作只有用 DeviceIoControl，我不得不写了两个应用程序来对设备驱动进行测试.Windows 内核的不一致性和隐密性使我非常恼火.不过 Windows WDM驱动程序现在也有了 ReadFile, WriteFile，… 那说明什么?那说明 Windows 在向UNIX 学习，或者有可能是某个 UNIX 设计人员在微软打了几天临工，顺手加了几个UNIX 的东西进去.这样做是没有用的，Windows 从一开始就是非常糟糕的设计，它的历史的包袱太沉重了，缝缝补补有什么用?它只能永远的被 UNIX 甩在身后!</p><h2 id="UNIX-是强大的">UNIX 是强大的</h2><p>让聪明人干任何他们想干的事情.</p><p>UNIX 的一个特点就是非常高的灵活性，Xwindow 也具有这种灵活性.这种灵活性体现在哪里呢?</p><p>UNIX 的程序一般都有很多参数，不管你现在用的着用不着，总有人需要某些参数.它们的行为很多都可以用配置文件来改变.比如 GNU bash, 通常缺省的命令行输入方式是 Emacs 方式，但是只要我编辑一个 .inputrc 文件，就可以把它变成 vi 的输入方式，而且我还可以自己绑定键序列到某些操作.我可以用 shopt 来设置它的很多特点，比如是否进行通配符扩展，是否可以把一个变量当作一个目录来cd，是否可以自动纠正某些明显的目录名打字错误 …</p><p>UNIX 程序设计的思想是提供给用户&quot;机制&quot;，而不限制用户制定&quot;政策&quot;.这是一个重要的尊重用户的作法.</p><p>我们再来看看 Xwindow.Xwindow 是一个出色的设计，它把显示服务器和客户程序分开.一个显示上既可以显示本机上的程序，也可以显示别的机器上的 X 程序，而它们都遵守你的窗口管理器的统一指挥，它们之间可以方便的传送剪贴版数据，各种事件 … 比如有时我的 XFree86 上会出现四个不同机器上的 XTerm，两个不同机器上的 GVIM，… 它们统一受本机上的 FVWM 指挥.</p><p>Xwindow 程序都具有很多很多命令行参数和 resource 参数.你可以随意的在命令行或者 .Xdefaults 文件设置所有的颜色，字体，尺寸… 而且如果你用 xrdb 把 .Xdefaults 导入到根窗口，那么其它机器上没有经过配置的同样的程序，显示到你的机器上的时候也会遵守同样的外观规定.</p><p>Xwindow 的窗口具有 Property, 也就是一些可以自己定义的共享数据(原子).正是因为这些 Property 的存在，使得 Xwindow 具有无比强大的生命力.X 的窗口管理器和其它客户程序之间并没有统一的协议，但是后来出现了 ICCCM(客户程序间通信规范)，这个规范就是通过 property 定义的.现在又有人定义了一套&quot;扩展的窗口协议(EWM Hints)&quot;，使得Xwindow 可以具有某些 Windows 的特征，比如一个工具条程序可以告诉窗口管理器：“这个屏幕下面被我占据了24个像素的空间，你最大化程序的时候不要越过这个界线.”</p><p>一个强大的窗口管理程序比如 FVWM，它收到这样的提示时，可以答应工具条程序的这个要求，也可以不答应.一切选择的权力在于谁?当然是用户了!</p><p>你想想，是不是有些 Windows 程序常常弹出一个窗口要你选择 “Yes or No”?你不点击它它就不下去.你觉不觉得你的程序在侵犯你的尊严?你是一个人，一个智慧的生物，怎能受到一个程序如此的待遇?</p><p>还有就是很多 Windows 程序把人当成傻瓜，而它是&quot;智能程序&quot;.比如，有一个程序就是喜欢把你的每句话第一个字母都变成大写，我不说它是谁了，你遇到的时候就知道了.</p><p>如果连&quot;一句话开头一个字母要大写&quot;这么明显的问题都需要程序帮你纠正的话，人脑还用来干什么?况且如果你故意想要不大写的话，那就更麻烦了，我楞是没有从它那一大堆菜单里找到怎么关闭这个愚蠢的选项.</p><h3 id="只有符号才能完全操纵计算机">只有符号才能完全操纵计算机</h3><p>我们来说说很多初学 Linux 的用户.虽然他们在用 Linux，但是他们打心眼儿里是觉得Windows 的工作方式好，他们希望 Linux 有一天能&quot;像Windows那样&quot;.你说：“我的鼠标一点，我菜单一拉，… 就可以完成我的操作.” 但是我要告诉你：&quot;Linux 从来没有摹仿 Windows，将来也不会.Linux 从诞生之日起，它的工作方式就比 Windows 的先进.</p><p>Linux 属于能勇敢面对符号的人.只有符号才能完全操纵计算机.&quot;</p><p>看看优秀的 UNIX 程序，XFree86, FVWM, VIM, Emacs, proftpd, Mutt, wget, tin, … 没有一个不是用配置文件来设置选项的.为什么这些程序没有方便的菜单可以用来配置?难道它们的设计者就那么低能，连个图形配置界面也写不出来?</p><p>当然不是.因为图形界面配置方式的能力是极其有限的，而配置文件和程序语言的表达能力却是无限的.用图形界面配置这些程序的话，如果你想达到配置文件的效果，你需要成百上千的菜单，checkbox, radio button, … 到时候你根本没办法找到你需要修改的地方了!而各个程序的配置文件的语法都有很多相似之处，一般就是一些命令，设置一些变量，参数，… 一旦用会了一个，其它的也就容易理解了.如果你用惯了 awk, sed, Perl，你会觉得那才是真正的自动化啊.</p><p>鼠标虽然是很好的工具，但是它的表达能力是有限的.你不可能光用鼠标就让电脑完全明白你的意思，它毕竟只有3个按钮.看看我的MetaPost页你就能体会到鼠标的这一弱点.所以我们虽然很喜欢鼠标，但是却不能完全依赖它.</p><h3 id="各个小程序的完美配合">各个小程序的完美配合</h3><p>这就是UNIX最重要的特点了，它就是UNIX设计的思想.让每个程序只具有一项专门的能力，然后让它们合作.Xwindow也继承了这种好传统.这恐怕就是Windows和其它操作系统望尘末及的地方了.UNIX 程序设计之统一，配合之完美，真使我难以置信!shell, grep, find, awk, sed, make, Perl, Emacs, vi, tin, Mutt, … 它们是那么的具有一致性!你一旦学会了 sed 的正则表达式，其它程序基本上都能用了.你一旦学会了vi 和 VIM, 你会发现它的操作是那么的有规律性，似乎vi的设计者在几十年前就已经设计好了 VIM 在今天的完美而统一的操作方式!而且vi的操作还体现在 Mutt, tin 等很多程序中.你甚至可以把 bash 设置为 vi 的输入方式来输入命令行，我就是这么做的.一个程序可以调用另外一个程序来得到数据，可以把数据交给它处理后返回来，可以在自己的窗口里&quot;嵌入&quot;另外一个程序.</p><p>在 Windows 和其它非 UNIX 操作系统中，这种合作是非常困难的.我曾经在Windows下使用 Perl来进行一些自动工作.但是 Windows 的文件操作，管道是如此的不稳定，程序之间基本不能合作.你别想在 Visual Studio 窗口里面嵌入 UltraEdit 编辑器，你别想用一个 expect 脚本来控制 telnet 到水木清华BBS.</p><p>Windows 的程序都是大而全，大而杂，所有的电子邮件程序都需要自己提供编辑器，自己发送和收取邮件，自己显示邮件的附件.每一个BBS程序都提供自己的 Virtual Terminal, 自己的通讯代码.每一个 IDE 都自己提供编辑器，编译器，汇编器，调试器.人们为了使用一种新的程序，需要适应所有这些它提供的界面，而不能使用自己喜欢的编辑器的键绑定，菜单组织… 不能 DIY!</p><p>你要知道，最高级的电脑是定做的，自己想要什么什么CPU，什么主板，多少内存，什么硬盘，键盘，鼠标，显示器都是自己选择的.最高级的滑板，自己想要什么牌子的版面，什么牌子的沙，什么桥，什么轮子，什么轴承，也都是自己选的.最高级的古球拍，木板，胶皮，海绵，胶水都是可以自己选择… 而用 Windows 程序，你得到的是大杂烩，就像你去买&quot;品牌机&quot;，只有那么几种配置，而且附带很多你不需要的软件和服务；就像你去买组装好的滑板，你想要大一点的轮子和窄一点的板子，但是你没有这种选择余地!Windows 程序就相当于最廉价，最次的滑板.但是它却会花你更多的钱，因为一旦一个部件坏了，或者你不喜欢了，你不能另外找一个好的换掉它，你必需重新买全套配件!</p><p>而 UNIX 和 Xwindow 就是高档的&quot;组装货&quot;.比如我用 Mutt 的时候，我可以用 VIM也可以用 pico 来编辑邮件，我可以用 ImageMagick 也可以用 xv 来显示附件里的图片，我可以用 lynx 把 HTML 附件转成文本嵌入窗口中，我也可以把 HTML 附件交给Mozilla 图形显示.我可以让 GnuPG 帮我把邮件进行数字签名和加密，我也可以用其它 PGP 程序.</p><p>我想让 Postfix 而不是 sendmail 帮我发出邮件，我想让 fetchmail 帮我收邮件，转发给 postfix，然后被我自己写的Perl过滤器处理… 这一切我都可以办到!我可以选择我最喜欢的专门的程序来完成专门的工作，然后把它们结合在一起，我也可以分别得到它们的好处.</p><h2 id="学-UNIX-绝对不是浪费时间">学 UNIX 绝对不是浪费时间</h2><p>有人告诉我：“你看我用 Windows 什么都不用学.而用 Linux，光是安装就花了我一个星期!”</p><p>首先，我要告诉你的是，你装 Linux 花了一个星期，不是因为 Linux 不好装，而是因为你已经习惯了 Windows，对 Linux 最初难以理解而已.你想一想你最初安装Windows的时候呢?你花了多少时间搞明白什么是硬盘分区?什么是盘符?什么是目录?你认为Windows 就是那么容易可以学会的吗?虽然你觉得没花时间学，但是你以前在用别人的机器的时候已经耳濡目染，自然就了解了.而且由于你想要 Linux 和 Windows 并存于硬盘上，又增加了安装难度.而且你肯定没有得到有经验的 Linux 用户的帮助，否则他们会在20分种之内帮你搞定.一个星期也太夸张了.</p><p>如果一开始用的就是Linux就没有这个问题.你想想如果你没有用过 windows，你肯定会很习惯 <code>/etc</code>, <code>/usr</code>, <code>/usr/local</code> ,… 而不是 <code>C:</code>, <code>D:</code>, <code>E:</code>, … 是不是?如果你只用过Linux，你第一次用 windows 时恐怕也会问：“<code>/bin</code> 目录哪里去了啊?”</p><p>最重要的是，你用惯了的UNIX工具，它们可以伴随你一生，而不会那么容易变化或消失.你可以永远不用再换另外的工具了.除非那个工具比你这个好的太多，而且可以完全模拟你现在的工具.</p><p>我们实验室一个60多岁的老师，用<code>vi</code>, <code>cc</code>, <code>make</code>, … 都几十年了，他以前的经验绝对没有白费，而且教会了我们一批又一批的学生. 伴随着 UNIX 的最初发行而诞生，直到今天还是世界上头两号编辑器之一!有些人的 FVWM 配置文件已经用了 10 多年，现在完全不经修改还可以用.</p><p>看看 Windows 的工具，你从 Borland C++ 换到 VC, 就必需适应新的环境：菜单不同了，颜色不同了，按钮不同了，帮助信息不同了，热键不同了，编译器参数，调试器功能也不同了，… 那个时候恐怕花要花你很多时间去适应.当你刚刚适应了 VC, 你又要换成VJ, PowerBuilder, C++Builder, …</p><p>很多windows程序员都是这样，开头在dos下用Turbo C, 然后是 Borland C, VC, C++ Builder, …不断追赶微软的潮流.而且微软的SDK, MFC, .NET … 什么都在不断变化，不断出问题，又不断的在修改… Windows 程序员不得不买又厚又重的 Microsoft Press 的书籍，看了才一个月，又过时了.今天你才学会了写 VxD，明天你就必须用WDM 了.你不得不注册 MSDN 才能赶上 Microsoft 的步伐.很多人说：“计算机是贵族的专业.” 这就是微软一手造成的.</p><p>这些东西才是没完没了的浪费大家的时间和金钱的.这是是浪费生命!我们为什么不使用从诞生就那么一致和完美的 UNIX?你需要理解先进工具的设计理念.UNIX 的工具就像我们用的汽车，它的离合器，油门，刹车，方向盘，后视镜，永远都在同样的位置.用惯了的话，你对你的汽车的每一个部件都会了如指掌，甚至你自己都可以修车了.这难道不好吗?</p><p>有人说：“你说我们需要了解 UNIX，难道你要开车还必须了解汽车的结构吗?” 你去问问开车的司机，哪一个不了解汽车的结构的，那他的驾照就是混来的.你难道想要傻瓜型的&quot;微软牌汽车&quot;吗?我们来看看：</p><p>你买的微软牌汽车最开头只有一个座位，每加一个座位你得向汽车公司付钱.车上的防撞气囊不时会冒出来，说是为了你的安全.每开100英里要大修一次，每过一年要换一次引擎.附带的，你还必须换用由微软汽车公司指定的石油公司提供的新型号的机油.你的车出了问题，但是法律规定，你不准私自拆开你的汽车来修理，你必需到微软汽车公司指定的维修点去，需要付相当多的钱才能修好一个小毛病.</p><p>最可气的是，你每换一个型号的微软牌汽车，它的刹车和离合器都在不同的位置，你需要重新去考驾驶执照.如果这辆汽车在途中刹车失灵，你受了重伤，你也不能状告微软汽车公司，因为你买来汽车之后必须签一个合同，说&quot;由于微软牌汽车对你和家人造成的一切死伤，微软概不负责.&quot;</p><h2 id="怎样完全用-GNU-Linux-工作">怎样完全用 GNU/Linux 工作</h2><p>说了这么多 Windows 的不好.我还没有告诉你我怎么用 Linux 处理有些必要的事情.半年以前我由于中文老是配置不好，一直是双系统，不时需要重起到 Win2k 来处理汉字.后来我找到了 miniChinput, XSIM 和 SCIM 输入法.这下可以处理汉字了.而且 VIM 和Emacs 对汉字支持越来越好.我的大部分文本是用 VIM 编辑的，包括程序，信件，网页，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> 论文，MetaPost 绘图语言.</p><p>我不用 Word 这样的程序写论文，而是用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6833em;"><span style="top:-2.905em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span>，因为这是世界上效果最好，最方便的论文工具，是大多数学术杂志要求的格式.幻灯都是用 ConTeXt 做的，用起来很简单，而且效果非常漂亮.你可以看看我的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>TeX</mtext></mrow><annotation encoding="application/x-tex">\TeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8988em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4678em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span> 介绍.</p><p>至于绘图，你可以用很多可视化的工具，比如 xfig，dia.但是对于我来说，任何可视化的工具都不能完成某些任务，我需要一种可以精确描述图形的语言.我找到了MetaPost.它简单又好用，而且效果是世界一流的.我的插图，如果不是图像，都是MetaPost 画出来的.</p><p>我曾经抱怨 mozilla-mail 经常突然消失，损坏我好几封快要完成的信件.后来我发现mozilla 的邮件处理程序确实是不稳定的，功能又弱，有经验的 UNIX 用户都不用这样的程序.Mutt 是一个非常稳定可靠的 UNIX 邮件处理程序，而且功能非常强大.我曾经为 Gnome 和 KDE 的不稳定而烦恼.现在我找到了非常强大的 FVWM.KDE，Gnome也能和 FVWM 一起工作.虽然 Gnome 和 KDE 总体不稳定，但是某些部件程序还不错，很多 gtk, Qt 的程序也很不错，它们很多都是可以独立于这些桌面环境运行的.</p><p>Linux 有很多强大方便的工作方式是 Windows 没有的，或者有类似的东西，但是很差劲或者用起来不方便.比如 ssh 服务，rsync，cvs，expect …</p><h2 id="结论">结论</h2><p>我写这么多的目的是什么?我希望喜欢 Linux 的朋友，完全清除微软和 Windows 灌输在你脑子里的谬论，别再相信它们所谓的&quot;新技术&quot;，别再追赶 Windows，因为追赶Windows ＝ 倒退.马克思有一个思想很重要，“新生事物并不一定是在最近出现的.”</p><p>UNIX，Xwindow, TeX 虽然都比 Windows 先出现，但是它们才是先进生产力的代表.我们要清楚的认识到什么才是真正的现代化，什么才是真正的自动化.</p><p>消除学计算机很难的幻觉，勇敢的拿起像 bash, FVWM, TeX, VIM, Emacs, Mutt …这样强大的程序，勇敢的面对符号.不要再埋怨&quot;Linux 为什么不能像 Windows 那样&quot;，不要再浪费时间试用这样那样的程序，不要再忙着升级.你需要理解 UNIX 的工作方式，因为那是大多数科学家的工作方式.Linux 可以成为你的好朋友，你需要认识它，了解它，信任它，才能完全的靠它来高效的工作.当然，在游戏机，手机，掌上电脑里，或者在用电脑来娱乐的时候，用一些&quot;傻瓜软件&quot;还是不错的.</p><p>我希望小学，中学的计算机老师能够提高自己的素质，在孩子们的启蒙教育中充分利用Linux 神秘的特点，引起孩子们对数学，对符号的好奇心.诱导他们用计算机来解决世界上的有趣问题，而不要把教学的范围局限于计算机的操作和它自身的问题.</p><h2 id="附录-我用来处理日常事务的-Linux-程序">附录: 我用来处理日常事务的 Linux 程序</h2><p>好了好了.我知道你发现自己应该转向 Linux，你很后悔当初为什么中了微软的邪.但是不要着急.因为这些东西本来只是工具，它们是用来完成你的主要任务的辅助而已.你以前选错了工具，这不要紧.你还是拥有你自己原来的专业技能，那才是最重要的.工具的东西只有慢慢适应转换，不能一蹴而就，否则你会感到非常没意思，甚至放弃.</p><p>如果你只想做一个像我这样的普通用户，主要目的是用 Linux 来完成自己的任务，那就可以不用系统管理员或者网络管理员的标准来要求自己，因为当一个系统和网络管理员确实很辛苦.这里我对实验室的网管同学鞠一躬，谢谢你的指点和帮助. 不用把你的机器当成网络服务器，不用开放没有必要的服务，设置好 ssh, ftp 已经足够了.这样会省去了解很多没必要了解的东西的时间.不用过度考虑&quot;安全&quot;，因为 Linux 缺省已经很安全了.不过你有兴趣了解更多那也无妨.</p><p>下面给出一些推荐使用的可以处理一般事情的程序.至于你的专业上要用到的科学和工程软件比如 Matlab, Mathematica, Maple, HSpice, Design Compiler, … 还有其它物理上的，化学上的，生物上的 … 都必然有 Linux 和 UNIX 的版本.当然他们很多不是免费的，不要总是觉得什么都应该免费，自由不等于免费.它们是经过很多人辛勤劳动的产物，是可靠的程序，它们物有所值.</p><p>下面列出我常用的一些 Linux 程序.一个列表里可能有很多，那是为了方便你来选择，我列出了比较信得过的.但其实很多只有第一个是我真正在用的，我不喜欢试用程序.我不是一个合格的网络管理员，我的服务器都只设置了我自己需要的功能，那样可以省去我很多麻烦.</p><ul><li><p>Shell: bash.它结合了 csh 和 ksh 的优点，并且有 readline 功能，你可以随意绑定自己的键盘.</p></li><li><p>编辑器： VIM, Emacs.</p></li><li><p>程序开发： GCC, make, ld, Scheme48, j2sdk, Perl, Python, Tcl/Tk …</p></li><li><p>论文，幻灯工具：LaTeX, ConTeXt</p></li><li><p>绘图工具：MetaPost.这个语言太强了，以至于我只用它了.你不熟悉的话可以用 xfig, dia 来画一些流程图之类的图片.</p></li><li><p>图像处理：ImageMagick.其中的 import 程序可以屏幕抓图，convert 程序可以转换图像格式，display 可以显示图片和简单编辑(缩放，换质量，转格式，简单绘图，简单虑镜).通常我就这么点需要.如果你要更强大的图像工具可以用 Gimp, 它几乎和Photoshop差不多.</p></li><li><p>自动管理工具：make.我可以用make来自动编译程序，自动编译文档，自动更新插图… 全自动，而且不会重复劳动.</p></li><li><p>数值计算程序：SciLab.这个程序基本上可以代替 Matlab.</p></li><li><p>代数计算程序：MAXIMA.这个程序基于世界上最老的计算机代数系统之一: 由美国能源部(DOE)发行的 MIT Macsyma 系统.它是用 Common Lisp 实现的.很多现在的符号计算程序比如 Maple 都从 MAXIMA 身上学到很多东西.它现在经过 DOE 批准以GPL发行，永远是一个自由软件.</p></li><li><p>加密程序：GnuPG.我的 PGP 密钥就是它搞出来的.</p></li><li><p>打包，压缩程序.什么都有: tar, gzip, bzip2, zip, rar, …</p></li><li><p>虚拟光驱程序.Linux 不需要虚拟光驱程序，直接 mount 就行了.</p></li><li><p>ftp 服务器：proftpd, vsftpd.proftpd 功能很强，但是我只用了最简单的一种设置.</p></li><li><p>WWW 服务器：apache.(我一般没有开)</p></li><li><p>ftp 客户程序：lftp，ncftp.它们都是文本方式操作的，但是比起图形界面的方便的多.比如 lftp 几乎具有 bash 的所有方便功能，Tab 补全，bookmark, queue, 后台下载，镜像… Linux 也有图形界面的 ftp 客户程序，但是大多不稳定，有很多问题.这就是很多人抱怨 Linux 不如 Windows 的一个小原因.还有很多人用 Wine 模拟 Windows 的leapftp，其实 lftp 比 leapftp 好很多，你需要的只是适应一下.</p></li><li><p>自动下载工具：wget.它非常稳定，有一次我下载一个程序，用 IE 和 Mozilla 下载回来的文件都是坏的，最后还是 wget 可靠的传输了数据.用它甚至可以镜像整个网站，比起WebZip 这样的 Windows 程序强多了，而且不会因为你不付钱就在下载回来的网页里强制插入广告.</p></li><li><p>虚拟终端：rxvt, xterm, gnome-terminal, mlterm, …</p></li><li><p>X server: XFree86</p></li><li><p>窗口管理器：FVWM.编译加入了 libstroke.</p></li><li><p>中文输入：XSIM.被我修改过以适应 FVWM 的需要.另外推荐你还可以用 SCIM.</p></li><li><p>email 处理：Mutt + Postfix + fetchmail</p></li><li><p>看 PDF, PS, DJVU 文件：Acrobat Reader, xpdf, GhostScript, gv, djvu工具包和netscape 插件.</p></li><li><p>看CAJ文档.我从来不看CAJ之类的文档，如果找不到PDF或PS，直接去图书馆借最好.</p></li><li><p>看网页：Mozilla, Phoenix, lynx.Mozilla-Xft 的显示效果比IE 好很多.</p></li><li><p>英汉字典：IBM智能词典，星际译王.</p></li><li><p>编辑网页：我用VIM 直接写 HTML.你如果想要图形方式的可以用其它的比如screem, BlueFish.</p></li><li><p>登录其它 UNIX, Linux 机器：openSSH, telnet. 我喜欢用 openSSH 把其它机器的X 程序通过 ssh 加密的隧道传到我机器上显示.</p></li><li><p>登录 Windows2000 server 的 display service: rdesktop，…我有一天试了一下，不错.后来就没有用过了.</p></li><li><p>同步程序：rsync.我用 rsync 通过 ssh 来跟某些机器同步数据，或者做自己机器上不同目录间的同步.</p></li><li><p>上BBS：rxvt(或任何一种终端) + telnet + chatbot(helloooo 机器人的程序)</p></li><li><p>QQ, ICQ: 我没有 QQ 或 ICQ.不过你可以用 Gaim, 它同时支持 QQ, ICQ 和很多其它的即时通信方式.ICQ 用户也可以用 Licq.</p></li><li><p>放录像：MPlayer, RealPlayer.MPlayer 太好了，直接就可以放 VCD, DVD, divx, wma, wmv … 用 Windows 的同学都很羡慕我，说 Windows 要放这个需要大堆插件.rm 最好还是用 realplayer 放，它也是免费的.</p></li><li><p>放音乐： xmms(mp3,ogg都可以), mpg321(放mp3), ogg123(放ogg).mpg321 不如xmms管理音乐文件那么方便，但是有时我还是用 mpg321 放 mp3 作为背景音乐，因为懒得开一个xmms窗口:-)</p></li><li><p>游戏：我觉得 KDE 的那个 ksokoban(推箱子)，很好玩 :-)</p></li><li><p>看 Word 文档.请 Word 用户把文档全部转为 PDF 或 PS 再给我，文档里没有特殊的格式干脆就用文本吧，何必那么麻烦.以前很奇怪的是，通知里本来没有什么特殊的格式居然还要发doc附件的email.现在好了，我们系发通知都用文本，PDF，甚至图片了.</p></li><li><p>其它程序：还有很多我需要用而你不一定用得着的.比如，Doctor Scheme,</p></li><li><p>Scheme48, Scsh, kawa…这些程序只有 Doctor Scheme 有Windows版本.还有很多幕后工作但是你一般不察觉的：xinetd, telnetd, sshd, crond, atd, lpd, … 他们都比 Windows 的对应者强的多，或者根本没有对应者.</p></li></ul><h2 id="写给支持和反对《完全用Linux工作》的人们">写给支持和反对《完全用Linux工作》的人们</h2><blockquote><p>作者：王垠</p></blockquote><p>在一阵阵唾骂和欢呼声中，《完全用linux工作》被转载到了天涯海角.很多人支持我，也有很多人唾骂我.我不知道它是怎样流传到那么多地方，其实我不知道它都被转到哪里去了… 我知道现在这篇文章又会罗里罗索写很长（因为我计划写这样一个东西已经很久了，坐在Emacs前面总是有一种巫师在炼丹的感觉…），所以先提出中心思想吧.中心思想就是：</p><p>我只是一个傻瓜.看《完全用Linux 工作》的时候请用你们自己的判断力.</p><p>几乎所有人都承认，那篇文章很偏激.当时的情况是这样，我用 Linux 的时候被一个同学鄙视了，说：“你怎么用像 DOS 一样落后的东西，真土!看我漂亮的 Win2000…” 这跟当面嘲笑别人老婆或者妈妈有什么区别?我义愤填膺啊，就几乎跟他吵起来.然后就写出了这篇文章放在主页上，叫了几个人来看.接着我珍爱的 TeX 又受到众人鄙视，于是我又写了一篇文章打击 Word，然后把 TeX 捧上了天.道理很简单，鄙视我喜欢的东西的人就是敌人 --邪教徒或者恐怖分子–他支持的我就反对，他反对的我就支持.为了使人信服，举例必用大科学家，世界一流大学，一流实验室的名号，虽然我不跟其中任何一种沾边.还好那时候我还不认识上帝，要不就打他的名字了.论据不管是实际经历还是自己推测的，先写上去再说.扬眉吐气啊!隔壁微软研究院的哥们居然都被我打动了，开始写 Linux 程序，学用 LaTeX 和 Emacs.不过几天之后我就把它删掉了，因为我自己都感觉到偏激.</p><p>于是就没管那篇文章了.可是没想到它竟然已经被转载到那么多地方，似乎引起不小的波澜.有段时间每天都收到十几封email，国内的，国外的，问技术问题的，夸我的，骂我的，讲道理的，鄙视我的，想交朋友的，语重心长的，号称要删掉机器上的 Windows 的… 我的主页居然也占据了&quot;王垠&quot;在 Google 上的首选位置，把那个日本的什么王公贵族&quot;李王垠殿下&quot;都挤下去了.大家似乎都知道我天花乱坠的本事了，有人就想找我写文章向别人推荐商业软件，我很后悔没有趁机狠狠赚一笔.走到图书馆，亮出借书证，管理员张大了嘴说：“哇!你就是那个 Linux 牛人啊!”，也不知道他是褒是贬.甚至有人把他的 BBS 昵称都改成了&quot;坚决拥护精神领袖花生&quot; （花生是我的外号）.为此还骗到了好几顿报告?quot;报告&quot;是清华专用动词，意思是请客吃饭）.虽然我觉得自己身上没有什么值得自豪的东西，但是又有点为自己兴风作浪的本事感到惊讶.虽然我一再告诫自己要谦虚，但是不由的有一种毛，甘地，甚至摩西的感觉.我更加体会到&quot;网络上没有人知道你是一头猪&quot;的真理性.其实，不但网络上没有人知道我是一头猪，实际生活中也没有人知道，其实我是一头笨猪.</p><p>这么长的时间之后，还有人写信给我说&quot;深受鼓舞&quot;，“提壶灌顶”，“对不起我还在用 Windows 给你写信”，“真想删掉Windows 啊” … 我很好奇，我的文章真的有那么大的威力?我再看这篇文章，觉得有点惨不忍睹，看了开头就不忍心再看下去.我告诉同学我很后悔写了一篇这么偏激的文章，可是他?quot;徼枉必须过正，你没有错&quot;，所以我也搞不清楚自己这样写对不对，这样自责对不对.就像我从来不敢看自己照片，却有时被人称为帅哥，就让我无法判断自己是否帅一样.所以现在我就开始怀疑我自己是否真是一头笨猪.也许多年以后，我会正确的评价我的想法.就像我现在觉得我15岁的照片挺养眼一样，也许我会发现自己其实是一头聪明猪?</p><p>写这篇文章不是为了让自己免得被骂，也不是为了显示高深的猪的哲理.只是因为我深深的感到人应该有自己的判断力，不要简单的接受别人说的 DO’s 和 DONT’s.怀疑一切，同时又敞开心扉去了解一切.</p><p>看过《完全用Linux工作》的朋友，请仔细检查里面的 DO’s 和 DONT’s.</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Computer</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
